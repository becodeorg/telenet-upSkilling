function versionIE(){var ua=window.navigator.userAgent,msie=ua.indexOf("MSIE "),versionIE=!1,msie=ua.indexOf("MSIE ");return msie>0&&(versionIE=parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10)),ua.indexOf("Trident/")>0&&(versionIE=11),ua.indexOf("Edge/")>0&&(versionIE=12),versionIE}function adblockPopin(){conxpopup({width:1050,height:720,load:"/v7-lequipe/dist/includes/static/adblock/adblock.html"})}function getInfoBrowser(){var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"Other",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown"},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string;if(this.versionSearchString=data[i].subString,-1!=dataString.indexOf(data[i].subString))return data[i].identity}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(-1!=index)return parseFloat(dataString.substring(index+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"}]};return"object"==(void 0===BrowserDetect?"undefined":_typeof(BrowserDetect))?(BrowserDetect.init(),BrowserDetect):null}function checkBadBrowser(){$.browser&&$.browser.msie&&parseInt($.browser.version.substr(0,1))<=6&&parseInt($.browser.version.substr(0,2))<10&&($("body").append('<div id="overlayBDB"></div><img id="imgBDB" src="/v6/img/badbrowsers.jpg">'),$("#overlayBDB").css({width:"100%",position:"absolute",top:0,left:0,height:"100%",zIndex:1e4,backgroundColor:"#fff",opacity:.8}),$("#imgBDB").css({position:"absolute",top:166,left:($(window).width()-800)/2,zIndex:10001}))}function init_chrono(){$("#chrono").size()&&($("#chrono .footer .nav").bind("click",function(){if(console.log("chronoClick"),!$(this).hasClass("disabled")&&!$("#chrono").hasClass("loading")){var linkId=$(this).attr("data-dir");switch($("#chrono").addClass("loading"),linkId){case"prev":chronoScroll("up",$(this));break;case"next":chronoScroll("down",$(this))}}}),$(".js-chrono-select").change(function(){ChargeChrono($(this).find("option:selected").val())}))}function ChargeChrono(a){console.log("ChargeChrono("+a+")"),console.log("chronoTag = "+a),$("#chrono .js-chrono-list").attr("tag",a),pageChrono=0,pageChronoDerniereChargee=0,$("#chrono .js-chrono-list").fadeOut(200,function(){$("#chrono .js-chrono-list ").hide().css("top",0),$("#chrono .pager span").html(1),$("#chrono .js-chrono-list ").load(incDynamic+"/chrono/tags/"+a+"/actualite_0.html",function(){$("#chrono .js-chrono-list ").fadeIn(200,function(){$("#chrono .pager a").show()})})})}function chronoScroll(sens,link){if(console.log("chronoScroll("+sens+", "+link+" )"),pageFut="up"==sens?pageChrono:pageChrono+1,pageFut>0&&pageFut<10)switch(sens){case"up":pageChrono--,animatechrono(pageChrono,1);break;case"down":pageChrono++,animatechrono(pageChrono,-1)}0===pageChrono||9==pageChrono?link.addClass("disabled"):$("#chrono .footer .nav").removeClass("disabled")}function animatechrono(pageChrono,sens){chronoTag=$("#scrollerChrono .js-chrono-list").attr("tag"),chronoTop=$("#scrollerChrono .js-chrono-list").position().top,chronoHeight=$("#scrollerChrono").height(),1==sens?($("#scrollerChrono .js-chrono-list").animate({top:chronoTop+chronoHeight},500,function(){$("#chrono").removeClass("loading")}),$("#chrono .pager span").html(pageChrono+1)):pageChrono>pageChronoDerniereChargee?(pageChronoDerniereChargee++,$("#scrollerChrono .js-chrono-precharge").load(incDynamic+"/chrono/tags/"+chronoTag+"/actualite_"+pageChrono+".html",function(){prechargeContent=$(this).html(),$("#scrollerChrono .js-chrono-list").append(prechargeContent),$("#scrollerChrono .js-chrono-list").animate({top:chronoTop-chronoHeight},500,function(){$("#chrono").removeClass("loading")}),$("#chrono .pager span").html(pageChrono-sens)})):($("#scrollerChrono .js-chrono-list").animate({top:chronoTop-chronoHeight},500,function(){$("#chrono").removeClass("loading")}),$("#chrono .pager span").html(pageChrono+1))}function init_compte(){setUserInfos(),void 0!==queryString.connexion&&"1"===queryString.connexion&&(window.history.replaceState("connexionCompte","",location.pathname),null===_userInfos&&loginPopin()),"#activation"==window.location.hash&&popinActivate()}function popinActivate(){window.history.replaceState("activationCompte","","/"),conxpopup({width:300,height:150,html:"<iframe src='/v6/pop_in/activation-popin.html' width='600' height='300'/>"})}function setUserInfos(){document.cookie="lequipe-connected-infos=; path=/; domain=www.lequipe.fr; expires=Thu, 01 Jan 1970 00:00:01 GMT;";var cookiename="lequipe-connected-infos";return-1!=document.location.href.indexOf("qlf")&&(cookiename+="-qlf"),$.cookie(cookiename)&&!isOptOut()?(_userInfos=jQuery.parseJSON($.cookie(cookiename)),$("body").trigger("lequipe-checklogin",_userInfos),updateUserNameMenu(),updateQuotiBlocHome(),updateNameCommentaires(_userInfos)):(_userInfos=null,$("body").trigger("lequipe-checklogin",!1)),_userInfos}function updateUserNameMenu(){if(!$(".js-account-user").hasClass("connected")){$(".js-account-user").addClass("connected");var infosuser=_userInfos.nickname;""!==_userInfos.firstname&&null!==_userInfos.firstname&&""!==_userInfos.lastname&&null!==_userInfos.lastname&&(infosuser=_userInfos.firstname+" "+_userInfos.lastname),$(".js-account-list .js-account-name").text(infosuser),$(".js-account-list .js-account-status").text(1==_userInfos.quotiAbonne?"abonné":"gratuit");var userPicture="//medias.lequipe.fr/avatar/"+_userInfos.id+"/";$(".js-picture-user").attr("src",userPicture),""!==_userInfos.idCanal&&null!==_userInfos.idCanal&&($(".js-img-canal").css("display","inline-block"),$(".js-account-list .js-account-status").html('abonné <img class="account_logo_canal" src="/elements/img/premium/logo-canal.png" />'),$(".onglet-premium .textLink").html('abonné <img class="account_logo_canal" src="/elements/img/premium/logo-canal.png" />'))}}function updateQuotiBlocHome(){void 0!==_userInfos.statusEstore&&"pdf-only"==_userInfos.statusEstore&&($(".js-home-quotidien .js-button-black").html("lire l'édition du jour"),$(".js-home-quotidien .js-button-black").attr("href","/Quotidien/liseuse.php"),$(".js-home-quotidien .js-button-yellow").html("lire les éditions précédentes"),$(".js-home-quotidien .js-button-yellow").attr("href","/premium/mes-editions/"))}function updateNameCommentaires(data){$("#usercoms-connectformspace").length&&($("#usercoms-connectformspace").hide(),$("#ComForm .article__comments__formulaire--titre span").hide(),$("#usercoms-loggedspace span").html(data.nickname).parent().show())}function createAccount(data,callback,fallback){$.ajax({url:"/elements/php/compte/formulaire_inscription.php",type:"POST",data:{action:"validForm",email:data.email,pass:data.password,civilite:data.civilite,nom:data.nom,prenom:data.prenom,optin_part:data.optinPart,optin_newsletter:data.optinNewsletter,REFERER:data.referrer},error:function(data){fallback(data)},success:function(data){1!=data?fallback(data):callback()}})}function convertQueryStringToJson(){var arrQueryString=window.location.search.substr(1).split("&"),jsonQueryString={};if("object"===(void 0===arrQueryString?"undefined":_typeof(arrQueryString))&&arrQueryString instanceof Array&&arrQueryString.length)for(var i in arrQueryString)if(arrQueryString.hasOwnProperty(i)){var param=arrQueryString[i].split("=");if(2!==param.length)continue;jsonQueryString[decodeURIComponent(param[0])]=decodeURIComponent(param[1])}return jsonQueryString}function cookieLequipe(){$("body").attr("an",""),$("body").attr("ac","");$("#cookiesLequipe a,#cookiesLequipe b").on("click",function(){$("#cookiesLequipe").slideUp("fast")}),readCookie("cookieLequipebis")||$("#cookiesLequipe").length&&($("#cookiesLequipe").slideDown("fast"),createCookie("cookieLequipebis",1,365)),"undefined"==typeof porte_ouverte_mpp||1!=porte_ouverte_mpp||readCookie("pompp")?eraseCookie("pompp"):createCookie("pompp",1,3),readCookie("cookieLequipe")&&eraseCookie("cookieLequipe")}function createCookie(name,value,days){if(!isOptOut()){if(days){var date=new Date;date.setTime(date.getTime()+24*days*60*60*1e3);var expires="; expires="+date.toGMTString()}else var expires="";document.cookie=name+"="+value+expires+"; path=/"}}function readCookie(name){for(var nameEQ=name+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null}function eraseCookie(name){createCookie(name,"",-1)}function isOptOut(){return cookieName="lequipe-optout",null!=readCookie(cookieName)}function init_eservices(){var tknetArr=($("body").attr("sport"),Array());$(".ticketnet_event").each(function(i,item){if(-1==jQuery.inArray(item.id,tknetArr)){tknetArr.push(item.id);var tknetEburl=$(this).find(".ticketnet_liens_a").attr("href"),tknetCurrentUrl=location.href.toLowerCase(),tknetEMPL="AUTRE";if(-1!=tknetCurrentUrl.indexOf("breve"))tknetEMPL="BREVE";else if(-1!=tknetCurrentUrl.indexOf("live"))tknetEMPL="LIVE";else if(-1!=tknetCurrentUrl.indexOf("match"))tknetEMPL="MATCH";else if(-1!=tknetCurrentUrl.indexOf("club"))tknetEMPL="CLUB";else if(-1!=tknetCurrentUrl.indexOf("resultat"))tknetEMPL="RESULTAT";else if(-1!=tknetCurrentUrl.indexOf("/res_"))tknetEMPL="RESULTAT";else if(-1!=tknetCurrentUrl.indexOf("classement"))tknetEMPL="CLASSEMENT";else if(-1!=tknetCurrentUrl.indexOf("/cla_"))tknetEMPL="CLASSEMENT";else if(-1!=tknetCurrentUrl.indexOf("palmares"))tknetEMPL="PALMARES";else if(-1!=tknetCurrentUrl.indexOf("tableau"))tknetEMPL="TABLEAU";else{var arrBreve=["/football/2","/formule1/2","/moto/2","/tennis/2","/golf/2","/rugby/2","/basket/2","/volley/2","/handball/2","/cyclisme/2","/ski/2","/voile/2","/natation/2","/judo/2","/surf/2","/athletisme/2","/aussi/2"];$.each(arrBreve,function(index,value){-1!=tknetCurrentUrl.indexOf(value)&&(tknetEMPL="BREVE")})}$(this).find(".ticketnet_liens_a").attr("href",tknetEburl+"?EMPL="+tknetEMPL)}else $(this).remove();$(this).attr("name")==tknetAjd()&&$(this).find(".heure").text()<tknetNow()&&$(this).remove()}),$(".col_droite .ticketnet_event .eq1,.col_droite .ticketnet_event .eq2").each(function(i,item){$(this).text(tknetTrunc($(this).text(),16))}),$("#savoir_plus .ticketnet_event .eq1,#savoir_plus .ticketnet_event .eq2").each(function(i,item){$(this).text(tknetTrunc($(this).text(),10))}),parseInt($(".ticketnet_event").attr("name"))>=parseInt(tknetAjd())&&$(".ticketnet_event").fadeIn("slow");var evoyUrl=$(this).find(".evoyages_event .liens_a").attr("href");$(this).find(".evoyages_event .liens_a").attr("href",evoyUrl+"&EMPL=BREVE"),$("#savoir_plus .evoyages_event .libelleManif").text(function(i){$(this).text(tknetTrunc($(this).text(),40))}),parseInt($(".evoyages_event").attr("name"))>=parseInt(tknetAjd())&&$(".evoyages_event").fadeIn("slow")}function tknetAjd(){var d=new Date,m=d.getMonth()+1;m<10&&(m="0"+m);var j=d.getDate();return j<10&&(j="0"+j),d.getFullYear().toString()+m.toString()+j.toString()}function tknetNow(){var d=new Date,h=d.getHours();h<10&&(h="0"+h);var m=d.getMinutes();return m<10&&(m="0"+m),h.toString()+m.toString()}function tknetTrunc(label,maxlen){if(label.length>maxlen)return jQuery.trim(label.substring(0,maxlen))+"."}function findKey(needleKey,obj){return a=$.map(obj,function(value,key){return key==needleKey?obj:"array"!=typeof value&&"object"!==(void 0===value?"undefined":_typeof(value))?null:void findKey(needleKey,value)}),a}function getParameter(paramName){var i,val,searchString=window.location.search.substring(1),params=searchString.split("&");for(i=0;i<params.length;i++)if(val=params[i].split("="),val[0]==paramName)return val[1];return null}function gup(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))}function init_lazyloads(){var adBackParam="";localStorage.getItem("(AdBack)oldAdblocker")&&$(".js-lazy-video").each(function(){iframeUrl=$(this).attr("data-src"),adBackParam=iframeUrl.indexOf("?")>-1?"&ads_params=adback%3Doui":"?ads_params=adback%3Doui",$(this).attr("data-src",iframeUrl+adBackParam)}),$(".js-lazy, img.lazy, .js-lazy-video").lazyLoadXT({edgeY:200,srcAttr:"data-src"})}function menuClose(){1==menu_on&&(menu_on=0,$(".js-sousmenuplus-dest,.js-extra-list,.js-sports-list, .js-sousmenuplus-dest").slideUp(.5*vitesseFade),$("#nav-inside-global, #nav-inside").slideDown(.5*vitesseFade),$(".js-menu-active").removeClass(".js-menu-active"),$("body").removeClass("navigation-menu-active"),$("#outer-edito-content").css("background-position","center top !important"))}function menuDown(obj){0!==$(".is-sticky").length&&$("html, body").animate({scrollTop:0},"slow"),obj.slideDown(.5*vitesseFade,"linear",function(){menu_on=1}),$("body").addClass("navigation-menu-active")}function menuToggle(){$(document).bind("click",function(event){$(event.target).closest(".js-menu-plus, .js-menu-burger,.js-menu-account").length||(menuClose(),$(this).removeClass("js-menu-active"))}),$(".js-menu-plus").bind("click",function(){if($(".navigation__sousmenu__level--1").parent().removeAttr("style"),obj=$(".js-sports-list"),obj.is(":visible")){if($(this).removeClass("js-menu-active"),0!==$(".is-sticky").length)return $("html, body").animate({scrollTop:0},"slow"),!1;menuClose(),$(this).removeClass("js-menu-active")}else menuClose(),menuDown(obj),$(this).addClass("js-menu-active"),$("#nav-inside-global, #nav-inside").slideUp(.5*vitesseFade)}),$(".js-menu-burger").bind("click",function(){$(".navigation__sousmenu__level--1").parent().removeAttr("style"),obj=$(".js-extra-list"),obj.is(":visible")?(menuClose(),$(this).removeClass("js-menu-active")):(menuClose(),menuDown(obj),$(this).addClass("js-menu-active"))}),$(".js-sousmenuplus, .LeMenuPLus .PLUS").bind("click",function(){obj=$(".js-sousmenuplus-dest"),obj.is(":visible")?(menuClose(),$(".navigation__sousmenu__level--1").parent().removeAttr("style"),$(".navigation__sousmenu").show(),$(this).removeClass("js-menu-active")):(menuClose(),$(".navigation__sousmenu__level--1").parent().css("height","auto"),menuDown(obj),$(this).addClass("js-menu-active"),$(".navigation__sousmenu__level--2").parent().slideToggle(.5*vitesseFade),$("#nav-inside").slideUp(.5*vitesseFade))}),$(".js-account-user").on("click",function(){$(this).hasClass("connected")?$(".js-account-list").is(":visible")?($(".js-account-list").hide(),$(".js-account-user").removeClass("icon--black"),$(".js-account-user").addClass("icon--red")):($(".js-account-user:last").parent().parent().parent().parent().parent().hasClass("is-sticky")?($(".js-account-list").addClass("js-account-list--fixed"),decalX=30):($(".js-account-list").removeClass("js-account-list--fixed"),decalX=30+parseInt($(".container__up").parent().css("margin-left"))),$(".js-account-list").css("left",$(this).position().left-decalX).slideToggle(.5*vitesseFade,function(){menu_on=1}),$(".js-account-list").show(),$(".js-account-user").removeClass("icon--red"),$(".js-account-user").addClass("icon--black")):loginPopin()}),$(".js-account-list").mouseleave(function(){$(".js-account-user").hasClass("connected")&&$(".js-account-list").is(":visible")&&($(".js-account-list").hide(),$(".js-account-user").removeClass("icon--black"),$(".js-account-user").addClass("icon--red"))}),$(".js-account-signout").on("click",function(){return logout(),!1})}function navTabsMenu(){$(".js-3dots").on("click",function(){$(this).parent().toggleClass("is-active")})}function threedotsMenu(){x=0,$('.navigation__menu__home li:not(".menu__plus") ').each(function(){0==$(this).position().top&&(x=$(this).position().left+$(this).width())}),x>360&&$(".navigation__menu__home ul li.menu__plus").css("left",x+"px"),$(".navigation__menu__home ul li.menu__plus a").show(vitesseFade)}function insertSousMenu(){$(".nav_expanded").remove(),$(".js-sousmenuplus-dest li").show(),atLine=0,atId=0,$(".js-sousmenuplus-dest li").each(function(){atId++,$(this).attr("id",atId),0==atLine&&($(this).clone().insertBefore(".navigation__sousmenu__level--1 ul .navigation__sousmenu__plus").attr("id","nav_X"+atId).addClass("nav_expanded"),atLine=$(".navigation__sousmenu__level--1 ul .navigation__sousmenu__plus").position().top,$(this).attr("top",atLine),0==atLine?$("#"+atId).hide().addClass("nav_hide"):($("#nav_X"+atId).remove(),$("#"+atId).show().addClass("nav_show")))}),0===$(".js-sousmenuplus-dest li.nav_show").length?$(".js-sousmenuplus").hide():$(".js-sousmenuplus").show()}function menuBeforeContent(){$("#outer-edito-content").length>0&&0===$("#before-edito-content").length&&($('<div class="container" id="before-edito-content"></div>').insertBefore("#outer-edito-content"),$(".container__up").appendTo("#before-edito-content"))}function nameSport(){if(obj=null,0===$(".js-libNavSport").length)return!1;"7"!=$('meta[property="version:efr"]').attr("content")?(sportMenu=$("body").attr("sport")+"",sportMenu=sportMenu.trim(),void 0!==$("body").attr("sport")&&""!==$("body").attr("sport")&&(void 0!==$("body").attr("sport-url")?($(".js-sports-list").prepend('<a href="'+$("body").attr("sport-url")+'" style="display:none">'+$("body").attr("sport")+"</a>"),obj=$('.js-sports-list a[href*="'+$("body").attr("sport-url")+'"]:first').eq(0)):"Aussi"==$("body").attr("sport").trim()?($(".js-sports-list").prepend('<a href="/Aussi/" style="display:none">Tous sports</a>'),obj=$('.js-sports-list a[href*="'+$("body").attr("sport-url")+'"]:first').eq(0)):($(".js-sports-list").prepend('<a href="/General/" style="display:none">Général</a>'),$('.js-sports-list a[href="'+sportMenu+'"]').length>0?obj=$('.js-sports-list a[href="'+sportMenu+'"]:first').eq(0):$('.js-sports-list a[href*="'+sportMenu+'"]').length>0&&(obj=$('.js-sports-list a[href*="'+sportMenu+'"]:first').eq(0))))):(sportMenu=$("body").attr("sport")+"",sportMenu=sportMenu.trim(),$(".js-sports-list").prepend('<a href="/Aussi/" style="display:none">Tous sports</a>'),$('.js-sports-list a[href="'+window.location.pathname+'"],.js-extra-list a[href="'+window.location.pathname+'"]:first').length>0?obj=$('.js-sports-list a[href="'+window.location.pathname+'"]:first,.js-extra-list a[href="'+window.location.pathname+'"]:first').eq(0):(sportMenu=sportMenu.replace(/\//g,""),""!==sportMenu&&1==$(".js-sports-list li."+sportMenu).length||"Basket"===sportMenu?obj=$(".js-sports-list li."+sportMenu+" a").eq(0):"undefined"!=$(".navigation__sousmenu:last").attr("libelle")&&$(".navigation__sousmenu:first .active").length>0?obj=$(".navigation__sousmenu:first .active a").eq(0):($(".js-sports-list").prepend('<a href="/General/" style="display:none">Autres</a>'),$(".js-sports-list").prepend('<a href="/lachainelequipe/" style="display:none">La chaîne L\'Équipe</a>'),$('.js-sports-list a[href*="'+window.location.pathname.split("/")[1]+'"]:first,.js-extra-list a[href*="'+window.location.pathname.split("/")[1]+'"]:first').length>0&&"General"!=window.location.pathname.split("/")[1]?obj=$('.js-sports-list a[href*="'+window.location.pathname.split("/")[1]+'"]:first,.js-extra-list a[href*="'+window.location.pathname.split("/")[1]+'"]:first').eq(0):"General"==window.location.pathname.split("/")[1]&&(sportMenu="General")))),null===obj&&$(".navigation__sousmenu .active").length>0&&(obj=$(".navigation__sousmenu .active").eq(0)),null!==obj?($(".js-libNavSport").html(""),sportMenuText=obj.text().trim(),sportMenuHref=obj.attr("href"),"Hand"==sportMenuText&&(sportMenuText="Handball",sportMenuHref="/Handball/"),"Autres"==sportMenuText&&(sportMenuHref="/"),"La sélection abonnés"==sportMenuText&&-1===document.location.pathname.indexOf("/Top-article-abonne/")&&(sportMenuText="Tous sports",sportMenuHref="/Tous-sports/"),""==sportMenuText&&document.location.pathname.indexOf("/Volley/")>-1&&(sportMenuHref="/Aussi/Volley-ball/",sportMenuText="Volley-ball"),$(".js-libNavSport").attr("href",sportMenuHref),$(".js-libNavSport").html(sportMenuText)):"General"==sportMenu&&(sportMenuText="Autres",sportMenuHref="/",$(".js-libNavSport").attr("href",sportMenuHref),$(".js-libNavSport").html(sportMenuText))}function is_habillage(){$("#outer-edito-content").length>0&&$("#outer-edito-content").css("background-image").indexOf("url(")>-1&&($(".js-content").css("padding-top",0),$(".ads__smart--630").css("margin-top","0"),$("#outer-edito-content").css("background-color"),clr="#fff",$("#before-edito-content").css("background-color",clr))}function getFormData(){return data={},data.email=$("#email").val(),data.nom=$("#nom").val(),data.prenom=$("#prenom").val(),data.optinPart=$("#optin_part").is(":checked")?1:0,data.optinNewsletter=$("#optin_nl").is(":checked")?1:0,data.password=$("#mdp").val(),data.password2=$("#confmdp").val(),data.civilite=$("input[name=civilite]:checked").val(),data.referrer=document.referrer,data}function showError(datas){$(".js-error-back").remove();for(var input,i=0;i<datas.length;i++){var html='<ul class="error js-error js-error-back">',val=datas[i];val.code>=510&&val.code<520?input="email":val.code>=530&&val.code<540?input="mdp":val.code>=560&&val.code<570?input="nom":val.code>=640&&val.code<650&&(input="prenom"),html+="<li>"+val.message+"</li>",html+="</ul>",$("#"+input).after(html),$("#"+input).focus(),$("#"+input).change(function(){$(".js-error-back").remove()})}}function checkPassword(){if($("#mdp,#confmdp").change(function(){$(".js-error-front").remove()}),$(".js-error-front").remove(),!/^(?=.*[0-9])[a-zA-Z0-9!@#$%^&*]{7,25}$/.test($("#mdp").val())){var html='<ul class="error js-error js-error-front"><li>Votre mot de passe doit contenir entre 7 et 25 caractères composés de a-z, A-Z, 0-9 avec au minimum 1 chiffre</li></ul>';return $("#mdp").after(html),!1}if($("#mdp").val()!=$("#confmdp").val()){var html='<ul class="error js-error js-error-front"><li>Le mot de passe saisi et sa confirmation sont différents</li></ul>';return $("#mdp").after(html),!1}return!0}function SignupOk(){conxpopup({html:'<div class="success"><h1>Votre compte a bien été créé</h1><p>Afin de pouvoir vous connecter, validez votre compte en cliquant sur le lien dans l\'email que vous venez de recevoir.</p></div>'}),setTimeout(function(){window.location.href=""!=document.referrer&&document.referrer!=document.location.href?document.referrer:"/"},5e3)}function SigninOk(){conxpopup({width:170,height:70,html:'<div class="success" ><h1>Vous êtes connecté</h1></div>'}),setTimeout(function(){window.location.href=""!=document.referrer&&document.referrer!=document.location.href?document.referrer:"/"},2e3)}function matchRegex(el,data,str){for(i in data.regex){var matching=new RegExp(data.regex[i].reg,"i").exec(str);if(null!=matching){var newlink=replaceLink(data.replacement[data.regex[i].index],matching);return console.log("regex matching : "+newlink),newlink}}}function replaceLink(chaine,data){for(i in data)chaine=chaine.replace("$$$"+i,data[i]);return chaine}function checkClassItem(libClass,el,newsID,regParams){if(el.attr("class")&&""!=el.attr("class")){classList=el.attr("class"),classList=classList.split(" ");for(i in classList)if(libClass.indexOf(classList[i])>=0){if("texte-plus"==classList[i]||"texte-moins"==classList[i]){var action="texte-plus"==classList[i]?"policeplus":"policemoins";return setURL(el,classList[i],action,newsID,regParams)}if("reagir"==classList[i]||"alerter"==classList[i]){var action="reagir"==classList[i]?"surreagir":"alerter";return setURL(el,classList[i],action,newsID,regParams)}return!1}}for(i in libClass)if(el.find("."+libClass[i]).length>0){var obj=el.find("."+libClass[i]);if("voteplus"==libClass[i]||"votemoins"==libClass[i]){var action="voteplus"==libClass[i]?"like":"dislike";return setURL(obj,libClass[i],action,newsID,regParams)}}return!1}function setURL(obj,type,action,newsID,regParams){var shareLink=null;if(obj.hasClass(type))switch(type){case"reagir":case"alerter":case"voteplus":case"votemoins":var commentId=obj.parents("li").data("id"),patternIndexOfNewsFree=getPatternIndexByName(regParams.regex,"news_free"),articleId=getInfosNews(regParams.regex[patternIndexOfNewsFree].reg,newsID,"id");isHandlerUrlV2?("reagir"===type&&(action="reagir"),shareLink="lequipefr://action/news/"+action+"/"+articleId+"?comment_id="+commentId):shareLink=action+"://Article/"+articleId+"/"+commentId+"#MODAL";break;case"texte-plus":case"texte-moins":shareLink=isHandlerUrlV2?"lequipefr://action/"+action:action+"://"}return shareLink}function getInfosNews(regex,newsID,type){if(null==newsID&&$("#news-reactions").length>0){var link=$("#news-reactions").data("documnt-url");if("undefined"!=link)var newsID=new RegExp(regex,"i").exec(link)}if(type&&newsID instanceof Array)switch(type){case"id":return newsID[3];case"title":return newsID[2];case"sport":return newsID[1];case"all":return newsID}}function getPatternIndexByName(patterns,patternName){var patternIndex=-1;for(var index in patterns)if(void 0!==patterns[index].name&&patternName===patterns[index].name){patternIndex=index;break}return patternIndex}function loginPopin(texte,next){conxpopup({width:464,height:500,load:"/v7-lequipe/dist/includes/static/connexion.html",onload:function(){initExt(),$("body").addClass("no-scroll"),$(document).bind("connection-login-ext",function(e,data){loginSocialNetwork(data,function(){$("#connexpopup a.close").trigger("click"),void 0!==next&&next()})}),$(".connexionV2 .signin.formView").on("submit",function(){return!$(".connexionV2 .signin.formView .btn.submit").hasClass("disabled")&&(loginMailPopin(next),!1)}),$(".connexionV2 .signin.formView .btn.submit").on("click",function(){return $(".connexionV2 .signin.formView").trigger("submit"),!1}),void 0!==texte&&($(".signin.formView h3").remove(),$(".signin.formView").prepend("<h3>"+texte+"</h3>")),$("#mycanalBtn").on("click",function(e){window.location.href="/canalPlus/"})}})}function loginPopinSpecial(ref){$("body").addClass("no-scroll isPopinSpecial"),conxpopup({load:"/v7-lequipe/dist/includes/static/connexionSpecial.html",onload:function(){initExt(),$(document).bind("connection-login-ext",function(e,data){loginSocialNetwork(data,function(){$("#connexpopup a.close").trigger("click")})}),"numerique"==ref&&($(".connexionV2Special .title").addClass("title--special").html('L’édition est offerte<br><span class="subtitle">Pour lire la numérique, connectez-vous<br>ou créez un compte</span><span class="alreadyUser">déjà inscrit ?</span>'),$(".connexionV2Special .signin .title").addClass("title--special").html('L’édition est offerte<br><span class="subtitle">Pour lire la numérique, connectez-vous<br>ou créez un compte</span>'),$(".alreadyUser").on("click",function(){$("form.formView").hide(),$("form.formView.signin").show()})),$(".connexionV2 .signin.formView").on("submit",function(){return!$(".connexionV2 .signin.formView .btn.submit").hasClass("disabled")&&(loginMailPopin(),!1)}),$(".connexionV2 .signin.formView .btn.submit").on("click",function(){return $(".connexionV2 .signin.formView").trigger("submit"),!1}),$("#mycanalBtn").on("click",function(e){window.location.href="/canalPlus/"}),$(".textfield__input").change(function(){""!=$(this).val()?$(this).addClass("notEmpty"):$(this).removeClass("notEmpty")}),$("body").addClass("isPopinSpecialActive")}})}function loginMailPopin(next){$(".connexionV2 .signin.formView .btn.submit").addClass("disabled"),loginMail({login:$(".connexionV2 .signin.formView [name='username']").val(),pass:$(".connexionV2 .signin.formView [name='password']").val()},function(){$("#connexpopup a.close").trigger("click"),void 0!==next&&next()},function(errorTxt){$(".connexionV2 .signin.formView .error").text(errorTxt).fadeIn(),$(".connexionV2 .signin.formView .btn.submit").removeClass("disabled")})}function loginMail(data,callback,fallback){$.ajax({url:"/club/connect.php",type:"POST",data:{query:"login",login:data.login,pass:data.pass},dataType:"json",success:function(ret){if(200!=ret.code){var errorTxt=getConnexionError(error.code);return void(void 0!==fallback&&fallback(errorTxt))}$("body").trigger("lequipe-login",ret.datas),setUserInfos(),chooseRefresh(),1==ret.datas.deviceWarning?exceedDeviceWarning():void 0!==callback&&null!==callback&&callback()},error:function(data){var error=jQuery.parseJSON(data.responseText),errorTxt=getConnexionError(error.code);void 0!==fallback&&fallback(errorTxt)}})}function exceedDeviceWarning(){$(".connexionV2 .signin .cnxFormBlock").hide(),$(".connexionV2 .signin .errorMessage").html("Connexions excessives <br><br>Vous avez dépassé le nombre de connexions autorisées sur votre abonnement aujourd'hui.<br><br>Pour plus d'informations, merci de contacter le service client à l'adresse <strong>abonumerique@lequipe.fr</strong>").show()}function loginSocialNetwork(data,callback,fallback){$.ajax({url:"/club/connect.php",type:"POST",data:{query:"extlogin",provider:data.provider,token:data.token,code:data.code},success:function(ret){$("body").trigger("lequipe-login",ret.datas),setUserInfos(),chooseRefresh(),void 0!==callback&&callback()}})}function logout(callback){var cookiename="lequipe-connected-infos";-1!=document.location.href.indexOf("qlf")&&(cookiename+="-qlf"),eraseCookie(cookiename),$.ajax({url:"/club/connect.php",data:{query:"logout"},type:"POST",success:function(ret){200===ret.code&&(void 0!==callback?callback(ret.data):window.location.reload())}})}function getConnexionError(code){var errorTxt;switch(code){case 511:case 513:errorTxt="Votre adresse email ne semble pas être correcte.";break;case 514:case 517:errorTxt="Votre mot de passe n'est pas renseigné ou trop court.";break;case 529:errorTxt="L'association email/mot de passe ne correspond pas, veuillez vérifier vos identifiants.";break;default:errorTxt="Une erreur s'est produite."}return errorTxt}function chooseRefresh(){var currentPage=document.location.pathname,regex=/\/Article\/|\/club\/|\/alertes\/|\/compte\/le-profil\/|\/live-video\/|\/Concours\//;currentPage.match(regex)&&window.location.reload()}function rhex(num){for(str="",j=0;j<=3;j++)str+=hex_chr.charAt(num>>8*j+4&15)+hex_chr.charAt(num>>8*j&15);return str}function str2blks_MD5(str){for(nblk=1+(str.length+8>>6),blks=new Array(16*nblk),i=0;i<16*nblk;i++)blks[i]=0;for(i=0;i<str.length;i++)blks[i>>2]|=str.charCodeAt(i)<<i%4*8;return blks[i>>2]|=128<<i%4*8,blks[16*nblk-2]=8*str.length,blks}function add(x,y){var lsw=(65535&x)+(65535&y);return(x>>16)+(y>>16)+(lsw>>16)<<16|65535&lsw}function rol(num,cnt){return num<<cnt|num>>>32-cnt}function cmn(q,a,b,x,s,t){return add(rol(add(add(a,q),add(x,t)),s),b)}function ff(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)}function calcMD5(str){for(x=str2blks_MD5(str),a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<x.length;i+=16)olda=a,oldb=b,oldc=c,oldd=d,a=ff(a,b,c,d,x[i+0],7,-680876936),d=ff(d,a,b,c,x[i+1],12,-389564586),c=ff(c,d,a,b,x[i+2],17,606105819),b=ff(b,c,d,a,x[i+3],22,-1044525330),a=ff(a,b,c,d,x[i+4],7,-176418897),d=ff(d,a,b,c,x[i+5],12,1200080426),c=ff(c,d,a,b,x[i+6],17,-1473231341),b=ff(b,c,d,a,x[i+7],22,-45705983),a=ff(a,b,c,d,x[i+8],7,1770035416),d=ff(d,a,b,c,x[i+9],12,-1958414417),c=ff(c,d,a,b,x[i+10],17,-42063),b=ff(b,c,d,a,x[i+11],22,-1990404162),a=ff(a,b,c,d,x[i+12],7,1804603682),d=ff(d,a,b,c,x[i+13],12,-40341101),c=ff(c,d,a,b,x[i+14],17,-1502002290),b=ff(b,c,d,a,x[i+15],22,1236535329),a=gg(a,b,c,d,x[i+1],5,-165796510),d=gg(d,a,b,c,x[i+6],9,-1069501632),c=gg(c,d,a,b,x[i+11],14,643717713),b=gg(b,c,d,a,x[i+0],20,-373897302),a=gg(a,b,c,d,x[i+5],5,-701558691),d=gg(d,a,b,c,x[i+10],9,38016083),c=gg(c,d,a,b,x[i+15],14,-660478335),b=gg(b,c,d,a,x[i+4],20,-405537848),
a=gg(a,b,c,d,x[i+9],5,568446438),d=gg(d,a,b,c,x[i+14],9,-1019803690),c=gg(c,d,a,b,x[i+3],14,-187363961),b=gg(b,c,d,a,x[i+8],20,1163531501),a=gg(a,b,c,d,x[i+13],5,-1444681467),d=gg(d,a,b,c,x[i+2],9,-51403784),c=gg(c,d,a,b,x[i+7],14,1735328473),b=gg(b,c,d,a,x[i+12],20,-1926607734),a=hh(a,b,c,d,x[i+5],4,-378558),d=hh(d,a,b,c,x[i+8],11,-2022574463),c=hh(c,d,a,b,x[i+11],16,1839030562),b=hh(b,c,d,a,x[i+14],23,-35309556),a=hh(a,b,c,d,x[i+1],4,-1530992060),d=hh(d,a,b,c,x[i+4],11,1272893353),c=hh(c,d,a,b,x[i+7],16,-155497632),b=hh(b,c,d,a,x[i+10],23,-1094730640),a=hh(a,b,c,d,x[i+13],4,681279174),d=hh(d,a,b,c,x[i+0],11,-358537222),c=hh(c,d,a,b,x[i+3],16,-722521979),b=hh(b,c,d,a,x[i+6],23,76029189),a=hh(a,b,c,d,x[i+9],4,-640364487),d=hh(d,a,b,c,x[i+12],11,-421815835),c=hh(c,d,a,b,x[i+15],16,530742520),b=hh(b,c,d,a,x[i+2],23,-995338651),a=ii(a,b,c,d,x[i+0],6,-198630844),d=ii(d,a,b,c,x[i+7],10,1126891415),c=ii(c,d,a,b,x[i+14],15,-1416354905),b=ii(b,c,d,a,x[i+5],21,-57434055),a=ii(a,b,c,d,x[i+12],6,1700485571),d=ii(d,a,b,c,x[i+3],10,-1894986606),c=ii(c,d,a,b,x[i+10],15,-1051523),b=ii(b,c,d,a,x[i+1],21,-2054922799),a=ii(a,b,c,d,x[i+8],6,1873313359),d=ii(d,a,b,c,x[i+15],10,-30611744),c=ii(c,d,a,b,x[i+6],15,-1560198380),b=ii(b,c,d,a,x[i+13],21,1309151649),a=ii(a,b,c,d,x[i+4],6,-145523070),d=ii(d,a,b,c,x[i+11],10,-1120210379),c=ii(c,d,a,b,x[i+2],15,718787259),b=ii(b,c,d,a,x[i+9],21,-343485551),a=add(a,olda),b=add(b,oldb),c=add(c,oldc),d=add(d,oldd);return rhex(a)+rhex(b)+rhex(c)+rhex(d)}function n(e){return e>9?""+e:"0"+e}function init_countdownOreillette(){$("div[type='OREILLETTE_V65'] #countdown-blog, div[type='OREILLETTE_V7'] #countdown-blog").each(function(){var date=$(this).parent().find("[date]").attr("date");obj=new Date(1e3*date),noww=new Date,obj.getTime()-noww.getTime()<=864e5?$(this).countdown({until:obj,format:"DHMS",layout:'<ul><li class="lejmoins">H </li>{h<}<li>-{hnn}{h>}{m<}:{mnn}{m>}:{snn}</li></ul>'}):$(this).countdown({until:obj,format:"DHMS",layout:'<ul><li class="lejmoins">J </li>{d<}<li>-{dn}</li>{d>}</ul>'})})}function filterPremium(){-1!=window.location.href.split("/")[2].indexOf("abonne")&&($(window).width()<1050?$(".oreillettes__item.col:not(.col--x2):not(.col--x3):not(.col--x4):not(.oreillettes__item--highlight):last").hide():$(".oreillettes__item.col:not(.col--x2):not(.col--x3):not(.col--x4):not(.oreillettes__item--highlight):last").show())}function getCookie(cname){for(var name=cname+"=",decodedCookie=decodeURIComponent(document.cookie),ca=decodedCookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""}function popinCheck(){var cookie=getCookie("visited");cookie&&"2"==cookie?(expiry=new Date,expiry.setDate(expiry.getDate()+1),document.cookie="visited=3; path=/; expires="+expiry.toGMTString()):cookie&&"1"==cookie?(expiry=new Date,expiry.setDate(expiry.getDate()+1),document.cookie="visited=2; path=/; expires="+expiry.toGMTString()):cookie||(expiry=new Date,expiry.setDate(expiry.getDate()+1),document.cookie="visited=1; path=/; expires="+expiry.toGMTString())}function jsPopunder(sUrl,sConfig){function isCapped(){try{popsToday=Math.floor(document.cookie.split(cookie+"Cap=")[1].split(";")[0])}catch(err){}return sCap<=popsToday||-1!==document.cookie.indexOf(cookie+"=")}function pop2under(){try{popunder.blur(),popunder.opener.window.focus(),window.self.window.focus(),window.focus(),browser.firefox&&openCloseWindow(),browser.webkit&&openCloseTab(),browser.msie&&setTimeout(function(){popunder.blur(),popunder.opener.window.focus(),window.self.window.focus(),window.focus()},1e3)}catch(e){}}function openCloseWindow(){var ghost=window.open("about:blank");ghost.focus(),ghost.close()}function openCloseTab(){var ghost=document.createElement("a");ghost.href="data:text/html,<script>window.close();<\/script>",document.getElementsByTagName("body")[0].appendChild(ghost);var clk=document.createEvent("MouseEvents");clk.initMouseEvent("click",!1,!0,window,0,0,0,0,0,!0,!1,!1,!0,0,null),ghost.dispatchEvent(clk),ghost.parentNode.removeChild(ghost)}var _parent=top!=self&&"string"==typeof top.document.location.toString()?top:self,popunder=null;sConfig=sConfig||{};var sName=sConfig.name||Math.floor(1e3*Math.random()+1),sWidth=sConfig.width||window.outerWidth||window.innerWidth||document.body.offsetWidth,sHeight=sConfig.height||window.outerHeight-100||window.innerHeight||document.body.offsetHeight,sPosX=void 0!==sConfig.left?sConfig.left.toString():window.screenX,sPosY=void 0!==sConfig.top?sConfig.top.toString():window.screenY,sWait=sConfig.wait||3600;sWait*=1e3;var sCap=sConfig.cap||2,popsToday=0,cookie=sConfig.cookie||"__.popunder",browser=function(){var n=navigator.userAgent.toLowerCase(),b={webkit:/webkit/.test(n),mozilla:/mozilla/.test(n)&&!/(compatible|webkit)/.test(n),chrome:/chrome/.test(n),msie:/msie/.test(n)&&!/opera/.test(n),firefox:/firefox/.test(n),safari:/safari/.test(n)&&!/chrome/.test(n),opera:/opera/.test(n)};return b.version=b.safari?(n.match(/.+(?:ri)[\/: ]([\d.]+)/)||[])[1]:(n.match(/.+(?:ox|me|ra|ie)[\/: ]([\d.]+)/)||[])[1],b}();isCapped()||function(sUrl,sName,sWidth,sHeight,sPosX,sPosY){if(!isCapped()){var sOptions="toolbar=no,scrollbars=yes,location=yes,statusbar=yes,menubar=no,resizable=1,width="+sWidth.toString()+",height="+sHeight.toString()+",screenX="+sPosX+",screenY="+sPosY,listenerEvent=function(){if(!isCapped()&&(popunder=_parent.window.open(sUrl,sName,sOptions))){var now=new Date,next=new Date(now.setTime(now.getTime()+sWait));document.cookie=cookie+"=1;expires="+next.toGMTString()+";path=/";var tomorrow=new Date;tomorrow.setHours(24,0,0,0),document.cookie=cookie+"Cap="+(popsToday+1)+";expires="+tomorrow.toGMTString()+";path=/",pop2under()}};document.addEventListener?document.addEventListener("click",listenerEvent,!1):document.attachEvent("onclick",listenerEvent)}}(sUrl,sName,sWidth,sHeight,sPosX,sPosY)}function init_premium(){if(void 0===PopInArticle)return void console.log("PopInArticle is not loaded.");PopInArticle.gbType="mpp",PopInArticle.ieVersion=-1!=navigator.userAgent.indexOf("MSIE")?navigator.userAgent.substr(navigator.userAgent.indexOf("MSIE")+5,1):null,PopInArticle.homeTitle=document.title;var urlPremium=PopInArticle.parsePremiumUrl(document.location.href);urlPremium&&PopInArticle.init(urlPremium.id,1),$(document).on("closePopinArticle",function(e){window.opener?window.location.href=window.location.origin:-1!=document.referrer.indexOf(window.location.pathname)?window.location.href=window.location.origin:-1!=document.referrer.indexOf("lequipe.fr")&&window.history.length>1?window.history.go(-1):window.location.href=window.location.origin}),$(window).on("keydown",function(e){27!=e.keyCode||$("body").hasClass("aboOnly")||$(document).trigger("closePopinArticle")}),$(document).on("submit","#popinArticle .signin form",function(e){if(!$("#popinArticle .signin form a.submit").hasClass("disabled")){$("#popinArticle .signin form a.submit").addClass("disabled");loginMail({login:$('#popinArticle .signin form [name="username"]').val(),pass:$('#popinArticle .signin form [name="password"]').val()},null,function(errorTxt){$("#popinArticle .signin form .error").text(errorTxt).fadeIn(),$("#popinArticle .signin form a.submit").removeClass("disabled")}),e.preventDefault()}}),$(document).on("click","#popinArticle .signin form a.submit",function(e){$("#popinArticle .signin form").trigger("submit"),e.preventDefault()}),$("#popinArticle .body .full .image").length&&$(window).width()<1024&&$("#popinArticle .body .full .image").css({height:PopInArticle.format169Full().height}),$(window).on("resize",function(e){$("#popinArticle .body .full .image").length&&$("#popinArticle .body .full .image").css({height:PopInArticle.format169Full().height})}),VEL?$(document).on("click","a.action-button",function(e){VEL.Routes||(VEL.Routes=VELRoutes),VEL.setBuyContext($(this),$("article")),VEL.BuyContext.processAction="buyArticle";var yesCallBack=function(){VEL.buyProduct()};$(this).hasClass("jeton")?(spinnerPopin(),VEL.buyArticle()):VEL.goBuy(yesCallBack,null),e.preventDefault()}):console.log("VEL doesnt exists"),_userInfos&&1==_userInfos.quotiAbonne||!$("body").hasClass("aboOnly")||PopInAboOnly.init()}function qdjVoteHome(id,rep){$.post("/question_du_jour/EnregQJour.php",{I:id,R:rep},function(){window.location.href="/qdj/"+id})}function redirectSiteAbonnes(){var parser=document.createElement("a");if("string"==typeof queryString.redirect)parser.href=queryString.redirect;else if(parser.href=document.location.href,-1!=parser.hostname.indexOf("abonnes")||-1!=parser.hostname.indexOf("local")||-1!=parser.hostname.indexOf("uat"))return!1;parser.hostname=parser.hostname.replace("qlf-v6.","qlf-abonnes."),parser.hostname=parser.hostname.replace("beta-qlf.","beta-abonnes-qlf."),parser.hostname=parser.hostname.replace("beta.","beta-abonnes."),parser.hostname=parser.hostname.replace("www.","abonnes."),document.location.href=parser.href}function redirectSiteFree(){var parser=document.createElement("a");if(parser.href=document.location.href,-1==parser.hostname.indexOf("abonnes")||-1!=parser.hostname.indexOf("local")||-1!=parser.hostname.indexOf("uat"))return!1;parser.hostname=parser.hostname.replace("qlf-abonnes.","qlf-v6."),parser.hostname=parser.hostname.replace("beta-abonnes-qlf.","beta-qlf."),parser.hostname=parser.hostname.replace("beta-abonnes.","beta."),parser.hostname=parser.hostname.replace("abonnes.","www."),document.cookie="lequipe-connected-infos=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.location.href=parser.href}function popinDecouverte(){$(".js-content").on("click",function(e){PopInAboOnly.init(),e.preventDefault()}),$("a").removeAttr("target"),$("a").removeAttr("href")}function refreshPub(ty){$(".js-ads").each(function(){$(".js-ads").html(""),$(this).removeAttr("style")}),$("#dfp-bg,#ayads-style").remove(),$("#outer-edito-content").css("background-image","none").css("cursor","default").removeAttr("style"),$("#outer-edito-content").off("click");"undef"==ty&&(ty="auto"),refreshGoogleAds(),sv_xtpage=xtpage,"auto"==ty?sv_xtpage=sv_xtpage+"::refresh_"+ty+"_"+$("body").attr("total_bcl"):"byclick"==ty?sv_xtpage=sv_xtpage+"::refresh_"+ty:"filter"==ty?atname=atname.replace("_filter","")+"_filter":"matchingUrl"==ty&&$(".js-tabs-item.is-active").data("slug")?(atname=s17=$(".js-tabs-item.is-active").data("slug"),-1!=at_url.indexOf("/abonnement/kiosque")&&(w29="kiosque::"+atname,Wvar.rub=JSON.parse('["'+w18.replace(/\_/g,"").replace(/\-/g,"").replace(/\ /g,"")+'","'+s17.replace(/\_/g,"").replace(/\-/g,"").replace(/\ /g,"")+'"]'),Wvar.cat=JSON.parse('["'+w29.replace("[","").replace(";;]","").replace("]","").replace(/\;/g,'","')+'"]'))):"transfers"==ty&&(atname="transferts_"+$("body").data("season")+$("body").data("year"));var xtpage=sv_xtpage;!function(){var at=document.createElement("script");at.type="text/javascript",at.async=!0,at.src="/v6/js/smarttag-prod.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.getElementsByTagName("script")[0].parentNode).insertBefore(at,null)}(),function(){var w=document.createElement("script");w.type="text/javascript",w.src=document.location.protocol+"//cstatic.weborama.fr/js/wam/customers/wamfactory_dpm.lequipe.min.js?rnd="+(new Date).getTime(),w.async=!0,(document.head||document.getElementsByTagName("head")[0]).appendChild(w)}(),refreshOutbrain()}function refreshPubAllo(ty,xtpage){"undefined"!=typeof googletag&&void 0!==googletag.pubads&&"undefined"!=typeof pbjs&&pbjs.que.push(function(){pbjs.requestBids({timeout:PREBID_TIMEOUT,bidsBackHandler:function(){pbjs.setTargetingForGPTAsync(),googletag.pubads().refresh()}})}),sv_xtpage=xtpage,xtpage="auto"==ty?xtpage+"::refresh_"+ty+"_"+$("body").attr("total_bcl"):xtpage+"::refresh_"+ty,function(){var at=document.createElement("script");at.type="text/javascript",at.async=!0,at.src="/v6/js/xtcore.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.getElementsByTagName("script")[0].parentNode).insertBefore(at,null)}(),xtpage=sv_xtpage}function refreshOutbrain(){"undefined"!=typeof OBR&&OBR.extern.refreshWidget(window.location.href)}function refreshGoogleAds(){"undefined"!=typeof googletag&&void 0!==googletag.pubads&&"undefined"!=typeof pbjs&&"undefined"!=typeof pbjs&&pbjs.que.push(function(){pbjs.requestBids({timeout:PREBID_TIMEOUT,bidsBackHandler:function(){pbjs.setTargetingForGPTAsync(),googletag.pubads().refresh()}})})}function resizeImage(url,width,ratio,quality){var height=0;return height=0===ratio?width=0:Math.floor(width/ratio),quality||(url=url.replace("-{quality}","-75")),url.replace("{width}",width).replace("{height}",height).replace("{quality}",quality)}function safeHTML(){$("footer").length>0&&(console.log("FPos:"+$("footer").position().top),setTimeout(function(){$("footer").position().top>10&&$("footer").position().top<300&&-1==document.referrer.indexOf(window.location.href)&&(window.location.href=window.location.href)},250))}function initBtnScrollTop(){$(document).on("click",".js-btn-scroll-top",function(){return $("html, body").animate({scrollTop:0},500),!1}),$(window).scroll(function(){$(window).scrollTop()>1e3?$(".js-btn-scroll-top").css("bottom","0"):$(".js-btn-scroll-top").css("bottom","-62px")})}function setNavtabing(selector){(selector?$(selector):$(".js-tabs")).navtabing().off("tabing-ready").on("tabing-ready",function(){if(init_lazyloads(),$("html").trigger("scroll"),$(this).find(".js-tabs-player").length){var $player=$(this).find(".js-tabs-player"),playerSrc="";playerSrc=$player.is(":visible")?$player.attr("src").replace(/autoplay=([0-9]+)/g,"autoplay=1"):$player.attr("src").replace(/autoplay=([0-9]+)/g,"autoplay=0"),$player.attr("src",playerSrc)}refreshPub("byclick")})}function initExt(){settings={},settings.facebookAppId="261959740493169",settings.fbIsLoaded=0,settings.googleAppId="362438483275-kcqkherjll1hm8cv26nkfg3jg3vaehma.apps.googleusercontent.com",settings.ggIsLoaded=0,settings.ggIsClicked=0,settings.facebookAppId&&!settings.fbIsLoaded&&$.getScript("//connect.facebook.net/en_US/sdk.js",$.proxy(function(data,textStatus,jqxhr){200==jqxhr.status?(FB.init({appId:settings.facebookAppId,cookie:!0,xfbml:!0,version:"v2.2"}),$(document).on("click","#fbloginBtn",$.proxy(function(e){fbLogin(),e.preventDefault()},this)),settings.fbIsLoaded=!0):$("#fbloginBtn").hide()},this)),settings.googleAppId&&!settings.ggIsLoaded&&$.getScript("https://apis.google.com/js/client:plusone.js?parsetags=explicit",$.proxy(function(data,textStatus,jqxhr){200==jqxhr.status?($(document).on("click","#ggloginBtn",$.proxy(function(e){gapi.signin.render("ggloginBtn",{callback:"ggLogin",clientid:settings.googleAppId,cookiepolicy:"single_host_origin",scope:"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email"}),e.preventDefault()},this)),settings.ggIsLoaded=!0):$("#ggloginBtn").hide()},this))}function fbLogin(){if($("#fbloginBtn").hasClass("is-loading"))return!1;$("#fbloginBtn").addClass("is-loading"),FB.login(function(){FB.getLoginStatus(function(response){if("connected"===response.status){var access_token=response.authResponse.accessToken,extDatas={};extDatas.provider="facebook",extDatas.token=access_token,$(document).trigger("connection-login-ext",[extDatas])}else $("#fbloginBtn").removeClass("is-loading")})},{scope:"email, public_profile,user_birthday, user_likes",auth_type:"rerequest"})}function twt_click(event,opts){var target;if(void 0!==event?null!==(target=event.target||event.srcElement)&&"SPAN"==target.tagName&&(target=target.parentNode):target="",null===target.href||""==target){var next=function(){if($("body").hasClass("ADRENALINE"))var url="https://twitter.com/intent/tweet?text="+encodeURIComponent(t)+"&url="+encodeURIComponent(u)+"&via=eadrenaline";else var url="https://twitter.com/intent/tweet?text="+encodeURIComponent(t)+"&url="+encodeURIComponent(u)+"&via=lequipe";if(specialOpen){var x=screen.width/2-275,y=screen.height/2-275;window.open(url,"","menubar=no, toolbar=no, resizable=yes, scrollbars=yes, height=550, width=550, left="+x+", top="+y)}else target.href=url};u=getCurrentUrl(),$("body").hasClass("article")&&void 0!==$("#col-gauche h1 strong").html()?t=$("#col-gauche h1 strong").html():$('meta[name="twitter:title"]').length>0?t=$('meta[name="twitter:title"]').attr("content"):t=$("title").html(),t=t.replace(/\&nbsp;/g," ");var specialOpen=!1;void 0!==opts?(opts.params&&(u+=opts.params),opts.specialOpen&&(specialOpen=!0),opts.tinyurl?getTinyUrl(encodeURIComponent(u),function(uTiny){u=uTiny,next()}):next()):next()}return!0}function getTinyUrl(urlLong,callback){$.ajax({type:"GET",url:"/WebService/tinyurl.php",data:"url="+urlLong}).then(function(response){callback(response.url)},function(){console.log("TinyUrl failed"),callback(urlLong)})}function getCurrentUrl(){return 0!=$("link[rel='canonical']").length?u=$("link[rel='canonical']").attr("href"):u=location.href,u}function fbs_click(opts){return u=getCurrentUrl(),void 0!==opts&&opts.params&&(u+=opts.params),$("body").hasClass("article")?t=$("#col-gauche h1 strong").html():""!==$("#col-gauche h1").text()?t=$("#col-gauche h1").text():t=$("title").html(),fbShare(u,t,null,null,600,600),!1}function fbShare(url,title,descr,image,winWidth,winHeight){var winTop=screen.height/2-winHeight/2,winLeft=screen.width/2-winWidth/2;fb_sharer=window.open("http://www.facebook.com/sharer.php?s=100&p[title]="+title+"&t="+title+"&p[summary]="+descr+"&p[url]="+url+"&u="+url+"&p[images][0]="+image,"sharer","top="+winTop+",left="+winLeft+",toolbar=0,status=0,width="+winWidth+",height="+winHeight),$.get("/v6/php/socialCountUpdate.php?provider=google&href="+u),$.get("/v6/php/socialCountUpdate.php?provider=facebook&href="+u,function(data){parseInt(data)&&$(".shareCount b").html(parseInt(data)),checkShareCountColor()})}function gog_click(data){return u=getCurrentUrl(),$("body").hasClass("article")?t=$("#col-gauche h1 strong").html():""!==$("#col-gauche h1").text()?t=$("#col-gauche h1").text():t=$("title").html(),window.open("https://plus.google.com/share?url="+encodeURIComponent(u)+"&text="+encodeURIComponent(t),"sharerGoogle","toolbar=0,status=0,width=626,height=436"),!1}function getShareCount(){u=location.href.replace(/https?:\/\/.*\.lequipe\.fr/g,""),t=document.title;md5=calcMD5(u.replace(/\//g,"")).toString(),filename=md5.substr(0,2)+"/"+md5.substr(2,2)+"/"+md5.substr(4),filepath="/club/commentaires/includes/"+filename+"-share.data",$(".shareCount b").load(filepath,function(response,status,xhr){"error"==status?$(this).html(0):$(this).html(response),checkShareCountColor()})}function checkShareCountColor(){var res=parseInt($(".shareCount b:eq(0)").html()),color="#000000",size="30px";res>0&&(res>=49&&res<=99?color="#0f3189":res>=100&&res<=499?color="#608c02":res>=500&&res<=999?color="#ff8400":res>=1e3&&(color="#ed2024",size="26px",$("#partageons.duhaut.v66 .partage_v65>span").css("font-size","16px"))),$(".shareCount b").css("color",color).css("font-size",size)}function slugify(str){str=str.replace(/^\s+|\s+$/g,""),str=str.toLowerCase();for(var from="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",to="aaaaeeeeiiiioooouuuunc------",i=0,l=from.length;i<l;i++)str=str.replace(new RegExp(from.charAt(i),"g"),to.charAt(i));return str=str.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}function init_sondages(){$("body").delegate(".sondage:not(.alans) .rep","click",function(){console.log("delegate SONDAGE");var that=$(this),idSondage=$(this).find("input").attr("idsondage"),parent=$(this).parents(".sondage"),affichage_resultat=parent.attr("resultat");if(0===parent.find("#multiple").length)repSondage=$(this).find("input").attr("numrep"),$.ajax({url:"/v6/php/Sondage_enregReponse.php",dataType:"json",data:{idsondage:idSondage,type:"unique",numrep:repSondage},success:function(datas){resultSondage(idSondage,affichage_resultat)}});else{var nb_selection_possible=parent.find("#multiple").val(),nb_selection=0,repSondage=[];parent.find(".rep input").each(function(index){$(this).is(":checked")&&(repSondage[repSondage.length]=$(this).attr("numrep"),nb_selection++)}),nb_selection==nb_selection_possible&&$.ajax({url:"/v6/php/Sondage_enregReponse.php",dataType:"json",data:{idsondage:idSondage,type:"multiple",numrep:repSondage},success:function(datas){resultSondage(idSondage,affichage_resultat),$(that).parent().find(".rep").addClass("finished")}})}}),$(".sondage_ferme").each(function(){resultSondage($(this).attr("idsondage"))})}function resultSondage(idSondage,resultat){console.log("resultSondage SONDAGE"),void 0===resultat&&(resultat=1),console.log("resultSondage:"+resultat);var nbrVote=0,totalPct=0,diff=0;if($(".sondage").each(function(index){if($(this).attr("idsondage")==idSondage&&("0"!==$(this).attr("resultat")&&0!==resultat||$(this).find(".rep").each(function(index){$(this).find("input").attr("disabled","disabled").attr("name","radio-0"),$(this).find(".barre").remove(),diff=1})),1==diff)return $(this).append('<p class="total sondage_total" >&nbsp;Merci d\'avoir voté</p>'),!1}),1==diff)return!1;$.ajax({url:"/v6/php/Sondage_getResultats.php",dataType:"json",data:{idsondage:idSondage},success:function(datas){$.each(datas,function(){nbrVote+=parseInt(this.nb_votes)}),$.each(datas,function(index){var pct_brut=100*parseInt(this.nb_votes)/nbrVote;datas[index].pourcent=Math.round(pct_brut+diff),diff+=pct_brut-datas[index].pourcent,totalPct+=datas[index].pourcent}),$(".sondage").each(function(index){$(this).attr("idSondage")==idSondage&&($(this).append('<p class="total sondage_total" >&nbsp;Nombre de votes : '+nbrVote+" votes</p>"),$(this).find(".rep").each(function(index){$(this).addClass("a_voted"),$(this).find("input").remove(),$(this).find(".res-barre").length>-1?($(this).find(".res-barre").css("display","block"),$(this).find(".barre").css("backgroundColor","#202020"),$(this).find(".barre").animate({width:datas[index].pourcent+"%"},500,function(){$(this).closest(".rep").find(".pc").html(datas[index].pourcent+"%")})):($(this).find(".barre").css("backgroundColor","#202020"),$(this).find(".barre").animate({width:2*datas[index].pourcent+"px"},500,function(){$(this).closest(".rep").find(".pc").html(datas[index].pourcent+"%")})),$(this).find(".barre").fadeIn(500),$(this).find(".pc").fadeIn(500)}))})}})}function spinnerPopin(){conxpopup({width:464,height:500,load:"/v7-lequipe/dist/includes/static/spinner.html"})}function stickyMenu(){if($("#nav-content").length>0)var positionElementInPage=$("#nav-content").offset().top;$(document).on("click","#nav-stiky .js-libNavSport, #nav-stiky .js-nav-stiky-inside-controller",function(){return $(this).hasClass("clickee")?($(this).removeClass("clickee"),$("#nav-inside-stiky").remove(),$("#nav-inside-stiky").css("margin-top","-100px")):($(this).addClass("clickee"),$("#nav-inside-global").clone().appendTo("#nav-stiky").attr("id","nav-inside-stiky"),$("#nav-inside").clone().appendTo("#nav-inside-stiky"),$("#nav-inside-stiky").css("margin-top","0")),!1}),isStiky=0,$(window).scroll(function(){$(window).scrollTop()-200>positionElementInPage?(0===isStiky&&($("#nav-content").clone().prependTo("body").attr("id","nav-stiky"),$("#nav-stiky").html("<div><div>"+$("#nav-stiky").html()+"</div></div>"),isStiky=1),$("#nav-stiky").css("top","0"),$("#nav-stiky").css("height","auto")):($("#nav-stiky").css("top","-240px"),$("#nav-stiky .drop-menu-content").fadeOut("fast"),$("#nav-stiky").css("height","40px"))})}function convertQueryStringToJson(){var arrQueryString=window.location.search.substr(1).split("&"),jsonQueryString={};if("object"===(void 0===arrQueryString?"undefined":_typeof(arrQueryString))&&arrQueryString instanceof Array&&arrQueryString.length)for(var i in arrQueryString)if(arrQueryString.hasOwnProperty(i)){var param=arrQueryString[i].split("=");if(2!==param.length)continue;jsonQueryString[decodeURIComponent(param[0])]=decodeURIComponent(param[1])}return jsonQueryString}function addQueryStringToUrl(url,queryString){var array_url=url.split("#"),new_url=array_url[0];if(queryString){new_url+=(new_url&&-1!==new_url.indexOf("?")?"&":"?")+queryString}return void 0!==array_url[1]&&null!==array_url[1]&&(new_url+="#"+array_url[1]),new_url}function sendTag(type,name,date,num){window.ATInternet.Tracker&&(window.tag=new window.ATInternet.Tracker.Tag,$("body").hasClass("pyeongchang")?(num?tag.page.set({name:name+"_"+date,chapter1:"edition_abonne_pyeongchang",chapter2:type,chapter3:num,level2:xtn2}):tag.page.set({name:name+"_"+date,chapter1:"edition_abonne_pyeongchang",chapter2:type,chapter3:"",level2:xtn2}),tag.customVars.set({site:{13:"["+s13+"]",17:"["+s17+"]",18:"["+s18.replace(/\-/g,"_").replace(/\ /g,"_")+"]",19:s19,22:s22,24:"["+s24+"]",23:s23,28:"[edition_abonne_pyeongchang]"}})):(num?tag.page.set({name:name+"_"+date,chapter1:"edition_abonne",chapter2:type,chapter3:num,level2:xtn2}):tag.page.set({name:name+"_"+date,chapter1:"edition_abonne",chapter2:type,chapter3:"",level2:xtn2}),tag.customVars.set({site:{13:"["+s13+"]",17:"["+s17+"]",18:"["+s18.replace(/\-/g,"_").replace(/\ /g,"_")+"]",19:s19,22:s22,24:"["+s24+"]",23:s23,28:"["+s28+"]"}})),tag.identifiedVisitor.set({id:xt_an,category:xt_ac}),tag.dispatch())}function cleaningVar(string){return string.toLowerCase().replace(/\ /g,"_").replace(/\-/g,"_").replace(/[àáâãäÀÁÂÃÄ]/g,"a").replace(/[çÇ]/g,"c").replace(/[èéêëÈÉÊË]/g,"e").replace(/[ìíîïÌÍÎÏ]/g,"i").replace(/[ñÑ]/g,"n").replace(/[òóôõöÑÒÓÔÕÖ]/g,"o").replace(/[ýÿÝ]/g,"y").replace(/[ùúûüÙÚÛÜ]/g,"u")}function init_tops(){if($("#bk-surf").size()){var lastLink=1,blocWidth=$("#bk-surf #inside").outerWidth(),nbLink=$("#surfer-nave a").length;$("#surfer-nave a").on("click",function(){var link=parseInt($(this).attr("href").replace("#","")),direction=lastLink<link?-1:1;return $(this).hasClass("active")||($("#surfer-nave a").removeAttr("class"),$(this).addClass("active"),$("#bk-surf .bloc-surfeur").animate({marginLeft:direction*blocWidth},"fast",function(e){$("#bk-surf .bloc-surfeur").load("/v6/top-internautes/top"+link+".html",function(){var direction=lastLink<link?1:-1;$("#bk-surf .bloc-surfeur").css({marginLeft:direction*blocWidth}).animate({marginLeft:0},"fast",function(){lastLink=link,$("#bk-surf .bloc-surfeur").removeAttr("style")}),$("#bk-surf img.lazy").show().attr("src",$("#bk-surf img.lazy").attr("data-original"))})}),$("#bk-surf .ico").removeClass("o-ff"),1==link?$("#bk-surf .ico.ar-left").addClass("o-ff"):link==nbLink&&$("#bk-surf .ico.ar-right").addClass("o-ff")),!1}),$("#bk-surf .ico").on("click",function(){var linkActive=parseInt($("#surfer-nave a.active").attr("href").replace("#","")),nbLink=$("#surfer-nave a").length;$(this).hasClass("ar-right")&&linkActive<nbLink?$("#surfer-nave a.active + a").trigger("click"):$(this).hasClass("ar-left")&&linkActive>1&&$("#surfer-nave a.active").prev("a").trigger("click")})}}function init_video(){if($("#video").size()){var nbpage_video=$("#video .pager").attr("data-nbpage");$("#video .footer .nav").on("click",function(){if(!$(this).hasClass("disabled")&&!$("#video").hasClass("loading")){var linkId=$(this).attr("data-dir");switch($("#video").addClass("loading"),linkId){case"prev":videoScroll("up",nbpage_video,$(this));break;case"next":videoScroll("down",nbpage_video,$(this))}}})}}function videoScroll(sens,nbpage,link){if(pageFut="up"==sens?pageVideo:pageVideo+1,pageFut>0&&pageFut<nbpage)switch(sens){case"up":pageVideo--,animatevideo(pageVideo,1);break;case"down":pageVideo++,animatevideo(pageVideo,-1)}0===pageVideo||pageVideo==nbpage-1?link.addClass("disabled"):$("#video .footer .nav").removeClass("disabled")}function animatevideo(pageVideo,sens){var videoTop=($("#scrollerVideo ul.video").attr("tag"),$("#scrollerVideo ul.video").position().top),videoHeight=$("#scrollerVideo").height();1==sens?($("#scrollerVideo ul.video").animate({top:videoTop+videoHeight-30},500,function(){$("#video").removeClass("loading")}),$("#video .pager span").html(pageVideo+1)):($("#scrollerVideo ul.video").animate({top:videoTop-videoHeight},500,function(){$("#video").removeClass("loading")}),$("#video .pager span").html(pageVideo+1))}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(global,factory){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=global.document?factory(global,!0):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return factory(w)}:factory(global)}("undefined"!=typeof window?window:this,function(window,noGlobal){function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jQuery.type(obj);return"function"!==type&&!jQuery.isWindow(obj)&&("array"===type||0===length||"number"==typeof length&&length>0&&length-1 in obj)}function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if("string"==typeof qualifier){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return jQuery.inArray(elem,qualifier)>-1!==not})}function sibling(cur,dir){do{cur=cur[dir]}while(cur&&1!==cur.nodeType);return cur}function createOptions(options){var object={};return jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=!0}),object}function detach(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",completed),window.removeEventListener("load",completed)):(document.detachEvent("onreadystatechange",completed),window.detachEvent("onload",completed))}function completed(){(document.addEventListener||"load"===window.event.type||"complete"===document.readyState)&&(detach(),jQuery.ready())}function dataAttr(elem,key,data){if(void 0===data&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if("string"==typeof(data=elem.getAttribute(name))){try{data="true"===data||"false"!==data&&("null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data)}catch(e){}jQuery.data(elem,key,data)}else data=void 0}return data}function isEmptyDataObject(obj){var name;for(name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return!1;return!0}function internalData(elem,name,data,pvt){if(acceptData(elem)){var ret,thisCache,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if(id&&cache[id]&&(pvt||cache[id].data)||void 0!==data||"string"!=typeof name)return id||(id=isNode?elem[internalKey]=deletedIds.pop()||jQuery.guid++:internalKey),cache[id]||(cache[id]=isNode?{}:{toJSON:jQuery.noop}),"object"!==(void 0===name?"undefined":_typeof(name))&&"function"!=typeof name||(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),void 0!==data&&(thisCache[jQuery.camelCase(name)]=data),"string"==typeof name?null==(ret=thisCache[name])&&(ret=thisCache[jQuery.camelCase(name)]):ret=thisCache,ret}}function internalRemoveData(elem,name,pvt){if(acceptData(elem)){var thisCache,i,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){jQuery.isArray(name)?name=name.concat(jQuery.map(name,jQuery.camelCase)):name in thisCache?name=[name]:(name=jQuery.camelCase(name),name=name in thisCache?[name]:name.split(" ")),i=name.length;for(;i--;)delete thisCache[name[i]];if(pvt?!isEmptyDataObject(thisCache):!jQuery.isEmptyObject(thisCache))return}(pvt||(delete cache[id].data,
isEmptyDataObject(cache[id])))&&(isNode?jQuery.cleanData([elem],!0):support.deleteExpando||cache!=cache.window?delete cache[id]:cache[id]=void 0)}}}function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale=1,maxIterations=20,currentValue=tween?function(){return tween.cur()}:function(){return jQuery.css(elem,prop,"")},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||"px"!==unit&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){unit=unit||initialInUnit[3],valueParts=valueParts||[],initialInUnit=+initial||1;do{scale=scale||".5",initialInUnit/=scale,jQuery.style(elem,prop,initialInUnit+unit)}while(scale!==(scale=currentValue()/initial)&&1!==scale&&--maxIterations)}return valueParts&&(initialInUnit=+initialInUnit||+initial||0,adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2],tween&&(tween.unit=unit,tween.start=initialInUnit,tween.end=adjusted)),adjusted}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}function getAll(context,tag){var elems,elem,i=0,found=void 0!==context.getElementsByTagName?context.getElementsByTagName(tag||"*"):void 0!==context.querySelectorAll?context.querySelectorAll(tag||"*"):void 0;if(!found)for(found=[],elems=context.childNodes||context;null!=(elem=elems[i]);i++)!tag||jQuery.nodeName(elem,tag)?found.push(elem):jQuery.merge(found,getAll(elem,tag));return void 0===tag||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function setGlobalEval(elems,refElements){for(var elem,i=0;null!=(elem=elems[i]);i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}function fixDefaultChecked(elem){rcheckableType.test(elem.type)&&(elem.defaultChecked=elem.checked)}function buildFragment(elems,context,scripts,selection,ignored){for(var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;i<l;i++)if((elem=elems[i])||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||safe.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;if(!support.leadingWhitespace&&rleadingWhitespace.test(elem)&&nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0])),!support.tbody)for(elem="table"!==tag||rtbody.test(elem)?"<table>"!==wrap[1]||rtbody.test(elem)?0:tmp:tmp.firstChild,j=elem&&elem.childNodes.length;j--;)jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length&&elem.removeChild(tbody);for(jQuery.merge(nodes,tmp.childNodes),tmp.textContent="";tmp.firstChild;)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}else nodes.push(context.createTextNode(elem));for(tmp&&safe.removeChild(tmp),support.appendChecked||jQuery.grep(getAll(nodes,"input"),fixDefaultChecked),i=0;elem=nodes[i++];)if(selection&&jQuery.inArray(elem,selection)>-1)ignored&&ignored.push(elem);else if(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(safe.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts)for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return tmp=null,safe}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function _on(elem,types,selector,data,fn,one){var origFn,type;if("object"===(void 0===types?"undefined":_typeof(types))){"string"!=typeof selector&&(data=data||selector,selector=void 0);for(type in types)_on(elem,type,selector,data,types[type],one);return elem}if(null==data&&null==fn?(fn=selector,data=selector=void 0):null==fn&&("string"==typeof selector?(fn=data,data=void 0):(fn=data,data=selector,selector=void 0)),!1===fn)fn=returnFalse;else if(!fn)return elem;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),elem.each(function(){jQuery.event.add(this,types,fn,data,selector)})}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(11!==content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){return elem.type=(null!==jQuery.find.attr(elem,"type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle,curData.events={};for(type in events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i])}curData.data&&(curData.data=jQuery.extend({},curData.data))}}function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(1===dest.nodeType){if(nodeName=dest.nodeName.toLowerCase(),!support.noCloneEvent&&dest[jQuery.expando]){data=jQuery._data(dest);for(e in data.events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}"script"===nodeName&&dest.text!==src.text?(disableScript(dest).text=src.text,restoreScript(dest)):"object"===nodeName?(dest.parentNode&&(dest.outerHTML=src.outerHTML),support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)&&(dest.innerHTML=src.innerHTML)):"input"===nodeName&&rcheckableType.test(src.type)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)):"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue)}}function domManip(collection,args,callback,ignored){args=concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=collection.length,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&"string"==typeof value&&!support.checkClone&&rchecked.test(value))return collection.each(function(index){var self=collection.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),domManip(self,args,callback,ignored)});if(l&&(fragment=buildFragment(args,collection[0].ownerDocument,!1,collection,ignored),first=fragment.firstChild,1===fragment.childNodes.length&&(fragment=first),first||ignored)){for(scripts=jQuery.map(getAll(fragment,"script"),disableScript),hasScripts=scripts.length;i<l;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(collection[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;i<hasScripts;i++)node=scripts[i],rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl&&jQuery._evalUrl(node.src):jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,"")));fragment=first=null}return collection}function _remove(elem,selector,keepData){for(var node,elems=selector?jQuery.filter(selector,elem):elem,i=0;null!=(node=elems[i]);i++)keepData||1!==node.nodeType||jQuery.cleanData(getAll(node)),node.parentNode&&(keepData&&jQuery.contains(node.ownerDocument,node)&&setGlobalEval(getAll(node,"script")),node.parentNode.removeChild(node));return elem}function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");return elem.detach(),display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||(display=actualDisplay(nodeName,doc),"none"!==display&&display||(iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement),doc=(iframe[0].contentWindow||iframe[0].contentDocument).document,doc.write(),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}function addGetHookIf(conditionFn,hookFn){return{get:function(){return conditionFn()?void delete this.get:(this.get=hookFn).apply(this,arguments)}}}function vendorPropName(name){if(name in emptyStyle)return name;for(var capName=name.charAt(0).toUpperCase()+name.slice(1),i=cssPrefixes.length;i--;)if((name=cssPrefixes[i]+capName)in emptyStyle)return name}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;index<length;index++)elem=elements[index],elem.style&&(values[index]=jQuery._data(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName)))):(hidden=isHidden(elem),(display&&"none"!==display||!hidden)&&jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;index<length;index++)elem=elements[index],elem.style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;i<4;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(val<=0||null==val){if(val=curCSS(elem,name,styles),(val<0||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function createFxNow(){return window.setTimeout(function(){fxNow=void 0}),fxNow=jQuery.now()}function genFx(type,includeWidth){var which,attrs={height:type},i=0;for(includeWidth=includeWidth?1:0;i<4;i+=2-includeWidth)which=cssExpand[i],attrs["margin"+which]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function createTween(value,prop,animation){for(var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;index<length;index++)if(tween=collection[index].call(animation,prop,value))return tween}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=jQuery._data(elem,"fxshow");opts.queue||(hooks=jQuery._queueHooks(elem,"fx"),null==hooks.unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})})),1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],display=jQuery.css(elem,"display"),"inline"===("none"===display?jQuery._data(elem,"olddisplay")||defaultDisplay(elem.nodeName):display)&&"none"===jQuery.css(elem,"float")&&(support.inlineBlockNeedsLayout&&"inline"!==defaultDisplay(elem.nodeName)?style.zoom=1:style.display="inline-block")),opts.overflow&&(style.overflow="hidden",support.shrinkWrapBlocks()||anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(prop in props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show")){if("show"!==value||!dataShow||void 0===dataShow[prop])continue;hidden=!0}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else display=void 0;if(jQuery.isEmptyObject(orig))"inline"===("none"===display?defaultDisplay(elem.nodeName):display)&&(style.display=display);else{dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=jQuery._data(elem,"fxshow",{}),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;jQuery._removeData(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(prop in orig)tween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),(hooks=jQuery.cssHooks[name])&&"expand"in hooks){value=hooks.expand(value),delete props[name];for(index in value)index in props||(props[index]=value[index],specialEasing[index]=easing)}else specialEasing[name]=easing}function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;index<length;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),percent<1&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;index<length;index++)animation.tweens[index].run(1);return gotoEnd?(deferred.notifyWith(elem,[animation,1,0]),deferred.resolveWith(elem,[animation,gotoEnd])):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(propFilter(props,animation.opts.specialEasing);index<length;index++)if(result=Animation.prefilters[index].call(animation,elem,props,animation.opts))return jQuery.isFunction(result.stop)&&(jQuery._queueHooks(animation.elem,animation.opts.queue).stop=jQuery.proxy(result.stop,result)),result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function getClass(elem){return jQuery.attr(elem,"class")||""}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType.charAt(0)?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}var inspected={},seekingTransport=structure===transports;return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)void 0!==src[key]&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}function ajaxHandleResponses(s,jqXHR,responses){for(var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)dataTypes.shift(),void 0===ct&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}if(finalDataType)return finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(!(conv=converters[prev+" "+current]||converters["* "+current]))for(conv2 in converters)if(tmp=conv2.split(" "),tmp[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){!0===conv?conv=converters[conv2]:!0!==converters[conv2]&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(!0!==conv)if(conv&&s.throws)response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}function getDisplay(elem){return elem.style&&elem.style.display||jQuery.css(elem,"display")}function filterHidden(elem){if(!jQuery.contains(elem.ownerDocument||document,elem))return!0;for(;elem&&1===elem.nodeType;){if("none"===getDisplay(elem)||"hidden"===elem.type)return!0;elem=elem.parentNode}return!1}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"===(void 0===v?"undefined":_typeof(v))&&null!=v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&(elem.defaultView||elem.parentWindow)}var deletedIds=[],document=window.document,_slice=deletedIds.slice,concat=deletedIds.concat,push=deletedIds.push,indexOf=deletedIds.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},jQuery=function jQuery(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:"1.12.4",constructor:jQuery,selector:"",length:0,toArray:function(){return _slice.call(this)},get:function(num){return null!=num?num<0?this[num+this.length]:this[num]:_slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback){return jQuery.each(this,callback)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(_slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor()},push:push,sort:deletedIds.sort,splice:deletedIds.splice},jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"===(void 0===target?"undefined":_typeof(target))||jQuery.isFunction(target)||(target={}),i===length&&(target=this,i--);i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+("1.12.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj==obj.window},isNumeric:function(obj){var realStringObj=obj&&obj.toString();return!jQuery.isArray(obj)&&realStringObj-parseFloat(realStringObj)+1>=0},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},isPlainObject:function(obj){var key;if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(!support.ownFirst)for(key in obj)return hasOwn.call(obj,key);for(key in obj);return void 0===key||hasOwn.call(obj,key)},type:function(obj){return null==obj?obj+"":"object"===(void 0===obj?"undefined":_typeof(obj))||"function"==typeof obj?class2type[toString.call(obj)]||"object":void 0===obj?"undefined":_typeof(obj)},globalEval:function(data){data&&jQuery.trim(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback){var length,i=0;if(isArrayLike(obj))for(length=obj.length;i<length&&!1!==callback.call(obj[i],i,obj[i]);i++);else for(i in obj)if(!1===callback.call(obj[i],i,obj[i]))break;return obj},trim:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArrayLike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):push.call(ret,arr)),ret},inArray:function(elem,arr,i){var len;if(arr){if(indexOf)return indexOf.call(arr,elem,i);for(len=arr.length,i=i?i<0?Math.max(0,len+i):i:0;i<len;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){for(var len=+second.length,j=0,i=first.length;j<len;)first[i++]=second[j++];if(len!==len)for(;void 0!==second[j];)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,invert){for(var matches=[],i=0,length=elems.length,callbackExpect=!invert;i<length;i++)!callback(elems[i],i)!==callbackExpect&&matches.push(elems[i]);return matches},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems))for(length=elems.length;i<length;i++)null!=(value=callback(elems[i],i,arg))&&ret.push(value);else for(i in elems)null!=(value=callback(elems[i],i,arg))&&ret.push(value);return concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;if("string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn))return args=_slice.call(arguments,2),proxy=function(){return fn.apply(context||this,args.concat(_slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy},now:function(){return+new Date},support:support}),"function"==typeof Symbol&&(jQuery.fn[Symbol.iterator]=deletedIds[Symbol.iterator]),jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});var Sizzle=function(window){function Sizzle(selector,context,results,seed){var m,i,elem,nid,nidselect,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;if(results=results||[],"string"!=typeof selector||!selector||1!==nodeType&&9!==nodeType&&11!==nodeType)return results;if(!seed&&((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,documentIsHTML)){if(11!==nodeType&&(match=rquickExpr.exec(selector)))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m)))return results;if(elem.id===m)return results.push(elem),results}else if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(1!==nodeType)newContext=context,newSelector=selector;else if("object"!==context.nodeName.toLowerCase()){for((nid=context.getAttribute("id"))?nid=nid.replace(rescape,"\\$&"):context.setAttribute("id",nid=expando),groups=tokenize(selector),i=groups.length,nidselect=ridentifier.test(nid)?"#"+nid:"[id='"+nid+"']";i--;)groups[i]=nidselect+" "+toSelector(groups[i]);newSelector=groups.join(","),newContext=rsibling.test(selector)&&testContext(context.parentNode)||context}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{nid===expando&&context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}var keys=[];return cache}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=arr.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&void 0!==context.getElementsByTagName&&context}function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if(outerCache=elem[expando]||(elem[expando]={}),uniqueCache=outerCache[elem.uniqueID]||(outerCache[elem.uniqueID]={}),(oldCache=uniqueCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if(uniqueCache[dir]=newCache,newCache[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){
var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));return checkContext=null,ret}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context===document||context||outermost);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0,context||elem.ownerDocument===document||(setDocument(elem),xml=!documentIsHTML);matcher=elementMatchers[j++];)if(matcher(elem,context||document,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){for(var i=0,len=list.length;i<len;i++)if(list[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)},unloadHandler=function(){setDocument()};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;return doc!==document&&9===doc.nodeType&&doc.documentElement?(document=doc,docElem=document.documentElement,documentIsHTML=!isXML(document),(parent=document.defaultView)&&parent.top!==parent&&(parent.addEventListener?parent.addEventListener("unload",unloadHandler,!1):parent.attachEvent&&parent.attachEvent("onunload",unloadHandler)),support.attributes=assert(function(div){return div.className="i",!div.getAttribute("className")}),support.getElementsByTagName=assert(function(div){return div.appendChild(document.createComment("")),!div.getElementsByTagName("*").length}),support.getElementsByClassName=rnative.test(document.getElementsByClassName),support.getById=assert(function(div){return docElem.appendChild(div).id=expando,!document.getElementsByName||!document.getElementsByName(expando).length}),support.getById?(Expr.find.ID=function(id,context){if(void 0!==context.getElementById&&documentIsHTML){var m=context.getElementById(id);return m?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=void 0!==elem.getAttributeNode&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){return void 0!==context.getElementsByTagName?context.getElementsByTagName(tag):support.qsa?context.querySelectorAll(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(void 0!==context.getElementsByClassName&&documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(document.querySelectorAll))&&(assert(function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a><select id='"+expando+"-\r\\' msallowcapture=''><option selected=''></option></select>",div.querySelectorAll("[msallowcapture^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),div.querySelectorAll("[id~="+expando+"-]").length||rbuggyQSA.push("~="),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked"),div.querySelectorAll("a#"+expando+"+*").length||rbuggyQSA.push(".#.+[+~]")}),assert(function(div){var input=document.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("name","D"),div.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?="),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare||(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&compare||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===document?-1:b===document?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},document):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||void 0!==elem.getAttribute&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=!1;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(node=parent,outerCache=node[expando]||(node[expando]={}),uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={}),cache=uniqueCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=nodeIndex&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(node=elem,outerCache=node[expando]||(node[expando]={}),uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={}),cache=uniqueCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=nodeIndex),!1===diff)for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&(outerCache=node[expando]||(node[expando]={}),uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={}),uniqueCache[type]=[dirruns,diff]),node!==elem)););return(diff-=last)===first||diff%first==0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),input[0]=null,!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return text=text.replace(runescape,funescape),function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return!1===elem.disabled},disabled:function(elem){return!0===elem.disabled},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}},Expr.pseudos.nth=Expr.pseudos.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=function(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=function(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}(i);return setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)cached=matcherFromTokens(match[i]),cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers)),cached.selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0]))return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens)))return push.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert(function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))}),assert(function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),support.attributes&&assert(function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){if(!isXML&&"input"===elem.nodeName.toLowerCase())return elem.defaultValue}),assert(function(div){return null==div.getAttribute("disabled")})||addHandle(booleans,function(elem,name,isXML){var val;if(!isXML)return!0===elem[name]?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}),Sizzle}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var dir=function(elem,_dir,until){for(var matched=[],truncate=void 0!==until;(elem=elem[_dir])&&9!==elem.nodeType;)if(1===elem.nodeType){if(truncate&&jQuery(elem).is(until))break;matched.push(elem)}return matched},_siblings=function(n,elem){for(var matched=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&matched.push(n);return matched},rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},jQuery.fn.extend({find:function(selector){var i,ret=[],self=this,len=self.length;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return!0}));for(i=0;i<len;i++)jQuery.find(selector,self[i],ret);return ret=this.pushStack(len>1?jQuery.unique(ret):ret),ret.selector=this.selector?this.selector+" "+selector:selector,ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector)return this;if(root=root||rootjQuery,"string"==typeof selector){if(!(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector))||!match[1]&&context)return!context||context.jquery?(context||root).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}if((elem=document.getElementById(match[2]))&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?void 0!==root.ready?root.ready(selector):selector(jQuery):(void 0!==selector.selector&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))}).prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;i<len;i++)if(jQuery.contains(this,targets[i]))return!0})},closest:function(selectors,context){for(var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;i<l;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?pos.index(cur)>-1:1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return dir(elem,"nextSibling")},prevAll:function(elem){return dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until)},siblings:function(elem){return _siblings((elem.parentNode||{}).firstChild,elem)},children:function(elem){return _siblings(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),this.length>1&&(guaranteedUnique[name]||(ret=jQuery.uniqueSort(ret)),rparentsprev.test(name)&&(ret=ret.reverse())),this.pushStack(ret)}});var rnotwhite=/\S+/g;jQuery.Callbacks=function(options){options="string"==typeof options?createOptions(options):jQuery.extend({},options);var firing,memory,_fired,_locked,list=[],queue=[],firingIndex=-1,fire=function(){for(_locked=options.once,_fired=firing=!0;queue.length;firingIndex=-1)for(memory=queue.shift();++firingIndex<list.length;)!1===list[firingIndex].apply(memory[0],memory[1])&&options.stopOnFalse&&(firingIndex=list.length,memory=!1);options.memory||(memory=!1),firing=!1,_locked&&(list=memory?[]:"")},self={add:function(){return list&&(memory&&!firing&&(firingIndex=list.length-1,queue.push(memory)),function add(args){jQuery.each(args,function(_,arg){jQuery.isFunction(arg)?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==jQuery.type(arg)&&add(arg)})}(arguments),memory&&!firing&&fire()),this},remove:function(){return jQuery.each(arguments,function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;)list.splice(index,1),index<=firingIndex&&firingIndex--}),this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0},empty:function(){return list&&(list=[]),this},disable:function(){return _locked=queue=[],list=memory="",this},disabled:function(){return!list},lock:function(){return _locked=!0,memory||self.disable(),this},locked:function(){return!!_locked},fireWith:function(context,args){return _locked||(args=args||[],args=[context,args.slice?args.slice():args],queue.push(args),firing||fire()),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!_fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],_state="pending",_promise={state:function(){return _state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject):newDefer[tuple[0]+"With"](this===_promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,_promise):_promise}},deferred={};return _promise.pipe=_promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];_promise[tuple[1]]=list.add,stateString&&list.add(function(){_state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?_promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),_promise.promise(deferred),
func&&func.call(deferred,deferred),deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=_slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=arguments.length>1?_slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(length>1)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);i<length;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().progress(updateFunc(i,progressContexts,progressValues)).done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){return jQuery.ready.promise().done(fn),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){(!0===wait?--jQuery.readyWait:jQuery.isReady)||(jQuery.isReady=!0,!0!==wait&&--jQuery.readyWait>0||(readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready"))))}}),jQuery.ready.promise=function(obj){if(!readyList)if(readyList=jQuery.Deferred(),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)window.setTimeout(jQuery.ready);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",completed),window.addEventListener("load",completed);else{document.attachEvent("onreadystatechange",completed),window.attachEvent("onload",completed);var top=!1;try{top=null==window.frameElement&&document.documentElement}catch(e){}top&&top.doScroll&&function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return window.setTimeout(doScrollCheck,50)}detach(),jQuery.ready()}}()}return readyList.promise(obj)},jQuery.ready.promise();var i;for(i in jQuery(support))break;support.ownFirst="0"===i,support.inlineBlockNeedsLayout=!1,jQuery(function(){var val,div,body,container;(body=document.getElementsByTagName("body")[0])&&body.style&&(div=document.createElement("div"),container=document.createElement("div"),container.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),void 0!==div.style.zoom&&(div.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",support.inlineBlockNeedsLayout=val=3===div.offsetWidth,val&&(body.style.zoom=1)),body.removeChild(container))}),function(){var div=document.createElement("div");support.deleteExpando=!0;try{delete div.test}catch(e){support.deleteExpando=!1}div=null}();var acceptData=function(elem){var noData=jQuery.noData[(elem.nodeName+" ").toLowerCase()],nodeType=+elem.nodeType||1;return(1===nodeType||9===nodeType)&&(!noData||!0!==noData&&elem.getAttribute("classid")===noData)},rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(elem){return!!(elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando])&&!isEmptyDataObject(elem)},data:function(elem,name,_data){return internalData(elem,name,_data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,!0)},_removeData:function(elem,name){return internalRemoveData(elem,name,!0)}}),jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(void 0===key){if(this.length&&(data=jQuery.data(elem),1===elem.nodeType&&!jQuery._data(elem,"parsedAttrs"))){for(i=attrs.length;i--;)attrs[i]&&(name=attrs[i].name,0===name.indexOf("data-")&&(name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name])));jQuery._data(elem,"parsedAttrs",!0)}return data}return"object"===(void 0===key?"undefined":_typeof(key))?this.each(function(){jQuery.data(this,key)}):arguments.length>1?this.each(function(){jQuery.data(this,key,value)}):elem?dataAttr(elem,key,jQuery.data(elem,key)):void 0},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;if(elem)return type=(type||"fx")+"queue",queue=jQuery._data(elem,type),data&&(!queue||jQuery.isArray(data)?queue=jQuery._data(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,next,hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue"),jQuery._removeData(elem,key)})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):void 0===data?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=void 0),type=type||"fx";i--;)(tmp=jQuery._data(elements[i],type+"queueHooks"))&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}}),function(){var shrinkWrapBlocksVal;support.shrinkWrapBlocks=function(){if(null!=shrinkWrapBlocksVal)return shrinkWrapBlocksVal;shrinkWrapBlocksVal=!1;var div,body,container;return(body=document.getElementsByTagName("body")[0])&&body.style?(div=document.createElement("div"),container=document.createElement("div"),container.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),void 0!==div.style.zoom&&(div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",div.appendChild(document.createElement("div")).style.width="5px",shrinkWrapBlocksVal=3!==div.offsetWidth),body.removeChild(container),shrinkWrapBlocksVal):void 0}}();var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),cssExpand=["Top","Right","Bottom","Left"],isHidden=function(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)},access=function access(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=null==key;if("object"===jQuery.type(key)){chainable=!0;for(i in key)access(elems,fn,i,key[i],!0,emptyGet,raw)}else if(void 0!==value&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;i<length;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},rcheckableType=/^(?:checkbox|radio)$/i,rtagName=/<([\w:-]+)/,rscriptType=/^$|\/(?:java|ecma)script/i,rleadingWhitespace=/^\s+/,nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";!function(){var div=document.createElement("div"),fragment=document.createDocumentFragment(),input=document.createElement("input");div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",support.leadingWhitespace=3===div.firstChild.nodeType,support.tbody=!div.getElementsByTagName("tbody").length,support.htmlSerialize=!!div.getElementsByTagName("link").length,support.html5Clone="<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,input.type="checkbox",input.checked=!0,fragment.appendChild(input),support.appendChecked=input.checked,div.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue,fragment.appendChild(div),input=document.createElement("input"),input.setAttribute("type","radio"),input.setAttribute("checked","checked"),input.setAttribute("name","t"),div.appendChild(input),support.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,support.noCloneEvent=!!div.addEventListener,div[jQuery.expando]=1,support.attributes=!div.getAttribute(jQuery.expando)}();var wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var rhtml=/<|&#?\w+;/,rtbody=/<tbody/i;!function(){var i,eventName,div=document.createElement("div");for(i in{submit:!0,change:!0,focusin:!0})eventName="on"+i,(support[i]=eventName in window)||(div.setAttribute(eventName,"t"),support[i]=!1===div.attributes[eventName].expando);div=null}();var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(elemData){for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return void 0===jQuery||e&&jQuery.event.triggered===e.type?void 0:jQuery.event.dispatch.apply(eventHandle.elem,arguments)},eventHandle.elem=elem),types=(types||"").match(rnotwhite)||[""],t=types.length;t--;)tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||(handlers=events[type]=[],handlers.delegateCount=0,special.setup&&!1!==special.setup.call(elem,data,namespaces,eventHandle)||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0);elem=null}},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(types=(types||"").match(rnotwhite)||[""],t=types.length;t--;)if(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,handlers=events[type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&!1!==special.teardown.call(elem,namespaces,elemData.handle)||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,jQuery._removeData(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,special,tmp,i,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf(".")>-1&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,event=event[jQuery.expando]?event:new jQuery.Event(type,"object"===(void 0===event?"undefined":_typeof(event))&&event),event.isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=void 0,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||!1!==special.trigger.apply(elem,data))){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=i>1?bubbleType:special.bindType||type,handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"),handle&&handle.apply(cur,data),(handle=ontype&&cur[ontype])&&handle.apply&&acceptData(cur)&&(event.result=handle.apply(cur,data),!1===event.result&&event.preventDefault());if(event.type=type,!onlyHandlers&&!event.isDefaultPrevented()&&(!special._default||!1===special._default.apply(eventPath.pop(),data))&&acceptData(elem)&&ontype&&elem[type]&&!jQuery.isWindow(elem)){tmp=elem[ontype],tmp&&(elem[ontype]=null),jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=void 0,tmp&&(elem[ontype]=tmp)}return event.result}},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=_slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if(args[0]=event,event.delegateTarget=this,!special.preDispatch||!1!==special.preDispatch.call(this,event)){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)event.rnamespace&&!event.rnamespace.test(handleObj.namespace)||(event.handleObj=handleObj,event.data=handleObj.data,void 0!==(ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args))&&!1===(event.result=ret)&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,_handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=_handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&("click"!==event.type||isNaN(event.button)||event.button<1))for(;cur!=this;cur=cur.parentNode||this)if(1===cur.nodeType&&(!0!==cur.disabled||"click"!==event.type)){for(matches=[],i=0;i<delegateCount;i++)handleObj=_handlers[i],sel=handleObj.selector+" ",void 0===matches[sel]&&(matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>-1:jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<_handlers.length&&handlerQueue.push({elem:this,handlers:_handlers.slice(delegateCount)}),handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)prop=copy[i],event[prop]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),event.metaKey=!!event.metaKey,fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;return null==event.pageX&&null!=original.clientX&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||void 0===button||(event.which=1&button?1:2&button?3:4&button?2:0),event}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(jQuery.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){void 0!==event.result&&event.originalEvent&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0});jQuery.event.trigger(e,null,elem),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle)}:function(elem,type,handle){var name="on"+type;elem.detachEvent&&(void 0===elem[name]&&(elem[name]=null),elem.detachEvent(name,handle))},jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||void 0===src.defaultPrevented&&!1===src.returnValue?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&!this.isSimulated&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;return related&&(related===target||jQuery.contains(target,related))||(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),support.submit||(jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?jQuery.prop(elem,"form"):void 0;form&&!jQuery._data(form,"submit")&&(jQuery.event.add(form,"submit._submit",function(event){event._submitBubble=!0}),jQuery._data(form,"submit",!0))})},postDispatch:function(event){event._submitBubble&&(delete event._submitBubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event))},teardown:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.remove(this,"._submit")}}),support.change||(jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(jQuery.event.add(this,"propertychange._change",function(event){"checked"===event.originalEvent.propertyName&&(this._justChanged=!0)}),jQuery.event.add(this,"click._change",function(event){this._justChanged&&!event.isTrigger&&(this._justChanged=!1),jQuery.event.simulate("change",this,event)})),!1;jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!jQuery._data(elem,"change")&&(jQuery.event.add(elem,"change._change",function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event)}),jQuery._data(elem,"change",!0))})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type)return event.handleObj.handler.apply(this,arguments)},teardown:function(){return jQuery.event.remove(this,"._change"),!rformElems.test(this.nodeName)}}),support.focusin||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event))};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix);attaches||doc.addEventListener(orig,handler,!0),jQuery._data(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix)-1;attaches?jQuery._data(doc,fix,attaches):(doc.removeEventListener(orig,handler,!0),jQuery._removeData(doc,fix))}}}),jQuery.fn.extend({on:function(types,selector,data,fn){return _on(this,types,selector,data,fn)},one:function(types,selector,data,fn){return _on(this,types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"===(void 0===types?"undefined":_typeof(types))){for(type in types)this.off(type,selector,types[type]);return this}return!1!==selector&&"function"!=typeof selector||(fn=selector,selector=void 0),!1===fn&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,elem,!0)}});var rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"<$1></$2>")},clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?clone=elem.cloneNode(!0):(fragmentDiv.innerHTML=elem.outerHTML,fragmentDiv.removeChild(clone=fragmentDiv.firstChild)),!(support.noCloneEvent&&support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0;null!=(node=srcElements[i]);++i)destElements[i]&&fixCloneNodeIssues(node,destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0;null!=(node=srcElements[i]);i++)cloneCopyEvent(node,destElements[i]);else cloneCopyEvent(elem,clone);return destElements=getAll(clone,"script"),destElements.length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),destElements=srcElements=node=null,clone},cleanData:function(elems,forceAcceptData){for(var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,attributes=support.attributes,special=jQuery.event.special;null!=(elem=elems[i]);i++)if((forceAcceptData||acceptData(elem))&&(id=elem[internalKey],data=id&&cache[id])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);cache[id]&&(delete cache[id],attributes||void 0===elem.removeAttribute?elem[internalKey]=void 0:elem.removeAttribute(internalKey),deletedIds.push(id))}}}),jQuery.fn.extend({domManip:domManip,detach:function(selector){return _remove(this,selector,!0)},remove:function(selector){return _remove(this,selector)},text:function(value){return access(this,function(value){return void 0===value?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},append:function(){return domManip(this,arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){manipulationTarget(this,elem).appendChild(elem)}})},prepend:function(){return domManip(this,arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return domManip(this,arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return domManip(this,arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++){for(1===elem.nodeType&&jQuery.cleanData(getAll(elem,!1));elem.firstChild;)elem.removeChild(elem.firstChild);elem.options&&jQuery.nodeName(elem,"select")&&(elem.options.length=0)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null!=dataAndEvents&&dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(void 0===value)return 1===elem.nodeType?elem.innerHTML.replace(rinlinejQuery,""):void 0;if("string"==typeof value&&!rnoInnerhtml.test(value)&&(support.htmlSerialize||!rnoshimcache.test(value))&&(support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++)elem=this[i]||{},1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;jQuery.inArray(this,ignored)<0&&(jQuery.cleanData(getAll(this)),parent&&parent.replaceChild(elem,this))},ignored)}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;i<=last;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),push.apply(ret,elems.get());return this.pushStack(ret)}});var iframe,elemdisplay={HTML:"block",BODY:"block"},rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),swap=function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret},documentElement=document.documentElement;!function(){function computeStyleTests(){var contents,divStyle,documentElement=document.documentElement;documentElement.appendChild(container),div.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",pixelPositionVal=boxSizingReliableVal=reliableMarginLeftVal=!1,pixelMarginRightVal=reliableMarginRightVal=!0,window.getComputedStyle&&(divStyle=window.getComputedStyle(div),pixelPositionVal="1%"!==(divStyle||{}).top,reliableMarginLeftVal="2px"===(divStyle||{}).marginLeft,boxSizingReliableVal="4px"===(divStyle||{width:"4px"}).width,div.style.marginRight="50%",pixelMarginRightVal="4px"===(divStyle||{marginRight:"4px"}).marginRight,contents=div.appendChild(document.createElement("div")),contents.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",contents.style.marginRight=contents.style.width="0",div.style.width="1px",reliableMarginRightVal=!parseFloat((window.getComputedStyle(contents)||{}).marginRight),div.removeChild(contents)),div.style.display="none",reliableHiddenOffsetsVal=0===div.getClientRects().length,reliableHiddenOffsetsVal&&(div.style.display="",div.innerHTML="<table><tr><td></td><td>t</td></tr></table>",div.childNodes[0].style.borderCollapse="separate",contents=div.getElementsByTagName("td"),contents[0].style.cssText="margin:0;border:0;padding:0;display:none",(reliableHiddenOffsetsVal=0===contents[0].offsetHeight)&&(contents[0].style.display="",contents[1].style.display="none",reliableHiddenOffsetsVal=0===contents[0].offsetHeight)),documentElement.removeChild(container)}
var pixelPositionVal,pixelMarginRightVal,boxSizingReliableVal,reliableHiddenOffsetsVal,reliableMarginRightVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");div.style&&(div.style.cssText="float:left;opacity:.5",support.opacity="0.5"===div.style.opacity,support.cssFloat=!!div.style.cssFloat,div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,container=document.createElement("div"),container.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",div.innerHTML="",container.appendChild(div),support.boxSizing=""===div.style.boxSizing||""===div.style.MozBoxSizing||""===div.style.WebkitBoxSizing,jQuery.extend(support,{reliableHiddenOffsets:function(){return null==pixelPositionVal&&computeStyleTests(),reliableHiddenOffsetsVal},boxSizingReliable:function(){return null==pixelPositionVal&&computeStyleTests(),boxSizingReliableVal},pixelMarginRight:function(){return null==pixelPositionVal&&computeStyleTests(),pixelMarginRightVal},pixelPosition:function(){return null==pixelPositionVal&&computeStyleTests(),pixelPositionVal},reliableMarginRight:function(){return null==pixelPositionVal&&computeStyleTests(),reliableMarginRightVal},reliableMarginLeft:function(){return null==pixelPositionVal&&computeStyleTests(),reliableMarginLeftVal}}))}();var getStyles,curCSS,rposition=/^(top|right|bottom|left)$/;window.getComputedStyle?(getStyles=function(elem){var view=elem.ownerDocument.defaultView;return view&&view.opener||(view=window),view.getComputedStyle(elem)},curCSS=function(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;return computed=computed||getStyles(elem),ret=computed?computed.getPropertyValue(name)||computed[name]:void 0,""!==ret&&void 0!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),computed&&!support.pixelMarginRight()&&rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth),void 0===ret?ret:ret+""}):documentElement.currentStyle&&(getStyles=function(elem){return elem.currentStyle},curCSS=function(elem,name,computed){var left,rs,rsLeft,ret,style=elem.style;return computed=computed||getStyles(elem),ret=computed?computed[name]:void 0,null==ret&&style&&style[name]&&(ret=style[name]),rnumnonpx.test(ret)&&!rposition.test(name)&&(left=style.left,rs=elem.runtimeStyle,rsLeft=rs&&rs.left,rsLeft&&(rs.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(rs.left=rsLeft)),void 0===ret?ret:ret+""||"auto"});var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/i,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"],emptyStyle=document.createElement("div").style;jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],void 0===value)return hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,!1,extra))?ret:style[name];if(type=void 0===value?"undefined":_typeof(value),"string"===type&&(ret=rcssNum.exec(value))&&ret[1]&&(value=adjustCSS(elem,name,ret),type="number"),null!=value&&value===value&&("number"===type&&(value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px")),support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),!(hooks&&"set"in hooks&&void 0===(value=hooks.set(elem,value,extra)))))try{style[name]=value}catch(e){}}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],hooks&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),void 0===val&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),!0===extra||isFinite(num)?num||0:val):val}}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return rdisplayswap.test(jQuery.css(elem,"display"))&&0===elem.offsetWidth?swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1,(value>=1||""===value)&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute&&(style.removeAttribute("filter"),""===value||currentStyle&&!currentStyle.filter)||(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed)return swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}),jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed)return(parseFloat(curCSS(elem,"marginLeft"))||(jQuery.contains(elem.ownerDocument,elem)?elem.getBoundingClientRect().left-swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left}):0))+"px"}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)}),jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;i<len;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return void 0!==value?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||jQuery.easing._default,this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return 1!==tween.elem.nodeType||null!=tween.elem[tween.prop]&&null==tween.elem.style[tween.prop]?tween.elem[tween.prop]:(result=jQuery.css(tween.elem,tween.prop,""),result&&"auto"!==result?result:0)},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):1!==tween.elem.nodeType||null==tween.elem.style[jQuery.cssProps[tween.prop]]&&!jQuery.cssHooks[tween.prop]?tween.elem[tween.prop]=tween.now:jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2},_default:"swing"},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);return adjustCSS(tween.elem,prop,rcssNum.exec(value),tween),tween}]},tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.match(rnotwhite);for(var prop,index=0,length=props.length;index<length;index++)prop=props[index],Animation.tweeners[prop]=Animation.tweeners[prop]||[],Animation.tweeners[prop].unshift(callback)},prefilters:[defaultPrefilter],prefilter:function(callback,prepend){prepend?Animation.prefilters.unshift(callback):Animation.prefilters.push(callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"===(void 0===speed?"undefined":_typeof(speed))?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,null!=opt.queue&&!0!==opt.queue||(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||jQuery._data(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||!1===optall.queue?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=void 0),clearQueue&&!1!==type&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));!dequeue&&gotoEnd||jQuery.dequeue(this,type)})},finish:function(type){return!1!==type&&(type=type||"fx"),this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;index<length;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.timers=[],jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(fxNow=jQuery.now();i<timers.length;i++)(timer=timers[i])()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=void 0},jQuery.fx.timer=function(timer){jQuery.timers.push(timer),timer()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=window.setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){window.clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout)}})},function(){var a,input=document.createElement("input"),div=document.createElement("div"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));div=document.createElement("div"),div.setAttribute("className","t"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=div.getElementsByTagName("a")[0],input.setAttribute("type","checkbox"),div.appendChild(input),a=div.getElementsByTagName("a")[0],a.style.cssText="top:1px",support.getSetAttribute="t"!==div.className,support.style=/top/.test(a.getAttribute("style")),support.hrefNormalized="/a"===a.getAttribute("href"),support.checkOn=!!input.value,support.optSelected=opt.selected,support.enctype=!!document.createElement("form").enctype,select.disabled=!0,support.optDisabled=!opt.disabled,input=document.createElement("input"),input.setAttribute("value",""),support.input=""===input.getAttribute("value"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value}();var rreturn=/\r/g,rspaces=/[\x20\t\r\n\f]+/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];{if(arguments.length)return isFunction=jQuery.isFunction(value),this.each(function(i){var val;1===this.nodeType&&(val=isFunction?value.call(this,i,jQuery(this).val()):value,null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),(hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()])&&"set"in hooks&&void 0!==hooks.set(this,val,"value")||(this.value=val))});if(elem)return(hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()])&&"get"in hooks&&void 0!==(ret=hooks.get(elem,"value"))?ret:(ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret)}}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:jQuery.trim(jQuery.text(elem)).replace(rspaces," ")}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;i<max;i++)if(option=options[i],(option.selected||i===index)&&(support.optDisabled?!option.disabled:null===option.getAttribute("disabled"))&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)if(option=options[i],jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1)try{option.selected=optionSet=!0}catch(_){option.scrollHeight}else option.selected=!1;return optionSet||(elem.selectedIndex=-1),options}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value))return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>-1}},support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})});var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=support.getSetAttribute,getSetInput=support.input;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}}),jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(3!==nType&&8!==nType&&2!==nType)return void 0===elem.getAttribute?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)),void 0!==value?null===value?void jQuery.removeAttr(elem,name):hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:(elem.setAttribute(name,value+""),value):hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:(ret=jQuery.find.attr(elem,name),null==ret?void 0:ret))},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name)?getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem[propName]=!1:elem[jQuery.camelCase("default-"+name)]=elem[propName]=!1:jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName)}}),boolHook={set:function(elem,value,name){return!1===value?jQuery.removeAttr(elem,name):getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name):elem[jQuery.camelCase("default-"+name)]=elem[name]=!0,name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;getSetInput&&getSetAttribute||!ruseDefault.test(name)?attrHandle[name]=function(elem,name,isXML){var ret,handle;return isXML||(handle=attrHandle[name],attrHandle[name]=ret,ret=null!=getter(elem,name,isXML)?name.toLowerCase():null,attrHandle[name]=handle),ret}:attrHandle[name]=function(elem,name,isXML){if(!isXML)return elem[jQuery.camelCase("default-"+name)]?name.toLowerCase():null}}),getSetInput&&getSetAttribute||(jQuery.attrHooks.value={set:function(elem,value,name){if(!jQuery.nodeName(elem,"input"))return nodeHook&&nodeHook.set(elem,value,name);elem.defaultValue=value}}),getSetAttribute||(nodeHook={set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(ret||elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name)),ret.value=value+="","value"===name||value===elem.getAttribute(name))return value}},attrHandle.id=attrHandle.name=attrHandle.coords=function(elem,name,isXML){var ret;if(!isXML)return(ret=elem.getAttributeNode(name))&&""!==ret.value?ret.value:null},jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);if(ret&&ret.specified)return ret.value},set:nodeHook.set},jQuery.attrHooks.contenteditable={set:function(elem,value,name){nodeHook.set(elem,""!==value&&value,name)}},jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]={set:function(elem,value){if(""===value)return elem.setAttribute(name,"auto"),value}}})),support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||void 0},set:function(elem,value){return elem.style.cssText=value+""}});var rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=void 0,delete this[name]}catch(e){}})}}),jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(3!==nType&&8!==nType&&2!==nType)return 1===nType&&jQuery.isXMLDoc(elem)||(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),void 0!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),support.hrefNormalized||jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}}),support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null},set:function(elem){var parent=elem.parentNode;parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex)}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this}),support.enctype||(jQuery.propFix.enctype="encoding");var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)))});if("string"==typeof value&&value)for(classes=value.match(rnotwhite)||[];elem=this[i++];)if(curValue=getClass(elem),cur=1===elem.nodeType&&(" "+curValue+" ").replace(rclass," ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");finalValue=jQuery.trim(cur),curValue!==finalValue&&jQuery.attr(elem,"class",finalValue)}return this},removeClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof value&&value)for(classes=value.match(rnotwhite)||[];elem=this[i++];)if(curValue=getClass(elem),cur=1===elem.nodeType&&(" "+curValue+" ").replace(rclass," ")){for(j=0;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>-1;)cur=cur.replace(" "+clazz+" "," ");finalValue=jQuery.trim(cur),curValue!==finalValue&&jQuery.attr(elem,"class",finalValue)}return this},toggleClass:function(value,stateVal){var type=void 0===value?"undefined":_typeof(value);return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal)}):this.each(function(){var className,i,self,classNames;if("string"===type)for(i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else void 0!==value&&"boolean"!==type||(className=getClass(this),className&&jQuery._data(this,"__className__",className),jQuery.attr(this,"class",className||!1===value?"":jQuery._data(this,"__className__")||""))})},hasClass:function(selector){var className,elem,i=0;for(className=" "+selector+" ";elem=this[i++];)if(1===elem.nodeType&&(" "+getClass(elem)+" ").replace(rclass," ").indexOf(className)>-1)return!0;return!1}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});var location=window.location,nonce=jQuery.now(),rquery=/\?/,rvalidtokens=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;jQuery.parseJSON=function(data){if(window.JSON&&window.JSON.parse)return window.JSON.parse(data+"");var requireNonComma,depth=null,str=jQuery.trim(data+"");return str&&!jQuery.trim(str.replace(rvalidtokens,function(token,comma,open,close){return requireNonComma&&comma&&(depth=0),0===depth?token:(requireNonComma=open||comma,depth+=!close-!open,"")}))?Function("return "+str)():jQuery.error("Invalid JSON: "+data)},jQuery.parseXML=function(data){var xml,tmp;if(!data||"string"!=typeof data)return null;try{window.DOMParser?(tmp=new window.DOMParser,xml=tmp.parseFromString(data,"text/xml")):(xml=new window.ActiveXObject("Microsoft.XMLDOM"),xml.async="false",xml.loadXML(data))}catch(e){xml=void 0}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml};var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*"),ajaxLocation=location.href,ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&window.clearTimeout(timeoutTimer),transport=void 0,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,isSuccess=status>=200&&status<300||304===status,responses&&(response=ajaxHandleResponses(s,jqXHR,responses)),response=ajaxConvert(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&(modified=jqXHR.getResponseHeader("Last-Modified"),modified&&(jQuery.lastModified[cacheURL]=modified),(modified=jqXHR.getResponseHeader("etag"))&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,error=response.error,isSuccess=!error)):(error=statusText,!status&&statusText||(statusText="error",status<0&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(_statusCode),_statusCode=void 0,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}"object"===(void 0===url?"undefined":_typeof(url))&&(options=url,url=void 0),options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),_statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(state<2)for(code in map)_statusCode[code]=[_statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;fireGlobals=jQuery.event&&s.global,fireGlobals&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),!1===s.cache&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&!1!==s.contentType||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i])
;if(s.beforeSend&&(!1===s.beforeSend.call(callbackContext,jqXHR,s)||2===state))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){if(jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),2===state)return jqXHR;s.async&&s.timeout>0&&(timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(state<2))throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,void 0,callback,"script")}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=void 0),jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url))}}),jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},jQuery.fn.extend({wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(elem){return support.reliableHiddenOffsets()?elem.offsetWidth<=0&&elem.offsetHeight<=0&&!elem.getClientRects().length:filterHidden(elem)},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(void 0===traditional&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=void 0!==window.ActiveXObject?function(){return this.isLocal?createActiveXHR():document.documentMode>8?createStandardXHR():/^(get|post|head|put|delete|options)$/i.test(this.type)&&createStandardXHR()||createActiveXHR()}:createStandardXHR;var xhrId=0,xhrCallbacks={},xhrSupported=jQuery.ajaxSettings.xhr();window.attachEvent&&window.attachEvent("onunload",function(){for(var key in xhrCallbacks)xhrCallbacks[key](void 0,!0)}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,xhrSupported=support.ajax=!!xhrSupported,xhrSupported&&jQuery.ajaxTransport(function(options){if(!options.crossDomain||support.cors){var _callback;return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];options.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(options.mimeType),options.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");for(i in headers)void 0!==headers[i]&&xhr.setRequestHeader(i,headers[i]+"");xhr.send(options.hasContent&&options.data||null),_callback=function(_,isAbort){var status,statusText,responses;if(_callback&&(isAbort||4===xhr.readyState))if(delete xhrCallbacks[id],_callback=void 0,xhr.onreadystatechange=jQuery.noop,isAbort)4!==xhr.readyState&&xhr.abort();else{responses={},status=xhr.status,"string"==typeof xhr.responseText&&(responses.text=xhr.responseText);try{statusText=xhr.statusText}catch(e){statusText=""}status||!options.isLocal||options.crossDomain?1223===status&&(status=204):status=responses.text?200:404}responses&&complete(status,statusText,responses,xhr.getAllResponseHeaders())},options.async?4===xhr.readyState?window.setTimeout(_callback):xhr.onreadystatechange=xhrCallbacks[id]=_callback:_callback()},abort:function(){_callback&&_callback(void 0,!0)}}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script"),script.async=!0,s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(void 0,!0)}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=!1!==s.jsonp&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&0===(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||"jsonp"===s.dataTypes[0])return callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):!1!==s.jsonp&&(s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){void 0===overwritten?jQuery(window).removeProp(callbackName):window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=void 0}),"script"}),jQuery.parseHTML=function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=buildFragment([data],context,scripts),scripts&&scripts.length&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,type,response,self=this,off=url.indexOf(" ");return off>-1&&(selector=jQuery.trim(url.slice(off,url.length)),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=void 0):params&&"object"===(void 0===params?"undefined":_typeof(params))&&(type="POST"),self.length>0&&jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR])})}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length},jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};"static"===position&&(elem.style.position="relative"),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,jQuery.extend({},curOffset))),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({offset:function(options){if(arguments.length)return void 0===options?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(doc)return docElem=doc.documentElement,jQuery.contains(docElem,elem)?(void 0!==elem.getBoundingClientRect&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}):box},position:function(){if(this[0]){var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||documentElement})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(void 0===val)return win?prop in win?win[prop]:win.document.documentElement[method]:elem[method];win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val},method,val,arguments.length,null)}}),jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed)return computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed})}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(!0===margin||!0===value?"margin":"border");return access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):void 0===value?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:void 0,chainable,null)}})}),jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},noGlobal||(window.jQuery=window.$=jQuery),jQuery}),function(window,document,$,undefined){"use strict";var W=$(window),D=$(document),F=$.fancybox=function(){F.open.apply(this,arguments)},IE=navigator.userAgent.match(/msie/),didUpdate=null,isTouch=void 0!==document.createTouch,isQuery=function(obj){return obj&&obj.hasOwnProperty&&obj instanceof $},isString=function(str){return str&&"string"===$.type(str)},isPercentage=function(str){return isString(str)&&str.indexOf("%")>0},isScrollable=function(el){return el&&!(el.style.overflow&&"hidden"===el.style.overflow)&&(el.clientWidth&&el.scrollWidth>el.clientWidth||el.clientHeight&&el.scrollHeight>el.clientHeight)},getScalar=function(orig,dim){var value=parseInt(orig,10)||0;return dim&&isPercentage(orig)&&(value=F.getViewport()[dim]/100*value),Math.ceil(value)},getValue=function(value,dim){return getScalar(value,dim)+"px"};$.extend(F,{version:"2.1.4",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!isTouch,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(IE?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:$.noop,beforeLoad:$.noop,afterLoad:$.noop,beforeShow:$.noop,afterShow:$.noop,beforeChange:$.noop,beforeClose:$.noop,afterClose:$.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(group,opts){if(group&&($.isPlainObject(opts)||(opts={}),!1!==F.close(!0)))return $.isArray(group)||(group=isQuery(group)?$(group).get():[group]),$.each(group,function(i,element){var href,title,content,type,rez,hrefParts,selector,obj={};"object"===$.type(element)&&(element.nodeType&&(element=$(element)),isQuery(element)?(obj={href:element.data("fancybox-href")||element.attr("href"),title:element.data("fancybox-title")||element.attr("title"),isDom:!0,element:element},$.metadata&&$.extend(!0,obj,element.metadata())):obj=element),href=opts.href||obj.href||(isString(element)?element:null),title=void 0!==opts.title?opts.title:obj.title||"",content=opts.content||obj.content,type=content?"html":opts.type||obj.type,!type&&obj.isDom&&((type=element.data("fancybox-type"))||(rez=element.prop("class").match(/fancybox\.(\w+)/),type=rez?rez[1]:null)),isString(href)&&(type||(F.isImage(href)?type="image":F.isSWF(href)?type="swf":"#"===href.charAt(0)?type="inline":isString(element)&&(type="html",content=element)),"ajax"===type&&(hrefParts=href.split(/\s+/,2),href=hrefParts.shift(),selector=hrefParts.shift())),content||("inline"===type?href?content=$(isString(href)?href.replace(/.*(?=#[^\s]+$)/,""):href):obj.isDom&&(content=element):"html"===type?content=href:type||href||!obj.isDom||(type="inline",content=element)),$.extend(obj,{href:href,type:type,content:content,title:title,selector:selector}),group[i]=obj}),F.opts=$.extend(!0,{},F.defaults,opts),void 0!==opts.keys&&(F.opts.keys=!!opts.keys&&$.extend({},F.defaults.keys,opts.keys)),F.group=group,F._start(F.opts.index)},cancel:function(){var coming=F.coming;coming&&!1!==F.trigger("onCancel")&&(F.hideLoading(),F.ajaxLoad&&F.ajaxLoad.abort(),F.ajaxLoad=null,F.imgPreload&&(F.imgPreload.onload=F.imgPreload.onerror=null),coming.wrap&&coming.wrap.stop(!0,!0).trigger("onReset").remove(),F.coming=null,F.current||F._afterZoomOut(coming))},close:function(event){F.cancel(),!1!==F.trigger("beforeClose")&&(F.unbindEvents(),F.isActive&&(F.isOpen&&!0!==event?(F.isOpen=F.isOpened=!1,F.isClosing=!0,$(".fancybox-item, .fancybox-nav").remove(),F.wrap.stop(!0,!0).removeClass("fancybox-opened"),F.transitions[F.current.closeMethod]()):($(".fancybox-wrap").stop(!0).trigger("onReset").remove(),F._afterZoomOut())))},play:function(action){var clear=function(){clearTimeout(F.player.timer)},set=function(){clear(),F.current&&F.player.isActive&&(F.player.timer=setTimeout(F.next,F.current.playSpeed))},stop=function(){clear(),$("body").unbind(".player"),F.player.isActive=!1,F.trigger("onPlayEnd")};!0===action||!F.player.isActive&&!1!==action?function(){F.current&&(F.current.loop||F.current.index<F.group.length-1)&&(F.player.isActive=!0,$("body").bind({"afterShow.player onUpdate.player":set,"onCancel.player beforeClose.player":stop,"beforeLoad.player":clear}),set(),F.trigger("onPlayStart"))}():stop()},next:function(direction){var current=F.current;current&&(isString(direction)||(direction=current.direction.next),F.jumpto(current.index+1,direction,"next"))},prev:function(direction){var current=F.current;current&&(isString(direction)||(direction=current.direction.prev),F.jumpto(current.index-1,direction,"prev"))},jumpto:function(index,direction,router){var current=F.current;current&&(index=getScalar(index),F.direction=direction||current.direction[index>=current.index?"next":"prev"],F.router=router||"jumpto",current.loop&&(index<0&&(index=current.group.length+index%current.group.length),index%=current.group.length),void 0!==current.group[index]&&(F.cancel(),F._start(index)))},reposition:function(e,onlyAbsolute){var pos,current=F.current,wrap=current?current.wrap:null;wrap&&(pos=F._getPosition(onlyAbsolute),e&&"scroll"===e.type?(delete pos.position,wrap.stop(!0,!0).animate(pos,200)):(wrap.css(pos),current.pos=$.extend({},current.dim,pos)))},update:function(e){var type=e&&e.type,anyway=!type||"orientationchange"===type;anyway&&(clearTimeout(didUpdate),didUpdate=null),F.isOpen&&!didUpdate&&(didUpdate=setTimeout(function(){var current=F.current;current&&!F.isClosing&&(F.wrap.removeClass("fancybox-tmp"),(anyway||"load"===type||"resize"===type&&current.autoResize)&&F._setDimension(),"scroll"===type&&current.canShrink||F.reposition(e),F.trigger("onUpdate"),didUpdate=null)},anyway&&!isTouch?0:300))},toggle:function(action){F.isOpen&&(F.current.fitToView="boolean"===$.type(action)?action:!F.current.fitToView,isTouch&&(F.wrap.removeAttr("style").addClass("fancybox-tmp"),F.trigger("onUpdate")),F.update())},hideLoading:function(){D.unbind(".loading"),$("#fancybox-loading").remove()},showLoading:function(){var el,viewport;F.hideLoading(),el=$('<div id="fancybox-loading"><div></div></div>').click(F.cancel).appendTo("body"),D.bind("keydown.loading",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),F.cancel())}),F.defaults.fixed||(viewport=F.getViewport(),el.css({position:"absolute",top:.5*viewport.h+viewport.y,left:.5*viewport.w+viewport.x}))},getViewport:function(){var locked=F.current&&F.current.locked||!1,rez={x:W.scrollLeft(),y:W.scrollTop()};return locked?(rez.w=locked[0].clientWidth,rez.h=locked[0].clientHeight):(rez.w=isTouch&&window.innerWidth?window.innerWidth:W.width(),rez.h=isTouch&&window.innerHeight?window.innerHeight:W.height()),rez},unbindEvents:function(){F.wrap&&isQuery(F.wrap)&&F.wrap.unbind(".fb"),D.unbind(".fb"),W.unbind(".fb")},bindEvents:function(){var keys,current=F.current;current&&(W.bind("orientationchange.fb"+(isTouch?"":" resize.fb")+(current.autoCenter&&!current.locked?" scroll.fb":""),F.update),keys=current.keys,keys&&D.bind("keydown.fb",function(e){var code=e.which||e.keyCode,target=e.target||e.srcElement;if(27===code&&F.coming)return!1;e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||target&&(target.type||$(target).is("[contenteditable]"))||$.each(keys,function(i,val){return current.group.length>1&&void 0!==val[code]?(F[i](val[code]),e.preventDefault(),!1):$.inArray(code,val)>-1?(F[i](),e.preventDefault(),!1):void 0})}),$.fn.mousewheel&&current.mouseWheel&&F.wrap.bind("mousewheel.fb",function(e,delta,deltaX,deltaY){for(var target=e.target||null,parent=$(target),canScroll=!1;parent.length&&!(canScroll||parent.is(".fancybox-skin")||parent.is(".fancybox-wrap"));)canScroll=isScrollable(parent[0]),parent=$(parent).parent();0===delta||canScroll||F.group.length>1&&!current.canShrink&&(deltaY>0||deltaX>0?F.prev(deltaY>0?"down":"left"):(deltaY<0||deltaX<0)&&F.next(deltaY<0?"up":"right"),e.preventDefault())}))},trigger:function(event,o){var ret,obj=o||F.coming||F.current;if(obj){if($.isFunction(obj[event])&&(ret=obj[event].apply(obj,Array.prototype.slice.call(arguments,1))),!1===ret)return!1;obj.helpers&&$.each(obj.helpers,function(helper,opts){opts&&F.helpers[helper]&&$.isFunction(F.helpers[helper][event])&&(opts=$.extend(!0,{},F.helpers[helper].defaults,opts),F.helpers[helper][event](opts,obj))}),$.event.trigger(event+".fb")}},isImage:function(str){return isString(str)&&str.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i)},isSWF:function(str){return isString(str)&&str.match(/\.(swf)((\?|#).*)?$/i)},_start:function(index){var obj,href,type,margin,padding,coming={};if(index=getScalar(index),!(obj=F.group[index]||null))return!1;if(coming=$.extend(!0,{},F.opts,obj),margin=coming.margin,padding=coming.padding,"number"===$.type(margin)&&(coming.margin=[margin,margin,margin,margin]),"number"===$.type(padding)&&(coming.padding=[padding,padding,padding,padding]),coming.modal&&$.extend(!0,coming,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),coming.autoSize&&(coming.autoWidth=coming.autoHeight=!0),"auto"===coming.width&&(coming.autoWidth=!0),"auto"===coming.height&&(coming.autoHeight=!0),coming.group=F.group,coming.index=index,F.coming=coming,!1===F.trigger("beforeLoad"))return void(F.coming=null);if(type=coming.type,href=coming.href,!type)return F.coming=null,!(!F.current||!F.router||"jumpto"===F.router)&&(F.current.index=index,F[F.router](F.direction));if(F.isActive=!0,"image"!==type&&"swf"!==type||(coming.autoHeight=coming.autoWidth=!1,coming.scrolling="visible"),"image"===type&&(coming.aspectRatio=!0),"iframe"===type&&isTouch&&(coming.scrolling="scroll"),coming.wrap=$(coming.tpl.wrap).addClass("fancybox-"+(isTouch?"mobile":"desktop")+" fancybox-type-"+type+" fancybox-tmp "+coming.wrapCSS).appendTo(coming.parent||"body"),$.extend(coming,{skin:$(".fancybox-skin",coming.wrap),outer:$(".fancybox-outer",coming.wrap),inner:$(".fancybox-inner",coming.wrap)}),$.each(["Top","Right","Bottom","Left"],function(i,v){coming.skin.css("padding"+v,getValue(coming.padding[i]))}),F.trigger("onReady"),"inline"===type||"html"===type){if(!coming.content||!coming.content.length)return F._error("content")}else if(!href)return F._error("href");"image"===type?F._loadImage():"ajax"===type?F._loadAjax():"iframe"===type?F._loadIframe():F._afterLoad()},_error:function(type){$.extend(F.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:type,content:F.coming.tpl.error}),F._afterLoad()},_loadImage:function(){var img=F.imgPreload=new Image;img.onload=function(){this.onload=this.onerror=null,F.coming.width=this.width,F.coming.height=this.height,F._afterLoad()},img.onerror=function(){this.onload=this.onerror=null,F._error("image")},img.src=F.coming.href,!0!==img.complete&&F.showLoading()},_loadAjax:function(){var coming=F.coming;F.showLoading(),F.ajaxLoad=$.ajax($.extend({},coming.ajax,{url:coming.href,error:function(jqXHR,textStatus){F.coming&&"abort"!==textStatus?F._error("ajax",jqXHR):F.hideLoading()},success:function(data,textStatus){"success"===textStatus&&(coming.content=data,F._afterLoad())}}))},_loadIframe:function(){var coming=F.coming,iframe=$(coming.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",isTouch?"auto":coming.iframe.scrolling).attr("src",coming.href);$(coming.wrap).bind("onReset",function(){try{$(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),coming.iframe.preload&&(F.showLoading(),iframe.one("load",function(){$(this).data("ready",1),isTouch||$(this).bind("load.fb",F.update),$(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),F._afterLoad()})),coming.content=iframe.appendTo(coming.inner),coming.iframe.preload||F._afterLoad()},_preloadImages:function(){var item,i,group=F.group,current=F.current,len=group.length,cnt=current.preload?Math.min(current.preload,len-1):0;for(i=1;i<=cnt;i+=1)item=group[(current.index+i)%len],"image"===item.type&&item.href&&((new Image).src=item.href)},_afterLoad:function(){var current,content,type,scrolling,href,embed,coming=F.coming,previous=F.current,placeholder="fancybox-placeholder";if(F.hideLoading(),coming&&!1!==F.isActive){if(!1===F.trigger("afterLoad",coming,previous))return coming.wrap.stop(!0).trigger("onReset").remove(),void(F.coming=null);switch(previous&&(F.trigger("beforeChange",previous),previous.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),F.unbindEvents(),current=coming,content=coming.content,type=coming.type,scrolling=coming.scrolling,$.extend(F,{wrap:current.wrap,skin:current.skin,outer:current.outer,inner:current.inner,current:current,previous:previous}),href=current.href,type){case"inline":case"ajax":case"html":current.selector?content=$("<div>").html(content).find(current.selector):isQuery(content)&&(content.data(placeholder)||content.data(placeholder,$('<div class="'+placeholder+'"></div>').insertAfter(content).hide()),content=content.show().detach(),current.wrap.bind("onReset",function(){$(this).find(content).length&&content.hide().replaceAll(content.data(placeholder)).data(placeholder,!1)}));break;case"image":content=current.tpl.image.replace("{href}",href);break;case"swf":content='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+href+'"></param>',embed="",$.each(current.swf,function(name,val){content+='<param name="'+name+'" value="'+val+'"></param>',embed+=" "+name+'="'+val+'"'}),content+='<embed src="'+href+'" type="application/x-shockwave-flash" width="100%" height="100%"'+embed+"></embed></object>"}isQuery(content)&&content.parent().is(current.inner)||current.inner.append(content),F.trigger("beforeShow"),current.inner.css("overflow","yes"===scrolling?"scroll":"no"===scrolling?"hidden":scrolling),F._setDimension(),F.reposition(),F.isOpen=!1,F.coming=null,F.bindEvents(),F.isOpened?previous.prevMethod&&F.transitions[previous.prevMethod]():$(".fancybox-wrap").not(current.wrap).stop(!0).trigger("onReset").remove(),F.transitions[F.isOpened?current.nextMethod:current.openMethod](),F._preloadImages()}},_setDimension:function(){var wPadding,hPadding,wSpace,hSpace,origWidth,origHeight,origMaxWidth,origMaxHeight,ratio,width_,height_,maxWidth_,maxHeight_,iframe,body,viewport=F.getViewport(),steps=0,canShrink=!1,canExpand=!1,wrap=F.wrap,skin=F.skin,inner=F.inner,current=F.current,width=current.width,height=current.height,minWidth=current.minWidth,minHeight=current.minHeight,maxWidth=current.maxWidth,maxHeight=current.maxHeight,scrolling=current.scrolling,scrollOut=current.scrollOutside?current.scrollbarWidth:0,margin=current.margin,wMargin=getScalar(margin[1]+margin[3]),hMargin=getScalar(margin[0]+margin[2]);if(wrap.add(skin).add(inner).width("auto").height("auto").removeClass("fancybox-tmp"),wPadding=getScalar(skin.outerWidth(!0)-skin.width()),hPadding=getScalar(skin.outerHeight(!0)-skin.height()),wSpace=wMargin+wPadding,hSpace=hMargin+hPadding,origWidth=isPercentage(width)?(viewport.w-wSpace)*getScalar(width)/100:width,origHeight=isPercentage(height)?(viewport.h-hSpace)*getScalar(height)/100:height,"iframe"===current.type){if(iframe=current.content,current.autoHeight&&1===iframe.data("ready"))try{iframe[0].contentWindow.document.location&&(inner.width(origWidth).height(9999),body=iframe.contents().find("body"),scrollOut&&body.css("overflow-x","hidden"),origHeight=body.height())}catch(e){}}else(current.autoWidth||current.autoHeight)&&(inner.addClass("fancybox-tmp"),current.autoWidth||inner.width(origWidth),current.autoHeight||inner.height(origHeight),current.autoWidth&&(origWidth=inner.width()),current.autoHeight&&(origHeight=inner.height()),inner.removeClass("fancybox-tmp"));if(width=getScalar(origWidth),height=getScalar(origHeight),ratio=origWidth/origHeight,minWidth=getScalar(isPercentage(minWidth)?getScalar(minWidth,"w")-wSpace:minWidth),maxWidth=getScalar(isPercentage(maxWidth)?getScalar(maxWidth,"w")-wSpace:maxWidth),minHeight=getScalar(isPercentage(minHeight)?getScalar(minHeight,"h")-hSpace:minHeight),
maxHeight=getScalar(isPercentage(maxHeight)?getScalar(maxHeight,"h")-hSpace:maxHeight),origMaxWidth=maxWidth,origMaxHeight=maxHeight,current.fitToView&&(maxWidth=Math.min(viewport.w-wSpace,maxWidth),maxHeight=Math.min(viewport.h-hSpace,maxHeight)),maxWidth_=viewport.w-wMargin,maxHeight_=viewport.h-hMargin,current.aspectRatio?(width>maxWidth&&(width=maxWidth,height=getScalar(width/ratio)),height>maxHeight&&(height=maxHeight,width=getScalar(height*ratio)),width<minWidth&&(width=minWidth,height=getScalar(width/ratio)),height<minHeight&&(height=minHeight,width=getScalar(height*ratio))):(width=Math.max(minWidth,Math.min(width,maxWidth)),current.autoHeight&&"iframe"!==current.type&&(inner.width(width),height=inner.height()),height=Math.max(minHeight,Math.min(height,maxHeight))),current.fitToView)if(inner.width(width).height(height),wrap.width(width+wPadding),width_=wrap.width(),height_=wrap.height(),current.aspectRatio)for(;(width_>maxWidth_||height_>maxHeight_)&&width>minWidth&&height>minHeight&&!(steps++>19);)height=Math.max(minHeight,Math.min(maxHeight,height-10)),width=getScalar(height*ratio),width<minWidth&&(width=minWidth,height=getScalar(width/ratio)),width>maxWidth&&(width=maxWidth,height=getScalar(width/ratio)),inner.width(width).height(height),wrap.width(width+wPadding),width_=wrap.width(),height_=wrap.height();else width=Math.max(minWidth,Math.min(width,width-(width_-maxWidth_))),height=Math.max(minHeight,Math.min(height,height-(height_-maxHeight_)));scrollOut&&"auto"===scrolling&&height<origHeight&&width+wPadding+scrollOut<maxWidth_&&(width+=scrollOut),inner.width(width).height(height),wrap.width(width+wPadding),width_=wrap.width(),height_=wrap.height(),canShrink=(width_>maxWidth_||height_>maxHeight_)&&width>minWidth&&height>minHeight,canExpand=current.aspectRatio?width<origMaxWidth&&height<origMaxHeight&&width<origWidth&&height<origHeight:(width<origMaxWidth||height<origMaxHeight)&&(width<origWidth||height<origHeight),$.extend(current,{dim:{width:getValue(width_),height:getValue(height_)},origWidth:origWidth,origHeight:origHeight,canShrink:canShrink,canExpand:canExpand,wPadding:wPadding,hPadding:hPadding,wrapSpace:height_-skin.outerHeight(!0),skinSpace:skin.height()-height}),!iframe&&current.autoHeight&&height>minHeight&&height<maxHeight&&!canExpand&&inner.height("auto")},_getPosition:function(onlyAbsolute){var current=F.current,viewport=F.getViewport(),margin=current.margin,width=F.wrap.width()+margin[1]+margin[3],height=F.wrap.height()+margin[0]+margin[2],rez={position:"absolute",top:margin[0],left:margin[3]};return current.autoCenter&&current.fixed&&!onlyAbsolute&&height<=viewport.h&&width<=viewport.w?rez.position="fixed":current.locked||(rez.top+=viewport.y,rez.left+=viewport.x),rez.top=getValue(Math.max(rez.top,rez.top+(viewport.h-height)*current.topRatio)),rez.left=getValue(Math.max(rez.left,rez.left+(viewport.w-width)*current.leftRatio)),rez},_afterZoomIn:function(){var current=F.current;current&&(F.isOpen=F.isOpened=!0,F.wrap.css("overflow","visible").addClass("fancybox-opened"),F.update(),(current.closeClick||current.nextClick&&F.group.length>1)&&F.inner.css("cursor","pointer").bind("click.fb",function(e){$(e.target).is("a")||$(e.target).parent().is("a")||(e.preventDefault(),F[current.closeClick?"close":"next"]())}),current.closeBtn&&$(current.tpl.closeBtn).appendTo(F.skin).bind("click.fb",function(e){e.preventDefault(),F.close()}),current.arrows&&F.group.length>1&&((current.loop||current.index>0)&&$(current.tpl.prev).appendTo(F.outer).bind("click.fb",F.prev),(current.loop||current.index<F.group.length-1)&&$(current.tpl.next).appendTo(F.outer).bind("click.fb",F.next)),F.trigger("afterShow"),current.loop||current.index!==current.group.length-1?F.opts.autoPlay&&!F.player.isActive&&(F.opts.autoPlay=!1,F.play()):F.play(!1))},_afterZoomOut:function(obj){obj=obj||F.current,$(".fancybox-wrap").trigger("onReset").remove(),$.extend(F,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),F.trigger("afterClose",obj)}}),F.transitions={getOrigPosition:function(){var current=F.current,element=current.element,orig=current.orig,pos={},width=50,height=50,hPadding=current.hPadding,wPadding=current.wPadding,viewport=F.getViewport();return!orig&&current.isDom&&element.is(":visible")&&(orig=element.find("img:first"),orig.length||(orig=element)),isQuery(orig)?(pos=orig.offset(),orig.is("img")&&(width=orig.outerWidth(),height=orig.outerHeight())):(pos.top=viewport.y+(viewport.h-height)*current.topRatio,pos.left=viewport.x+(viewport.w-width)*current.leftRatio),("fixed"===F.wrap.css("position")||current.locked)&&(pos.top-=viewport.y,pos.left-=viewport.x),pos={top:getValue(pos.top-hPadding*current.topRatio),left:getValue(pos.left-wPadding*current.leftRatio),width:getValue(width+wPadding),height:getValue(height+hPadding)}},step:function(now,fx){var ratio,padding,value,prop=fx.prop,current=F.current,wrapSpace=current.wrapSpace,skinSpace=current.skinSpace;"width"!==prop&&"height"!==prop||(ratio=fx.end===fx.start?1:(now-fx.start)/(fx.end-fx.start),F.isClosing&&(ratio=1-ratio),padding="width"===prop?current.wPadding:current.hPadding,value=now-padding,F.skin[prop](getScalar("width"===prop?value:value-wrapSpace*ratio)),F.inner[prop](getScalar("width"===prop?value:value-wrapSpace*ratio-skinSpace*ratio)))},zoomIn:function(){var current=F.current,startPos=current.pos,effect=current.openEffect,elastic="elastic"===effect,endPos=$.extend({opacity:1},startPos);delete endPos.position,elastic?(startPos=this.getOrigPosition(),current.openOpacity&&(startPos.opacity=.1)):"fade"===effect&&(startPos.opacity=.1),F.wrap.css(startPos).animate(endPos,{duration:"none"===effect?0:current.openSpeed,easing:current.openEasing,step:elastic?this.step:null,complete:F._afterZoomIn})},zoomOut:function(){var current=F.current,effect=current.closeEffect,elastic="elastic"===effect,endPos={opacity:.1};elastic&&(endPos=this.getOrigPosition(),current.closeOpacity&&(endPos.opacity=.1)),F.wrap.animate(endPos,{duration:"none"===effect?0:current.closeSpeed,easing:current.closeEasing,step:elastic?this.step:null,complete:F._afterZoomOut})},changeIn:function(){var field,current=F.current,effect=current.nextEffect,startPos=current.pos,endPos={opacity:1},direction=F.direction;startPos.opacity=.1,"elastic"===effect&&(field="down"===direction||"up"===direction?"top":"left","down"===direction||"right"===direction?(startPos[field]=getValue(getScalar(startPos[field])-200),endPos[field]="+=200px"):(startPos[field]=getValue(getScalar(startPos[field])+200),endPos[field]="-=200px")),"none"===effect?F._afterZoomIn():F.wrap.css(startPos).animate(endPos,{duration:current.nextSpeed,easing:current.nextEasing,complete:F._afterZoomIn})},changeOut:function(){var previous=F.previous,effect=previous.prevEffect,endPos={opacity:.1},direction=F.direction;"elastic"===effect&&(endPos["down"===direction||"up"===direction?"top":"left"]=("up"===direction||"left"===direction?"-":"+")+"=200px"),previous.wrap.animate(endPos,{duration:"none"===effect?0:previous.prevSpeed,easing:previous.prevEasing,complete:function(){$(this).trigger("onReset").remove()}})}},F.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!isTouch,fixed:!0},overlay:null,fixed:!1,create:function(opts){opts=$.extend({},this.defaults,opts),this.overlay&&this.close(),this.overlay=$('<div class="fancybox-overlay"></div>').appendTo("body"),this.fixed=!1,opts.fixed&&F.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(opts){var that=this;opts=$.extend({},this.defaults,opts),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(opts),this.fixed||(W.bind("resize.overlay",$.proxy(this.update,this)),this.update()),opts.closeClick&&this.overlay.bind("click.overlay",function(e){$(e.target).hasClass("fancybox-overlay")&&(F.isActive?F.close():that.close())}),this.overlay.css(opts.css).show()},close:function(){$(".fancybox-overlay").remove(),W.unbind("resize.overlay"),this.overlay=null,!1!==this.margin&&($("body").css("margin-right",this.margin),this.margin=!1),this.el&&this.el.removeClass("fancybox-lock")},update:function(){var offsetWidth,width="100%";this.overlay.width(width).height("100%"),IE?(offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),D.width()>offsetWidth&&(width=D.width())):D.width()>W.width()&&(width=D.width()),this.overlay.width(width).height(D.height())},onReady:function(opts,obj){$(".fancybox-overlay").stop(!0,!0),this.overlay||(this.margin=(D.height()>W.height()||"scroll"===$("body").css("overflow-y"))&&$("body").css("margin-right"),this.el=$(document.all&&!document.querySelector?"html":"body"),this.create(opts)),opts.locked&&this.fixed&&(obj.locked=this.overlay.append(obj.wrap),obj.fixed=!1),!0===opts.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(opts,obj){obj.locked&&(this.el.addClass("fancybox-lock"),!1!==this.margin&&$("body").css("margin-right",getScalar(this.margin)+obj.scrollbarWidth)),this.open(opts)},onUpdate:function(){this.fixed||this.update()},afterClose:function(opts){this.overlay&&!F.isActive&&this.overlay.fadeOut(opts.speedOut,$.proxy(this.close,this))}},F.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(opts){var title,target,current=F.current,text=current.title,type=opts.type;if($.isFunction(text)&&(text=text.call(current.element,current)),isString(text)&&""!==$.trim(text)){switch(title=$('<div class="fancybox-title fancybox-title-'+type+'-wrap">'+text+"</div>"),type){case"inside":target=F.skin;break;case"outside":target=F.wrap;break;case"over":target=F.inner;break;default:target=F.skin,title.appendTo("body"),IE&&title.width(title.width()),title.wrapInner('<span class="child"></span>'),F.current.margin[2]+=Math.abs(getScalar(title.css("margin-bottom")))}title["top"===opts.position?"prependTo":"appendTo"](target)}}},$.fn.fancybox=function(options){var index,that=$(this),selector=this.selector||"",run=function(e){var relType,relVal,what=$(this).blur(),idx=index;e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||what.is(".fancybox-wrap")||(relType=options.groupAttr||"data-fancybox-group",relVal=what.attr(relType),relVal||(relType="rel",relVal=what.get(0)[relType]),relVal&&""!==relVal&&"nofollow"!==relVal&&(what=selector.length?$(selector):that,what=what.filter("["+relType+'="'+relVal+'"]'),idx=what.index(this)),options.index=idx,!1!==F.open(what,options)&&e.preventDefault())};return options=options||{},index=options.index||0,selector&&!1!==options.live?D.undelegate(selector,"click.fb-start").delegate(selector+":not('.fancybox-item, .fancybox-nav')","click.fb-start",run):that.unbind("click.fb-start").bind("click.fb-start",run),this.filter("[data-fancybox-start=1]").trigger("click"),this},D.ready(function(){void 0===$.scrollbarWidth&&($.scrollbarWidth=function(){var parent=$('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),child=parent.children(),width=child.innerWidth()-child.height(99).innerWidth();return parent.remove(),width}),void 0===$.support.fixedPosition&&($.support.fixedPosition=function(){var elem=$('<div style="position:fixed;top:20px;"></div>').appendTo("body"),fixed=20===elem[0].offsetTop||15===elem[0].offsetTop;return elem.remove(),fixed}()),$.extend(F.defaults,{scrollbarWidth:$.scrollbarWidth(),fixed:$.support.fixedPosition,parent:$("body")})})}(window,document,jQuery),function($,window,document,undefined){function getOrDef(obj,prop){return obj[prop]===undefined?options[prop]:obj[prop]}function scrollTop(){var scroll=window.pageYOffset;return scroll===undefined?docElement.scrollTop:scroll}function triggerEvent(event,$el){var handler=options["on"+event];handler&&($isFunction(handler)?handler.call($el[0]):(handler.addClass&&$el.addClass(handler.addClass),handler.removeClass&&$el.removeClass(handler.removeClass))),$el.trigger("lazy"+event,[$el]),queueCheckLazyElements()}function triggerLoadOrError(e){triggerEvent(e.type,$(this).off(load_error,triggerLoadOrError))}function checkLazyElements(force){if(elements.length){force=force||options.forceLoad,topLazy=1/0;var i,length,viewportTop=scrollTop(),viewportHeight=window.innerHeight||docElement.clientHeight,viewportWidth=window.innerWidth||docElement.clientWidth;for(i=0,length=elements.length;i<length;i++){var topEdge,$el=elements[i],el=$el[0],objData=$el[lazyLoadXT],removeNode=!1,visible=force||$data(el,dataLazied)<0;if($.contains(docElement,el)){if(force||!objData.visibleOnly||el.offsetWidth||el.offsetHeight){if(!visible){var elPos=el.getBoundingClientRect(),edgeX=objData.edgeX,edgeY=objData.edgeY;topEdge=elPos.top+viewportTop-edgeY-viewportHeight,visible=topEdge<=viewportTop&&elPos.bottom>-edgeY&&elPos.left<=viewportWidth+edgeX&&elPos.right>-edgeX}if(visible){$el.on(load_error,triggerLoadOrError),triggerEvent("show",$el);var srcAttr=objData.srcAttr,src=$isFunction(srcAttr)?srcAttr($el):el.getAttribute(srcAttr);src&&(el.src=src),removeNode=!0}else topEdge<topLazy&&(topLazy=topEdge)}}else removeNode=!0;removeNode&&($data(el,dataLazied,0),elements.splice(i--,1),length--)}length||triggerEvent("complete",$(docElement))}}function timeoutLazyElements(){waitingMode>1?(waitingMode=1,checkLazyElements(),setTimeout(timeoutLazyElements,options.throttle)):waitingMode=0}function queueCheckLazyElements(e){elements.length&&(e&&"scroll"===e.type&&e.currentTarget===window&&topLazy>=scrollTop()||(waitingMode||setTimeout(timeoutLazyElements,0),waitingMode=2))}function initLazyElements(){$window.lazyLoadXT()}function forceLoadAll(){checkLazyElements(!0)}var lazyLoadXT="lazyLoadXT",dataLazied="lazied",load_error="load error",docElement=document.documentElement||document.body,forceLoad=window.onscroll===undefined||!!window.operamini||!docElement.getBoundingClientRect,options={autoInit:!0,selector:"img[data-src]",blankImage:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",throttle:99,forceLoad:forceLoad,loadEvent:"pageshow",updateEvent:"load orientationchange resize scroll touchmove focus",forceEvent:"lazyloadall",oninit:{removeClass:"lazy"},onshow:{addClass:"lazy-hidden"},onload:{removeClass:"lazy-hidden",addClass:"lazy-loaded"},onerror:{removeClass:"lazy-hidden"},checkDuplicates:!0},elementOptions={srcAttr:"data-src",edgeX:0,edgeY:0,visibleOnly:!0},$window=$(window),$isFunction=$.isFunction,$extend=$.extend,$data=$.data||function(el,name){return $(el).data(name)},elements=[],topLazy=0,waitingMode=0;$[lazyLoadXT]=$extend(options,elementOptions,$[lazyLoadXT]),$.fn[lazyLoadXT]=function(overrides){overrides=overrides||{};var prop,blankImage=getOrDef(overrides,"blankImage"),checkDuplicates=getOrDef(overrides,"checkDuplicates"),scrollContainer=getOrDef(overrides,"scrollContainer"),forceShow=getOrDef(overrides,"show"),elementOptionsOverrides={};$(scrollContainer).on("scroll",queueCheckLazyElements);for(prop in elementOptions)elementOptionsOverrides[prop]=getOrDef(overrides,prop);return this.each(function(index,el){if(el===window)$(options.selector).lazyLoadXT(overrides);else{var duplicate=checkDuplicates&&$data(el,dataLazied),$el=$(el).data(dataLazied,forceShow?-1:1);if(duplicate)return void queueCheckLazyElements();blankImage&&"IMG"===el.tagName&&!el.src&&(el.src=blankImage),$el[lazyLoadXT]=$extend({},elementOptionsOverrides),triggerEvent("init",$el),elements.push($el),queueCheckLazyElements()}})},$(document).ready(function(){triggerEvent("start",$window),$window.on(options.updateEvent,queueCheckLazyElements).on(options.forceEvent,forceLoadAll),$(document).on(options.updateEvent,queueCheckLazyElements),options.autoInit&&($window.on(options.loadEvent,initLazyElements),initLazyElements())})}(window.jQuery||window.Zepto||window.$,window,document),function(a,b,c,d){function e(b,c){return Math[c].apply(null,a.map(b,function(a){return a[i]}))}function f(a){return a[i]>=t[i]||a[i]===j}function g(a){return a[i]===j}function h(d){var h=d.attr(k.srcsetAttr);if(!h)return!1;var l=a.map(h.replace(/(\s[\d.]+[whx]),/g,"$1 @,@ ").split(" @,@ "),function(a){return{url:m.exec(a)[1],w:parseFloat((n.exec(a)||q)[1]),h:parseFloat((o.exec(a)||q)[1]),x:parseFloat((p.exec(a)||r)[1])}});if(!l.length)return!1;var s,u,v=c.documentElement;t={w:b.innerWidth||v.clientWidth,h:b.innerHeight||v.clientHeight,x:b.devicePixelRatio||1};for(s in t)i=s,j=e(l,"max"),l=a.grep(l,f);for(s in t)i=s,j=e(l,"min"),l=a.grep(l,g);return u=l[0].url,k.srcsetExtended&&(u=(d.attr(k.srcsetBaseAttr)||"")+u+(d.attr(k.srcsetExtAttr)||"")),u}var i,j,k=a.lazyLoadXT,l=function(){return"srcset"in new Image}(),m=/^\s*(\S*)/,n=/\S\s+(\d+)w/,o=/\S\s+(\d+)h/,p=/\S\s+([\d\.]+)x/,q=[0,1/0],r=[0,1],s={srcsetAttr:"data-srcset",srcsetExtended:!0,srcsetBaseAttr:"data-srcset-base",srcsetExtAttr:"data-srcset-ext"},t={w:0,h:0,x:0};for(i in s)void 0===k[i]&&(k[i]=s[i]);k.selector+=",img["+k.srcsetAttr+"]",a(c).on("lazyshow","img",function(a,b){var c=b.attr(k.srcsetAttr);c&&(!k.srcsetExtended&&l?b.attr("srcset",c):b.lazyLoadXT.srcAttr=h)})}(window.jQuery||window.Zepto||window.$,window,document);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(root,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?exports.Handlebars=factory():root.Handlebars=factory()}(this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function create(){var hb=_create();return hb.compile=function(input,options){return _handlebarsCompilerCompiler.compile(input,options,hb)},hb.precompile=function(input,options){return _handlebarsCompilerCompiler.precompile(input,options,hb)},hb.AST=_handlebarsCompilerAst2.default,hb.Compiler=_handlebarsCompilerCompiler.Compiler,hb.JavaScriptCompiler=_handlebarsCompilerJavascriptCompiler2.default,hb.Parser=_handlebarsCompilerBase.parser,hb.parse=_handlebarsCompilerBase.parse,hb}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _handlebarsRuntime=__webpack_require__(2),_handlebarsRuntime2=_interopRequireDefault(_handlebarsRuntime),_handlebarsCompilerAst=__webpack_require__(35),_handlebarsCompilerAst2=_interopRequireDefault(_handlebarsCompilerAst),_handlebarsCompilerBase=__webpack_require__(36),_handlebarsCompilerCompiler=__webpack_require__(41),_handlebarsCompilerJavascriptCompiler=__webpack_require__(42),_handlebarsCompilerJavascriptCompiler2=_interopRequireDefault(_handlebarsCompilerJavascriptCompiler),_handlebarsCompilerVisitor=__webpack_require__(39),_handlebarsCompilerVisitor2=_interopRequireDefault(_handlebarsCompilerVisitor),_handlebarsNoConflict=__webpack_require__(34),_handlebarsNoConflict2=_interopRequireDefault(_handlebarsNoConflict),_create=_handlebarsRuntime2.default.create,inst=create();inst.create=create,_handlebarsNoConflict2.default(inst),inst.Visitor=_handlebarsCompilerVisitor2.default,inst.default=inst,exports.default=inst,module.exports=exports.default},function(module,exports){"use strict";exports.default=function(obj){return obj&&obj.__esModule?obj:{default:obj}},exports.__esModule=!0},function(module,exports,__webpack_require__){"use strict";function create(){var hb=new base.HandlebarsEnvironment;return Utils.extend(hb,base),hb.SafeString=_handlebarsSafeString2.default,hb.Exception=_handlebarsException2.default,hb.Utils=Utils,hb.escapeExpression=Utils.escapeExpression,hb.VM=runtime,hb.template=function(spec){return runtime.template(spec,hb)},hb}var _interopRequireWildcard=__webpack_require__(3).default,_interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _handlebarsBase=__webpack_require__(4),base=_interopRequireWildcard(_handlebarsBase),_handlebarsSafeString=__webpack_require__(21),_handlebarsSafeString2=_interopRequireDefault(_handlebarsSafeString),_handlebarsException=__webpack_require__(6),_handlebarsException2=_interopRequireDefault(_handlebarsException),_handlebarsUtils=__webpack_require__(5),Utils=_interopRequireWildcard(_handlebarsUtils),_handlebarsRuntime=__webpack_require__(22),runtime=_interopRequireWildcard(_handlebarsRuntime),_handlebarsNoConflict=__webpack_require__(34),_handlebarsNoConflict2=_interopRequireDefault(_handlebarsNoConflict),inst=create();inst.create=create,_handlebarsNoConflict2.default(inst),inst.default=inst,exports.default=inst,module.exports=exports.default},function(module,exports){"use strict";exports.default=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj},exports.__esModule=!0},function(module,exports,__webpack_require__){"use strict";function HandlebarsEnvironment(helpers,partials,decorators){this.helpers=helpers||{},this.partials=partials||{},this.decorators=decorators||{},_helpers.registerDefaultHelpers(this),_decorators.registerDefaultDecorators(this)}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.HandlebarsEnvironment=HandlebarsEnvironment;var _utils=__webpack_require__(5),_exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception),_helpers=__webpack_require__(10),_decorators=__webpack_require__(18),_logger=__webpack_require__(20),_logger2=_interopRequireDefault(_logger);exports.VERSION="4.0.11";exports.COMPILER_REVISION=7;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};exports.REVISION_CHANGES=REVISION_CHANGES;HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:_logger2.default,log:_logger2.default.log,registerHelper:function(name,fn){if("[object Object]"===_utils.toString.call(name)){if(fn)throw new _exception2.default("Arg not supported with multiple helpers");_utils.extend(this.helpers,name)}else this.helpers[name]=fn},unregisterHelper:function(name){delete this.helpers[name]},registerPartial:function(name,partial){if("[object Object]"===_utils.toString.call(name))_utils.extend(this.partials,name);else{if(void 0===partial)throw new _exception2.default('Attempting to register a partial called "'+name+'" as undefined');this.partials[name]=partial}},unregisterPartial:function(name){delete this.partials[name]},registerDecorator:function(name,fn){if("[object Object]"===_utils.toString.call(name)){if(fn)throw new _exception2.default("Arg not supported with multiple decorators");_utils.extend(this.decorators,name)}else this.decorators[name]=fn},unregisterDecorator:function(name){delete this.decorators[name]}};var log=_logger2.default.log;exports.log=log,exports.createFrame=_utils.createFrame,exports.logger=_logger2.default},function(module,exports){"use strict";function escapeChar(chr){return escape[chr]}function extend(obj){for(var i=1;i<arguments.length;i++)for(var key in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],key)&&(obj[key]=arguments[i][key]);return obj}function indexOf(array,value){for(var i=0,len=array.length;i<len;i++)if(array[i]===value)return i;return-1}function escapeExpression(string){if("string"!=typeof string){if(string&&string.toHTML)return string.toHTML();if(null==string)return"";if(!string)return string+"";string=""+string}return possible.test(string)?string.replace(badChars,escapeChar):string}function isEmpty(value){return!value&&0!==value||!(!isArray(value)||0!==value.length)}function createFrame(object){var frame=extend({},object);return frame._parent=object,frame}function blockParams(params,ids){return params.path=ids,params}function appendContextPath(contextPath,id){return(contextPath?contextPath+".":"")+id}exports.__esModule=!0,exports.extend=extend,exports.indexOf=indexOf,exports.escapeExpression=escapeExpression,exports.isEmpty=isEmpty,exports.createFrame=createFrame,exports.blockParams=blockParams,exports.appendContextPath=appendContextPath;var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},badChars=/[&<>"'`=]/g,possible=/[&<>"'`=]/,toString=Object.prototype.toString;exports.toString=toString;var isFunction=function(value){return"function"==typeof value};isFunction(/x/)&&(exports.isFunction=isFunction=function(value){return"function"==typeof value&&"[object Function]"===toString.call(value)}),exports.isFunction=isFunction;var isArray=Array.isArray||function(value){return!(!value||"object"!==(void 0===value?"undefined":_typeof(value)))&&"[object Array]"===toString.call(value)};exports.isArray=isArray},function(module,exports,__webpack_require__){"use strict";function Exception(message,node){var loc=node&&node.loc,line=void 0,column=void 0;loc&&(line=loc.start.line,column=loc.start.column,message+=" - "+line+":"+column);for(var tmp=Error.prototype.constructor.call(this,message),idx=0;idx<errorProps.length;idx++)this[errorProps[idx]]=tmp[errorProps[idx]];Error.captureStackTrace&&Error.captureStackTrace(this,Exception);try{loc&&(this.lineNumber=line,_Object$defineProperty?Object.defineProperty(this,"column",{value:column,enumerable:!0}):this.column=column)}catch(nop){}}var _Object$defineProperty=__webpack_require__(7).default;exports.__esModule=!0;var errorProps=["description","fileName","lineNumber","message","name","number","stack"];Exception.prototype=new Error,exports.default=Exception,module.exports=exports.default},function(module,exports,__webpack_require__){module.exports={default:__webpack_require__(8),__esModule:!0}},function(module,exports,__webpack_require__){var $=__webpack_require__(9);module.exports=function(it,key,desc){return $.setDesc(it,key,desc)}},function(module,exports){var $Object=Object;module.exports={create:$Object.create,getProto:$Object.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:$Object.getOwnPropertyDescriptor,setDesc:$Object.defineProperty,setDescs:$Object.defineProperties,getKeys:$Object.keys,getNames:$Object.getOwnPropertyNames,getSymbols:$Object.getOwnPropertySymbols,each:[].forEach}},function(module,exports,__webpack_require__){"use strict";function registerDefaultHelpers(instance){_helpersBlockHelperMissing2.default(instance),_helpersEach2.default(instance),_helpersHelperMissing2.default(instance),_helpersIf2.default(instance),_helpersLog2.default(instance),_helpersLookup2.default(instance),_helpersWith2.default(instance)}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.registerDefaultHelpers=registerDefaultHelpers;var _helpersBlockHelperMissing=__webpack_require__(11),_helpersBlockHelperMissing2=_interopRequireDefault(_helpersBlockHelperMissing),_helpersEach=__webpack_require__(12),_helpersEach2=_interopRequireDefault(_helpersEach),_helpersHelperMissing=__webpack_require__(13),_helpersHelperMissing2=_interopRequireDefault(_helpersHelperMissing),_helpersIf=__webpack_require__(14),_helpersIf2=_interopRequireDefault(_helpersIf),_helpersLog=__webpack_require__(15),_helpersLog2=_interopRequireDefault(_helpersLog),_helpersLookup=__webpack_require__(16),_helpersLookup2=_interopRequireDefault(_helpersLookup),_helpersWith=__webpack_require__(17),_helpersWith2=_interopRequireDefault(_helpersWith)},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _utils=__webpack_require__(5);exports.default=function(instance){instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse,fn=options.fn;if(!0===context)return fn(this);if(!1===context||null==context)return inverse(this);if(_utils.isArray(context))return context.length>0?(options.ids&&(options.ids=[options.name]),instance.helpers.each(context,options)):inverse(this);if(options.data&&options.ids){var data=_utils.createFrame(options.data);data.contextPath=_utils.appendContextPath(options.data.contextPath,options.name),options={data:data}}return fn(context,options)})},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _utils=__webpack_require__(5),_exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception);exports.default=function(instance){instance.registerHelper("each",function(context,options){function execIteration(field,index,last){data&&(data.key=field,data.index=index,data.first=0===index,data.last=!!last,contextPath&&(data.contextPath=contextPath+field)),ret+=fn(context[field],{data:data,blockParams:_utils.blockParams([context[field],field],[contextPath+field,null])})}if(!options)throw new _exception2.default("Must pass iterator to #each");var fn=options.fn,inverse=options.inverse,i=0,ret="",data=void 0,contextPath=void 0;if(options.data&&options.ids&&(contextPath=_utils.appendContextPath(options.data.contextPath,options.ids[0])+"."),_utils.isFunction(context)&&(context=context.call(this)),options.data&&(data=_utils.createFrame(options.data)),context&&"object"===(void 0===context?"undefined":_typeof(context)))if(_utils.isArray(context))for(var j=context.length;i<j;i++)i in context&&execIteration(i,i,i===context.length-1);else{var priorKey=void 0;for(var key in context)context.hasOwnProperty(key)&&(void 0!==priorKey&&execIteration(priorKey,i-1),priorKey=key,i++);void 0!==priorKey&&execIteration(priorKey,i-1,!0)}return 0===i&&(ret=inverse(this)),ret})},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception);exports.default=function(instance){instance.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new _exception2.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _utils=__webpack_require__(5);exports.default=function(instance){instance.registerHelper("if",function(conditional,options){return _utils.isFunction(conditional)&&(conditional=conditional.call(this)),!options.hash.includeZero&&!conditional||_utils.isEmpty(conditional)?options.inverse(this):options.fn(this)}),instance.registerHelper("unless",function(conditional,options){return instance.helpers.if.call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})})},module.exports=exports.default},function(module,exports){"use strict";exports.__esModule=!0,exports.default=function(instance){instance.registerHelper("log",function(){for(var args=[void 0],options=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)args.push(arguments[i]);var level=1;null!=options.hash.level?level=options.hash.level:options.data&&null!=options.data.level&&(level=options.data.level),args[0]=level,instance.log.apply(instance,args)})},module.exports=exports.default},function(module,exports){"use strict";exports.__esModule=!0,exports.default=function(instance){instance.registerHelper("lookup",function(obj,field){return obj&&obj[field]})},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _utils=__webpack_require__(5)
;exports.default=function(instance){instance.registerHelper("with",function(context,options){_utils.isFunction(context)&&(context=context.call(this));var fn=options.fn;if(_utils.isEmpty(context))return options.inverse(this);var data=options.data;return options.data&&options.ids&&(data=_utils.createFrame(options.data),data.contextPath=_utils.appendContextPath(options.data.contextPath,options.ids[0])),fn(context,{data:data,blockParams:_utils.blockParams([context],[data&&data.contextPath])})})},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function registerDefaultDecorators(instance){_decoratorsInline2.default(instance)}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.registerDefaultDecorators=registerDefaultDecorators;var _decoratorsInline=__webpack_require__(19),_decoratorsInline2=_interopRequireDefault(_decoratorsInline)},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _utils=__webpack_require__(5);exports.default=function(instance){instance.registerDecorator("inline",function(fn,props,container,options){var ret=fn;return props.partials||(props.partials={},ret=function(context,options){var original=container.partials;container.partials=_utils.extend({},original,props.partials);var ret=fn(context,options);return container.partials=original,ret}),props.partials[options.args[0]]=options.fn,ret})},module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _utils=__webpack_require__(5),logger={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(level){if("string"==typeof level){var levelMap=_utils.indexOf(logger.methodMap,level.toLowerCase());level=levelMap>=0?levelMap:parseInt(level,10)}return level},log:function(level){if(level=logger.lookupLevel(level),"undefined"!=typeof console&&logger.lookupLevel(logger.level)<=level){var method=logger.methodMap[level];console[method]||(method="log");for(var _len=arguments.length,message=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)message[_key-1]=arguments[_key];console[method].apply(console,message)}}};exports.default=logger,module.exports=exports.default},function(module,exports){"use strict";function SafeString(string){this.string=string}exports.__esModule=!0,SafeString.prototype.toString=SafeString.prototype.toHTML=function(){return""+this.string},exports.default=SafeString,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=_base.COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=_base.REVISION_CHANGES[currentRevision],compilerVersions=_base.REVISION_CHANGES[compilerRevision];throw new _exception2.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}throw new _exception2.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+compilerInfo[1]+").")}}function template(templateSpec,env){function invokePartialWrapper(partial,context,options){options.hash&&(context=Utils.extend({},context,options.hash),options.ids&&(options.ids[0]=!0)),partial=env.VM.resolvePartial.call(this,partial,context,options);var result=env.VM.invokePartial.call(this,partial,context,options);if(null==result&&env.compile&&(options.partials[options.name]=env.compile(partial,templateSpec.compilerOptions,env),result=options.partials[options.name](context,options)),null!=result){if(options.indent){for(var lines=result.split("\n"),i=0,l=lines.length;i<l&&(lines[i]||i+1!==l);i++)lines[i]=options.indent+lines[i];result=lines.join("\n")}return result}throw new _exception2.default("The partial "+options.name+" could not be compiled when running in runtime-only mode")}function ret(context){function main(context){return""+templateSpec.main(container,context,container.helpers,container.partials,data,blockParams,depths)}var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],data=options.data;ret._setup(options),!options.partial&&templateSpec.useData&&(data=initData(context,data));var depths=void 0,blockParams=templateSpec.useBlockParams?[]:void 0;return templateSpec.useDepths&&(depths=options.depths?context!=options.depths[0]?[context].concat(options.depths):options.depths:[context]),(main=executeDecorators(templateSpec.main,main,container,options.depths||[],data,blockParams))(context,options)}if(!env)throw new _exception2.default("No environment passed to template");if(!templateSpec||!templateSpec.main)throw new _exception2.default("Unknown template object: "+(void 0===templateSpec?"undefined":_typeof(templateSpec)));templateSpec.main.decorator=templateSpec.main_d,env.VM.checkRevision(templateSpec.compiler);var container={strict:function(obj,name){if(!(name in obj))throw new _exception2.default('"'+name+'" not defined in '+obj);return obj[name]},lookup:function(depths,name){for(var len=depths.length,i=0;i<len;i++)if(depths[i]&&null!=depths[i][name])return depths[i][name]},lambda:function(current,context){return"function"==typeof current?current.call(context):current},escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,fn:function(i){var ret=templateSpec[i];return ret.decorator=templateSpec[i+"_d"],ret},programs:[],program:function(i,data,declaredBlockParams,blockParams,depths){var programWrapper=this.programs[i],fn=this.fn(i);return data||depths||blockParams||declaredBlockParams?programWrapper=wrapProgram(this,i,fn,data,declaredBlockParams,blockParams,depths):programWrapper||(programWrapper=this.programs[i]=wrapProgram(this,i,fn)),programWrapper},data:function(value,depth){for(;value&&depth--;)value=value._parent;return value},merge:function(param,common){var obj=param||common;return param&&common&&param!==common&&(obj=Utils.extend({},common,param)),obj},nullContext:_Object$seal({}),noop:env.VM.noop,compilerInfo:templateSpec.compiler};return ret.isTop=!0,ret._setup=function(options){options.partial?(container.helpers=options.helpers,container.partials=options.partials,container.decorators=options.decorators):(container.helpers=container.merge(options.helpers,env.helpers),templateSpec.usePartial&&(container.partials=container.merge(options.partials,env.partials)),(templateSpec.usePartial||templateSpec.useDecorators)&&(container.decorators=container.merge(options.decorators,env.decorators)))},ret._child=function(i,data,blockParams,depths){if(templateSpec.useBlockParams&&!blockParams)throw new _exception2.default("must pass block params");if(templateSpec.useDepths&&!depths)throw new _exception2.default("must pass parent depths");return wrapProgram(container,i,templateSpec[i],data,0,blockParams,depths)},ret}function wrapProgram(container,i,fn,data,declaredBlockParams,blockParams,depths){function prog(context){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],currentDepths=depths;return!depths||context==depths[0]||context===container.nullContext&&null===depths[0]||(currentDepths=[context].concat(depths)),fn(container,context,container.helpers,container.partials,options.data||data,blockParams&&[options.blockParams].concat(blockParams),currentDepths)}return prog=executeDecorators(fn,prog,container,depths,data,blockParams),prog.program=i,prog.depth=depths?depths.length:0,prog.blockParams=declaredBlockParams||0,prog}function resolvePartial(partial,context,options){return partial?partial.call||options.name||(options.name=partial,partial=options.partials[partial]):partial="@partial-block"===options.name?options.data["partial-block"]:options.partials[options.name],partial}function invokePartial(partial,context,options){var currentPartialBlock=options.data&&options.data["partial-block"];options.partial=!0,options.ids&&(options.data.contextPath=options.ids[0]||options.data.contextPath);var partialBlock=void 0;if(options.fn&&options.fn!==noop&&function(){options.data=_base.createFrame(options.data);var fn=options.fn;partialBlock=options.data["partial-block"]=function(context){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return options.data=_base.createFrame(options.data),options.data["partial-block"]=currentPartialBlock,fn(context,options)},fn.partials&&(options.partials=Utils.extend({},options.partials,fn.partials))}(),void 0===partial&&partialBlock&&(partial=partialBlock),void 0===partial)throw new _exception2.default("The partial "+options.name+" could not be found");if(partial instanceof Function)return partial(context,options)}function noop(){return""}function initData(context,data){return data&&"root"in data||(data=data?_base.createFrame(data):{},data.root=context),data}function executeDecorators(fn,prog,container,depths,data,blockParams){if(fn.decorator){var props={};prog=fn.decorator(prog,props,container,depths&&depths[0],data,blockParams,depths),Utils.extend(prog,props)}return prog}var _Object$seal=__webpack_require__(23).default,_interopRequireWildcard=__webpack_require__(3).default,_interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.checkRevision=checkRevision,exports.template=template,exports.wrapProgram=wrapProgram,exports.resolvePartial=resolvePartial,exports.invokePartial=invokePartial,exports.noop=noop;var _utils=__webpack_require__(5),Utils=_interopRequireWildcard(_utils),_exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception),_base=__webpack_require__(4)},function(module,exports,__webpack_require__){module.exports={default:__webpack_require__(24),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(25),module.exports=__webpack_require__(30).Object.seal},function(module,exports,__webpack_require__){var isObject=__webpack_require__(26);__webpack_require__(27)("seal",function($seal){return function(it){return $seal&&isObject(it)?$seal(it):it}})},function(module,exports){module.exports=function(it){return"object"===(void 0===it?"undefined":_typeof(it))?null!==it:"function"==typeof it}},function(module,exports,__webpack_require__){var $export=__webpack_require__(28),core=__webpack_require__(30),fails=__webpack_require__(33);module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn),$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},function(module,exports,__webpack_require__){var global=__webpack_require__(29),core=__webpack_require__(30),ctx=__webpack_require__(31),$export=function $export(type,name,source){var key,own,out,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,exports=IS_GLOBAL?core:core[name]||(core[name]={}),target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{}).prototype;IS_GLOBAL&&(source=name);for(key in source)(own=!IS_FORCED&&target&&key in target)&&key in exports||(out=own?target[key]:source[key],exports[key]=IS_GLOBAL&&"function"!=typeof target[key]?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(param){return this instanceof C?new C(param):C(param)};return F.prototype=C.prototype,F}(out):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,IS_PROTO&&((exports.prototype||(exports.prototype={}))[key]=out))};$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,module.exports=$export},function(module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},function(module,exports){var core=module.exports={version:"1.2.6"};"number"==typeof __e&&(__e=core)},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(32);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},function(module,exports){(function(global){"use strict";exports.__esModule=!0,exports.default=function(Handlebars){var root=void 0!==global?global:window,$Handlebars=root.Handlebars;Handlebars.noConflict=function(){return root.Handlebars===Handlebars&&(root.Handlebars=$Handlebars),Handlebars}},module.exports=exports.default}).call(exports,function(){return this}())},function(module,exports){"use strict";exports.__esModule=!0;var AST={helpers:{helperExpression:function(node){return"SubExpression"===node.type||("MustacheStatement"===node.type||"BlockStatement"===node.type)&&!!(node.params&&node.params.length||node.hash)},scopedId:function(path){return/^\.|this\b/.test(path.original)},simpleId:function(path){return 1===path.parts.length&&!AST.helpers.scopedId(path)&&!path.depth}}};exports.default=AST,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function parse(input,options){return"Program"===input.type?input:(_parser2.default.yy=yy,yy.locInfo=function(locInfo){return new yy.SourceLocation(options&&options.srcName,locInfo)},new _whitespaceControl2.default(options).accept(_parser2.default.parse(input)))}var _interopRequireDefault=__webpack_require__(1).default,_interopRequireWildcard=__webpack_require__(3).default;exports.__esModule=!0,exports.parse=parse;var _parser=__webpack_require__(37),_parser2=_interopRequireDefault(_parser),_whitespaceControl=__webpack_require__(38),_whitespaceControl2=_interopRequireDefault(_whitespaceControl),_helpers=__webpack_require__(40),Helpers=_interopRequireWildcard(_helpers),_utils=__webpack_require__(5);exports.parser=_parser2.default;var yy={};_utils.extend(yy,Helpers)},function(module,exports){"use strict";exports.__esModule=!0;var handlebars=function(){function Parser(){this.yy={}}var parser={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];case 2:this.$=yy.prepareProgram($$[$0]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=$$[$0];break;case 9:this.$={type:"CommentStatement",value:yy.stripComment($$[$0]),strip:yy.stripFlags($$[$0],$$[$0]),loc:yy.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:$$[$0],value:$$[$0],loc:yy.locInfo(this._$)};break;case 11:this.$=yy.prepareRawBlock($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 12:this.$={path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1]};break;case 13:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],!1,this._$);break;case 14:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],!0,this._$);break;case 15:this.$={open:$$[$0-5],path:$$[$0-4],params:$$[$0-3],hash:$$[$0-2],blockParams:$$[$0-1],strip:yy.stripFlags($$[$0-5],$$[$0])};break;case 16:case 17:this.$={path:$$[$0-4],params:$$[$0-3],hash:$$[$0-2],blockParams:$$[$0-1],strip:yy.stripFlags($$[$0-5],$$[$0])};break;case 18:this.$={strip:yy.stripFlags($$[$0-1],$$[$0-1]),program:$$[$0]};break;case 19:var inverse=yy.prepareBlock($$[$0-2],$$[$0-1],$$[$0],$$[$0],!1,this._$),program=yy.prepareProgram([inverse],$$[$0-1].loc);program.chained=!0,this.$={strip:$$[$0-2].strip,program:program,chain:!0};break;case 20:this.$=$$[$0];break;case 21:this.$={path:$$[$0-1],strip:yy.stripFlags($$[$0-2],$$[$0])};break;case 22:case 23:this.$=yy.prepareMustache($$[$0-3],$$[$0-2],$$[$0-1],$$[$0-4],yy.stripFlags($$[$0-4],$$[$0]),this._$);break;case 24:this.$={type:"PartialStatement",name:$$[$0-3],params:$$[$0-2],hash:$$[$0-1],indent:"",strip:yy.stripFlags($$[$0-4],$$[$0]),loc:yy.locInfo(this._$)};break;case 25:this.$=yy.preparePartialBlock($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 26:this.$={path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1],strip:yy.stripFlags($$[$0-4],$$[$0])};break;case 27:case 28:this.$=$$[$0];break;case 29:this.$={type:"SubExpression",path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1],loc:yy.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:$$[$0],loc:yy.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:yy.id($$[$0-2]),value:$$[$0],loc:yy.locInfo(this._$)};break;case 32:this.$=yy.id($$[$0-1]);break;case 33:case 34:this.$=$$[$0];break;case 35:this.$={type:"StringLiteral",value:$$[$0],original:$$[$0],loc:yy.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number($$[$0]),original:Number($$[$0]),loc:yy.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===$$[$0],original:"true"===$$[$0],loc:yy.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:yy.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:yy.locInfo(this._$)};break;case 40:case 41:this.$=$$[$0];break;case 42:this.$=yy.preparePath(!0,$$[$0],this._$);break;case 43:this.$=yy.preparePath(!1,$$[$0],this._$);break;case 44:$$[$0-2].push({part:yy.id($$[$0]),original:$$[$0],separator:$$[$0-1]}),this.$=$$[$0-2];break;case 45:this.$=[{part:yy.id($$[$0]),original:$$[$0]}];break;case 46:this.$=[];break;case 47:$$[$0-1].push($$[$0]);break;case 48:this.$=[$$[$0]];break;case 49:$$[$0-1].push($$[$0]);break;case 50:this.$=[];break;case 51:$$[$0-1].push($$[$0]);break;case 58:this.$=[];break;case 59:$$[$0-1].push($$[$0]);break;case 64:this.$=[];break;case 65:$$[$0-1].push($$[$0]);break;case 70:this.$=[];break;case 71:$$[$0-1].push($$[$0]);break;case 78:this.$=[];break;case 79:$$[$0-1].push($$[$0]);break;case 82:this.$=[];break;case 83:$$[$0-1].push($$[$0]);break;case 86:this.$=[];break;case 87:$$[$0-1].push($$[$0]);break;case 90:this.$=[];break;case 91:$$[$0-1].push($$[$0]);break;case 94:this.$=[];break;case 95:$$[$0-1].push($$[$0]);break;case 98:this.$=[$$[$0]];break;case 99:$$[$0-1].push($$[$0]);break;case 100:this.$=[$$[$0]];break;case 101:$$[$0-1].push($$[$0])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{
72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(str,hash){throw new Error(str)},parse:function(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0;this.lexer.setInput(input),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var symbol,preErrorSymbol,state,action,r,p,len,newState,expected,yyval={};;){if(state=stack[stack.length-1],this.defaultActions[state]?action=this.defaultActions[state]:(null!==symbol&&void 0!==symbol||(symbol=function(){var token;return token=self.lexer.lex()||1,"number"!=typeof token&&(token=self.symbols_[token]||token),token}()),action=table[state]&&table[state][symbol]),void 0===action||!action.length||!action[0]){var errStr="";if(!recovering){expected=[];for(p in table[state])this.terminals_[p]&&p>2&&expected.push("'"+this.terminals_[p]+"'");errStr=this.lexer.showPosition?"Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(this.lexer.yytext),lstack.push(this.lexer.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=this.lexer.yyleng,yytext=this.lexer.yytext,yylineno=this.lexer.yylineno,yyloc=this.lexer.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack)))return r;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState);break;case 3:return!0}}return!0}},lexer=function(){var lexer={EOF:1,parseError:function(str,hash){if(!this.yy.parser)throw new Error(str);this.yy.parser.parseError(str,hash)},setInput:function(input){return this._input=input,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},unput:function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len-1),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-len]),this},more:function(){return this._more=!0,this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;return next.length<20&&(next+=this._input.substr(0,20-next.length)),(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput(),c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var token,match,tempMatch,index,lines;this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i=0;i<rules.length&&(!(tempMatch=this._input.match(this.rules[rules[i]]))||match&&!(tempMatch[0].length>match[0].length)||(match=tempMatch,index=i,this.options.flex));i++);return match?(lines=match[0].match(/(?:\r\n?|\n).*/g),lines&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length},this.yytext+=match[0],this.match+=match[0],this.matches=match,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(match[0].length),this.matched+=match[0],token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var r=this.next();return void 0!==r?r:this.lex()},begin:function(condition){this.conditionStack.push(condition)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(condition){this.begin(condition)}};return lexer.options={},lexer.performAction=function(yy,yy_,$avoiding_name_collisions,YY_START){function strip(start,end){return yy_.yytext=yy_.yytext.substr(start,yy_.yyleng-end)}switch($avoiding_name_collisions){case 0:if("\\\\"===yy_.yytext.slice(-2)?(strip(0,1),this.begin("mu")):"\\"===yy_.yytext.slice(-1)?(strip(0,1),this.begin("emu")):this.begin("mu"),yy_.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(yy_.yytext=yy_.yytext.substr(5,yy_.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(yy_.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return yy_.yytext=strip(1,2).replace(/\\"/g,'"'),80;case 32:return yy_.yytext=strip(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return yy_.yytext=yy_.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},lexer.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],lexer.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},lexer}();return parser.lexer=lexer,Parser.prototype=parser,parser.Parser=Parser,new Parser}();exports.default=handlebars,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function WhitespaceControl(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=options}function isPrevWhitespace(body,i,isRoot){void 0===i&&(i=body.length);var prev=body[i-1],sibling=body[i-2];return prev?"ContentStatement"===prev.type?(sibling||!isRoot?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(prev.original):void 0:isRoot}function isNextWhitespace(body,i,isRoot){void 0===i&&(i=-1);var next=body[i+1],sibling=body[i+2];return next?"ContentStatement"===next.type?(sibling||!isRoot?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(next.original):void 0:isRoot}function omitRight(body,i,multiple){var current=body[null==i?0:i+1];if(current&&"ContentStatement"===current.type&&(multiple||!current.rightStripped)){var original=current.value;current.value=current.value.replace(multiple?/^\s+/:/^[ \t]*\r?\n?/,""),current.rightStripped=current.value!==original}}function omitLeft(body,i,multiple){var current=body[null==i?body.length-1:i-1];if(current&&"ContentStatement"===current.type&&(multiple||!current.leftStripped)){var original=current.value;return current.value=current.value.replace(multiple?/\s+$/:/[ \t]+$/,""),current.leftStripped=current.value!==original,current.leftStripped}}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _visitor=__webpack_require__(39),_visitor2=_interopRequireDefault(_visitor);WhitespaceControl.prototype=new _visitor2.default,WhitespaceControl.prototype.Program=function(program){var doStandalone=!this.options.ignoreStandalone,isRoot=!this.isRootSeen;this.isRootSeen=!0;for(var body=program.body,i=0,l=body.length;i<l;i++){var current=body[i],strip=this.accept(current);if(strip){var _isPrevWhitespace=isPrevWhitespace(body,i,isRoot),_isNextWhitespace=isNextWhitespace(body,i,isRoot),openStandalone=strip.openStandalone&&_isPrevWhitespace,closeStandalone=strip.closeStandalone&&_isNextWhitespace,inlineStandalone=strip.inlineStandalone&&_isPrevWhitespace&&_isNextWhitespace;strip.close&&omitRight(body,i,!0),strip.open&&omitLeft(body,i,!0),doStandalone&&inlineStandalone&&(omitRight(body,i),omitLeft(body,i)&&"PartialStatement"===current.type&&(current.indent=/([ \t]+$)/.exec(body[i-1].original)[1])),doStandalone&&openStandalone&&(omitRight((current.program||current.inverse).body),omitLeft(body,i)),doStandalone&&closeStandalone&&(omitRight(body,i),omitLeft((current.inverse||current.program).body))}}return program},WhitespaceControl.prototype.BlockStatement=WhitespaceControl.prototype.DecoratorBlock=WhitespaceControl.prototype.PartialBlockStatement=function(block){this.accept(block.program),this.accept(block.inverse);var program=block.program||block.inverse,inverse=block.program&&block.inverse,firstInverse=inverse,lastInverse=inverse;if(inverse&&inverse.chained)for(firstInverse=inverse.body[0].program;lastInverse.chained;)lastInverse=lastInverse.body[lastInverse.body.length-1].program;var strip={open:block.openStrip.open,close:block.closeStrip.close,openStandalone:isNextWhitespace(program.body),closeStandalone:isPrevWhitespace((firstInverse||program).body)};if(block.openStrip.close&&omitRight(program.body,null,!0),inverse){var inverseStrip=block.inverseStrip;inverseStrip.open&&omitLeft(program.body,null,!0),inverseStrip.close&&omitRight(firstInverse.body,null,!0),block.closeStrip.open&&omitLeft(lastInverse.body,null,!0),!this.options.ignoreStandalone&&isPrevWhitespace(program.body)&&isNextWhitespace(firstInverse.body)&&(omitLeft(program.body),omitRight(firstInverse.body))}else block.closeStrip.open&&omitLeft(program.body,null,!0);return strip},WhitespaceControl.prototype.Decorator=WhitespaceControl.prototype.MustacheStatement=function(mustache){return mustache.strip},WhitespaceControl.prototype.PartialStatement=WhitespaceControl.prototype.CommentStatement=function(node){var strip=node.strip||{};return{inlineStandalone:!0,open:strip.open,close:strip.close}},exports.default=WhitespaceControl,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function Visitor(){this.parents=[]}function visitSubExpression(mustache){this.acceptRequired(mustache,"path"),this.acceptArray(mustache.params),this.acceptKey(mustache,"hash")}function visitBlock(block){visitSubExpression.call(this,block),this.acceptKey(block,"program"),this.acceptKey(block,"inverse")}function visitPartial(partial){this.acceptRequired(partial,"name"),this.acceptArray(partial.params),this.acceptKey(partial,"hash")}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception);Visitor.prototype={constructor:Visitor,mutating:!1,acceptKey:function(node,name){var value=this.accept(node[name]);if(this.mutating){if(value&&!Visitor.prototype[value.type])throw new _exception2.default('Unexpected node type "'+value.type+'" found when accepting '+name+" on "+node.type);node[name]=value}},acceptRequired:function(node,name){if(this.acceptKey(node,name),!node[name])throw new _exception2.default(node.type+" requires "+name)},acceptArray:function(array){for(var i=0,l=array.length;i<l;i++)this.acceptKey(array,i),array[i]||(array.splice(i,1),i--,l--)},accept:function(object){if(object){if(!this[object.type])throw new _exception2.default("Unknown type: "+object.type,object);this.current&&this.parents.unshift(this.current),this.current=object;var ret=this[object.type](object);return this.current=this.parents.shift(),!this.mutating||ret?ret:!1!==ret?object:void 0}},Program:function(program){this.acceptArray(program.body)},MustacheStatement:visitSubExpression,Decorator:visitSubExpression,BlockStatement:visitBlock,DecoratorBlock:visitBlock,PartialStatement:visitPartial,PartialBlockStatement:function(partial){visitPartial.call(this,partial),this.acceptKey(partial,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:visitSubExpression,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(hash){this.acceptArray(hash.pairs)},HashPair:function(pair){this.acceptRequired(pair,"value")}},exports.default=Visitor,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function validateClose(open,close){if(close=close.path?close.path.original:close,open.path.original!==close){var errorNode={loc:open.path.loc};throw new _exception2.default(open.path.original+" doesn't match "+close,errorNode)}}function SourceLocation(source,locInfo){this.source=source,this.start={line:locInfo.first_line,column:locInfo.first_column},this.end={line:locInfo.last_line,column:locInfo.last_column}}function id(token){return/^\[.*\]$/.test(token)?token.substr(1,token.length-2):token}function stripFlags(open,close){return{open:"~"===open.charAt(2),close:"~"===close.charAt(close.length-3)}}function stripComment(comment){return comment.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function preparePath(data,parts,loc){loc=this.locInfo(loc);for(var original=data?"@":"",dig=[],depth=0,depthString="",i=0,l=parts.length;i<l;i++){var part=parts[i].part,isLiteral=parts[i].original!==part;if(original+=(parts[i].separator||"")+part,isLiteral||".."!==part&&"."!==part&&"this"!==part)dig.push(part);else{if(dig.length>0)throw new _exception2.default("Invalid path: "+original,{loc:loc});".."===part&&(depth++,depthString+="../")}}return{type:"PathExpression",data:data,depth:depth,parts:dig,original:original,loc:loc}}function prepareMustache(path,params,hash,open,strip,locInfo){var escapeFlag=open.charAt(3)||open.charAt(2),escaped="{"!==escapeFlag&&"&"!==escapeFlag;return{type:/\*/.test(open)?"Decorator":"MustacheStatement",path:path,params:params,hash:hash,escaped:escaped,strip:strip,loc:this.locInfo(locInfo)}}function prepareRawBlock(openRawBlock,contents,close,locInfo){validateClose(openRawBlock,close),locInfo=this.locInfo(locInfo);var program={type:"Program",body:contents,strip:{},loc:locInfo};return{type:"BlockStatement",path:openRawBlock.path,params:openRawBlock.params,hash:openRawBlock.hash,program:program,openStrip:{},inverseStrip:{},closeStrip:{},loc:locInfo}}function prepareBlock(openBlock,program,inverseAndProgram,close,inverted,locInfo){close&&close.path&&validateClose(openBlock,close);var decorator=/\*/.test(openBlock.open);program.blockParams=openBlock.blockParams;var inverse=void 0,inverseStrip=void 0;if(inverseAndProgram){if(decorator)throw new _exception2.default("Unexpected inverse block on decorator",inverseAndProgram);inverseAndProgram.chain&&(inverseAndProgram.program.body[0].closeStrip=close.strip),inverseStrip=inverseAndProgram.strip,inverse=inverseAndProgram.program}return inverted&&(inverted=inverse,inverse=program,program=inverted),{type:decorator?"DecoratorBlock":"BlockStatement",path:openBlock.path,params:openBlock.params,hash:openBlock.hash,program:program,inverse:inverse,openStrip:openBlock.strip,inverseStrip:inverseStrip,closeStrip:close&&close.strip,loc:this.locInfo(locInfo)}}function prepareProgram(statements,loc){if(!loc&&statements.length){var firstLoc=statements[0].loc,lastLoc=statements[statements.length-1].loc;firstLoc&&lastLoc&&(loc={source:firstLoc.source,start:{line:firstLoc.start.line,column:firstLoc.start.column},end:{line:lastLoc.end.line,column:lastLoc.end.column}})}return{type:"Program",body:statements,strip:{},loc:loc}}function preparePartialBlock(open,program,close,locInfo){return validateClose(open,close),{type:"PartialBlockStatement",name:open.path,params:open.params,hash:open.hash,program:program,openStrip:open.strip,closeStrip:close&&close.strip,loc:this.locInfo(locInfo)}}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.SourceLocation=SourceLocation,exports.id=id,exports.stripFlags=stripFlags,exports.stripComment=stripComment,exports.preparePath=preparePath,exports.prepareMustache=prepareMustache,exports.prepareRawBlock=prepareRawBlock,exports.prepareBlock=prepareBlock,exports.prepareProgram=prepareProgram,exports.preparePartialBlock=preparePartialBlock;var _exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception)},function(module,exports,__webpack_require__){"use strict";function Compiler(){}function precompile(input,options,env){if(null==input||"string"!=typeof input&&"Program"!==input.type)throw new _exception2.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+input);options=options||{},"data"in options||(options.data=!0),options.compat&&(options.useDepths=!0);var ast=env.parse(input,options),environment=(new env.Compiler).compile(ast,options);return(new env.JavaScriptCompiler).compile(environment,options)}function compile(input,options,env){function compileInput(){var ast=env.parse(input,options),environment=(new env.Compiler).compile(ast,options),templateSpec=(new env.JavaScriptCompiler).compile(environment,options,void 0,!0);return env.template(templateSpec)}function ret(context,execOptions){return compiled||(compiled=compileInput()),compiled.call(this,context,execOptions)}if(void 0===options&&(options={}),null==input||"string"!=typeof input&&"Program"!==input.type)throw new _exception2.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+input);options=_utils.extend({},options),"data"in options||(options.data=!0),options.compat&&(options.useDepths=!0);var compiled=void 0;return ret._setup=function(setupOptions){return compiled||(compiled=compileInput()),compiled._setup(setupOptions)},ret._child=function(i,data,blockParams,depths){return compiled||(compiled=compileInput()),compiled._child(i,data,blockParams,depths)},ret}function argEquals(a,b){if(a===b)return!0;if(_utils.isArray(a)&&_utils.isArray(b)&&a.length===b.length){for(var i=0;i<a.length;i++)if(!argEquals(a[i],b[i]))return!1;return!0}}function transformLiteralToPath(sexpr){if(!sexpr.path.parts){var literal=sexpr.path;sexpr.path={type:"PathExpression",data:!1,depth:0,parts:[literal.original+""],original:literal.original+"",loc:literal.loc}}}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.Compiler=Compiler,exports.precompile=precompile,exports.compile=compile;var _exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception),_utils=__webpack_require__(5),_ast=__webpack_require__(35),_ast2=_interopRequireDefault(_ast),slice=[].slice;Compiler.prototype={compiler:Compiler,equals:function(other){var len=this.opcodes.length;if(other.opcodes.length!==len)return!1;for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||!argEquals(opcode.args,otherOpcode.args))return!1}len=this.children.length;for(var i=0;i<len;i++)if(!this.children[i].equals(other.children[i]))return!1;return!0},guid:0,compile:function(program,options){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=options,this.stringParams=options.stringParams,this.trackIds=options.trackIds,options.blockParams=options.blockParams||[];var knownHelpers=options.knownHelpers;if(options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},knownHelpers)for(var _name in knownHelpers)_name in knownHelpers&&(this.options.knownHelpers[_name]=knownHelpers[_name]);return this.accept(program)},compileProgram:function(program){var childCompiler=new this.compiler,result=childCompiler.compile(program,this.options),guid=this.guid++;return this.usePartial=this.usePartial||result.usePartial,this.children[guid]=result,this.useDepths=this.useDepths||result.useDepths,guid},accept:function(node){if(!this[node.type])throw new _exception2.default("Unknown type: "+node.type,node);this.sourceNode.unshift(node);var ret=this[node.type](node);return this.sourceNode.shift(),ret},Program:function(program){this.options.blockParams.unshift(program.blockParams);for(var body=program.body,bodyLength=body.length,i=0;i<bodyLength;i++)this.accept(body[i]);return this.options.blockParams.shift(),this.isSimple=1===bodyLength,this.blockParams=program.blockParams?program.blockParams.length:0,this},BlockStatement:function(block){transformLiteralToPath(block);var program=block.program,inverse=block.inverse;program=program&&this.compileProgram(program),inverse=inverse&&this.compileProgram(inverse);var type=this.classifySexpr(block);"helper"===type?this.helperSexpr(block,program,inverse):"simple"===type?(this.simpleSexpr(block),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("blockValue",block.path.original)):(this.ambiguousSexpr(block,program,inverse),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(decorator){var program=decorator.program&&this.compileProgram(decorator.program),params=this.setupFullMustacheParams(decorator,program,void 0),path=decorator.path;this.useDecorators=!0,this.opcode("registerDecorator",params.length,path.original)},PartialStatement:function(partial){this.usePartial=!0;var program=partial.program;program&&(program=this.compileProgram(partial.program));var params=partial.params;if(params.length>1)throw new _exception2.default("Unsupported number of partial arguments: "+params.length,partial);params.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):params.push({type:"PathExpression",parts:[],depth:0}));var partialName=partial.name.original,isDynamic="SubExpression"===partial.name.type;isDynamic&&this.accept(partial.name),this.setupFullMustacheParams(partial,program,void 0,!0);var indent=partial.indent||"";this.options.preventIndent&&indent&&(this.opcode("appendContent",indent),indent=""),this.opcode("invokePartial",isDynamic,partialName,indent),this.opcode("append")},PartialBlockStatement:function(partialBlock){this.PartialStatement(partialBlock)},MustacheStatement:function(mustache){this.SubExpression(mustache),mustache.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(decorator){this.DecoratorBlock(decorator)},ContentStatement:function(content){content.value&&this.opcode("appendContent",content.value)},CommentStatement:function(){},SubExpression:function(sexpr){transformLiteralToPath(sexpr);var type=this.classifySexpr(sexpr);"simple"===type?this.simpleSexpr(sexpr):"helper"===type?this.helperSexpr(sexpr):this.ambiguousSexpr(sexpr)},ambiguousSexpr:function(sexpr,program,inverse){var path=sexpr.path,name=path.parts[0],isBlock=null!=program||null!=inverse;this.opcode("getContext",path.depth),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),path.strict=!0,this.accept(path),this.opcode("invokeAmbiguous",name,isBlock)},simpleSexpr:function(sexpr){var path=sexpr.path;path.strict=!0,this.accept(path),this.opcode("resolvePossibleLambda")},helperSexpr:function(sexpr,program,inverse){var params=this.setupFullMustacheParams(sexpr,program,inverse),path=sexpr.path,name=path.parts[0];if(this.options.knownHelpers[name])this.opcode("invokeKnownHelper",params.length,name);else{if(this.options.knownHelpersOnly)throw new _exception2.default("You specified knownHelpersOnly, but used the unknown helper "+name,sexpr);path.strict=!0,path.falsy=!0,this.accept(path),this.opcode("invokeHelper",params.length,path.original,_ast2.default.helpers.simpleId(path))}},PathExpression:function(path){this.addDepth(path.depth),this.opcode("getContext",path.depth);var name=path.parts[0],scoped=_ast2.default.helpers.scopedId(path),blockParamId=!path.depth&&!scoped&&this.blockParamIndex(name);blockParamId?this.opcode("lookupBlockParam",blockParamId,path.parts):name?path.data?(this.options.data=!0,this.opcode("lookupData",path.depth,path.parts,path.strict)):this.opcode("lookupOnContext",path.parts,path.falsy,path.strict,scoped):this.opcode("pushContext")},StringLiteral:function(string){this.opcode("pushString",string.value)},NumberLiteral:function(number){this.opcode("pushLiteral",number.value)},BooleanLiteral:function(bool){this.opcode("pushLiteral",bool.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(hash){var pairs=hash.pairs,i=0,l=pairs.length;for(this.opcode("pushHash");i<l;i++)this.pushParam(pairs[i].value);for(;i--;)this.opcode("assignToHash",pairs[i].key);this.opcode("popHash")},opcode:function(name){this.opcodes.push({opcode:name,args:slice.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(depth){depth&&(this.useDepths=!0)},classifySexpr:function(sexpr){var isSimple=_ast2.default.helpers.simpleId(sexpr.path),isBlockParam=isSimple&&!!this.blockParamIndex(sexpr.path.parts[0]),isHelper=!isBlockParam&&_ast2.default.helpers.helperExpression(sexpr),isEligible=!isBlockParam&&(isHelper||isSimple);if(isEligible&&!isHelper){var _name2=sexpr.path.parts[0],options=this.options;options.knownHelpers[_name2]?isHelper=!0:options.knownHelpersOnly&&(isEligible=!1)}return isHelper?"helper":isEligible?"ambiguous":"simple"},pushParams:function(params){for(var i=0,l=params.length;i<l;i++)this.pushParam(params[i])},pushParam:function(val){var value=null!=val.value?val.value:val.original||"";if(this.stringParams)value.replace&&(value=value.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),val.depth&&this.addDepth(val.depth),this.opcode("getContext",val.depth||0),this.opcode("pushStringParam",value,val.type),"SubExpression"===val.type&&this.accept(val);else{if(this.trackIds){var blockParamIndex=void 0;if(!val.parts||_ast2.default.helpers.scopedId(val)||val.depth||(blockParamIndex=this.blockParamIndex(val.parts[0])),blockParamIndex){var blockParamChild=val.parts.slice(1).join(".");this.opcode("pushId","BlockParam",blockParamIndex,blockParamChild)}else value=val.original||value,value.replace&&(value=value.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",val.type,value)}this.accept(val)}},setupFullMustacheParams:function(sexpr,program,inverse,omitEmpty){var params=sexpr.params;return this.pushParams(params),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),sexpr.hash?this.accept(sexpr.hash):this.opcode("emptyHash",omitEmpty),params},blockParamIndex:function(name){for(var depth=0,len=this.options.blockParams.length;depth<len;depth++){var blockParams=this.options.blockParams[depth],param=blockParams&&_utils.indexOf(blockParams,name);if(blockParams&&param>=0)return[depth,param]}}}},function(module,exports,__webpack_require__){"use strict";function Literal(value){this.value=value}function JavaScriptCompiler(){}function strictLookup(requireTerminal,compiler,parts,type){var stack=compiler.popStack(),i=0,len=parts.length;for(requireTerminal&&len--;i<len;i++)stack=compiler.nameLookup(stack,parts[i],type);return requireTerminal?[compiler.aliasable("container.strict"),"(",stack,", ",compiler.quotedString(parts[i]),")"]:stack}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _base=__webpack_require__(4),_exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception),_utils=__webpack_require__(5),_codeGen=__webpack_require__(43),_codeGen2=_interopRequireDefault(_codeGen);JavaScriptCompiler.prototype={nameLookup:function(parent,name){return JavaScriptCompiler.isValidJavaScriptVariableName(name)?[parent,".",name]:[parent,"[",JSON.stringify(name),"]"]},depthedLookup:function(name){return[this.aliasable("container.lookup"),'(depths, "',name,'")']},compilerInfo:function(){var revision=_base.COMPILER_REVISION;return[revision,_base.REVISION_CHANGES[revision]]},
appendToBuffer:function(source,location,explicit){return _utils.isArray(source)||(source=[source]),source=this.source.wrap(source,location),this.environment.isSimple?["return ",source,";"]:explicit?["buffer += ",source,";"]:(source.appendToBuffer=!0,source)},initializeBuffer:function(){return this.quotedString("")},compile:function(environment,options,context,asObject){this.environment=environment,this.options=options,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!asObject,this.name=this.environment.name,this.isChild=!!context,this.context=context||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(environment,options),this.useDepths=this.useDepths||environment.useDepths||environment.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||environment.useBlockParams;var opcodes=environment.opcodes,opcode=void 0,firstLoc=void 0,i=void 0,l=void 0;for(i=0,l=opcodes.length;i<l;i++)opcode=opcodes[i],this.source.currentLocation=opcode.loc,firstLoc=firstLoc||opcode.loc,this[opcode.opcode].apply(this,opcode.args);if(this.source.currentLocation=firstLoc,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new _exception2.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),asObject?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var fn=this.createFunctionContext(asObject);if(this.isChild)return fn;var ret={compiler:this.compilerInfo(),main:fn};this.decorators&&(ret.main_d=this.decorators,ret.useDecorators=!0);var _context=this.context,programs=_context.programs,decorators=_context.decorators;for(i=0,l=programs.length;i<l;i++)programs[i]&&(ret[i]=programs[i],decorators[i]&&(ret[i+"_d"]=decorators[i],ret.useDecorators=!0));return this.environment.usePartial&&(ret.usePartial=!0),this.options.data&&(ret.useData=!0),this.useDepths&&(ret.useDepths=!0),this.useBlockParams&&(ret.useBlockParams=!0),this.options.compat&&(ret.compat=!0),asObject?ret.compilerOptions=this.options:(ret.compiler=JSON.stringify(ret.compiler),this.source.currentLocation={start:{line:1,column:0}},ret=this.objectLiteral(ret),options.srcName?(ret=ret.toStringWithSourceMap({file:options.destName}),ret.map=ret.map&&ret.map.toString()):ret=ret.toString()),ret},preamble:function(){this.lastContext=0,this.source=new _codeGen2.default(this.options.srcName),this.decorators=new _codeGen2.default(this.options.srcName)},createFunctionContext:function(asObject){var varDeclarations="",locals=this.stackVars.concat(this.registers.list);locals.length>0&&(varDeclarations+=", "+locals.join(", "));var aliasCount=0;for(var alias in this.aliases){var node=this.aliases[alias];this.aliases.hasOwnProperty(alias)&&node.children&&node.referenceCount>1&&(varDeclarations+=", alias"+ ++aliasCount+"="+alias,node.children[0]="alias"+aliasCount)}var params=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&params.push("blockParams"),this.useDepths&&params.push("depths");var source=this.mergeSource(varDeclarations);return asObject?(params.push(source),Function.apply(this,params)):this.source.wrap(["function(",params.join(","),") {\n  ",source,"}"])},mergeSource:function(varDeclarations){var isSimple=this.environment.isSimple,appendOnly=!this.forceBuffer,appendFirst=void 0,sourceSeen=void 0,bufferStart=void 0,bufferEnd=void 0;return this.source.each(function(line){line.appendToBuffer?(bufferStart?line.prepend("  + "):bufferStart=line,bufferEnd=line):(bufferStart&&(sourceSeen?bufferStart.prepend("buffer += "):appendFirst=!0,bufferEnd.add(";"),bufferStart=bufferEnd=void 0),sourceSeen=!0,isSimple||(appendOnly=!1))}),appendOnly?bufferStart?(bufferStart.prepend("return "),bufferEnd.add(";")):sourceSeen||this.source.push('return "";'):(varDeclarations+=", buffer = "+(appendFirst?"":this.initializeBuffer()),bufferStart?(bufferStart.prepend("return buffer + "),bufferEnd.add(";")):this.source.push("return buffer;")),varDeclarations&&this.source.prepend("var "+varDeclarations.substring(2)+(appendFirst?"":";\n")),this.source.merge()},blockValue:function(name){var blockHelperMissing=this.aliasable("helpers.blockHelperMissing"),params=[this.contextName(0)];this.setupHelperArgs(name,0,params);var blockName=this.popStack();params.splice(1,0,blockName),this.push(this.source.functionCall(blockHelperMissing,"call",params))},ambiguousBlockValue:function(){var blockHelperMissing=this.aliasable("helpers.blockHelperMissing"),params=[this.contextName(0)];this.setupHelperArgs("",0,params,!0),this.flushInline();var current=this.topStack();params.splice(1,0,current),this.pushSource(["if (!",this.lastHelper,") { ",current," = ",this.source.functionCall(blockHelperMissing,"call",params),"}"])},appendContent:function(content){this.pendingContent?content=this.pendingContent+content:this.pendingLocation=this.source.currentLocation,this.pendingContent=content},append:function(){if(this.isInline())this.replaceStack(function(current){return[" != null ? ",current,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var local=this.popStack();this.pushSource(["if (",local," != null) { ",this.appendToBuffer(local,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(depth){this.lastContext=depth},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(parts,falsy,strict,scoped){var i=0;scoped||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(parts[i++])),this.resolvePath("context",parts,i,falsy,strict)},lookupBlockParam:function(blockParamId,parts){this.useBlockParams=!0,this.push(["blockParams[",blockParamId[0],"][",blockParamId[1],"]"]),this.resolvePath("context",parts,1)},lookupData:function(depth,parts,strict){depth?this.pushStackLiteral("container.data(data, "+depth+")"):this.pushStackLiteral("data"),this.resolvePath("data",parts,0,!0,strict)},resolvePath:function(type,parts,i,falsy,strict){var _this=this;if(this.options.strict||this.options.assumeObjects)return void this.push(strictLookup(this.options.strict&&strict,this,parts,type));for(var len=parts.length;i<len;i++)this.replaceStack(function(current){var lookup=_this.nameLookup(current,parts[i],type);return falsy?[" && ",lookup]:[" != null ? ",lookup," : ",current]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(string,type){this.pushContext(),this.pushString(type),"SubExpression"!==type&&("string"==typeof string?this.pushString(string):this.pushStackLiteral(string))},emptyHash:function(omitEmpty){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(omitEmpty?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var hash=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(hash.ids)),this.stringParams&&(this.push(this.objectLiteral(hash.contexts)),this.push(this.objectLiteral(hash.types))),this.push(this.objectLiteral(hash.values))},pushString:function(string){this.pushStackLiteral(this.quotedString(string))},pushLiteral:function(value){this.pushStackLiteral(value)},pushProgram:function(guid){null!=guid?this.pushStackLiteral(this.programExpression(guid)):this.pushStackLiteral(null)},registerDecorator:function(paramSize,name){var foundDecorator=this.nameLookup("decorators",name,"decorator"),options=this.setupHelperArgs(name,paramSize);this.decorators.push(["fn = ",this.decorators.functionCall(foundDecorator,"",["fn","props","container",options])," || fn;"])},invokeHelper:function(paramSize,name,isSimple){var nonHelper=this.popStack(),helper=this.setupHelper(paramSize,name),simple=isSimple?[helper.name," || "]:"",lookup=["("].concat(simple,nonHelper);this.options.strict||lookup.push(" || ",this.aliasable("helpers.helperMissing")),lookup.push(")"),this.push(this.source.functionCall(lookup,"call",helper.callParams))},invokeKnownHelper:function(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(this.source.functionCall(helper.name,"call",helper.callParams))},invokeAmbiguous:function(name,helperCall){this.useRegister("helper");var nonHelper=this.popStack();this.emptyHash();var helper=this.setupHelper(0,name,helperCall),helperName=this.lastHelper=this.nameLookup("helpers",name,"helper"),lookup=["(","(helper = ",helperName," || ",nonHelper,")"];this.options.strict||(lookup[0]="(helper = ",lookup.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",lookup,helper.paramsInit?["),(",helper.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",helper.callParams)," : helper))"])},invokePartial:function(isDynamic,name,indent){var params=[],options=this.setupParams(name,1,params);isDynamic&&(name=this.popStack(),delete options.name),indent&&(options.indent=JSON.stringify(indent)),options.helpers="helpers",options.partials="partials",options.decorators="container.decorators",isDynamic?params.unshift(name):params.unshift(this.nameLookup("partials",name,"partial")),this.options.compat&&(options.depths="depths"),options=this.objectLiteral(options),params.push(options),this.push(this.source.functionCall("container.invokePartial","",params))},assignToHash:function(key){var value=this.popStack(),context=void 0,type=void 0,id=void 0;this.trackIds&&(id=this.popStack()),this.stringParams&&(type=this.popStack(),context=this.popStack());var hash=this.hash;context&&(hash.contexts[key]=context),type&&(hash.types[key]=type),id&&(hash.ids[key]=id),hash.values[key]=value},pushId:function(type,name,child){"BlockParam"===type?this.pushStackLiteral("blockParams["+name[0]+"].path["+name[1]+"]"+(child?" + "+JSON.stringify("."+child):"")):"PathExpression"===type?this.pushString(name):"SubExpression"===type?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:JavaScriptCompiler,compileChildren:function(environment,options){for(var children=environment.children,child=void 0,compiler=void 0,i=0,l=children.length;i<l;i++){child=children[i],compiler=new this.compiler;var existing=this.matchExistingProgram(child);if(null==existing){this.context.programs.push("");var index=this.context.programs.length;child.index=index,child.name="program"+index,this.context.programs[index]=compiler.compile(child,options,this.context,!this.precompile),this.context.decorators[index]=compiler.decorators,this.context.environments[index]=child,this.useDepths=this.useDepths||compiler.useDepths,this.useBlockParams=this.useBlockParams||compiler.useBlockParams,child.useDepths=this.useDepths,child.useBlockParams=this.useBlockParams}else child.index=existing.index,child.name="program"+existing.index,this.useDepths=this.useDepths||existing.useDepths,this.useBlockParams=this.useBlockParams||existing.useBlockParams}},matchExistingProgram:function(child){for(var i=0,len=this.context.environments.length;i<len;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child))return environment}},programExpression:function(guid){var child=this.environment.children[guid],programParams=[child.index,"data",child.blockParams];return(this.useBlockParams||this.useDepths)&&programParams.push("blockParams"),this.useDepths&&programParams.push("depths"),"container.program("+programParams.join(", ")+")"},useRegister:function(name){this.registers[name]||(this.registers[name]=!0,this.registers.list.push(name))},push:function(expr){return expr instanceof Literal||(expr=this.source.wrap(expr)),this.inlineStack.push(expr),expr},pushStackLiteral:function(item){this.push(new Literal(item))},pushSource:function(source){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),source&&this.source.push(source)},replaceStack:function(callback){var prefix=["("],stack=void 0,createdStack=void 0,usedLiteral=void 0;if(!this.isInline())throw new _exception2.default("replaceStack on non-inline");var top=this.popStack(!0);if(top instanceof Literal)stack=[top.value],prefix=["(",stack],usedLiteral=!0;else{createdStack=!0;var _name=this.incrStack();prefix=["((",this.push(_name)," = ",top,")"],stack=this.topStack()}var item=callback.call(this,stack);usedLiteral||this.popStack(),createdStack&&this.stackSlot--,this.push(prefix.concat(item,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var inlineStack=this.inlineStack;this.inlineStack=[];for(var i=0,len=inlineStack.length;i<len;i++){var entry=inlineStack[i];if(entry instanceof Literal)this.compileStack.push(entry);else{var stack=this.incrStack();this.pushSource([stack," = ",entry,";"]),this.compileStack.push(stack)}}},isInline:function(){return this.inlineStack.length},popStack:function(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&item instanceof Literal)return item.value;if(!inline){if(!this.stackSlot)throw new _exception2.default("Invalid stack pop");this.stackSlot--}return item},topStack:function(){var stack=this.isInline()?this.inlineStack:this.compileStack,item=stack[stack.length-1];return item instanceof Literal?item.value:item},contextName:function(context){return this.useDepths&&context?"depths["+context+"]":"depth"+context},quotedString:function(str){return this.source.quotedString(str)},objectLiteral:function(obj){return this.source.objectLiteral(obj)},aliasable:function(name){var ret=this.aliases[name];return ret?(ret.referenceCount++,ret):(ret=this.aliases[name]=this.source.wrap(name),ret.aliasable=!0,ret.referenceCount=1,ret)},setupHelper:function(paramSize,name,blockHelper){var params=[];return{params:params,paramsInit:this.setupHelperArgs(name,paramSize,params,blockHelper),name:this.nameLookup("helpers",name,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(params)}},setupParams:function(helper,paramSize,params){var options={},contexts=[],types=[],ids=[],objectArgs=!params,param=void 0;objectArgs&&(params=[]),options.name=this.quotedString(helper),options.hash=this.popStack(),this.trackIds&&(options.hashIds=this.popStack()),this.stringParams&&(options.hashTypes=this.popStack(),options.hashContexts=this.popStack());var inverse=this.popStack(),program=this.popStack();(program||inverse)&&(options.fn=program||"container.noop",options.inverse=inverse||"container.noop");for(var i=paramSize;i--;)param=this.popStack(),params[i]=param,this.trackIds&&(ids[i]=this.popStack()),this.stringParams&&(types[i]=this.popStack(),contexts[i]=this.popStack());return objectArgs&&(options.args=this.source.generateArray(params)),this.trackIds&&(options.ids=this.source.generateArray(ids)),this.stringParams&&(options.types=this.source.generateArray(types),options.contexts=this.source.generateArray(contexts)),this.options.data&&(options.data="data"),this.useBlockParams&&(options.blockParams="blockParams"),options},setupHelperArgs:function(helper,paramSize,params,useRegister){var options=this.setupParams(helper,paramSize,params);return options=this.objectLiteral(options),useRegister?(this.useRegister("options"),params.push("options"),["options=",options]):params?(params.push(options),""):options}},function(){for(var reservedWords="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),compilerWords=JavaScriptCompiler.RESERVED_WORDS={},i=0,l=reservedWords.length;i<l;i++)compilerWords[reservedWords[i]]=!0}(),JavaScriptCompiler.isValidJavaScriptVariableName=function(name){return!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name)},exports.default=JavaScriptCompiler,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function castChunk(chunk,codeGen,loc){if(_utils.isArray(chunk)){for(var ret=[],i=0,len=chunk.length;i<len;i++)ret.push(codeGen.wrap(chunk[i],loc));return ret}return"boolean"==typeof chunk||"number"==typeof chunk?chunk+"":chunk}function CodeGen(srcFile){this.srcFile=srcFile,this.source=[]}exports.__esModule=!0;var _utils=__webpack_require__(5),SourceNode=void 0;try{}catch(err){}SourceNode||(SourceNode=function(line,column,srcFile,chunks){this.src="",chunks&&this.add(chunks)},SourceNode.prototype={add:function(chunks){_utils.isArray(chunks)&&(chunks=chunks.join("")),this.src+=chunks},prepend:function(chunks){_utils.isArray(chunks)&&(chunks=chunks.join("")),this.src=chunks+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),CodeGen.prototype={isEmpty:function(){return!this.source.length},prepend:function(source,loc){this.source.unshift(this.wrap(source,loc))},push:function(source,loc){this.source.push(this.wrap(source,loc))},merge:function(){var source=this.empty();return this.each(function(line){source.add(["  ",line,"\n"])}),source},each:function(iter){for(var i=0,len=this.source.length;i<len;i++)iter(this.source[i])},empty:function(){var loc=this.currentLocation||{start:{}};return new SourceNode(loc.start.line,loc.start.column,this.srcFile)},wrap:function(chunk){var loc=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return chunk instanceof SourceNode?chunk:(chunk=castChunk(chunk,this,loc),new SourceNode(loc.start.line,loc.start.column,this.srcFile,chunk))},functionCall:function(fn,type,params){return params=this.generateList(params),this.wrap([fn,type?"."+type+"(":"(",params,")"])},quotedString:function(str){return'"'+(str+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(obj){var pairs=[];for(var key in obj)if(obj.hasOwnProperty(key)){var value=castChunk(obj[key],this);"undefined"!==value&&pairs.push([this.quotedString(key),":",value])}var ret=this.generateList(pairs);return ret.prepend("{"),ret.add("}"),ret},generateList:function(entries){for(var ret=this.empty(),i=0,len=entries.length;i<len;i++)i&&ret.add(","),ret.add(castChunk(entries[i],this));return ret},generateArray:function(entries){var ret=this.generateList(entries);return ret.prepend("["),ret.add("]"),ret}},exports.default=CodeGen,module.exports=exports.default}])});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.firebase=e()}(this,function(){"use strict";function e(){}function n(t){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(t,this)}function r(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,n._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void o(e.promise,t)}i(e.promise,r)}else(1===t._state?i:o)(e.promise,t._value)})):t._deferreds.push(e)}function i(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==(void 0===e?"undefined":_typeof(e))||"function"==typeof e)){var r=e.then;if(e instanceof n)return t._state=3,t._value=e,void a(t);if("function"==typeof r)return void s((i=r,u=e,function(){i.apply(u,arguments)}),t)}t._state=1,t._value=e,a(t)}catch(e){o(t,e)}var i,u}function o(t,e){t._state=2,t._value=e,a(t)}function a(t){2===t._state&&0===t._deferreds.length&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;e<i;e++)r(t,t._deferreds[e]);t._deferreds=null}function s(t,e){var n=!1;try{t(function(t){n||(n=!0,i(e,t))},function(t){n||(n=!0,o(e,t))})}catch(t){if(n)return;n=!0,o(e,t)}}function c(t,e){return t(e={exports:{}},e.exports),e.exports}function it(t,e){function n(){this.constructor=t}rt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function at(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function st(t,e){function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}function yt(t){return _t(void 0,t)}function _t(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=_t(t[n],e[n]));return t}function gt(t,e,n){t[e]=n}function It(t){return JSON.parse(t)}function Nt(t){return JSON.stringify(t)}function Wt(t,e){var n=new Bt(t,e);return n.subscribe.bind(n)}function jt(){}function qt(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function Ht(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(qt(t,e,r)+"must be a valid function.")}function Kt(t,e,n,r){if((!r||n)&&("object"!=(void 0===n?"undefined":_typeof(n))||null===n))throw new Error(qt(t,e,r)+"must be a valid context object.")}function $t(t,e){throw Zt.create(t,e)}function Un(t,e){return Re(t.name,e.name)}function Mn(t,e){return Re(t,e)}function Vn(t,e){if(void 0===e&&(e=null),null===t)return Wn.EMPTY_NODE;if("object"==(void 0===t?"undefined":_typeof(t))&&".priority"in t&&(e=t[".priority"]),lt(null===e||"string"==typeof e||"number"==typeof e||"object"==(void 0===e?"undefined":_typeof(e))&&".sv"in e,"Invalid priority type found: "+(void 0===e?"undefined":_typeof(e))),"object"==(void 0===t?"undefined":_typeof(t))&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=(void 0===t?"undefined":_typeof(t))||".sv"in t)return new Cn(t,Vn(e));if(t instanceof Array||!jn){var n=Wn.EMPTY_NODE,r=t;return Ot(r,function(t,e){if(At(r,t)&&"."!==t.substring(0,1)){var i=Vn(e);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}}),n.updatePriority(Vn(e))}var i=[],o=!1,a=t;if(Ot(a,function(t,e){if("string"!=typeof t||"."!==t.substring(0,1)){var n=Vn(a[t]);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),i.push(new vn(t,n)))}}),0==i.length)return Wn.EMPTY_NODE;var s=Ln(i,Un,function(t){return t.name},Mn);if(o){var u=Ln(i,Nn.getCompare());return new Wn(s,Vn(e),new Fn({".priority":u},{".priority":Nn}))}return new Wn(s,Vn(e),Fn.Default)}function Ri(t,e){if(null==t||null==e)return!1;if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(var n=new DataView(t),r=new DataView(e),i=0;i<t.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function Ai(t){return function(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(null,e))}(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Oi(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}function Li(){var t=indexedDB.open(Pi);t.onerror=function(t){},t.onsuccess=function(e){!function(t){if(t.objectStoreNames.contains(Di)){var e=t.transaction(Di).objectStore(Di),n=new ki,r=e.openCursor();r.onerror=function(t){console.warn("Unable to cleanup old IDB.",t)},r.onsuccess=function(){var e=r.result;if(e){var i=e.value;n.deleteToken(i.fcmSenderId,i.fcmToken,i.fcmPushSet),e.continue()}else t.close(),indexedDB.deleteDatabase(Pi)}}}(t.result)}}function Ui(t){if(t.fcmToken&&("string"!=typeof t.fcmToken||0===t.fcmToken.length))throw Si.create(Ti.BAD_TOKEN);if(t.swScope&&("string"!=typeof t.swScope||0===t.swScope.length))throw Si.create(Ti.BAD_SCOPE);if(t.vapidKey&&(!(t.vapidKey instanceof Uint8Array)||65!==t.vapidKey.length))throw Si.create(Ti.BAD_VAPID_KEY);if(t.endpoint&&("string"!=typeof t.endpoint||0===t.endpoint.length))throw Si.create(Ti.BAD_SUBSCRIPTION);if(t.auth&&!(t.auth instanceof ArrayBuffer))throw Si.create(Ti.BAD_SUBSCRIPTION);if(t.p256dh&&!(t.p256dh instanceof ArrayBuffer))throw Si.create(Ti.BAD_SUBSCRIPTION);if(t.fcmSenderId&&("string"!=typeof t.fcmSenderId||0===t.fcmSenderId.length))throw Si.create(Ti.BAD_SENDER_ID);if(t.fcmPushSet&&("string"!=typeof t.fcmPushSet||0===t.fcmPushSet.length))throw Si.create(Ti.BAD_PUSH_SET)}function Vi(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function qi(t,e){return(n={})[wi.TYPE_OF_MSG]=t,n[wi.DATA]=e,n;var n}function to(t){return"storage/"+t}function eo(){return new Ji(Zi.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function no(){return new Ji(Zi.CANCELED,"User canceled the upload/download.")}function ro(){return new Ji(Zi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function io(t,e,n){return new Ji(Zi.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function oo(){return new Ji(Zi.APP_DELETED,"The Firebase app was deleted.")}function ao(t,e){return new Ji(Zi.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function so(t){throw new Ji(Zi.INTERNAL_ERROR,"Internal error: "+t)}function co(t){switch(t){case uo.RAW:case uo.BASE64:case uo.BASE64URL:case uo.DATA_URL:return;default:throw"Expected one of the event types: ["+uo.RAW+", "+uo.BASE64+", "+uo.BASE64URL+", "+uo.DATA_URL+"]."}}function lo(t,e){switch(t){case uo.RAW:return new ho(po(e));case uo.BASE64:case uo.BASE64URL:return new ho(fo(t,e));case uo.DATA_URL:return new ho(function(t){var e=new vo(t);return e.base64?fo(uo.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw ao(uo.DATA_URL,"Malformed data URL.")}return po(e)}(e.rest)}(e),function(t){return new vo(t).contentType}(e))}throw eo()}function po(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function fo(t,e){switch(t){case uo.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw ao(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case uo.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw ao(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw ao(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}function bo(t){switch(t){case go.RUNNING:case go.PAUSING:case go.CANCELING:return mo.RUNNING;case go.PAUSED:return mo.PAUSED;case go.SUCCESS:return mo.SUCCESS;case go.CANCELED:return mo.CANCELED;case go.ERROR:default:return mo.ERROR}}function wo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Eo(t,e){for(var n in t)wo(t,n)&&e(n,t[n])}function To(t){if(null==t)return{};var e={};return Eo(t,function(t,n){e[t]=n}),e}function Co(t){return new Promise(t)}function So(t){return Promise.resolve(t)}function Io(t){return null!=t}function No(t){return void 0!==t}function Ro(t){return"function"==typeof t}function Ao(t){return"object"==(void 0===t?"undefined":_typeof(t))}function ko(t){return Ao(t)&&null!==t}function Oo(t){return"string"==typeof t||t instanceof String}function Po(t){return Do()&&t instanceof Blob}function Do(){return"undefined"!=typeof Blob}function Fo(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return Ao(n=e)&&!Array.isArray(n)?e:null}function Mo(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Wo(t){return Ki+Qi+t}function Bo(t){return Ki+zi+t}function jo(t){var e=encodeURIComponent,n="?";return Eo(t,function(t,r){var i=e(t)+"="+e(r);n=n+i+"&"}),n=n.slice(0,-1)}function Vo(t,e){return e}function Ko(){if(Ho)return Ho;var t=[];t.push(new qo("bucket")),t.push(new qo("generation")),t.push(new qo("metageneration")),t.push(new qo("name","fullPath",!0));var e=new qo("name");e.xform=function(t,e){return function(t){return!Oo(t)||t.length<2?t:Mo(t=t)}(e)},t.push(e);var n=new qo("size");return n.xform=function(t,e){return Io(e)?+e:e},t.push(n),t.push(new qo("timeCreated")),t.push(new qo("updated")),t.push(new qo("md5Hash",null,!0)),t.push(new qo("cacheControl",null,!0)),t.push(new qo("contentDisposition",null,!0)),t.push(new qo("contentEncoding",null,!0)),t.push(new qo("contentLanguage",null,!0)),t.push(new qo("contentType",null,!0)),t.push(new qo("metadata","customMetadata",!0)),t.push(new qo("downloadTokens","downloadURLs",!1,function(t,e){if(!(Oo(e)&&e.length>0))return[];var n=encodeURIComponent;return e.split(",").map(function(e){var r=t.bucket,i=t.fullPath;return function(t){return Gi+Qi+t}("/b/"+n(r)+"/o/"+n(i))+jo({alt:"media",token:e})})})),Ho=t}function Go(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new Uo(n,r);return e.makeStorageReference(i)}})}(r,t),r}function Qo(t,e){for(var n={},r=e.length,i=0;i<r;i++){
var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function zo(t){if(!t||!Ao(t))throw"Expected Metadata object.";for(var e in t){var n=t[e];if("customMetadata"===e){if(!Ao(n))throw"Expected object for 'customMetadata' mapping."}else if(ko(n))throw"Mapping for '"+e+"' cannot be an object."}}function Yo(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}var a,s,u,c,h,l;if(!(r<=n.length&&n.length<=i))throw a=r,s=i,u=t,c=n.length,a===s?(h=a,l=1===a?"argument":"arguments"):(h="between "+a+" and "+s,l="arguments"),new Ji(Zi.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+u+"`: Expected "+h+" "+l+", received "+c+".");for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(e){throw e instanceof Error?io(o,t,e.message):io(o,t,e)}}function $o(t,e){function n(t){if(!Oo(t))throw"Expected string."}var r,i,o;return t?(i=n,o=t,r=function(t){i(t),o(t)}):r=n,new Xo(r,e)}function Jo(t){return new Xo(zo,t)}function Zo(){return new Xo(function(t){if(!(function(t){return"number"==typeof t||t instanceof Number}(t)&&t>=0))throw"Expected a number 0 or greater."})}function ta(t,e){return new Xo(function(e){if(!(null===e||Io(e)&&e instanceof Object))throw"Expected an Object.";void 0!==t&&null!==t&&t(e)},e)}function ea(t){return new Xo(function(t){if(null!==t&&!Ro(t))throw"Expected a Function."},t)}function na(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ia(t,e){return-1!==t.indexOf(e)}function aa(t){if(!t)throw eo()}function sa(t,e){return function(n,r){var i=function(t,e,n){var r=Fo(e);return null===r?null:Go(t,r,n)}(t,r,e);return aa(null!==i),i}}function ua(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=new Ji(Zi.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Ji(Zi.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Ji(Zi.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.setServerResponseProp(n.serverResponseProp()),r}}function ca(t){var e=ua(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Ji(Zi.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),o.setServerResponseProp(r.serverResponseProp()),o}}function ha(t,e,n){var r=Wo(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new oa(r,"GET",sa(t,n),i);return o.errorHandler=ca(e),o}function la(t,e,n){var r=To(n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}function fa(t,e){var n;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){aa(!1)}return aa(ia(e||["active"],n)),n}function da(t,e,n,r,i,o,a,s){var u=new pa(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Ji(Zi.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,p=l+h,f={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(l,p);if(null===d)throw ro();var v=e.maxUploadRetryTime(),y=new oa(n,"POST",function(t,n){var i,a=fa(t,["active","final"]),s=u.current+h,c=r.size();return i="final"===a?sa(e,o)(t,n):null,new pa(s,c,"final"===a,i)},v);return y.headers=f,y.body=d.uploadData(),y.progressCallback=s||null,y.errorHandler=ua(t),y}function _a(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];So(!0).then(function(){t.apply(null,e)})}}function Sa(t,e,n){var r=jo(t.urlParams),i=t.url+r,o=To(t.headers);return function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(o,e),function(t){var e=void 0!==te?te.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}(o),new Ta(i,t.method,o,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}function Aa(t,e,n){return new Ia(t,new xo,n)}!function(t){function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(n[Symbol.iterator]=function(){return n}),n}function h(t){this.map={},t instanceof h?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function f(t){var e=new FileReader,n=p(e);return e.readAsArrayBuffer(t),n}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&r(t))this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!i(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var t,e,n,r=l(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=p(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function y(t,e){var n,r,i=(e=e||{}).body;if(t instanceof y){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),o.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function _(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function g(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(t){return t&&DataView.prototype.isPrototypeOf(t)},i=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};h.prototype.append=function(t,e){t=s(t),e=u(e);var n=this.map[t];this.map[t]=n?n+","+e:e},h.prototype.delete=function(t){delete this.map[s(t)]},h.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},h.prototype.set=function(t,e){this.map[s(t)]=u(e)},h.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},h.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),c(t)},h.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),c(t)},h.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),c(t)},e.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},v.call(y.prototype),v.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var a=[301,302,303,307,308];g.redirect=function(t,e){if(-1===a.indexOf(e))throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},t.Headers=h,t.Request=y,t.Response=g,t.fetch=function(t,n){return new Promise(function(r,i){var o=new y(t,n),a=new XMLHttpRequest;a.onload=function(){var t,e,n={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new h,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;r(new g(i,n))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&e.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0);var t=setTimeout;n.prototype.catch=function(t){return this.then(null,t)},n.prototype.then=function(t,n){var i=new this.constructor(e);return r(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,n,i)),i},n.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},n.all=function(t){return new n(function(e,n){function o(t,a){try{if(a&&("object"==(void 0===a?"undefined":_typeof(a))||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){o(t,e)},n)}r[t]=a,0==--i&&e(r)}catch(t){n(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);for(var i=r.length,a=0;a<r.length;a++)o(a,r[a])})},n.resolve=function(t){return t&&"object"==(void 0===t?"undefined":_typeof(t))&&t.constructor===n?t:new n(function(e){e(t)})},n.reject=function(t){return new n(function(e,n){n(t)})},n.race=function(t){return new n(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},n._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(e){t(e,0)},n._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var u=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();u.Promise||(u.Promise=n);var h=c(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),l=c(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),p=(l.version,function(t){return"object"==(void 0===t?"undefined":_typeof(t))?null!==t:"function"==typeof t}),f=function(t){if(!p(t))throw TypeError(t+" is not an object!");return t},d=function(t){try{return!!t()}catch(t){return!0}},v=!d(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),y=h.document,_=p(y)&&p(y.createElement),g=!v&&!d(function(){return 7!=Object.defineProperty((t="div",_?y.createElement(t):{}),"a",{get:function(){return 7}}).a;var t}),m=Object.defineProperty,b={f:v?Object.defineProperty:function(t,e,n){if(f(t),e=function(t,e){if(!p(t))return t;var n,r;if("function"==typeof(n=t.toString)&&!p(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!p(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e),f(n),g)try{return m(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},w=v?function(t,e,n){return b.f(t,e,function(t,e){return{enumerable:!1,configurable:!0,writable:!0,value:e}}(0,n))}:function(t,e,n){return t[e]=n,t},E={}.hasOwnProperty,T=function(t,e){return E.call(t,e)},C=0,S=Math.random(),I=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++C+S).toString(36))},N=c(function(t){var e=I("src"),n=Function.toString,r=(""+n).split("toString");l.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,i,o){var a="function"==typeof i;a&&(T(i,"name")||w(i,"name",n)),t[n]!==i&&(a&&(T(i,e)||w(i,e,t[n]?""+t[n]:r.join(String(n)))),t===h?t[n]=i:o?t[n]?t[n]=i:w(t,n,i):(delete t[n],w(t,n,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),R=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},A=function A(t,e,n){var r,i,o,a,s=t&A.F,u=t&A.G,c=t&A.S,p=t&A.P,f=t&A.B,d=u?h:c?h[e]||(h[e]={}):(h[e]||{}).prototype,v=u?l:l[e]||(l[e]={}),y=v.prototype||(v.prototype={});for(r in u&&(n=e),n)o=((i=!s&&d&&void 0!==d[r])?d:n)[r],a=f&&i?R(o,h):p&&"function"==typeof o?R(Function.call,o):o,d&&N(d,r,o,t&A.U),v[r]!=o&&w(v,r,a),p&&y[r]!=o&&(y[r]=o)};h.core=l,A.F=1,A.G=2,A.S=4,A.P=8,A.B=16,A.W=32,A.U=64,A.R=128;var k=A,O={}.toString,P=function(t){return O.call(t).slice(8,-1)},D=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==P(t)?t.split(""):Object(t)},L=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},x=Math.ceil,F=Math.floor,U=Math.min,M=function(t){return t>0?U(function(t){return isNaN(t=+t)?0:(t>0?F:x)(t)}(t),9007199254740991):0},W=Array.isArray||function(t){return"Array"==P(t)},B=h["__core-js_shared__"]||(h["__core-js_shared__"]={}),j=function(t){return B[t]||(B[t]={})},V=c(function(t){var e=j("wks"),n=h.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:I)("Symbol."+t))}).store=e}),q=V("species"),H=function(t,e){return new(function(t){var e;return W(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!W(e.prototype)||(e=void 0),p(e)&&null===(e=e[q])&&(e=void 0)),void 0===e?Array:e}(t))(e)},K=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,a=6==t,s=5==t||a,u=e||H;return function(e,c,h){for(var l,p,f=Object(L(e)),d=D(f),v=R(c,h,3),y=M(d.length),_=0,g=n?u(e,y):r?u(e,0):void 0;y>_;_++)if((s||_ in d)&&(p=v(l=d[_],_,f),t))if(n)g[_]=p;else if(p)switch(t){case 3:return!0;case 5:return l;case 6:return _;case 2:g.push(l)}else if(o)return!1;return a?-1:i||o?o:g}},G=V("unscopables"),Q=Array.prototype;void 0==Q[G]&&w(Q,G,{});var z=function(t){Q[G][t]=!0},Y=K(5),X=!0;"find"in[]&&Array(1).find(function(){X=!1}),k(k.P+k.F*X,"Array",{find:function(t){return Y(this,t,arguments.length>1?arguments[1]:void 0)}}),z("find"),l.Array.find;var $=K(6),J=!0;"findIndex"in[]&&Array(1).findIndex(function(){J=!1}),k(k.P+k.F*J,"Array",{findIndex:function(t){return $(this,t,arguments.length>1?arguments[1]:void 0)}}),z("findIndex"),l.Array.findIndex;var Z=V("match"),tt=function(t,e,n){if(p(r=e)&&(void 0!==(i=r[Z])?i:"RegExp"==P(r)))throw TypeError("String#"+n+" doesn't accept regex!");var r,i;return String(L(t))},et=V("match"),nt="".startsWith;k(k.P+k.F*function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[et]=!1,!"/./"[t](e)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(t){var e=tt(this,t,"startsWith"),n=M(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return nt?nt.call(e,r,n):e.slice(n,n+r.length)===r}}),l.String.startsWith;var rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},ot=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},lt=function(t,e){if(!t)throw pt(e)},pt=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},ft=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},dt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,p=(15&s)<<2|c>>6,f=63&c;u||(f=64,a||(p=64)),r.push(n[h],n[l],n[p],n[f])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ft(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!=s){var h=a<<4&240|s>>2;if(r.push(h),64!=u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},vt=function(t){try{return dt.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},mt=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}(),bt=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")},wt=function(){return!1},Et="FirebaseError",Tt=Error.captureStackTrace,Ct=function(){return function(t,e){if(this.code=t,this.message=e,Tt)Tt(this,St.prototype.create);else{var n=Error.apply(this,arguments);this.name=Et,Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}}();Ct.prototype=Object.create(Error.prototype),Ct.prototype.constructor=Ct,Ct.prototype.name=Et;var St=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var o=new Ct(i,n);for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=e[a]);return o},t}(),Rt=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=It(vt(o[0])||""),n=It(vt(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},At=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},kt=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},Ot=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},Pt=function(t){return e={},Ot(t,function(t,n){e[t]=n}),e;var e},Dt=function(t){for(var e in t)return!1;return!0},Lt=function(t){var e=0;for(var n in t)e++;return e},xt=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},Ft=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},Ut=function(t){for(var e in t)return e},Mt=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return it(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782),i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}(function(){return function(){this.blockSize=-1}}()),Bt=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=(void 0===t?"undefined":_typeof(t))||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=jt),void 0===r.error&&(r.error=jt),void 0===r.complete&&(r.complete=jt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}(),Vt=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},Gt=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},Qt=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},zt="[DEFAULT]",Yt=[],Xt=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=yt(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){Yt.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){Yt=Yt.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=zt),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==zt?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;_t(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(Yt.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),Yt=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&$t("app-deleted",{name:this.name_})},t}();Xt.prototype.name&&Xt.prototype.options||Xt.prototype.delete||console.log("dc");var Jt,Zt=new St("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),te=function t(){function o(t){return Qt(e,t=t||zt)||$t("no-app",{name:t}),e[t]}function a(){return Object.keys(e).map(function(t){return e[t]})}function s(t,e){Object.keys(n).forEach(function(n){var i=u(t,n);null!==i&&r[i]&&r[i](e,t)})}function u(t,e){if("serverAuth"===e)return null;var n=e;return t.options,n}var e={},n={},r={},i={__esModule:!0,initializeApp:function(t,n){if(void 0===n&&(n={}),"object"!=(void 0===n?"undefined":_typeof(n))||null===n){n={name:n}}var o=n;void 0===o.name&&(o.name=zt);var a=o.name;"string"==typeof a&&a||$t("bad-app-name",{name:a+""}),Qt(e,a)&&$t("duplicate-app",{name:a});var u=new Xt(t,o,i);return e[a]=u,s(u,"create"),u},app:o,apps:null,Promise:Promise,SDK_VERSION:"4.13.1",INTERNAL:{registerService:function(t,e,s,u,c){n[t]&&$t("duplicate-service",{name:t}),n[t]=e,u&&(r[t]=u,a().forEach(function(t){u("create",t)}));var h=function(e){return void 0===e&&(e=o()),"function"!=typeof e[t]&&$t("invalid-app-argument",{name:t}),e[t]()};return void 0!==s&&_t(h,s),i[t]=h,Xt.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,c?e:[])},h},createFirebaseNamespace:t,extendNamespace:function(t){_t(i,t)},createSubscribe:Wt,ErrorFactory:St,removeApp:function(t){s(e[t],"delete"),delete e[t]},factories:n,useAsService:u,Promise:Promise,deepExtend:_t}};return gt(i,"default",i),
Object.defineProperty(i,"apps",{get:a}),gt(o,"App",Xt),i}(),ee=Object.freeze({default:te,firebase:te}),ne=ee&&te||ee,re=ne.default,ie="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(){function i(t){return"string"==typeof t}function o(t){return"boolean"==typeof t}function a(){}function s(t){var e=void 0===t?"undefined":_typeof(t);if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function u(t){return null===t}function c(t){return"array"==s(t)}function h(t){var e=s(t);return"array"==e||"object"==e&&"number"==typeof t.length}function l(t){return"function"==s(t)}function p(t){var e=void 0===t?"undefined":_typeof(t);return"object"==e&&null!=t||"function"==e}function v(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:y).apply(null,arguments)}function g(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function b(t,e){function n(){}n.prototype=e.prototype,t.lb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ad=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function w(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function E(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function T(t){if(Error.captureStackTrace)Error.captureStackTrace(this,T);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function C(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");T.call(this,n+t[r])}function S(t,e){throw new C("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function I(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function N(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function R(){this.b=this.a=null}function k(){var t=ft,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function O(){this.next=this.b=this.a=null}function F(t,e){return 0<=P(t,e)}function U(t,e){var n;return(n=0<=(e=P(t,e)))&&Array.prototype.splice.call(t,e,1),n}function M(t,e){!function(t,e){var n=t.length,r=i(t)?t.split(""):t;for(--n;0<=n;--n)n in r&&e.call(void 0,r[n],n,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length})}function W(t){return Array.prototype.concat.apply([],arguments)}function B(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function j(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function q(t){return $.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(K,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(G,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Q,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(z,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Y,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(X,"&#0;")),t):t}function J(t,e){return-1!=t.indexOf(e)}function Z(t,e){return t<e?-1:t>e?1:0}function nt(t){return J(H,t)}function rt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function it(t){for(var e in t)return!1;return!0}function ot(t){var e,n={};for(e in t)n[e]=t[e];return n}function ct(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ut.length;o++)n=ut[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ht(t){r.setTimeout(function(){throw t},0)}function lt(t,e){st||function(){if(r.Promise&&r.Promise.resolve){var t=r.Promise.resolve(void 0);st=function(){t.then(dt)}}else st=function(){var t=dt;!l(r.setImmediate)||r.Window&&r.Window.prototype&&!nt("Edge")&&r.Window.prototype.setImmediate==r.setImmediate?(at||(at=function(){var t=r.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!nt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!nt("Trident")&&!nt("MSIE")){var e=new t,n={},i=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).rb;n.rb=null,t()}},function(t){i.next={rb:t},i=i.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){r.setTimeout(t,0)}}()),at(t)):r.setImmediate(t)}}(),pt||(st(),pt=!0),ft.add(t,e)}function dt(){for(var t;t=k();){try{t.a.call(t.b)}catch(t){ht(t)}N(A,t)}pt=!1}function vt(t,e){if(this.a=yt,this.j=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=a)try{var n=this;t.call(e,function(t){Nt(n,_t,t)},function(t){if(!(t instanceof Lt))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Nt(n,gt,t)})}catch(t){Nt(this,gt,t)}}function mt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}function wt(t,e,n){var r=bt.get();return r.g=t,r.b=e,r.f=n,r}function Et(t){if(t instanceof vt)return t;var e=new vt(a);return Nt(e,_t,t),e}function Tt(t){return new vt(function(e,n){n(t)})}function Ct(t,e,n){Rt(t,e,n,null)||lt(g(e,t))}function St(t,e){t.b||t.a!=_t&&t.a!=gt||At(t),t.f?t.f.next=e:t.b=e,t.f=e}function It(t,e,n,r){var i=wt(null,null,null);return i.a=new vt(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Lt?o(e):t(i)}catch(t){o(t)}}:o}),i.a.c=t,St(t,i),i.a}function Nt(t,e,n){t.a==yt&&(t===n&&(e=gt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Rt(n,t.Kc,t.Lc,t)||(t.j=n,t.a=e,t.c=null,At(t),e!=gt||n instanceof Lt||function(t,e){t.g=!0,lt(function(){t.g&&Dt.call(null,e)})}(t,n)))}function Rt(t,e,n,r){if(t instanceof vt)return St(t,wt(e||a,n||null,r)),!0;if(E(t))return t.then(e,n,r),!0;if(p(t))try{var i=t.then;if(l(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function At(t){t.h||(t.h=!0,lt(t.Ub,t))}function kt(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ot(t,e,n,r){if(n==gt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Pt(e,n,r);else try{e.c?e.g.call(e.f):Pt(e,n,r)}catch(t){Dt.call(null,t)}N(bt,e)}function Pt(t,e,n){e==_t?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}function Lt(t){T.call(this,t)}function xt(){0!=Ft&&(Ut[this[f]||(this[f]=++d)]=this),this.pa=this.pa,this.oa=this.oa}function Mt(t){if(!t.pa&&(t.pa=!0,t.ua(),0!=Ft)){var e=t[f]||(t[f]=++d);if(0!=Ft&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ut[e]}}function Wt(t){return Wt[" "](t),t}function zt(){var t=r.document;return t?t.documentMode:void 0}function te(t){return function(t,e){var n=Zt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(){for(var e=0,n=V(String(Bt)).split("."),r=V(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=Z(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Z(0==a[2].length,0==s[2].length)||Z(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}()}(t)}function se(t,e){this.type=t,this.b=this.target=e,this.Eb=!0}function ue(t,e){if(se.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Gt){t:{try{Wt(e.nodeName);var o=!0;break t}catch(t){}o=!1}o||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=i(t.pointerType)?t.pointerType:ce[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}function pe(t){t.ma=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function fe(t){this.src=t,this.a={},this.b=0}function de(t,e){var n=e.type;n in t.a&&U(t.a[n],e)&&(pe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function ve(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ma&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}function ge(t,e,n,r,i){if(r&&r.once)be(t,e,n,r,i);else if(c(e))for(var o=0;o<e.length;o++)ge(t,e[o],n,r,i);else n=Ae(n),t&&t[he]?Oe(t,e,n,p(r)?!!r.capture:!!r,i):me(t,e,n,!1,r,i)}function me(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=Ne(t);if(s||(t[ye]=s=new fe(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=Ie,e=ie?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ae||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Te(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function be(t,e,n,r,i){if(c(e))for(var o=0;o<e.length;o++)be(t,e[o],n,r,i);else n=Ae(n),t&&t[he]?Pe(t,e,n,p(r)?!!r.capture:!!r,i):me(t,e,n,!0,r,i)}function we(t,e,n,r,i){if(c(e))for(var o=0;o<e.length;o++)we(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=Ae(n),t&&t[he]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=ve(o=t.a[e],n,r,i))&&(pe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Ne(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ve(e,n,r,i)),(n=-1<t?e[t]:null)&&Ee(n))}function Ee(t){if("number"!=typeof t&&t&&!t.ma){var e=t.src;if(e&&e[he])de(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Te(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ne(e))?(de(n,t),0==n.b&&(n.src=null,e[ye]=null)):pe(t)}}}function Te(t){return t in _e?_e[t]:_e[t]="on"+t}function Ce(t,e,n,r){var i=!0;if((t=Ne(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ma&&(o=Se(o,r),i=i&&!1!==o)}return i}function Se(t,e){var n=t.listener,r=t.La||t.src;return t.Ha&&Ee(t),n.call(r,e)}function Ie(t,e){if(t.ma)return!0;if(!ie){if(!e)t:{e=["window","event"];for(var n=r,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}if(e=new ue(i=e,this),n=!0,!(0>i.keyCode||void 0!=i.returnValue)){t:{var o=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(t){o=!0}(o||void 0==i.returnValue)&&(i.returnValue=!0)}for(i=[],o=e.b;o;o=o.parentNode)i.push(o);for(t=t.type,o=i.length-1;0<=o;o--){e.b=i[o];var a=Ce(i[o],t,!0,e);n=n&&a}for(o=0;o<i.length;o++)e.b=i[o],a=Ce(i[o],t,!1,e),n=n&&a}return n}return Se(t,new ue(e,this))}function Ne(t){return(t=t[ye])instanceof fe?t:null}function Ae(t){return l(t)?t:(t[Re]||(t[Re]=function(e){return t.handleEvent(e)}),t[Re])}function ke(){xt.call(this),this.u=new fe(this),this.Mb=this,this.Ta=null}function Oe(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function Pe(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function De(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ma&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ha&&de(t.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Eb}function Le(t,e,n){if(l(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:r.setTimeout(t,e||0)}function xe(t){var e=null;return new vt(function(n,r){-1==(e=Le(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).m(function(t){throw r.clearTimeout(e),t})}function Fe(t){if(t.S&&"function"==typeof t.S)return t.S();if(i(t))return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Ue(t){if(t.U&&"function"==typeof t.U)return t.U();if(!t.S||"function"!=typeof t.S){if(h(t)||i(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Me(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Me)for(n=t.U(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function We(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Be(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Be(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Be(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ve(t,e){if(this.b=this.l=this.c="",this.j=null,this.h=this.g="",this.f=!1,t instanceof Ve){this.f=void 0!==e?e:t.f,qe(this,t.c),this.l=t.l,this.b=t.b,He(this,t.j),this.g=t.g,e=t.a;var n=new on;n.c=e.c,e.a&&(n.a=new Me(e.a),n.b=e.b),Ke(this,n),this.h=t.h}else t&&(n=String(t).match(je))?(this.f=!!e,qe(this,n[1]||"",!0),this.l=Xe(n[2]||""),this.b=Xe(n[3]||"",!0),He(this,n[4]),this.g=Xe(n[5]||"",!0),Ke(this,n[6]||"",!0),this.h=Xe(n[7]||"")):(this.f=!!e,this.a=new on(null,this.f))}function qe(t,e,n){t.c=n?Xe(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function He(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.j=e}else t.j=null}function Ke(t,e,n){e instanceof on?(t.a=e,function(t,e){e&&!t.f&&(an(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(un(this,e),hn(this,n,t))},t)),t.f=e}(t.a,t.f)):(n||(e=$e(e,nn)),t.a=new on(e,t.f))}function Ge(t,e,n){t.a.set(e,n)}function Qe(t,e){return t.a.get(e)}function ze(t){return t instanceof Ve?new Ve(t):new Ve(t,void 0)}function Ye(t,e){var n=new Ve(null,void 0);return qe(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function Xe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function $e(t,e,n){return i(t)?(t=encodeURI(t).replace(e,Je),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Je(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}function on(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function an(t){t.a||(t.a=new Me,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];!function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c))}function sn(t){var e=Ue(t);if(void 0===e)throw Error("Keys are undefined");var n=new on(null,void 0);t=Fe(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];c(o)?hn(n,i,o):n.add(i,o)}return n}function un(t,e){an(t),e=ln(t,e),Be(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Be((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&We(t)))}function cn(t,e){return an(t),e=ln(t,e),Be(t.a.b,e)}function hn(t,e,n){un(t,e),0<n.length&&(t.c=null,t.a.set(ln(t,e),B(n)),t.b+=n.length)}function ln(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function fn(){this.a="",this.b=vn}function dn(t){return t instanceof fn&&t.constructor===fn&&t.b===vn?t.a:(S("expected object of type Const, got '"+t+"'"),"type_error:Const")}function yn(t){var e=new fn;return e.a=t,e}function _n(){this.a="",this.b=En}function gn(t){return t instanceof _n&&t.constructor===_n&&t.b===En?t.a:(S("expected object of type TrustedResourceUrl, got '"+t+"' of type "+s(t)),"type_error:TrustedResourceUrl")}function mn(t,e){var n=dn(t);if(!wn.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=new _n;return e.a=t,e}(t=n.replace(bn,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof fn?dn(t):encodeURIComponent(String(t))}))}function Tn(){this.a="",this.b=Nn}function Cn(t){return t instanceof Tn&&t.constructor===Tn&&t.b===Nn?t.a:(S("expected object of type SafeUrl, got '"+t+"' of type "+s(t)),"type_error:SafeUrl")}function In(t){return t instanceof Tn?t:(t=t.la?t.ja():String(t),Sn.test(t)||(t="about:invalid#zClosurez"),Rn(t))}function Rn(t){var e=new Tn;return e.a=t,e}function An(){this.a="",this.b=kn}function On(t){var e=new An;return e.a=t,e}function Pn(t){var e=document;return i(t)?e.getElementById(t):t}function Dn(t,e){rt(e,function(e,n){e&&e.la&&(e=e.ja()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Ln.hasOwnProperty(n)?t.setAttribute(Ln[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}function xn(t,e,n){var r=arguments,o=document,a=String(r[0]),s=r[1];if(!pn&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',q(s.name),'"'),s.type){a.push(' type="',q(s.type),'"');var u={};ct(u,s),delete u.type,s=u}a.push(">"),a=a.join("")}return a=o.createElement(a),s&&(i(s)?a.className=s:c(s)?a.className=s.join(" "):Dn(a,s)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild(i(n)?t.createTextNode(n):n)}for(var o=2;o<n.length;o++){var a=n[o];!h(a)||p(a)&&0<a.nodeType?r(a):D(Fn(a)?B(a):a,r)}}(o,a,r),a}function Fn(t){if(t&&"number"==typeof t.length){if(p(t))return"function"==typeof t.item||"string"==typeof t.item;if(l(t))return"function"==typeof t.item}return!1}function Un(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==(void 0===n?"undefined":_typeof(n))){if(c(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Bn(i,r),r.push(":"),t(e,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(void 0===n?"undefined":_typeof(n)){case"string":Bn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+(void 0===n?"undefined":_typeof(n)))}}}(new function(){},t,e),e.join("")}function Bn(t,e){e.push('"',t.replace(Wn,function(t){var e=Mn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Mn[t]=e),e}),'"')}function jn(){var t=or();return qt&&!!Jt&&11==Jt||/Edge\/\d+/.test(t)}function Vn(){return r.window&&r.window.location.href||self&&self.location&&self.location.href||""}function qn(t,e){e=e||r.window;var n="about:blank";t&&(n=Cn(In(t))),e.location.href=n}function Hn(t){return!!((t=(t||or()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Kn(t){t=t||r.window;try{t.close()}catch(t){}}function Gn(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=or().toLowerCase(),r&&(e.target=r,J(n,"crios/")&&(e.target="_blank")),nr(or())==tr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Tn?n:In(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((nt("iPhone")&&!nt("iPod")&&!nt("iPad")||nt("iPad")||nt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=r.document.createElement("A"),e instanceof Tn||e instanceof Tn||(e=e.la?e.ja():String(e),Sn.test(e)||(e="about:invalid#zClosurez"),e=Rn(e)),a.href=Cn(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=Cn(e),a&&(Kt&&J(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,yn("b/12014412, meta tag with sanitized URL"),t=On(t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+q(t)+'">'),a.document.write(function(t){return t instanceof An&&t.constructor===An&&t.b===kn?t.a:(S("expected object of type SafeHtml, got '"+t+"' of type "+s(t)),"type_error:SafeHtml")}(t)),a.document.close())):(a=r.open(Cn(e),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}function zn(){var t=null;return new vt(function(e){"complete"==r.document.readyState?e():(t=function(){e()},be(window,"load",t))}).m(function(e){throw we(window,"load",t),e})}function Yn(t){return t=t||or(),!("file:"!==hr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xn(){var t=r.window;try{return!(!t||t==t.top)}catch(t){return!1}}function $n(){return"object"!=_typeof(r.window)&&"function"==typeof r.importScripts}function Jn(){return e.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.INTERNAL.hasOwnProperty("node")?"Node":$n()?"Worker":"Browser"}function Zn(){var t=Jn();return"ReactNative"===t||"Node"===t}function nr(t){var e=t.toLowerCase();return J(e,"opera/")||J(e,"opr/")||J(e,"opios/")?"Opera":J(e,"iemobile")?"IEMobile":J(e,"msie")||J(e,"trident/")?"IE":J(e,"edge/")?"Edge":J(e,"firefox/")?tr:J(e,"silk/")?"Silk":J(e,"blackberry")?"Blackberry":J(e,"webos")?"Webos":!J(e,"safari/")||J(e,"chrome/")||J(e,"crios/")||J(e,"android")?!J(e,"chrome/")&&!J(e,"crios/")||J(e,"edge/")?J(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":er:"Safari"}function ir(t,e){e=e||[];var n,r=[],i={};for(n in rr)i[rr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Jn())?r=nr(i=or()):"Worker"===r&&(r=nr(i=or())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function or(){return r.navigator&&r.navigator.userAgent||""}function ar(t,e){t=t.split("."),e=e||r;for(var n=0;n<t.length&&"object"==(void 0===e?"undefined":_typeof(e))&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function sr(){try{var t=r.localStorage,e=vr();if(t)return t.setItem(e,"1"),t.removeItem(e),!jn()||!!r.indexedDB}catch(t){return $n()&&!!r.indexedDB}return!1}function ur(){return(cr()||"chrome-extension:"===hr()||Yn())&&!Zn()&&sr()&&!$n()}function cr(){return"http:"===hr()||"https:"===hr()}function hr(){return r.location&&r.location.protocol||null}function lr(t){return!Hn(t=t||or())&&nr(t)!=tr}function pr(t){return void 0===t?null:Un(t)}function fr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function dr(t){if(null!==t)return JSON.parse(t)}function vr(t){return t||Math.floor(1e9*Math.random()).toString()}function yr(t){return"Safari"!=nr(t=t||or())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function _r(){var t=r.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function gr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=or(),e=Jn(),this.b=Hn(t)||"ReactNative"===e}function mr(){var t=r.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function br(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function wr(){return!(!ar("fireauth.oauthhelper",r)&&!ar("fireauth.iframe",r))}function Sr(t,e,n){Er?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Ir(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Sr(t,n,e[n])}function Nr(t){var e={};return Ir(e,t),e}function Rr(t){var e=t;if("object"==(void 0===t?"undefined":_typeof(t))&&null!=t)for(var n in e="length"in t?[]:{},t)Sr(e,n,Rr(t[n]));return e}function Ur(t,e){this.code=Wr+t,this.message=e||Br[t]||""}function Mr(t){var e=t&&t.code;return e?new Ur(e.substring(Wr.length),t.message):null}function jr(t){var e=t[Kr];if(void 0===e)throw new Ur("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Ur("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Vr];if(n&&"object"==(void 0===n?"undefined":_typeof(n))){e=n[zr];var r=n[Gr];if(n=n[Qr],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Ur("argument-error",Gr+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Ur("argument-error",Qr+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Ur("argument-error",zr+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Ur("missing-android-pkg-name")}}else if(void 0!==n)throw new Ur("argument-error",Vr+" property must be a non null object when specified.");if(this.f=null,(e=t[Hr])&&"object"==(void 0===e?"undefined":_typeof(e))){if("string"==typeof(e=e[Yr])&&e.length)this.f=e;else if(void 0!==e)throw new Ur("argument-error",Yr+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Ur("argument-error",Hr+" property must be a non null object when specified.");if(void 0!==(t=t[qr])&&"boolean"!=typeof t)throw new Ur("argument-error",qr+" property must be a boolean when specified.");this.c=!!t}function Xr(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e)null===e[n]&&delete e[n];return e}function Zr(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Jr[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!$r){$r={},Jr={};for(var t=0;65>t;t++)$r[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),Jr[$r[t]]=t,62<=t&&(Jr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}function ti(t){this.c=t.sub,this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function ei(t){return(t=ni(t))&&t.sub&&t.iss&&t.aud&&t.exp?new ti(t):null}function ni(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Zr(t))}catch(t){}return null}function ai(t){for(var e in oi)if(oi[e].Na==t)return oi[e];return null}function si(t){var e={};e["facebook.com"]=pi,e["google.com"]=di,e["github.com"]=fi,e["twitter.com"]=vi;var n=t&&t[ci];try{if(n)return e[n]?new e[n](t):new li(t);if(void 0!==t[ui])return new hi(t)}catch(t){}return null}function hi(t){var e=t[ci];if(!e&&t[ui]){var n=ei(t[ui]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Sr(this,"providerId",e),Sr(this,"isNewUser",n)}function li(t){hi.call(this,t),Sr(this,"profile",Rr((t=dr(t.rawUserInfo||"{}"))||{}))}function pi(t){if(li.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function fi(t){if(li.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Sr(this,"username",this.profile&&this.profile.login||null)}function di(t){if(li.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function vi(t){if(li.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Sr(this,"username",t.screenName||null)}function yi(t){var e=ze(t),n=Qe(e,"link"),r=Qe(ze(n),"link");return Qe(ze(e=Qe(e,"deep_link_id")),"link")||e||r||n||t}function _i(t,e){return t.then(function(t){if(t[$o]){var n=ei(t[$o]);if(!n||e!=n.c)throw new Ur("user-mismatch");return t}throw new Ur("user-mismatch")}).m(function(t){throw t&&t.code&&t.code==Wr+"user-not-found"?new Ur("user-mismatch"):t})}function gi(t,e,n){if(e.idToken||e.accessToken)e.idToken&&Sr(this,"idToken",e.idToken),e.accessToken&&Sr(this,"accessToken",e.accessToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Ur("internal-error","failed to construct a credential");Sr(this,"accessToken",e.oauthToken),Sr(this,"secret",e.oauthTokenSecret)}Sr(this,"providerId",t),Sr(this,"signInMethod",n)}function mi(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,{postBody:sn(e).toString(),requestUri:"http://localhost"}}function bi(t,e){this.Ac=e||[],Ir(this,{providerId:t,isOAuthProvider:!0}),this.tb={},this.Za=(ai(t)||{}).Ma||null,this.Xa=null}function wi(t){bi.call(this,t,ii),this.a=[]}function Ei(){wi.call(this,"facebook.com")}function Ti(t){if(!t)throw new Ur("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new Ei).credential(null,e)}function Ci(){wi.call(this,"github.com")}function Si(t){if(!t)throw new Ur("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new Ci).credential(null,e)}function Ii(){wi.call(this,"google.com"),this.ta("profile")}function Ni(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new Ii).credential(n,e)}function Ri(){bi.call(this,"twitter.com",ri)}function Ai(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Ur("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new gi("twitter.com",n,"twitter.com")}function ki(t,e,n){this.a=t,this.b=e,Sr(this,"providerId","password"),
Sr(this,"signInMethod",n===Oi.EMAIL_LINK_SIGN_IN_METHOD?Oi.EMAIL_LINK_SIGN_IN_METHOD:Oi.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Oi(){Ir(this,{providerId:"password",isOAuthProvider:!1})}function Pi(t,e){if(!(e=Di(e)))throw new Ur("argument-error","Invalid email link!");return new ki(t,e,Oi.EMAIL_LINK_SIGN_IN_METHOD)}function Di(t){var e=Qe((t=new function(t){this.a=ze(t)}(t=yi(t))).a,"oobCode")||null;return"signIn"===(Qe(t.a,"mode")||null)&&e?e:null}function Li(t){if(!(t.Ra&&t.Qa||t.Ea&&t.Z))throw new Ur("internal-error");this.a=t,Sr(this,"providerId","phone"),Sr(this,"signInMethod","phone")}function xi(t){return t.a.Ea&&t.a.Z?{temporaryProof:t.a.Ea,phoneNumber:t.a.Z}:{sessionInfo:t.a.Ra,code:t.a.Qa}}function Fi(t){try{this.a=t||e.auth()}catch(t){throw new Ur("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ir(this,{providerId:"phone",isOAuthProvider:!1})}function Ui(t,e){if(!t)throw new Ur("missing-verification-id");if(!e)throw new Ur("missing-verification-code");return new Li({Ra:t,Qa:e})}function Mi(t){if(t.temporaryProof&&t.phoneNumber)return new Li({Ea:t.temporaryProof,Z:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret;t=t&&t.oauthIdToken;try{switch(e){case"google.com":return Ni(t,n);case"facebook.com":return Ti(n);case"github.com":return Si(n);case"twitter.com":return Ai(n,r);default:return new wi(e).credential(t,n)}}catch(t){return null}}function Wi(t){if(!t.isOAuthProvider)throw new Ur("invalid-oauth-provider")}function Bi(t,e,n,r,i){if(this.b=t,this.c=e||null,this.f=n||null,this.g=r||null,this.a=i||null,!this.f&&!this.a)throw new Ur("invalid-auth-event");if(this.f&&this.a)throw new Ur("invalid-auth-event");if(this.f&&!this.g)throw new Ur("invalid-auth-event")}function ji(t){return(t=t||{}).type?new Bi(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Mr(t.error)):null}function Vi(){this.b=null,this.a=[]}function Hi(t){var e="unauthorized-domain",n=void 0,r=ze(t);t=r.b,"chrome-extension"==(r=r.c)?n=j("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=j("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Ur.call(this,e,n)}function Ki(t,e,n){Ur.call(this,t,n),(t=e||{}).ub&&Sr(this,"email",t.ub),t.Z&&Sr(this,"phoneNumber",t.Z),t.credential&&Sr(this,"credential",t.credential)}function Gi(t){if(t.code){var e=t.code||"";0==e.indexOf(Wr)&&(e=e.substring(Wr.length));var n={credential:Mi(t)};if(t.email)n.ub=t.email;else{if(!t.phoneNumber)return new Ur(e,t.message||void 0);n.Z=t.phoneNumber}return new Ki(e,n,t.message)}return null}function Yi(){}function Xi(t){return t.c||(t.c=t.b())}function $i(){}function Ji(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Zi(){}function to(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText="",this.a.onload=_(this.bc,this),this.a.onerror=_(this.zb,this),this.a.onprogress=_(this.cc,this),this.a.ontimeout=_(this.fc,this)}function eo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function no(t,e,n){this.reset(t,e,n,void 0,void 0)}function ro(t){this.f=t,this.b=this.c=this.a=null}function io(t,e){this.name=t,this.value=e}function lo(t){var e;if(ho||(ho=new ro(""),co[""]=ho,ho.c=so),!(e=co[t])){e=new ro(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=lo(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,co[t]=e}return e}function po(t,e){t&&t.log(uo,e,void 0)}function fo(t){this.f=t}function vo(t){ke.call(this),this.j=t,this.readyState=yo,this.status=0,this.responseText=this.statusText="",this.onreadystatechange=null,this.g=new Headers,this.b=null,this.h="GET",this.c="",this.a=!1,this.f=lo("goog.net.FetchXmlHttp")}function _o(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function go(t){ke.call(this),this.headers=new Me,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.j=this.G=!1,this.g=0,this.s=null,this.o=mo,this.v=this.O=!1}function Eo(t,e,n,o,a){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.N=n,t.G=!1,t.c=!0,t.a=t.D?t.D.a():Qi.a(),t.B=Xi(t.D?t.D:Qi),t.a.onreadystatechange=_(t.Db,t);try{po(t.b,Oo(t,"Opening Xhr")),t.I=!0,t.a.open(n,String(e),!0),t.I=!1}catch(e){return po(t.b,Oo(t,"Error opening Xhr: "+e.message)),void Co(t,e)}e=o||"";var s=new Me(t.headers);a&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||i(t))D(t,e,void 0);else for(var n=Ue(t),r=Fe(t),o=r.length,a=0;a<o;a++)e.call(void 0,r[a],n&&n[a],t)}(a,function(t,e){s.set(e,t)}),a=function(t){t:{for(var e=To,n=t.length,r=i(t)?t.split(""):t,o=0;o<n;o++)if(o in r&&e.call(void 0,r[o],o,t)){e=o;break t}e=-1}return 0>e?null:i(t)?t.charAt(e):t[e]}(s.U()),o=r.FormData&&e instanceof r.FormData,!F(wo,n)||a||o||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.o&&(t.a.responseType=t.o),"withCredentials"in t.a&&t.a.withCredentials!==t.O&&(t.a.withCredentials=t.O);try{Ro(t),0<t.g&&(t.v=function(t){return qt&&te(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),po(t.b,Oo(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=_(t.Fa,t)):t.s=Le(t.Fa,t.g,t)),po(t.b,Oo(t,"Sending request")),t.j=!0,t.a.send(e),t.j=!1}catch(e){po(t.b,Oo(t,"Send error: "+e.message)),Co(t,e)}}function To(t){return"content-type"==t.toLowerCase()}function Co(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,So(t),No(t)}function So(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Io(t){if(t.c&&void 0!==n)if(t.B[1]&&4==Ao(t)&&2==ko(t))po(t.b,Oo(t,"Local request error detected and ignored"));else if(t.j&&4==Ao(t))Le(t.Db,0,t);else if(t.dispatchEvent("readystatechange"),4==Ao(t)){po(t.b,Oo(t,"Request complete")),t.c=!1;try{var e,i=ko(t);t:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break t;default:o=!1}if(!(e=o)){var a;if(a=0===i){var s=String(t.l).match(je)[1]||null;if(!s&&r.self&&r.self.location){var u=r.self.location.protocol;s=u.substr(0,u.length-1)}a=!bo.test(s?s.toLowerCase():"")}e=a}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ao(t)?t.a.statusText:""}catch(e){po(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+ko(t)+"]",So(t)}}finally{No(t)}}}function No(t,e){if(t.a){Ro(t);var n=t.a,r=t.B[0]?a:null;t.a=null,t.B=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(oo,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Ro(t){t.a&&t.v&&(t.a.ontimeout=null),t.s&&(r.clearTimeout(t.s),t.s=null)}function Ao(t){return t.a?t.a.readyState:0}function ko(t){try{return 2<Ao(t)?t.a.status:-1}catch(t){return-1}}function Oo(t,e){return e+" ["+t.N+" "+t.l+" "+ko(t)+"]"}function Po(t,e){this.g=[],this.v=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.j=!1,this.h=0,this.b=null,this.l=0}function Do(t,e,n){t.a=!0,t.c=n,t.f=!e,Uo(t)}function Lo(t){if(t.a){if(!t.u)throw new Mo(t);t.u=!1}}function xo(t,e,n,r){t.g.push([e,n,r]),t.a&&Uo(t)}function Fo(t){return x(t.g,function(t){return l(t[1])})}function Uo(t){if(t.h&&t.a&&Fo(t)){var e=t.h,n=jo[e];n&&(r.clearTimeout(n.a),delete jo[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var i=n=!1;t.g.length&&!t.j;){var o=t.g.shift(),a=o[0],s=o[1];if(o=o[2],a=t.f?s:a)try{var u=a.call(o||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(E(e)||"function"==typeof r.Promise&&e instanceof r.Promise)&&(i=!0,t.j=!0)}catch(r){e=r,t.f=!0,Fo(t)||(n=!0)}}t.c=e,i&&(u=_(t.o,t,!0),i=_(t.o,t,!1),e instanceof Po?(xo(e,u,i),e.B=!0):e.then(u,i)),n&&(e=new Bo(e),jo[e.a]=e,t.h=e.a)}function Mo(){T.call(this)}function Wo(){T.call(this)}function Bo(t){this.a=r.setTimeout(_(this.c,this),0),this.b=t}function Vo(t){var e={},n=e.document||document,r=gn(t),i=document.createElement("SCRIPT"),o={Fb:i,Fa:void 0},a=new Po(qo,o),s=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){Ho(i,!0);var t=new Qo(Go,"Timeout reached for loading script "+r);Lo(a),Do(a,!1,t)},u),o.Fa=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ho(i,e.bd||!1,s),a.D())},i.onerror=function(){Ho(i,!0,s);var t=new Qo(Ko,"Error while loading script "+r);Lo(a),Do(a,!1,t)},ct(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Dn(i,o),i.src=gn(t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function qo(){if(this&&this.Fb){var t=this.Fb;t&&"SCRIPT"==t.tagName&&Ho(t,!0,this.Fa)}}function Ho(t,e,n){null!=n&&r.clearTimeout(n),t.onload=a,t.onerror=a,t.onreadystatechange=a,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}function Qo(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),T.call(this,n),this.code=t}function zo(t){this.f=t}function Yo(t,n,i){if(this.b=t,t=n||{},this.j=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=t.secureTokenTimeout||Jo,this.f=ot(t.secureTokenHeaders||Zo),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||ta,this.a=ot(t.firebaseHeaders||ea),i&&(this.a["X-Client-Version"]=i,this.f["X-Client-Version"]=i),i="Node"==Jn(),!(i=r.XMLHttpRequest||i&&e.INTERNAL.node&&e.INTERNAL.node.XMLHttpRequest)&&!$n())throw new Ur("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,$n()?this.c=new fo(self):Zn()?this.c=new zo(i):this.c=new Zi}function na(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ra(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function ia(t,e,n,i,o,a,s){(function(){var t=or();return!((t=nr(t)!=er?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||qt&&Jt&&!(9<Jt))})()||$n()?t=_(t.o,t):(Xo||(Xo=new vt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{r[aa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=mn(oa,{onload:aa});!function(t,e){xo(t,null,e,void 0)}(Vo(n),function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)})),t=_(t.u,t)),t(e,n,i,o,a,s)}function sa(t){if(!zi.test(t.email))throw new Ur("invalid-email")}function ua(t){"email"in t&&sa(t)}function ca(t){if(!t[$o])throw new Ur("internal-error")}function ha(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Ur("internal-error")}else{if(!t.sessionInfo)throw new Ur("missing-verification-id");if(!t.code)throw new Ur("missing-verification-code")}}function pa(t){if(!t.requestUri||!t.sessionId&&!t.postBody)throw new Ur("internal-error")}function fa(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Gi(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Gi(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Gi(t)):t.errorMessage&&(e=Ga(t.errorMessage)),e)throw e;if(!t[$o])throw new Ur("internal-error")}function da(t,e){return e.returnIdpCredential=!0,Ka(t,Ua,e)}function va(t,e){return e.returnIdpCredential=!0,Ka(t,Wa,e)}function ya(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ka(t,Ma,e)}function _a(t){if(!t.oobCode)throw new Ur("invalid-action-code")}function Ka(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.T))return Tt(new Ur("internal-error"));var r,i=e.Cb||"POST";return Et(n).then(e.A).then(function(){return e.R&&(n.returnSecureToken=!0),function(t,e,n,r,i,o){var a=ze(t.g+e);Ge(a,"key",t.b),o&&Ge(a,"cb",m().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&Ge(a,u,r[u]);return new vt(function(e,o){ia(t,a.toString(),function(t){t?t.error?o(Qa(t,i||{})):e(t):o(new Ur("network-request-failed"))},n,s?void 0:Un(fr(r)),t.a,t.h.get())})}(t,e.endpoint,i,n,e.Tb,e.pb||!1)}).then(function(t){return r=t}).then(e.J).then(function(){if(!e.ba)return r;if(!(e.ba in r))throw new Ur("internal-error");return r[e.ba]})}function Ga(t){return Qa({error:{errors:[{message:t}],code:400,message:t}})}function Qa(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Ur(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",ct(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Ur(r[i],e);return!e&&t&&(e=pr(t)),new Ur("internal-error",e)}function Xa(t){for(var e in Ya)if(Ya[e].id===t)return{firebaseEndpoint:(t=Ya[e]).Ya,secureTokenEndpoint:t.eb};return null}function $a(t){this.b=t,this.a=null,this.ab=function(t){return(ns||(ns=new vt(function(t,e){function n(){_r(),ar("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){_r(),e(Error("Network Error"))},timeout:ts.get()})}if(ar("gapi.iframes.Iframe"))t();else if(ar("gapi.load"))n();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();r[i]=function(){ar("gapi.load")?n():e(Error("Network Error"))},Et(Vo(i=mn(Za,{onload:i}))).m(function(){e(Error("Network Error"))})}}).m(function(t){throw ns=null,t}))).then(function(){return new vt(function(e,n){ar("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},es.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}function rs(t,e,n){this.j=t,this.g=e,this.h=n,this.f=null,this.a=Ye(this.j,"/__/auth/iframe"),Ge(this.a,"apiKey",this.g),Ge(this.a,"appName",this.h),this.b=null,this.c=[]}function is(t,e,n,r,i){this.o=t,this.u=e,this.c=n,this.l=r,this.h=this.g=this.j=null,this.a=i,this.f=null}function os(t){try{return e.app(t).auth().Ka()}catch(t){return[]}}function as(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.o=this.s=this.v=null,this.g=[],this.l=this.a=null}function ss(t){var e=Vn();return function(t){return Ka(t,ka,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=ze(e),r=n.c;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=ze(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Qn.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Hi(Vn())})}function us(t){return t.l?t.l:(t.l=zn().then(function(){if(!t.s){var e=t.c,n=t.h,r=os(t.b),i=new rs(t.u,t.f,t.b);i.f=e,i.b=n,i.c=B(r||[]),t.s=i.toString()}t.j=new $a(t.s),function(t){if(!t.j)throw Error("IfcHandler must be initialized!");!function(t,e){t.ab.then(function(){t.a.register("authEvent",e,ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.j,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=ji(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Et(n)}return n.status="ERROR",Et(n)})}(t)}),t.l)}function cs(t){return t.o||(t.v=t.c?ir(t.c,os(t.b)):null,t.o=new Yo(t.f,Xa(t.h),t.v)),t.o}function hs(t,e,n,r,i,o,a,s,u,c){return(t=new is(t,e,n,r,i)).j=o,t.g=a,t.h=s,t.b=ot(u||null),t.f=c,t.toString()}function ls(t){if(this.a=t||e.INTERNAL.reactNative&&e.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Ur("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function ps(){if(!vs())throw new Ur("web-storage-unsupported");this.f={},this.a=[],this.b=0,this.g=r.indexedDB,this.type="indexedDB"}function fs(t){return new vt(function(e,n){var r=t.g.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new vt(function(e,n){var r=t.g.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return fs(t)}).then(function(t){e(t)}).m(function(t){n(t)})}})}function ds(t){return t.h||(t.h=fs(t)),t.h}function vs(){try{return!!r.indexedDB}catch(t){return!1}}function ys(t){return t.objectStore("firebaseLocalStorage")}function _s(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function gs(t){return new vt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(Error(t.target.errorCode))}})}function ms(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Et().then(function(){return vs()?(Ja||(Ja=new ps),(n=Ja).set("__sak","!").then(function(){return n.get("__sak")}).then(function(t){if("!"!==t)throw Error("indexedDB not supported!");return n.P("__sak")}).then(function(){return n}).m(function(){return e.c})):e.c}).then(function(t){return e.type=t.type,t.Y(function(t){D(e.a,function(e){e(t)})}),t})}function bs(){this.a={},this.type="inMemory"}function ws(){if(!function(){var t="Node"==Jn();if(!(t=Es()||t&&e.INTERNAL.node&&e.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Jn())throw new Ur("internal-error","The LocalStorage compatibility library was not found.");throw new Ur("web-storage-unsupported")}this.a=Es()||e.INTERNAL.node.localStorage,this.type="localStorage"}function Es(){try{var t=r.localStorage,e=vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ts(){this.type="nullStorage"}function Cs(){if(!function(){var t="Node"==Jn();if(!(t=Ss()||t&&e.INTERNAL.node&&e.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Jn())throw new Ur("internal-error","The SessionStorage compatibility library was not found.");throw new Ur("web-storage-unsupported")}this.a=Ss()||e.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ss(){try{var t=r.sessionStorage,e=vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ds(){var t=!(yr(or())||!Xn()),e=lr(),n=sr();this.o=t,this.h=e,this.l=n,this.a={},Is||(Is=new function(){var t={};t.Browser=Rs,t.Node=As,t.ReactNative=ks,t.Worker=Os,this.a=t[Jn()]}),t=Is;try{this.g=!jn()&&wr()||!r.indexedDB?new t.a.w:new ms($n()?new bs:new t.a.w)}catch(t){this.g=new bs,this.h=!0}try{this.j=new t.a.Pa}catch(t){this.j=new bs}this.u=new bs,this.f=_(this.Kb,this),this.b={}}function Ls(){return Ns||(Ns=new Ds),Ns}function xs(t,e){switch(e){case"session":return t.j;case"none":return t.u;default:return t.g}}function Fs(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Us(t,e,n){return n=Fs(e,n),"local"==e.w&&(t.b[n]=null),xs(t,e.w).P(n)}function Ms(t){t.c&&(clearInterval(t.c),t.c=null)}function js(t,e){this.b=-1,this.b=Vs,this.f=r.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.j=t,this.h=e,this.l=r.Int32Array?new Int32Array(64):Array(64),void 0!==Ws||(Ws=r.Int32Array?new Int32Array(Ys):Ys),this.reset()}function Qs(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var p=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|Ws[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+p|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function zs(t,e,n){void 0===n&&(n=e.length);var r=0,o=t.c;if(i(e))for(;r<n;)t.f[o++]=e.charCodeAt(r++),o==t.b&&(Qs(t),o=0);else{if(!h(e))throw Error("message must be string or array");for(;r<n;){var a=e[r++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");t.f[o++]=a,o==t.b&&(Qs(t),o=0)}}t.c=o,t.g+=n}function Xs(){js.call(this,8,$s)}function Js(t,e,n,r,i){this.u=t,this.j=e,this.l=n,this.o=r||null,this.s=i||null,this.h=e+":"+n,this.v=new function(){this.a=Ls()},this.g=new function(t){this.a=t,this.b=Ls()}(this.h),this.f=null,this.b=[],this.a=this.c=null}function Zs(t){return new Ur("invalid-cordova-configuration",t)}function tu(t){var e=new Xs;zs(e,t),t=[];var n=8*e.g;56>e.c?zs(e,Gs,56-e.c):zs(e,Gs,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Qs(e),r=n=0;r<e.j;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return L(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}function eu(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function nu(t){return t.f||(t.f=t.ea().then(function(){return new vt(function(e){t.va(function n(r){return e(r),t.Ja(n),!1}),function(t){function e(e){i=!0,o&&o.cancel(),ru(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=yi(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==_typeof(o=dr(Qe(o=ze(i),"firebaseError")||null))?Mr(o):null)?new Bi(r.b,r.c,null,null,o):new Bi(r.b,r.c,i,r.g)),i=o||n}eu(t,i)})}var n=new Bi("unknown",null,null,null,new Ur("no-auth-event")),i=!1,o=xe(500).then(function(){return ru(t).then(function(){i||eu(t,n)})}),a=r.handleOpenURL;r.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(ar("BuildInfo.packageName",r).toLowerCase()+"://")&&e({url:t}),"function"==typeof a)try{a(t)}catch(t){console.error(t)}},qi||(qi=new Vi),qi.subscribe(e)}(t)})})),t.f}function ru(t){var e=null;return function(t){return t.b.get(Bs,t.a).then(function(t){return ji(t)})}(t.g).then(function(n){return e=n,Us((n=t.g).b,Bs,n.a)}).then(function(){return e})}function ou(t){return Us(t.b,iu,t.a)}function au(t,e,n){this.v=t,this.l=e,this.u=n,this.h=[],this.f=!1,this.j=_(this.o,this),this.c=new yu,this.s=new bu,this.g=new function(t){this.a=t,this.b=Ls()}(this.l+":"+this.u),this.b={},this.b.unknown=this.c,this.b.signInViaRedirect=this.c,this.b.linkViaRedirect=this.c,this.b.reauthViaRedirect=this.c,this.b.signInViaPopup=this.s,this.b.linkViaPopup=this.s,this.b.reauthViaPopup=this.s,this.a=su(this.v,this.l,this.u,za)}function su(t,n,r,i){var o=e.SDK_VERSION||null;return Yn()?new Js(t,n,r,o,i):new as(t,n,r,o,i)}function uu(t){t.f||(t.f=!0,t.a.va(t.j));var e=t.a;return t.a.ea().m(function(n){throw t.a==e&&t.reset(),n})}function cu(t){t.a.Gb()&&uu(t).m(function(e){var n=new Bi("unknown",null,null,null,new Ur("operation-not-supported-in-this-environment"));fu(e)&&t.o(n)}),t.a.Bb()||_u(t.c)}function pu(t,e,n,r,i,o){return t.a.xb(e,n,r,function(){t.f||(t.f=!0,t.a.va(t.j))},function(){t.reset()},i,o)}function fu(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function vu(t,e,n){var r=e+":"+n;return du[r]||(du[r]=new au(t,e,n)),du[r]}function yu(){this.b=null,this.f=[],this.c=[],this.a=null,this.g=!1}function _u(t){t.g||(t.g=!0,mu(t,!1,null,null))}function gu(t,e){if(t.b=function(){return Et(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function mu(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Tt(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):gu(t,n):gu(t,{user:null}),t.f=[],t.c=[]}function bu(){}function wu(t,e){this.a=e,Sr(this,"verificationId",t)}function Eu(t,e,n,r){return new Fi(t).Sa(e,n).then(function(t){return new wu(t,r)})}function Tu(t,e,n){if(this.h=t,this.j=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Cu(t){this.f=t,this.b=this.a=null,this.c=0}function Su(t,e){var n=e[$o],r=e.refreshToken;e=Iu(e.expiresIn),t.b=n,t.c=e,t.a=r}function Iu(t){return m()+1e3*parseInt(t,10)}function Nu(t,e){return function(t,e){return new vt(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ia(t,t.j+"?key="+encodeURIComponent(t.b),function(t){t?t.error?r(Qa(t)):t.access_token&&t.refresh_token?n(t):r(new Ur("internal-error")):r(new Ur("network-request-failed"))},"POST",sn(e).toString(),t.f,t.l.get()):r(new Ur("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=Iu(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).m(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}function Ru(t,e){this.a=t||null,this.b=e||null,Ir(this,{lastSignInTime:br(e||null),creationTime:br(t||null)})}function Au(t,e){for(var n in se.call(this,t),e)this[n]=e[n]}function ku(t,n,r){this.D=[],this.G=t.apiKey,this.s=t.appName,this.B=t.authDomain||null,t=e.SDK_VERSION?ir(e.SDK_VERSION):null,this.b=new Yo(this.G,Xa(za),t),this.h=new Cu(this.b),Uu(this,n[$o]),Su(this.h,n),Sr(this,"refreshToken",this.h.a),Bu(this,r||{}),ke.call(this),this.I=!1,this.B&&ur()&&(this.a=vu(this.B,this.G,this.s)),this.N=[],this.j=null,this.l=function(t){return new Tu(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-m()-3e5;return 0<e?e:0})}(this),this.V=_(this.Ga,this);var i=this;this.ia=null,this.sa=function(t){i.na(t.g)},this.X=null,this.O=[],this.ra=function(t){Pu(i,t.c)},this.W=null}function Ou(t,e){t.X&&we(t.X,"languageCodeChanged",t.sa),(t.X=e)&&ge(e,"languageCodeChanged",t.sa)}function Pu(t,n){t.O=n,ra(t.b,e.SDK_VERSION?ir(e.SDK_VERSION,t.O):null)}function Du(t,e){t.W&&we(t.W,"frameworkChanged",t.ra),(t.W=e)&&ge(e,"frameworkChanged",t.ra)}function Lu(t){try{return e.app(t.s).auth()}catch(e){throw new Ur("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.s+"'!")}}function xu(t){t.o||t.l.b||(t.l.start(),we(t,"tokenChanged",t.V),ge(t,"tokenChanged",t.V))}function Fu(t){we(t,"tokenChanged",t.V),t.l.stop()}function Uu(t,e){t.qa=e,Sr(t,"_lat",e)}function Mu(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return function(t){return new vt(function(e){var n=t.length,r=[];if(n)for(var i=function(t,_i2,o){n--,r[t]=_i2?{Zb:!0,value:o}:{Zb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ct(t[o],g(i,o,!0),g(i,o,!1));else e(r)})}(e).then(function(){return t})}function Wu(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function Bu(t,e){Ir(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new Ru(e.createdAt,e.lastLoginAt),providerData:[]})}function ju(){}function Vu(t){return Et().then(function(){if(t.o)throw new Ur("app-deleted")})}function qu(t){return L(t.providerData,function(t){return t.providerId})}function Hu(t,e){e&&(Ku(t,e.providerId),t.providerData.push(e))}function Ku(t,e){M(t.providerData,function(t){return t.providerId==e})}function Gu(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Sr(t,e,n)}function Qu(t,e){t!=e&&(Ir(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),e.metadata?Sr(t,"metadata",function(t){return new Ru(t.a,t.b)}(e.metadata)):Sr(t,"metadata",new Ru),D(e.providerData,function(e){Hu(t,e)}),t.h=e.h,Sr(t,"refreshToken",t.h.a))}function zu(t){return t.F().then(function(e){var n=t.isAnonymous;return function(t,e){return Ka(t.b,Ia,{idToken:e}).then(_(t.uc,t))}(t,e).then(function(){return n||Gu(t,"isAnonymous",!1),e})})}function Yu(t,e){e[$o]&&t.qa!=e[$o]&&(Su(t.h,e),t.dispatchEvent(new Au("tokenChanged")),Uu(t,e[$o]),Gu(t,"refreshToken",t.h.a))}function Xu(t,e){return zu(t).then(function(){if(F(qu(t),e))return Mu(t).then(function(){throw new Ur("provider-already-linked")})})}function $u(t,e,n){return Nr({user:t,credential:Mi(e),additionalUserInfo:e=si(e),operationType:n})}function Ju(t,e){return Yu(t,e),t.reload().then(function(){return t})}function Zu(t,n,r,i,o){if(!ur())return Tt(new Ur("operation-not-supported-in-this-environment"));if(t.j&&!o)return Tt(t.j);var a=ai(r.providerId),s=vr(t.uid+":::"),u=null;(!lr()||Xn())&&t.B&&r.isOAuthProvider&&(u=hs(t.B,t.G,t.s,n,r,null,s,e.SDK_VERSION||null));var c=Gn(u,a&&a.Aa,a&&a.za);return i=i().then(function(){if(ec(t),!o)return t.F().then(function(){})}).then(function(){return pu(t.a,c,n,r,s,!!u)}).then(function(){return new vt(function(e,r){t.ga(n,null,new Ur("cancelled-popup-request"),t.g||null),t.f=e,t.v=r,t.g=s,t.c=t.a.Da(t,n,c,s)})}).then(function(t){return c&&Kn(c),t?Nr(t):null}).m(function(t){throw c&&Kn(c),t}),nc(t,i,o)}function tc(t,e,n,r,i){if(!ur())return Tt(new Ur("operation-not-supported-in-this-environment"));if(t.j&&!i)return Tt(t.j)
;var o=null,a=vr(t.uid+":::");return r=r().then(function(){if(ec(t),!i)return t.F().then(function(){})}).then(function(){return t.$=a,Mu(t)}).then(function(e){return t.fa&&(e=(e=t.fa).b.set(ic,t.C(),e.a)),e}).then(function(){return t.a.Ba(e,n,a)}).m(function(e){if(o=e,t.fa)return oc(t.fa);throw o}).then(function(){if(o)throw o}),nc(t,r,i)}function ec(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new Ur("internal-error");throw new Ur("auth-domain-config-required")}}function nc(t,e,n){var r=function(t,e,n){return t.j&&!n?(e.cancel(),Tt(t.j)):e.m(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.j||t.dispatchEvent(new Au("userInvalidated")),t.j=e),e})}(t,e,n);return t.D.push(r),r.ha(function(){U(t.D,r)}),r}function rc(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[$o]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-m())/1e3;var r=new ku(e,n,t);return t.providerData&&D(t.providerData,function(t){t&&Hu(r,Nr(t))}),t.redirectEventId&&(r.$=t.redirectEventId),r}function oc(t){return Us(t.b,ic,t.a)}function ac(t){this.a=t,this.b=Ls(),this.c=null,this.f=function(t){var e=cc("local"),n=cc("session"),i=cc("none");return function(t,e,n){var i=Fs(e,n),o=xs(t,e.w);return t.get(e,n).then(function(a){var s=null;try{s=dr(r.localStorage.getItem(i))}catch(t){}if(s&&!a)return r.localStorage.removeItem(i),t.set(e,s,n);s&&a&&"localStorage"!=o.type&&r.localStorage.removeItem(i)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(r){return r?n:t.b.get(i,t.a).then(function(n){return n?i:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(uc,t.a).then(function(t){return t?cc(t):e})})})}).then(function(e){return t.c=e,sc(t,e.w)}).m(function(){t.c||(t.c=e)})}(this),this.b.addListener(cc("local"),this.a,_(this.g,this))}function sc(t,e){var n,r=[];for(n in Ps)Ps[n]!==e&&r.push(Us(t.b,cc(Ps[n]),t.a));return r.push(Us(t.b,uc,t.a)),function(t){return new vt(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Ct(t[s],g(o,s),a);else e(i)})}(r)}function cc(t){return{name:"authUser",w:t}}function hc(t,e){return fc(t,function(){return t.b.set(t.c,e.C(),t.a)})}function lc(t){return fc(t,function(){return Us(t.b,t.c,t.a)})}function pc(t,e){return fc(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),rc(t||{})})})}function fc(t,e){return t.f=t.f.then(e,e),t.f}function dc(t){if(this.l=!1,Sr(this,"app",t),!wc(this).options||!wc(this).options.apiKey)throw new Ur("invalid-api-key");t=e.SDK_VERSION?ir(e.SDK_VERSION):null,this.b=new Yo(wc(this).options&&wc(this).options.apiKey,Xa(za),t),this.N=[],this.o=[],this.I=[],this.Ob=e.INTERNAL.createSubscribe(_(this.ic,this)),this.O=void 0,this.Pb=e.INTERNAL.createSubscribe(_(this.jc,this)),mc(this,null),this.h=new ac(wc(this).options.apiKey+":"+wc(this).name),this.G=new function(t){this.a=t,this.b=Ls()}(wc(this).options.apiKey+":"+wc(this).name),this.V=Sc(this,function(t){var e=wc(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(ic,t.a).then(function(t){return t&&e&&(t.authDomain=e),rc(t||{})})}(t.G,wc(t).options.authDomain).then(function(e){return(t.B=e)&&(e.fa=t.G),oc(t.G)});return Sc(t,e)}(t).then(function(){return pc(t.h,e)}).then(function(e){return e?(e.fa=t.G,t.B&&(t.B.$||null)==(e.$||null)?e:e.reload().then(function(){return hc(t.h,e).then(function(){return e})}).m(function(n){return"auth/network-request-failed"==n.code?e:lc(t.h)})):null}).then(function(e){mc(t,e||null)});return Sc(t,n)}(this)),this.j=Sc(this,function(t){return t.V.then(function(){return t.da()}).m(function(){}).then(function(){if(!t.l)return t.ia()}).m(function(){}).then(function(){if(!t.l){t.X=!0;var e=t.h;e.b.addListener(cc("local"),e.a,t.ia)}})}(this)),this.X=!1,this.ia=_(this.Ic,this),this.Ga=_(this.ka,this),this.qa=_(this.Yb,this),this.ra=_(this.gc,this),this.sa=_(this.hc,this),function(t){var e=wc(t).options.authDomain,n=wc(t).options.apiKey;e&&ur()&&(t.Nb=t.V.then(function(){if(!t.l){if(t.a=vu(e,n,wc(t).name),t.a.subscribe(t),Ec(t)&&Wu(Ec(t)),t.B){Wu(t.B);var r=t.B;r.na(t.ca()),Ou(r,t),Pu(r=t.B,t.D),Du(r,t),t.B=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.qc,this),this.s=0,ke.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ca()},set:function(t){this.na(t)},enumerable:!1}),t.W=null}(this),this.D=[]}function vc(t){se.call(this,"languageCodeChanged"),this.g=t}function yc(t){se.call(this,"frameworkChanged"),this.c=t}function _c(t){return t.Nb||Tt(new Ur("auth-domain-config-required"))}function gc(t,e){var n={};return n.apiKey=wc(t).options.apiKey,n.authDomain=wc(t).options.authDomain,n.appName=wc(t).name,t.V.then(function(){return function(t,e,n,r){var i=new ku(t,e);return n&&(i.fa=n),r&&Pu(i,r),i.reload().then(function(){return i})}(n,e,t.G,t.Ka())}).then(function(e){return Ec(t)&&e.uid==Ec(t).uid?(Qu(Ec(t),e),t.ka(e)):(mc(t,e),Wu(e),t.ka(e))}).then(function(){Cc(t)})}function mc(t,e){Ec(t)&&(function(t,e){M(t.N,function(t){return t==e})}(Ec(t),t.Ga),we(Ec(t),"tokenChanged",t.qa),we(Ec(t),"userDeleted",t.ra),we(Ec(t),"userInvalidated",t.sa),Fu(Ec(t))),e&&(e.N.push(t.Ga),ge(e,"tokenChanged",t.qa),ge(e,"userDeleted",t.ra),ge(e,"userInvalidated",t.sa),0<t.s&&xu(e)),Sr(t,"currentUser",e),e&&(e.na(t.ca()),Ou(e,t),Pu(e,t.D),Du(e,t))}function bc(t,e){var n=null,r=null;return Sc(t,e.then(function(e){return n=Mi(e),r=si(e),gc(t,e)}).then(function(){return Nr({user:Ec(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function wc(t){return t.app}function Ec(t){return t.currentUser}function Tc(t){return Ec(t)&&Ec(t)._lat||null}function Cc(t){if(t.X){for(var e=0;e<t.o.length;e++)t.o[e]&&t.o[e](Tc(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](Tc(t))}}function Sc(t,e){return t.N.push(e),e.ha(function(){U(t.N,e)}),e}function Ic(t,e,n,i,o,a){if(Sr(this,"type","recaptcha"),this.b=this.c=null,this.o=!1,this.l=e,this.a=n||{theme:"light",type:"image"},this.g=[],this.a[Ac])throw new Ur("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[kc],!r.document)throw new Ur("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Pn(e)||!this.h&&Pn(e).hasChildNodes())throw new Ur("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new Yo(t,a||null,o||null),this.s=i||function(){return null};var s=this;this.j=[];var u=this.a[Nc];this.a[Nc]=function(t){if(Oc(s,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=ar(u,r);"function"==typeof e&&e(t)}};var c=this.a[Rc];this.a[Rc]=function(){if(Oc(s,null),"function"==typeof c)c();else if("string"==typeof c){var t=ar(c,r);"function"==typeof t&&t()}}}function Oc(t,e){for(var n=0;n<t.j.length;n++)try{t.j[n](e)}catch(t){}}function Pc(t,e){return t.g.push(e),e.ha(function(){U(t.g,e)}),e}function Dc(t){if(t.o)throw new Ur("internal-error","RecaptchaVerifier instance has been destroyed.")}function Uc(){return Fc||(Fc=new function(){this.b=r.grecaptcha?1/0:0,this.c=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}),Fc}function Mc(t,n,r){try{this.f=r||e.app()}catch(t){throw new Ur("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.f.options||!this.f.options.apiKey)throw new Ur("invalid-api-key");r=this.f.options.apiKey;var i=this,o=null;try{o=this.f.auth().Ka()}catch(t){}o=e.SDK_VERSION?ir(e.SDK_VERSION,o):null,Ic.call(this,r,t,n,function(){try{var t=i.f.auth().ca()}catch(e){t=null}return t},o,Xa(za))}function Wc(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Ur("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Bc.length)throw new Ur("internal-error","Argument validator received an unsupported number of arguments.");n=Bc[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new Ur("argument-error",t+" failed: "+r)}function jc(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:i}}function Vc(){return{name:"opt_forceRefresh",K:"a boolean",optional:!0,M:o}}function qc(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function Hc(t,e){return{name:t||"",K:"a function",optional:!!e,M:l}}function Kc(t,e){return{name:t||"",K:"null",optional:!!e,M:u}}function Gc(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.xa||!n)}}}function Qc(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&i(t.type)&&l(t.verify))}}}function zc(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Yc(t,e){for(var n in e){var r=e[n].name;t[r]=$c(r,t[n],e[n].i)}}function Xc(t,e,n,r){t[e]=$c(e,n,r)}function $c(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Wc(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}var t,e=ne.default,n=n||{},r=this,f="closure_uid_"+(1e9*Math.random()>>>0),d=0,m=Date.now||function(){return+new Date};b(T,Error),T.prototype.name="CustomError",b(C,T),C.prototype.name="AssertionError",I.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var A=new I(function(){return new O},function(t){t.reset()});R.prototype.add=function(t,e){var n=A.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},O.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},O.prototype.reset=function(){this.next=this.b=this.a=null};var H,P=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(i(t))return i(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},D=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,o=i(t)?t.split(""):t,a=0;a<r;a++)a in o&&e.call(n,o[a],a,t)},L=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),o=i(t)?t.split(""):t,a=0;a<n;a++)a in o&&(r[a]=e.call(void 0,o[a],a,t));return r},x=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=i(t)?t.split(""):t,o=0;o<n;o++)if(o in r&&e.call(void 0,r[o],o,t))return!0;return!1},V=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},K=/&/g,G=/</g,Q=/>/g,z=/"/g,Y=/'/g,X=/\x00/g,$=/[\x00&<>"']/;t:{var tt=r.navigator;if(tt){var et=tt.userAgent;if(et){H=et;break t}}H=""}var at,st,ut="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),pt=!1,ft=new R,yt=0,_t=2,gt=3;mt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var bt=new I(function(){return new mt},function(t){t.reset()});vt.prototype.then=function(t,e,n){return It(this,l(t)?t:null,l(e)?e:null,n)},w(vt),(t=vt.prototype).ha=function(t,e){return(t=wt(t,t,e)).c=!0,St(this,t),this},t.m=function(t,e){return It(this,null,t,e)},t.cancel=function(t){this.a==yt&&lt(function(){!function t(e,n){if(e.a==yt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==yt&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):kt(r),Ot(r,o,gt,n)))}e.c=null}else Nt(e,gt,n)}(this,new Lt(t))},this)},t.Kc=function(t){this.a=yt,Nt(this,_t,t)},t.Lc=function(t){this.a=yt,Nt(this,gt,t)},t.Ub=function(){for(var t;t=kt(this);)Ot(this,t,this.a,this.j);this.h=!1};var Dt=ht;b(Lt,T),Lt.prototype.name="cancel";var Ft=0,Ut={};xt.prototype.pa=!1,xt.prototype.ua=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()},Wt[" "]=a;var Bt,jt,Vt=nt("Opera"),qt=nt("Trident")||nt("MSIE"),Ht=nt("Edge"),Kt=Ht||qt,Gt=nt("Gecko")&&!(J(H.toLowerCase(),"webkit")&&!nt("Edge"))&&!(nt("Trident")||nt("MSIE"))&&!nt("Edge"),Qt=J(H.toLowerCase(),"webkit")&&!nt("Edge");t:{var Yt="",Xt=(jt=H,Gt?/rv:([^\);]+)(\)|;)/.exec(jt):Ht?/Edge\/([\d\.]+)/.exec(jt):qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(jt):Qt?/WebKit\/(\S+)/.exec(jt):Vt?/(?:Version)[ \/]?(\S+)/.exec(jt):void 0);if(Xt&&(Yt=Xt?Xt[1]:""),qt){var $t=zt();if(null!=$t&&$t>parseFloat(Yt)){Bt=String($t);break t}}Bt=Yt}var Jt,Zt={},ee=r.document;Jt=ee&&qt?zt()||("CSS1Compat"==ee.compatMode?parseInt(Bt,10):5):void 0;var re=Object.freeze||function(t){return t},ie=!qt||9<=Number(Jt),oe=qt&&!te("9"),ae=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return r.addEventListener("test",a,e),r.removeEventListener("test",a,e),t}();se.prototype.preventDefault=function(){this.Eb=!1},b(ue,se);var ce=re({2:"touch",3:"pen",4:"mouse"});ue.prototype.preventDefault=function(){ue.lb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,oe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},ue.prototype.f=function(){return this.a};var he="closure_listenable_"+(1e6*Math.random()|0),le=0;fe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=ve(t,e,r,i);return-1<a?(e=t[a],n||(e.Ha=!1)):((e=new function(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++le,this.ma=this.Ha=!1}(e,this.src,o,!!r,i)).Ha=n,t.push(e)),e};var ye="closure_lm_"+(1e6*Math.random()|0),_e={},Re="__closure_events_fn_"+(1e9*Math.random()>>>0);b(ke,xt),ke.prototype[he]=!0,ke.prototype.addEventListener=function(t,e,n,r){ge(this,t,e,n,r)},ke.prototype.removeEventListener=function(t,e,n,r){we(this,t,e,n,r)},ke.prototype.dispatchEvent=function(t){var e,n=this.Ta;if(n)for(e=[];n;n=n.Ta)e.push(n);n=this.Mb;var r=t.type||t;if(i(t))t=new se(t,n);else if(t instanceof se)t.target=t.target||n;else{var o=t;ct(t=new se(r,n),o)}if(o=!0,e)for(var a=e.length-1;0<=a;a--){var s=t.b=e[a];o=De(s,r,!0,t)&&o}if(o=De(s=t.b=n,r,!0,t)&&o,o=De(s,r,!1,t)&&o,e)for(a=0;a<e.length;a++)o=De(s=t.b=e[a],r,!1,t)&&o;return o},ke.prototype.ua=function(){if(ke.lb.ua.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)pe(n[r]);delete e.a[t],e.b--}}this.Ta=null},(t=Me.prototype).S=function(){We(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.U=function(){return We(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Be(this.b,t)?this.b[t]:e},t.set=function(t,e){Be(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var je=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;Ve.prototype.toString=function(){var t=[],e=this.c;e&&t.push($e(e,Ze,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push($e(e,Ze,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.j)&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push($e(n,"/"==n.charAt(0)?en:tn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",$e(n,rn)),t.join("")};var Ze=/[#\/\?@]/g,tn=/[#\?:]/g,en=/[#\?]/g,nn=/[#\?@]/g,rn=/#/g;(t=on.prototype).add=function(t,e){an(this),this.c=null,t=ln(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){an(this),this.a.forEach(function(n,r){D(n,function(n){t.call(e,n,r,this)},this)},this)},t.U=function(){an(this);for(var t=this.a.S(),e=this.a.U(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.S=function(t){an(this);var e=[];if(i(t))cn(this,t)&&(e=W(e,this.a.get(ln(this,t))));else{t=this.a.S();for(var n=0;n<t.length;n++)e=W(e,t[n])}return e},t.set=function(t,e){return an(this),this.c=null,cn(this,t=ln(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return 0<(t=t?this.S(t):[]).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.U(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var pn=!qt||9<=Number(Jt);fn.prototype.la=!0,fn.prototype.ja=function(){return this.a},fn.prototype.toString=function(){return"Const{"+this.a+"}"};var vn={};yn(""),_n.prototype.la=!0,_n.prototype.ja=function(){return this.a},_n.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var bn=/%{(\w+)}/g,wn=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,En={};Tn.prototype.la=!0,Tn.prototype.ja=function(){return this.a},Tn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Sn=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i,Nn={};Rn("about:blank"),An.prototype.la=!0,An.prototype.ja=function(){return this.a},An.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var kn={};On("<!DOCTYPE html>"),On(""),On("<br>");var Ln={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},Mn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Wn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g,Qn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tr="Firefox",er="Chrome",rr={Qc:"FirebaseCore-web",Sc:"FirebaseUI-web"};gr.prototype.get=function(){var t=r.navigator;return!t||"boolean"!=typeof t.onLine||!cr()&&"chrome-extension:"!==hr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Er,Tr={};try{var Cr={};Object.defineProperty(Cr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Cr,"abcd",{configurable:!0,enumerable:!0,value:2}),Er=2==Cr.abcd}catch(jt){Er=!1}b(Ur,Error),Ur.prototype.C=function(){return{code:this.code,message:this.message}},Ur.prototype.toJSON=function(){return this.C()};var Wr="auth/",Br={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Vr="android",qr="handleCodeInApp",Hr="iOS",Kr="url",Gr="installApp",Qr="minimumVersion",zr="packageName",Yr="bundleId",$r=null,Jr=null;ti.prototype.f=function(){return this.b};var ri="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),ii=["client_id","response_type","scope","redirect_uri","state"],oi={Rc:{Ma:"locale",Aa:500,za:600,Na:"facebook.com",cb:ii},Tc:{Ma:null,Aa:500,za:620,Na:"github.com",cb:ii},Uc:{Ma:"hl",Aa:515,za:680,Na:"google.com",cb:ii},$c:{Ma:"lang",Aa:485,za:705,Na:"twitter.com",cb:ri}},ui="idToken",ci="providerId";b(li,hi),b(pi,li),b(fi,li),b(di,li),b(vi,li),gi.prototype.xa=function(t){return da(t,mi(this))},gi.prototype.c=function(t,e){var n=mi(this);return n.idToken=e,va(t,n)},gi.prototype.f=function(t,e){return _i(ya(t,mi(this)),e)},gi.prototype.C=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),t},bi.prototype.Ca=function(t){return this.tb=ot(t),this},b(wi,bi),wi.prototype.ta=function(t){return F(this.a,t)||this.a.push(t),this},wi.prototype.yb=function(){return B(this.a)},wi.prototype.credential=function(t,e){if(!t&&!e)throw new Ur("argument-error","credential failed: must provide the ID token and/or the access token.");return new gi(this.providerId,{idToken:t||null,accessToken:e||null},this.providerId)},b(Ei,wi),Sr(Ei,"PROVIDER_ID","facebook.com"),Sr(Ei,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),b(Ci,wi),Sr(Ci,"PROVIDER_ID","github.com"),Sr(Ci,"GITHUB_SIGN_IN_METHOD","github.com"),b(Ii,wi),Sr(Ii,"PROVIDER_ID","google.com"),Sr(Ii,"GOOGLE_SIGN_IN_METHOD","google.com"),b(Ri,bi),Sr(Ri,"PROVIDER_ID","twitter.com"),Sr(Ri,"TWITTER_SIGN_IN_METHOD","twitter.com"),ki.prototype.xa=function(t){return this.signInMethod==Oi.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,Ca,{email:this.a,oobCode:this.b}):Ka(t,ja,{email:this.a,password:this.b})},ki.prototype.c=function(t,e){return this.signInMethod==Oi.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,Sa,{idToken:e,email:this.a,oobCode:this.b}):Ka(t,xa,{idToken:e,email:this.a,password:this.b})},ki.prototype.f=function(t,e){return _i(this.xa(t),e)},ki.prototype.C=function(){return{email:this.a,password:this.b,signInMethod:this.signInMethod}},Ir(Oi,{PROVIDER_ID:"password"}),Ir(Oi,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ir(Oi,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Li.prototype.xa=function(t){return t.Sa(xi(this))},Li.prototype.c=function(t,e){var n=xi(this);return n.idToken=e,Ka(t,qa,n)},Li.prototype.f=function(t,e){var n=xi(this);return n.operation="REAUTH",_i(t=Ka(t,Ha,n),e)},Li.prototype.C=function(){var t={providerId:"phone"};return this.a.Ra&&(t.verificationId=this.a.Ra),this.a.Qa&&(t.verificationCode=this.a.Qa),this.a.Ea&&(t.temporaryProof=this.a.Ea),this.a.Z&&(t.phoneNumber=this.a.Z),t},Fi.prototype.Sa=function(t,e){var n=this.a.b;return Et(e.verify()).then(function(r){if(!i(r))throw new Ur("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return Ka(t,Da,e)}(n,{phoneNumber:t,recaptchaToken:r}).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new Ur("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Ir(Fi,{PROVIDER_ID:"phone"}),Ir(Fi,{PHONE_SIGN_IN_METHOD:"phone"}),Bi.prototype.C=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,error:this.a&&this.a.C()}};var qi=null;Vi.prototype.subscribe=function(t){var e=this;this.a.push(t),this.b||(this.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=ar("universalLinks.subscribe",r))&&t(null,this.b))},Vi.prototype.unsubscribe=function(t){M(this.a,function(e){return e==t})},b(Hi,Ur),b(Ki,Ur),Ki.prototype.C=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.C();return e&&ct(t,e),t},Ki.prototype.toJSON=function(){return this.C()};var Qi,zi=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;Yi.prototype.c=null,b($i,Yi),$i.prototype.a=function(){var t=Ji(this);return t?new ActiveXObject(t):new XMLHttpRequest},$i.prototype.b=function(){var t={};return Ji(this)&&(t[0]=!0,t[1]=!0),t},Qi=new $i,b(Zi,Yi),Zi.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t
;if("undefined"!=typeof XDomainRequest)return new to;throw Error("Unsupported browser")},Zi.prototype.b=function(){return{}},(t=to.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.bc=function(){this.status=200,this.responseText=this.a.responseText,eo(this,4)},t.zb=function(){this.status=500,this.responseText="",eo(this,4)},t.fc=function(){this.zb()},t.cc=function(){this.status=200,eo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},no.prototype.a=null,no.prototype.reset=function(t,e,n,r,i){delete this.a},io.prototype.toString=function(){return this.name};var oo=new io("SEVERE",1e3),ao=new io("WARNING",900),so=new io("CONFIG",700),uo=new io("FINE",500);ro.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(S("Root logger has no level set."),null)}(this).value)for(l(e)&&(e=e()),t=new no(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var co={},ho=null;b(fo,Yi),fo.prototype.a=function(){return new vo(this.f)},fo.prototype.b=function(t){return function(){return t}}({}),b(vo,ke);var yo=0;(t=vo.prototype).open=function(t,e){if(this.readyState!=yo)throw this.abort(),Error("Error reopening a connection");this.h=t,this.c=e,this.readyState=1,_o(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.g,method:this.h,credentials:void 0,cache:void 0};t&&(e.body=t),this.j.fetch(new Request(this.c,e)).then(this.ec.bind(this),this.Ab.bind(this))},t.abort=function(){this.responseText="",this.g=new Headers,this.status=0,1<=this.readyState&&this.a&&4!=this.readyState&&(this.readyState=4,this.a=!1,_o(this)),this.readyState=yo},t.ec=function(t){this.a&&(this.b||(this.b=t.headers,this.readyState=2,_o(this)),this.a&&(this.readyState=3,_o(this),this.a&&t.text().then(this.dc.bind(this,t),this.Ab.bind(this))))},t.dc=function(t,e){this.a&&(this.status=t.status,this.statusText=t.statusText,this.responseText=e,this.readyState=4,_o(this))},t.Ab=function(t){var e=this.f;e&&e.log(ao,"Failed to fetch url "+this.c,t instanceof Error?t:Error(t)),this.a&&(this.readyState=4,_o(this))},t.setRequestHeader=function(t,e){this.g.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.f)&&t.log(ao,"Attempting to get response header but no headers have been received for url: "+this.c,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.f;return t&&t.log(ao,"Attempting to get all response headers but no headers have been received for url: "+this.c,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},b(go,ke);var mo="";go.prototype.b=lo("goog.net.XhrIo");var bo=/^https?$/i,wo=["POST","PUT"];(t=go.prototype).Fa=function(){void 0!==n&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",po(this.b,Oo(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(po(this.b,Oo(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),No(this))},t.ua=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),No(this,!0)),go.lb.ua.call(this)},t.Db=function(){this.pa||(this.I||this.j||this.f?Io(this):this.tc())},t.tc=function(){Io(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case mo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(oo,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(t){return po(this.b,"Can not get response: "+t.message),null}},Po.prototype.cancel=function(t){if(this.a)this.c instanceof Po&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):0>=--e.l&&e.cancel()}this.v?this.v.call(this.s,this):this.u=!0,this.a||(t=new Wo(this),Lo(this),Do(this,!1,t))}},Po.prototype.o=function(t,e){this.j=!1,Do(this,t,e)},Po.prototype.D=function(){Lo(this),Do(this,!0,null)},Po.prototype.then=function(t,e,n){var r,i,o=new vt(function(t,e){r=t,i=e});return xo(this,r,function(t){t instanceof Wo?o.cancel():i(t)}),o.then(t,e,n)},w(Po),b(Mo,T),Mo.prototype.message="Deferred has already fired",Mo.prototype.name="AlreadyCalledError",b(Wo,T),Wo.prototype.message="Deferred was canceled",Wo.prototype.name="CanceledError",Bo.prototype.c=function(){throw delete jo[this.a],this.b};var jo={},Ko=0,Go=1;b(Qo,T),b(zo,Yi),zo.prototype.a=function(){return new this.f},zo.prototype.b=function(){return{}};var Xo,$o="idToken",Jo=new gr(3e4,6e4),Zo={"Content-Type":"application/x-www-form-urlencoded"},ta=new gr(3e4,6e4),ea={"Content-Type":"application/json"};Yo.prototype.o=function(t,e,n,i,o,a){if($n()&&(void 0===r.fetch||void 0===r.Headers||void 0===r.Request))throw new Ur("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new go(this.c);if(a){s.g=Math.max(0,a);var u=setTimeout(function(){s.dispatchEvent("timeout")},a)}Oe(s,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return po(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)}),Pe(s,"ready",function(){u&&clearTimeout(u),Mt(this)}),Pe(s,"timeout",function(){u&&clearTimeout(u),Mt(this),e&&e(null)}),Eo(s,t,n,i,o)};var oa=yn("https://apis.google.com/js/client.js?onload=%{onload}"),aa="__fcb"+Math.floor(1e6*Math.random()).toString();Yo.prototype.u=function(t,e,n,r,i){var o=this;Xo.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).m(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Yo.prototype.jb=function(){return Ka(this,Fa,{})},Yo.prototype.mb=function(t,e){return Ka(this,La,{idToken:t,email:e})},Yo.prototype.nb=function(t,e){return Ka(this,xa,{idToken:t,password:e})};var la={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};(t=Yo.prototype).ob=function(t,e){var n={idToken:t},r=[];return rt(la,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Ka(this,La,n)},t.gb=function(t,e){return ct(t={requestType:"PASSWORD_RESET",email:t},e),Ka(this,Aa,t)},t.hb=function(t,e){return ct(t={requestType:"EMAIL_SIGNIN",email:t},e),Ka(this,Na,t)},t.fb=function(t,e){return ct(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ka(this,Ra,t)},t.Sa=function(t){return Ka(this,Va,t)},t.Wa=function(t,e){return Ka(this,Pa,{oobCode:t,newPassword:e})},t.Ia=function(t){return Ka(this,ma,{oobCode:t})},t.Ua=function(t){return Ka(this,ga,{oobCode:t})};var za,ga={endpoint:"setAccountInfo",A:_a,ba:"email"},ma={endpoint:"resetPassword",A:_a,J:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Ur("internal-error")}},ba={endpoint:"signupNewUser",A:function(t){if(sa(t),!t.password)throw new Ur("weak-password")},J:ca,R:!0},wa={endpoint:"createAuthUri"},Ea={endpoint:"deleteAccount",T:["idToken"]},Ta={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],A:function(t){if(!c(t.deleteProvider))throw new Ur("internal-error")}},Ca={endpoint:"emailLinkSignin",T:["email","oobCode"],A:sa,J:ca,R:!0},Sa={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],A:sa,J:ca,R:!0},Ia={endpoint:"getAccountInfo"},Na={endpoint:"getOobConfirmationCode",T:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Ur("internal-error");sa(t)},ba:"email"},Ra={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Ur("internal-error")},ba:"email"},Aa={endpoint:"getOobConfirmationCode",T:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Ur("internal-error");sa(t)},ba:"email"},ka={pb:!0,endpoint:"getProjectConfig",Cb:"GET"},Oa={pb:!0,endpoint:"getRecaptchaParam",Cb:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new Ur("internal-error")}},Pa={endpoint:"resetPassword",A:_a,ba:"email"},Da={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],ba:"sessionInfo"},La={endpoint:"setAccountInfo",T:["idToken"],A:ua,R:!0},xa={endpoint:"setAccountInfo",T:["idToken"],A:function(t){if(ua(t),!t.password)throw new Ur("weak-password")},J:ca,R:!0},Fa={endpoint:"signupNewUser",J:ca,R:!0},Ua={endpoint:"verifyAssertion",A:pa,J:fa,R:!0},Ma={endpoint:"verifyAssertion",A:pa,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Ur("user-not-found");if(t.errorMessage)throw Ga(t.errorMessage);if(!t[$o])throw new Ur("internal-error")},R:!0},Wa={endpoint:"verifyAssertion",A:function(t){if(pa(t),!t.idToken)throw new Ur("internal-error")},J:fa,R:!0},Ba={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new Ur("invalid-custom-token")},J:ca,R:!0},ja={endpoint:"verifyPassword",A:function(t){if(sa(t),!t.password)throw new Ur("wrong-password")},J:ca,R:!0},Va={endpoint:"verifyPhoneNumber",A:ha,J:ca},qa={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new Ur("internal-error");ha(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Gi(t);ca(t)}},Ha={Tb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ha,J:ca},Ya={Wc:{Ya:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",eb:"https://securetoken.googleapis.com/v1/token",id:"p"},Yc:{Ya:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",eb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Zc:{Ya:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",eb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};za=Xa("__EID__")?"__EID__":void 0;var Ja,Za=yn("https://apis.google.com/js/api.js?onload=%{onload}"),ts=new gr(3e4,6e4),es=new gr(5e3,15e3),ns=null;rs.prototype.toString=function(){return this.f?Ge(this.a,"v",this.f):un(this.a.a,"v"),this.b?Ge(this.a,"eid",this.b):un(this.a.a,"eid"),this.c.length?Ge(this.a,"fw",this.c.join(",")):un(this.a.a,"fw"),this.a.toString()},is.prototype.toString=function(){var t=Ye(this.o,"/__/auth/handler");if(Ge(t,"apiKey",this.u),Ge(t,"appName",this.c),Ge(t,"authType",this.l),this.a.isOAuthProvider){var n=this.a;try{var r=e.app(this.c).auth().ca()}catch(t){r=null}for(var i in n.Xa=r,Ge(t,"providerId",this.a.providerId),r=fr((n=this.a).tb))r[i]=r[i].toString();i=n.Ac,r=ot(r);for(var o=0;o<i.length;o++){var a=i[o];a in r&&delete r[a]}n.Za&&n.Xa&&!r[n.Za]&&(r[n.Za]=n.Xa),it(r)||Ge(t,"customParameters",pr(r))}if("function"==typeof this.a.yb&&(n=this.a.yb()).length&&Ge(t,"scopes",n.join(",")),this.j?Ge(t,"redirectUrl",this.j):un(t.a,"redirectUrl"),this.g?Ge(t,"eventId",this.g):un(t.a,"eventId"),this.h?Ge(t,"v",this.h):un(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Qe(t,s)&&Ge(t,s,this.b[s]);return this.f?Ge(t,"eid",this.f):un(t.a,"eid"),(s=os(this.c)).length&&Ge(t,"fw",s.join(",")),t.toString()},(t=as.prototype).Da=function(t,e,n){var r=new Ur("popup-closed-by-user"),i=new Ur("web-storage-unsupported"),o=this,a=!1;return this.ea().then(function(){(function(t){var e={type:"webStorageSupport"};return us(t).then(function(){return function(t,e){return t.ab.then(function(){return new vt(function(n){t.a.send(e.type,e,n,ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.j,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&Kn(t),e(i),a=!0)})}).m(function(){}).then(function(){if(!a)return function(t){return new vt(function(e){return function n(){xe(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!a)return xe(n).then(function(){e(r)})})},t.Gb=function(){var t=or();return!lr(t)&&!yr(t)},t.Bb=function(){return!1},t.xb=function(t,e,n,r,i,o,a){if(!t)return Tt(new Ur("popup-blocked"));if(a&&!lr())return this.ea().m(function(e){Kn(t),i(e)}),r(),Et();this.a||(this.a=ss(cs(this)));var s=this;return this.a.then(function(){var e=s.ea().m(function(e){throw Kn(t),i(e),e});return r(),e}).then(function(){Wi(n),a||qn(hs(s.u,s.f,s.b,e,n,null,o,s.c,void 0,s.h),t)}).m(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})},t.Ba=function(t,e,n){this.a||(this.a=ss(cs(this)));var r=this;return this.a.then(function(){Wi(e),qn(hs(r.u,r.f,r.b,t,e,Vn(),n,r.c,void 0,r.h))}).m(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.ea=function(){var t=this;return us(this).then(function(){return t.j.ab}).m(function(){throw t.a=null,new Ur("network-request-failed")})},t.Lb=function(){return!0},t.va=function(t){this.g.push(t)},t.Ja=function(t){M(this.g,function(e){return e==t})},(t=ls.prototype).get=function(t){return Et(this.a.getItem(t)).then(function(t){return t&&dr(t)})},t.set=function(t,e){return Et(this.a.setItem(t,pr(e)))},t.P=function(t){return Et(this.a.removeItem(t))},t.Y=function(){},t.aa=function(){},(t=ps.prototype).set=function(t,e){var n,r=!1,i=this;return ds(this).then(function(e){return gs((e=ys(_s(n=e,!0))).get(t))}).then(function(o){var a=ys(_s(n,!0));return o?(o.value=e,gs(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,gs(a.add(o)))}).then(function(){i.f[t]=e}).ha(function(){r&&i.b--})},t.get=function(t){return ds(this).then(function(e){return gs(ys(_s(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.P=function(t){var e=!1,n=this;return ds(this).then(function(r){return e=!0,n.b++,gs(ys(_s(r,!0)).delete(t))}).then(function(){delete n.f[t]}).ha(function(){e&&n.b--})},t.Jc=function(){var t=this;return ds(this).then(function(t){var e=ys(_s(t,!1));return e.getAll?gs(e.getAll()):new vt(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(Error(t.target.errorCode))}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)if(r in n)if(_typeof(e[r])!=_typeof(n[r]))i.push(r);else if(c(e[r])){t:{var o=void 0,a=e[r],s=n[r];for(o in a)if(!(o in s)||a[o]!==s[o]){o=!1;break t}for(o in s)if(!(o in a)){o=!1;break t}o=!0}o||i.push(r)}else"object"==_typeof(e[r])&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r);else i.push(r);for(r in n)r in e||i.push(r);return i}(t.f,n),t.f=n}return r})},t.Y=function(t){0==this.a.length&&function(t){t.c&&t.c.cancel("STOP_EVENT"),function e(){return t.c=xe(800).then(_(t.Jc,t)).then(function(e){0<e.length&&D(t.a,function(t){t(e)})}).then(e).m(function(t){"STOP_EVENT"!=t.message&&e()}),t.c}()}(this),this.a.push(t)},t.aa=function(t){M(this.a,function(e){return e==t}),0==this.a.length&&this.c&&this.c.cancel("STOP_EVENT")},(t=ms.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.P=function(t){return this.b.then(function(e){return e.P(t)})},t.Y=function(t){this.a.push(t)},t.aa=function(t){M(this.a,function(e){return e==t})},(t=bs.prototype).get=function(t){return Et(this.a[t])},t.set=function(t,e){return this.a[t]=e,Et()},t.P=function(t){return delete this.a[t],Et()},t.Y=function(){},t.aa=function(){},(t=ws.prototype).get=function(t){var e=this;return Et().then(function(){return dr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Et().then(function(){var r=pr(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return Et().then(function(){e.a.removeItem(t)})},t.Y=function(t){r.window&&ge(r.window,"storage",t)},t.aa=function(t){r.window&&we(r.window,"storage",t)},(t=Ts.prototype).get=function(){return Et(null)},t.set=function(){return Et()},t.P=function(){return Et()},t.Y=function(){},t.aa=function(){},(t=Cs.prototype).get=function(t){var e=this;return Et().then(function(){return dr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Et().then(function(){var r=pr(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return Et().then(function(){e.a.removeItem(t)})},t.Y=function(){},t.aa=function(){};var Is,Ns,Rs={w:ws,Pa:Cs},As={w:ws,Pa:Cs},ks={w:ls,Pa:Ts},Os={w:ws,Pa:Ts},Ps={Vc:"local",NONE:"none",Xc:"session"};(t=Ds.prototype).get=function(t,e){return xs(this,t.w).get(Fs(t,e))},t.set=function(t,e,n){var r=Fs(t,n),i=this,o=xs(this,t.w);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.w&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=Fs(t,e),this.l&&(this.b[t]=r.localStorage.getItem(t)),it(this.a)&&(xs(this,"local").Y(this.f),this.h||(jn()||!wr())&&r.indexedDB||!this.l||function(t){Ms(t),t.c=setInterval(function(){for(var e in t.a){var n=r.localStorage.getItem(e),i=t.b[e];n!=i&&(t.b[e]=n,n=new ue({type:"storage",key:e,target:window,oldValue:i,newValue:n,a:!0}),t.Kb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Fs(t,e),this.a[t]&&(M(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),it(this.a)&&(xs(this,"local").aa(this.f),Ms(this))},t.Kb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var i=this.b[n];void 0===i&&(i=null);var o=r.localStorage.getItem(n);o!==i&&(this.b[n]=o,this.Va(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?xs(this,"local").aa(this.f):Ms(this),this.o)if(n=r.localStorage.getItem(e),(i=t.a.newValue)!==n)null!==i?r.localStorage.setItem(e,i):r.localStorage.removeItem(e);else if(this.b[e]===i&&void 0===t.a.a)return;var a=this;n=function(){void 0===t.a.a&&a.b[e]===r.localStorage.getItem(e)||(a.b[e]=r.localStorage.getItem(e),a.Va(e))},qt&&Jt&&10==Jt&&r.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else D(t,_(this.Va,this))},t.Va=function(t){this.a[t]&&D(this.a[t],function(t){t()})};var Ws,Bs={name:"authEvent",w:"local"};b(js,function(){this.b=-1});for(var Vs=64,qs=Vs-1,Hs=[],Ks=0;Ks<qs;Ks++)Hs[Ks]=0;var Gs=W(128,Hs);js.prototype.reset=function(){this.g=this.c=0,this.a=r.Int32Array?new Int32Array(this.h):B(this.h)};var Ys=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];b(Xs,js);var $s=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];(t=Js.prototype).ea=function(){return this.ya?this.ya:this.ya=(Yn(void 0)?zn().then(function(){return new vt(function(t,e){var n=r.document,i=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(i),t()},!1)})}):Tt(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof ar("universalLinks.subscribe",r))throw Zs("cordova-universal-links-plugin is not installed");if(void 0===ar("BuildInfo.packageName",r))throw Zs("cordova-plugin-buildinfo is not installed");if("function"!=typeof ar("cordova.plugins.browsertab.openUrl",r))throw Zs("cordova-plugin-browsertab is not installed");if("function"!=typeof ar("cordova.InAppBrowser.open",r))throw Zs("cordova-plugin-inappbrowser is not installed")},function(){throw new Ur("cordova-not-ready")})},t.Da=function(t,e){return e(new Ur("operation-not-supported-in-this-environment")),Et()},t.xb=function(){return Tt(new Ur("operation-not-supported-in-this-environment"))},t.Lb=function(){return!1},t.Gb=function(){return!0},t.Bb=function(){return!0},t.Ba=function(t,e,n){if(this.c)return Tt(new Ur("redirect-operation-pending"));var i=this,o=r.document,a=null,s=null,u=null,c=null;return this.c=Et().then(function(){return Wi(e),nu(i)}).then(function(){return function(t,e,n,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Bi(e,i,null,o,new Ur("no-auth-event")),s=ar("BuildInfo.packageName",r);if("string"!=typeof s)throw new Ur("invalid-cordova-configuration");var u=ar("BuildInfo.displayName",r),c={};if(or().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!or().toLowerCase().match(/android/))return Tt(new Ur("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=tu(o),c.sessionId=o;var h=hs(t.u,t.j,t.l,e,n,null,i,t.o,c,t.s);return t.ea().then(function(){var e=t.h;return t.v.a.set(Bs,a.C(),e)}).then(function(){var e=ar("cordova.plugins.browsertab.isAvailable",r);if("function"!=typeof e)throw new Ur("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=ar("cordova.plugins.browsertab.openUrl",r)))throw new Ur("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=ar("cordova.InAppBrowser.open",r)))throw new Ur("invalid-cordova-configuration");e=!(!(e=or()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),t.a=n(h,e?"_blank":"_system","location=yes")}})})}(i,t,e,n)}).then(function(){return new vt(function(t,e){s=function(){var e=ar("cordova.plugins.browsertab.close",r);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.va(s),u=function(){a||(a=xe(2e3).then(function(){e(new Ur("redirect-cancelled-by-user"))}))},c=function(){mr()&&u()},o.addEventListener("resume",u,!1),or().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).m(function(t){return ru(i).then(function(){throw t})})}).ha(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.Ja(s),i.c=null})},t.va=function(t){this.b.push(t),nu(this).m(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Bi("unknown",null,null,null,new Ur("no-auth-event")),t(e))})},t.Ja=function(t){M(this.b,function(e){return e==t})};var iu={name:"pendingRedirect",w:"session"};au.prototype.reset=function(){this.f=!1,this.a.Ja(this.j),this.a=su(this.v,this.l,this.u)},au.prototype.subscribe=function(t){if(F(this.h,t)||this.h.push(t),!this.f){var e=this;(function(t){return t.b.get(iu,t.a).then(function(t){return"pending"==t})})(this.g).then(function(t){t?ou(e.g).then(function(){uu(e).m(function(t){var n=new Bi("unknown",null,null,null,new Ur("operation-not-supported-in-this-environment"));fu(t)&&e.o(n)})}):cu(e)}).m(function(){cu(e)})}},au.prototype.unsubscribe=function(t){M(this.h,function(e){return e==t})},au.prototype.o=function(t){if(!t)throw new Ur("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.qb(t.b,t.c)){(e=this.b[t.b])&&e.h(t,r),e=!0;break}}return _u(this.c),e};var hu=new gr(2e3,1e4),lu=new gr(3e4,6e4);au.prototype.da=function(){return this.c.da()},au.prototype.Ba=function(t,e,n){var r,i=this;return function(t){return t.b.set(iu,"pending",t.a)}(this.g).then(function(){return i.a.Ba(t,e,n).m(function(t){if(fu(t))throw new Ur("operation-not-supported-in-this-environment");return r=t,ou(i.g).then(function(){throw r})}).then(function(){return i.a.Lb()?new vt(function(){}):ou(i.g).then(function(){return i.da()}).then(function(){}).m(function(){})})})},au.prototype.Da=function(t,e,n,r){return this.a.Da(n,function(n){t.ga(e,null,n,r)},hu.get())};var du={};yu.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},yu.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.b,r=t.c,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;"unknown"!=n||i||o?t.a?(mu(this,!0,null,t.a),Et()):e.wa(n,r)?function(t,e,n){n=n.wa(e.b,e.c);var r=e.f,i=e.g,o=!!e.b.match(/Redirect$/);n(r,i).then(function(e){mu(t,o,e,null)}).m(function(e){mu(t,o,null,e)})}(this,t,e):Tt(new Ur("invalid-auth-event")):(mu(this,!1,null,null),Et())}else Tt(new Ur("invalid-auth-event"))},yu.prototype.da=function(){var t=this;return new vt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Ur("timeout");t.a&&t.a.cancel(),t.a=xe(lu.get()).then(function(){t.b||mu(t,!0,null,e)})}(t))})},bu.prototype.h=function(t,e){if(t){var n=t.b,r=t.c;t.a?(e.ga(t.b,null,t.a,t.c),Et()):e.wa(n,r)?function(t,e){var n=t.c,r=t.b;e.wa(r,n)(t.f,t.g).then(function(t){e.ga(r,t,null,n)}).m(function(t){e.ga(r,null,t,n)})}(t,e):Tt(new Ur("invalid-auth-event"))}else Tt(new Ur("invalid-auth-event"))},wu.prototype.confirm=function(t){return t=Ui(this.verificationId,t),this.a(t)},Tu.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=xe(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then(function(){return t=r.document,_e2=null,mr()||!t?Et():new vt(function(n){_e2=function(){mr()&&(t.removeEventListener("visibilitychange",_e2,!1),n())},t.addEventListener("visibilitychange",_e2,!1)}).m(function(n){throw t.removeEventListener("visibilitychange",_e2,!1),n});var t,_e2}).then(function(){return e.h()}).then(function(){t(e,!0)}).m(function(n){e.j(n)&&t(e,!1)})}(this,!0)},Tu.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Cu.prototype.C=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Cu.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Tt(new Ur("user-token-expired")):t||!this.b||m()>this.c-3e4?this.a?Nu(this,{grant_type:"refresh_token",refresh_token:this.a}):Et(null):Et({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Ru.prototype.C=function(){return{lastLoginAt:this.b,createdAt:this.a}},b(Au,se),b(ku,ke),ku.prototype.na=function(t){this.ia=t,na(this.b,t)},ku.prototype.ca=function(){return this.ia},ku.prototype.Ka=function(){return B(this.O)},ku.prototype.Ga=function(){this.l.b&&(this.l.stop(),this.l.start())},Sr(ku.prototype,"providerId","firebase"),(t=ku.prototype).reload=function(){var t=this;return nc(this,Vu(this).then(function(){return zu(t).then(function(){return Mu(t)}).then(ju)}))},t.ac=function(t){return this.F(t).then(function(t){return new function(t){var e=ni(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Ur("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ir(this,{token:t,expirationTime:br(1e3*e.exp),authTime:br(1e3*e.auth_time),issuedAtTime:br(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}(t)})},t.F=function(t){var e=this;return nc(this,Vu(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new Ur("internal-error");return t.accessToken!=e.qa&&(Uu(e,t.accessToken),e.dispatchEvent(new Au("tokenChanged"))),Gu(e,"refreshToken",t.refreshToken),t.accessToken}))},t.getToken=function(t){return Tr["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]||(Tr["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead.")),this.F(t)},t.uc=function(t){if(!(t=t.users)||!t.length)throw new Ur("internal-error");Bu(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?L(t,function(t){return new function(t,e,n,r,i,o){Ir(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Hu(this,e[n]);Gu(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.bb=function(t){var e=this,n=null;return nc(this,t.f(this.b,this.uid).then(function(t){return Yu(e,t),n=$u(e,t,"reauthenticate"),e.j=null,e.reload()}).then(function(){return n}),!0)},t.vc=function(t){return this.bb(t).then(function(){})},t.$a=function(t){var e=this,n=null;return nc(this,Xu(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.c(e.b,n)}).then(function(t){return n=$u(e,t,"link"),Ju(e,t)}).then(function(){return n}))},t.mc=function(t){return this.$a(t).then(function(t){return t.user})},t.nc=function(t,e){var n=this;return nc(this,Xu(this,"phone").then(function(){return Eu(Lu(n),t,e,_(n.$a,n))}))},t.wc=function(t,e){var n=this;return nc(this,Et().then(function(){return Eu(Lu(n),t,e,_(n.bb,n))}),!0)},t.mb=function(t){var e=this;return nc(this,this.F().then(function(n){return e.b.mb(n,t)}).then(function(t){return Yu(e,t),e.reload()}))},t.Nc=function(t){var e=this;return nc(this,this.F().then(function(n){return t.c(e.b,n)}).then(function(t){return Yu(e,t),e.reload()}))},t.nb=function(t){var e=this;return nc(this,this.F().then(function(n){return e.b.nb(n,t)}).then(function(t){return Yu(e,t),e.reload()}))},t.ob=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Vu(this);var e=this;return nc(this,this.F().then(function(n){return e.b.ob(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Yu(e,t),Gu(e,"displayName",t.displayName||null),Gu(e,"photoURL",t.photoUrl||null),D(e.providerData,function(t){"password"===t.providerId&&(Sr(t,"displayName",e.displayName),Sr(t,"photoURL",e.photoURL))}),Mu(e)}).then(ju))},t.Mc=function(t){var e=this;return nc(this,zu(this).then(function(n){return F(qu(e),t)?function(t,e,n){return Ka(t,Ta,{idToken:e,deleteProvider:n})}(e.b,n,[t]).then(function(t){var n={};return D(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),D(qu(e),function(t){n[t]||Ku(e,t)}),n[Fi.PROVIDER_ID]||Sr(e,"phoneNumber",null),Mu(e)}):Mu(e).then(function(){throw new Ur("no-such-provider")})}))},t.delete=function(){var t=this;return nc(this,this.F().then(function(e){return Ka(t.b,Ea,{idToken:e})}).then(function(){t.dispatchEvent(new Au("userDeleted"))})).then(function(){for(var e=0;e<t.D.length;e++)t.D[e].cancel("app-deleted");Ou(t,null),Du(t,null),t.D=[],t.o=!0,Fu(t),Sr(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},t.qb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.$||null)==e||"reauthViaRedirect"==t&&(this.$||null)==e)},t.ga=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.wa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.vb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.wb,this):"linkViaRedirect"==t&&(this.$||null)==e?_(this.vb,this):"reauthViaRedirect"==t&&(this.$||null)==e?_(this.wb,this):null},t.oc=function(t){var e=this;return Zu(this,"linkViaPopup",t,function(){return Xu(e,t.providerId).then(function(){return Mu(e)})},!1)},t.xc=function(t){
return Zu(this,"reauthViaPopup",t,function(){return Et()},!0)},t.pc=function(t){var e=this;return tc(this,"linkViaRedirect",t,function(){return Xu(e,t.providerId)},!1)},t.yc=function(t){return tc(this,"reauthViaRedirect",t,function(){return Et()},!0)},t.vb=function(t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return nc(this,this.F().then(function(r){return va(n.b,{requestUri:t,sessionId:e,idToken:r})}).then(function(t){return r=$u(n,t,"link"),Ju(n,t)}).then(function(){return r}))},t.wb=function(t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return nc(this,Et().then(function(){return _i(ya(n.b,{requestUri:t,sessionId:e}),n.uid)}).then(function(t){return r=$u(n,t,"reauthenticate"),Yu(n,t),n.j=null,n.reload()}).then(function(){return r}),!0)},t.fb=function(t){var e=this,n=null;return nc(this,this.F().then(function(e){return n=e,void 0===t||it(t)?{}:Xr(new jr(t))}).then(function(t){return e.b.fb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.toJSON=function(){return this.C()},t.C=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.G,appName:this.s,authDomain:this.B,stsTokenManager:this.h.C(),redirectEventId:this.$||null};return this.metadata&&ct(t,this.metadata.C()),D(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var ic={name:"redirectUser",w:"session"};ac.prototype.g=function(){var t=this,e=cc("local");fc(this,function(){return Et().then(function(){return t.c&&"local"!=t.c.w?t.b.get(e,t.a):null}).then(function(n){if(n)return sc(t,"local").then(function(){t.c=e})})})};var uc={name:"persistence",w:"session"};ac.prototype.ib=function(t){var e=null,n=this;return function(t){var e=new Ur("invalid-persistence-type"),n=new Ur("unsupported-persistence-type");t:{for(r in Ps)if(Ps[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Jn()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!sr()&&"none"!==t)throw n}}(t),fc(this,function(){return t!=n.c.w?n.b.get(n.c,n.a).then(function(r){return e=r,sc(n,t)}).then(function(){if(n.c=cc(t),e)return n.b.set(n.c,e,n.a)}):Et()})},b(dc,ke),b(vc,se),b(yc,se),(t=dc.prototype).ib=function(t){return Sc(this,t=this.h.ib(t))},t.na=function(t){this.W===t||this.l||(this.W=t,na(this.b,this.W),this.dispatchEvent(new vc(this.ca())))},t.ca=function(){return this.W},t.Oc=function(){var t=r.navigator;this.na(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.qc=function(t){this.D.push(t),ra(this.b,e.SDK_VERSION?ir(e.SDK_VERSION,this.D):null),this.dispatchEvent(new yc(this.D))},t.Ka=function(){return B(this.D)},t.toJSON=function(){return{apiKey:wc(this).options.apiKey,authDomain:wc(this).options.authDomain,appName:wc(this).name,currentUser:Ec(this)&&Ec(this).C()}},t.qb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ga=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.wa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.Xb,this):null},t.Xb=function(t,e){var n=this;t={requestUri:t,sessionId:e},this.c&&(this.c.cancel(),this.c=null);var r=null,i=null,o=da(n.b,t).then(function(t){return r=Mi(t),i=si(t),t});return Sc(this,t=n.V.then(function(){return o}).then(function(t){return gc(n,t)}).then(function(){return Nr({user:Ec(n),credential:r,additionalUserInfo:i,operationType:"signIn"})}))},t.Gc=function(t){if(!ur())return Tt(new Ur("operation-not-supported-in-this-environment"));var n=this,r=ai(t.providerId),i=vr(),o=null;(!lr()||Xn())&&wc(this).options.authDomain&&t.isOAuthProvider&&(o=hs(wc(this).options.authDomain,wc(this).options.apiKey,wc(this).name,"signInViaPopup",t,null,i,e.SDK_VERSION||null));var a=Gn(o,r&&r.Aa,r&&r.za);return Sc(this,r=_c(this).then(function(e){return pu(e,a,"signInViaPopup",t,i,!!o)}).then(function(){return new vt(function(t,e){n.ga("signInViaPopup",null,new Ur("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=i,n.c=n.a.Da(n,"signInViaPopup",a,i)})}).then(function(t){return a&&Kn(a),t?Nr(t):null}).m(function(t){throw a&&Kn(a),t}))},t.Hc=function(t){if(!ur())return Tt(new Ur("operation-not-supported-in-this-environment"));var e=this;return Sc(this,_c(this).then(function(){return fc(t=e.h,function(){return t.b.set(uc,t.c.w,t.a)});var t}).then(function(){return e.a.Ba("signInViaRedirect",t)}))},t.da=function(){if(!ur())return Tt(new Ur("operation-not-supported-in-this-environment"));var t=this;return Sc(this,_c(this).then(function(){return t.a.da()}).then(function(t){return t?Nr(t):null}))},t.kb=function(){var t=this;return Sc(this,this.j.then(function(){return Ec(t)?(mc(t,null),lc(t.h).then(function(){Cc(t)})):Et()}))},t.Ic=function(){var t=this;return pc(this.h,wc(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=Ec(t)&&e){n=Ec(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Qu(Ec(t),e),Ec(t).F();(Ec(t)||e)&&(mc(t,e),e&&(Wu(e),e.fa=t.G),t.a&&t.a.subscribe(t),Cc(t))}})},t.ka=function(t){return hc(this.h,t)},t.Yb=function(){Cc(this),this.ka(Ec(this))},t.gc=function(){this.kb()},t.hc=function(){this.kb()},t.ic=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Ec(e))})},t.jc=function(t){var e=this;!function(t,e){t.I.push(e),Sc(t,t.j.then(function(){!t.l&&F(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(Tc(t)))}))}(this,function(){t.next(Ec(e))})},t.sc=function(t,n,r){var i=this;return this.X&&e.Promise.resolve().then(function(){l(t)?t(Ec(i)):l(t.next)&&t.next(Ec(i))}),this.Ob(t,n,r)},t.rc=function(t,n,r){var i=this;return this.X&&e.Promise.resolve().then(function(){i.O=i.getUid(),l(t)?t(Ec(i)):l(t.next)&&t.next(Ec(i))}),this.Pb(t,n,r)},t.$b=function(t){var e=this;return Sc(this,this.j.then(function(){return Ec(e)?Ec(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Cc=function(t){return this.Hb(t).then(function(t){return t.user})},t.Hb=function(t){var e=this;return this.j.then(function(){return bc(e,Ka(e.b,Ba,{token:t}))}).then(function(t){var n=t.user;return Gu(n,"isAnonymous",!1),e.ka(n),t})},t.Ib=function(t,e){var n=this;return this.j.then(function(){return bc(n,Ka(n.b,ja,{email:t,password:e}))})},t.Dc=function(t,e){return this.Ib(t,e).then(function(t){return t.user})},t.Sb=function(t,e){return this.sb(t,e).then(function(t){return t.user})},t.sb=function(t,e){var n=this;return this.j.then(function(){return bc(n,Ka(n.b,ba,{email:t,password:e}))})},t.Bc=function(t){return this.Oa(t).then(function(t){return t.user})},t.Oa=function(t){var e=this;return this.j.then(function(){return bc(e,t.xa(e.b))})},t.jb=function(){return this.Jb().then(function(t){return t.user})},t.Jb=function(){var t=this;return this.j.then(function(){var e=Ec(t);return e&&e.isAnonymous?Nr({user:e,credential:null,additionalUserInfo:Nr({providerId:null,isNewUser:!1}),operationType:"signIn"}):bc(t,t.b.jb()).then(function(e){var n=e.user;return Gu(n,"isAnonymous",!0),t.ka(n),e})})},t.getUid=function(){return Ec(this)&&Ec(this).uid||null},t.Qb=function(t){this.addAuthTokenListener(t),0<++this.s&&Ec(this)&&xu(Ec(this))},t.zc=function(t){var e=this;D(this.o,function(n){n==t&&e.s--}),0>this.s&&(this.s=0),0==this.s&&Ec(this)&&Fu(Ec(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.o.push(t),Sc(this,this.j.then(function(){e.l||F(e.o,t)&&t(Tc(e))}))},t.removeAuthTokenListener=function(t){M(this.o,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h).b.removeListener(cc("local"),t.a,this.ia),this.a&&this.a.unsubscribe(this),e.Promise.resolve()},t.Vb=function(t){return Sc(this,function(t,e){return Ka(t,wa,{identifier:e,continueUri:cr()?Vn():"http://localhost"}).then(function(t){return t.allProviders||[]})}(this.b,t))},t.Wb=function(t){return Sc(this,function(t,e){return Ka(t,wa,{identifier:e,continueUri:cr()?Vn():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.b,t))},t.kc=function(t){return!!Di(t)},t.hb=function(t,e){var n=this;return Sc(this,Et().then(function(){var t=new jr(e);if(!t.c)throw new Ur("argument-error",qr+" must be true when sending sign in link to email");return Xr(t)}).then(function(e){return n.b.hb(t,e)}).then(function(){}))},t.Pc=function(t){return this.Ia(t).then(function(t){return t.data.email})},t.Wa=function(t,e){return Sc(this,this.b.Wa(t,e).then(function(){}))},t.Ia=function(t){return Sc(this,this.b.Ia(t).then(function(t){return new function(t){var e={},n=t.email,r=t.newEmail;if(!(t=t.requestType)||"EMAIL_SIGNIN"!=t&&!n)throw Error("Invalid provider user info!");e.fromEmail=r||null,e.email=n||null,Sr(this,"operation",t),Sr(this,"data",Rr(e))}(t)}))},t.Ua=function(t){return Sc(this,this.b.Ua(t).then(function(){}))},t.gb=function(t,e){var n=this;return Sc(this,Et().then(function(){return void 0===e||it(e)?{}:Xr(new jr(e))}).then(function(e){return n.b.gb(t,e)}).then(function(){}))},t.Fc=function(t,e){return Sc(this,Eu(this,t,e,_(this.Oa,this)))},t.Ec=function(t,e){var n=this;return Sc(this,Et().then(function(){var r=Pi(t,e||Vn());return n.Oa(r)}))};var Nc="callback",Rc="expired-callback",Ac="sitekey",kc="size";(t=Ic.prototype).ya=function(){var t=this;return this.c?this.c:this.c=Pc(this,Et().then(function(){if(cr()&&!$n())return zn();throw new Ur("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return function(t,e){return new vt(function(n,i){var o=setTimeout(function(){i(new Ur("network-request-failed"))},xc.get());if(!r.grecaptcha||e!==t.c&&!t.b){r[t.a]=function(){if(r.grecaptcha){t.c=e;var a=r.grecaptcha.render;r.grecaptcha.render=function(e,n){return e=a(e,n),t.b++,e},clearTimeout(o),n()}else clearTimeout(o),i(new Ur("internal-error"));delete r[t.a]};Et(Vo(mn(Lc,{onload:t.a,hl:e||""}))).m(function(){clearTimeout(o),i(new Ur("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(o),n()})}(Uc(),t.s())}).then(function(){return Ka(t.u,Oa,{})}).then(function(e){t.a[Ac]=e.recaptchaSiteKey}).m(function(e){throw t.c=null,e}))},t.render=function(){Dc(this);var t=this;return Pc(this,this.ya().then(function(){if(null===t.b){var e=t.l;if(!t.h){var n=Pn(e);e=xn("DIV"),n.appendChild(e)}t.b=grecaptcha.render(e,t.a)}return t.b}))},t.verify=function(){Dc(this);var t=this;return Pc(this,this.render().then(function(e){return new vt(function(n){var r=grecaptcha.getResponse(e);if(r)n(r);else{var i=function i(e){e&&(function(t,e){M(t.j,function(t){return t==e})}(t,i),n(e))};t.j.push(i),t.h&&grecaptcha.execute(t.b)}})}))},t.reset=function(){Dc(this),null!==this.b&&grecaptcha.reset(this.b)},t.clear=function(){Dc(this),this.o=!0,Uc().b--;for(var t=0;t<this.g.length;t++)this.g[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){t=Pn(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}};var Lc=yn("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),xc=new gr(3e4,6e4),Fc=null;b(Mc,Ic);var Bc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");Yc(dc.prototype,{Ua:{name:"applyActionCode",i:[jc("code")]},Ia:{name:"checkActionCode",i:[jc("code")]},Wa:{name:"confirmPasswordReset",i:[jc("code"),jc("newPassword")]},Sb:{name:"createUserWithEmailAndPassword",i:[jc("email"),jc("password")]},sb:{name:"createUserAndRetrieveDataWithEmailAndPassword",i:[jc("email"),jc("password")]},Vb:{name:"fetchProvidersForEmail",i:[jc("email")]},Wb:{name:"fetchSignInMethodsForEmail",i:[jc("email")]},da:{name:"getRedirectResult",i:[]},kc:{name:"isSignInWithEmailLink",i:[jc("emailLink")]},rc:{name:"onAuthStateChanged",i:[zc(qc(),Hc(),"nextOrObserver"),Hc("opt_error",!0),Hc("opt_completed",!0)]},sc:{name:"onIdTokenChanged",i:[zc(qc(),Hc(),"nextOrObserver"),Hc("opt_error",!0),Hc("opt_completed",!0)]},gb:{name:"sendPasswordResetEmail",i:[jc("email"),zc(qc("opt_actionCodeSettings",!0),Kc(null,!0),"opt_actionCodeSettings",!0)]},hb:{name:"sendSignInLinkToEmail",i:[jc("email"),qc("actionCodeSettings")]},ib:{name:"setPersistence",i:[jc("persistence")]},Oa:{name:"signInAndRetrieveDataWithCredential",i:[Gc()]},jb:{name:"signInAnonymously",i:[]},Jb:{name:"signInAnonymouslyAndRetrieveData",i:[]},Bc:{name:"signInWithCredential",i:[Gc()]},Cc:{name:"signInWithCustomToken",i:[jc("token")]},Hb:{name:"signInAndRetrieveDataWithCustomToken",i:[jc("token")]},Dc:{name:"signInWithEmailAndPassword",i:[jc("email"),jc("password")]},Ec:{name:"signInWithEmailLink",i:[jc("email"),jc("emailLink",!0)]},Ib:{name:"signInAndRetrieveDataWithEmailAndPassword",i:[jc("email"),jc("password")]},Fc:{name:"signInWithPhoneNumber",i:[jc("phoneNumber"),Qc()]},Gc:{name:"signInWithPopup",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Hc:{name:"signInWithRedirect",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},kb:{name:"signOut",i:[]},toJSON:{name:"toJSON",i:[jc(null,!0)]},Oc:{name:"useDeviceLanguage",i:[]},Pc:{name:"verifyPasswordResetCode",i:[jc("code")]}}),function(t,e){for(var n in e){var r=e[n].name;if(r!==n){var i=e[n].Rb;Object.defineProperty(t,r,{get:function(){return this[n]},set:function(t){Wc(r,[i],[t],!0),this[n]=t},enumerable:!0})}}}(dc.prototype,{lc:{name:"languageCode",Rb:zc(jc(),Kc(),"languageCode")}}),dc.Persistence=Ps,dc.Persistence.LOCAL="local",dc.Persistence.SESSION="session",dc.Persistence.NONE="none",Yc(ku.prototype,{delete:{name:"delete",i:[]},ac:{name:"getIdTokenResult",i:[Vc()]},F:{name:"getIdToken",i:[Vc()]},getToken:{name:"getToken",i:[Vc()]},$a:{name:"linkAndRetrieveDataWithCredential",i:[Gc()]},mc:{name:"linkWithCredential",i:[Gc()]},nc:{name:"linkWithPhoneNumber",i:[jc("phoneNumber"),Qc()]},oc:{name:"linkWithPopup",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},pc:{name:"linkWithRedirect",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},bb:{name:"reauthenticateAndRetrieveDataWithCredential",i:[Gc()]},vc:{name:"reauthenticateWithCredential",i:[Gc()]},wc:{name:"reauthenticateWithPhoneNumber",i:[jc("phoneNumber"),Qc()]},xc:{name:"reauthenticateWithPopup",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},yc:{name:"reauthenticateWithRedirect",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",i:[]},fb:{name:"sendEmailVerification",i:[zc(qc("opt_actionCodeSettings",!0),Kc(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",i:[jc(null,!0)]},Mc:{name:"unlink",i:[jc("provider")]},mb:{name:"updateEmail",i:[jc("email")]},nb:{name:"updatePassword",i:[jc("password")]},Nc:{name:"updatePhoneNumber",i:[Gc("phone")]},ob:{name:"updateProfile",i:[qc("profile")]}}),Yc(vt.prototype,{ha:{name:"finally"},m:{name:"catch"},then:{name:"then"}}),Yc(wu.prototype,{confirm:{name:"confirm",i:[jc("verificationCode")]}}),Xc(Oi,"credential",function(t,e){return new ki(t,e)},[jc("email"),jc("password")]),Yc(Ei.prototype,{ta:{name:"addScope",i:[jc("scope")]},Ca:{name:"setCustomParameters",i:[qc("customOAuthParameters")]}}),Xc(Ei,"credential",Ti,[zc(jc(),qc(),"token")]),Xc(Oi,"credentialWithLink",Pi,[jc("email"),jc("emailLink")]),Yc(Ci.prototype,{ta:{name:"addScope",i:[jc("scope")]},Ca:{name:"setCustomParameters",i:[qc("customOAuthParameters")]}}),Xc(Ci,"credential",Si,[zc(jc(),qc(),"token")]),Yc(Ii.prototype,{ta:{name:"addScope",i:[jc("scope")]},Ca:{name:"setCustomParameters",i:[qc("customOAuthParameters")]}}),Xc(Ii,"credential",Ni,[zc(jc(),zc(qc(),Kc()),"idToken"),zc(jc(),Kc(),"accessToken",!0)]),Yc(Ri.prototype,{Ca:{name:"setCustomParameters",i:[qc("customOAuthParameters")]}}),Xc(Ri,"credential",Ai,[zc(jc(),qc(),"token"),jc("secret",!0)]),Yc(wi.prototype,{ta:{name:"addScope",i:[jc("scope")]},credential:{name:"credential",i:[zc(jc(),Kc(),"idToken",!0),zc(jc(),Kc(),"accessToken",!0)]},Ca:{name:"setCustomParameters",i:[qc("customOAuthParameters")]}}),Xc(Fi,"credential",Ui,[jc("verificationId"),jc("verificationCode")]),Yc(Fi.prototype,{Sa:{name:"verifyPhoneNumber",i:[jc("phoneNumber"),Qc()]}}),Yc(Ur.prototype,{toJSON:{name:"toJSON",i:[jc(null,!0)]}}),Yc(Ki.prototype,{toJSON:{name:"toJSON",i:[jc(null,!0)]}}),Yc(Hi.prototype,{toJSON:{name:"toJSON",i:[jc(null,!0)]}}),Yc(Mc.prototype,{clear:{name:"clear",i:[]},render:{name:"render",i:[]},verify:{name:"verify",i:[]}}),function(){if(void 0===e||!e.INTERNAL||!e.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:dc,Error:Ur};Xc(t,"EmailAuthProvider",Oi,[]),Xc(t,"FacebookAuthProvider",Ei,[]),Xc(t,"GithubAuthProvider",Ci,[]),Xc(t,"GoogleAuthProvider",Ii,[]),Xc(t,"TwitterAuthProvider",Ri,[]),Xc(t,"OAuthProvider",wi,[jc("providerId")]),Xc(t,"PhoneAuthProvider",Fi,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof dc)}}]),Xc(t,"RecaptchaVerifier",Mc,[zc(jc(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),qc("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof e.app.App)}}]),e.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:_((t=new dc(t)).getUid,t),getToken:_(t.$b,t),addAuthTokenListener:_(t.Qb,t),removeAuthTokenListener:_(t.zc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),e.INTERNAL.extendNamespace({User:ku})}()}).call(void 0!==ie?ie:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Jt||(Jt={}));var He,Ke,Ge,Qe,ze,mn,bn,wn,Sn,In,oe=Jt.INFO,ae=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case Jt.DEBUG:case Jt.VERBOSE:console.log.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case Jt.INFO:console.info.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case Jt.WARN:console.warn.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case Jt.ERROR:console.error.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},se=function(){function t(t){this.name=t,this._logLevel=oe,this._logHandler=ae}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Jt))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,Jt.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,Jt.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,Jt.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,Jt.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,Jt.ERROR].concat(t))},t}(),ue=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Nt(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:It(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),ce=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return At(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),he=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ue(e)}}catch(t){}return new ce},le=he("localStorage"),pe=he("sessionStorage"),fe=new se("@firebase/database"),de=function(){var t=1;return function(){return t++}}(),ve=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;lt(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new Mt;n.update(e);var r=n.digest();return dt.encodeByteArray(r)},ye=function ye(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++)Array.isArray(t[r])||t[r]&&"object"==_typeof(t[r])&&"number"==typeof t[r].length?n+=ye.apply(null,t[r]):"object"==_typeof(t[r])?n+=Nt(t[r]):n+=t[r],n+=" ";return n},_e=null,ge=!0,me=function(t,e){lt(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(fe.logLevel=Jt.VERBOSE,_e=fe.log.bind(fe),e&&pe.set("logging_enabled",!0)):"function"==typeof t?_e=t:(_e=null,pe.remove("logging_enabled"))},be=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===ge&&(ge=!1,null===_e&&!0===pe.get("logging_enabled")&&me(!0)),_e){var n=ye.apply(null,t);_e(n)}},we=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];be.apply(void 0,[t].concat(e))}},Ee=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+ye.apply(void 0,t);fe.error(n)},Te=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+ye.apply(void 0,t);throw fe.error(n),new Error(n)},Ce=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+ye.apply(void 0,t);fe.warn(n)},Se=function(t){return"number"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},Ie="[MIN_NAME]",Ne="[MAX_NAME]",Re=function(t,e){if(t===e)return 0;if(t===Ie||e===Ne)return-1;if(e===Ie||t===Ne)return 1;var n=Fe(t),r=Fe(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},Ae=function(t,e){return t===e?0:t<e?-1:1},ke=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Nt(e))},Oe=function Oe(t){if("object"!=(void 0===t?"undefined":_typeof(t))||null===t)return Nt(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Nt(e[i]),r+=":",r+=Oe(t[e[i]]);return r+="}"},Pe=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r},De=function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;++n)e(n,t[n]);else Ot(t,function(t,n){return e(n,t)})},Le=function(t){lt(!Se(t),"Invalid JSON number");var e,n,r,i,o,a,s;for(0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074)))),a=[],o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse(),s=a.join("");var u="";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},xe=new RegExp("^-?\\d{1,10}$"),Fe=function(t){if(xe.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Ue=function(t){try{t()}catch(t){setTimeout(function(){var e=t.stack||"";throw Ce("Exception was thrown by user callback.",e),t},Math.floor(0))}},Me=function(){return("object"==("undefined"==typeof window?"undefined":_typeof(window))&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},We=function(t,e){var n=setTimeout(t,e);return"object"==(void 0===n?"undefined":_typeof(n))&&n.unref&&n.unref(),n},Be=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=Re(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),je=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Gt(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Gt(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Gt(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Ve="long_polling",qe=function(){function t(t,e,n,r,i){void 0===i&&(i=""),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=le.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&le.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(lt("string"==typeof t,"typeof type must == string"),lt("object"==(void 0===e?"undefined":_typeof(e)),"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Ve)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Ot(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),Ye=function(t){var e=Xe(t),n=e.subdomain;"firebase"===e.domain&&Te(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===e.domain||Te("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ce("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new qe(e.host,e.secure,n,r),path:new Be(e.pathString)}},Xe=function(t){var e="",n="",r="",i="",o=!0,a="https",s=443;if("string"==typeof t){var u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));var c=t.indexOf("/");-1===c&&(c=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(c,h)),c<h&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(c,h)));var l=function(t){
var e={};t.startsWith("?")&&(t=t.substring(1));for(var n=0,r=t.split("&");n<r.length;n++){var i=r[n];if(0!==i.length){var o=i.split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):Ce("Invalid query segment '"+i+"' in query '"+t+"'")}}return e}(t.substring(Math.min(t.length,h)));(u=e.indexOf(":"))>=0?(o="https"===a||"wss"===a,s=parseInt(e.substring(u+1),10)):u=t.length;var p=e.split(".");3===p.length?(n=p[1],r=p[0].toLowerCase()):2===p.length?n=p[0]:"localhost"===p[0].slice(0,u).toLowerCase()&&(n="localhost"),""===r&&"ns"in l&&(r=l.ns)}return{host:e,port:s,domain:n,subdomain:r,secure:o,scheme:a,pathString:i}},$e=/[\[\].#$\/\u0000-\u001F\u007F]/,Je=/[\[\].#$\u0000-\u001F\u007F]/,Ze=function(t){return"string"==typeof t&&0!==t.length&&!$e.test(t)},tn=function(t){return"string"==typeof t&&0!==t.length&&!Je.test(t)},en=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Se(t)||t&&"object"==(void 0===t?"undefined":_typeof(t))&&At(t,".sv")},nn=function(t,e,n,r,i){i&&void 0===n||rn(qt(t,e,i),n,r)},rn=function rn(t,e,n){var r=n instanceof Be?new je(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(Se(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&Gt(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==(void 0===e?"undefined":_typeof(e))){var i=!1,o=!1;if(Ot(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!Ze(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),rn(t,n,r),r.pop()}),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},on=function(t,e,n,r,i){if(!i||void 0!==n){var o=qt(t,e,i);if(!n||"object"!=(void 0===n?"undefined":_typeof(n))||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];Ot(n,function(t,e){var n=new Be(t);if(rn(o,e,r.child(n)),".priority"===n.getBack()&&!en(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Ze(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Be.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},an=function(t,e,n,r){if(!r||void 0!==n){if(Se(n))throw new Error(qt(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!en(n))throw new Error(qt(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},sn=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(qt(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},un=function(t,e,n,r){if(!(r&&void 0===n||Ze(n)))throw new Error(qt(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},cn=function(t,e,n,r){if(!(r&&void 0===n||tn(n)))throw new Error(qt(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},hn=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},ln=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Ze(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),tn(t)}(r))throw new Error(qt(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},pn=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Vt("OnDisconnect.cancel",0,1,arguments.length),Ht("OnDisconnect.cancel",1,t,!0);var e=new mt;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Vt("OnDisconnect.remove",0,1,arguments.length),hn("OnDisconnect.remove",this.path_),Ht("OnDisconnect.remove",1,t,!0);var e=new mt;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Vt("OnDisconnect.set",1,2,arguments.length),hn("OnDisconnect.set",this.path_),nn("OnDisconnect.set",1,t,this.path_,!1),Ht("OnDisconnect.set",2,e,!0);var n=new mt;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Vt("OnDisconnect.setWithPriority",2,3,arguments.length),hn("OnDisconnect.setWithPriority",this.path_),nn("OnDisconnect.setWithPriority",1,t,this.path_,!1),an("OnDisconnect.setWithPriority",2,e,!1),Ht("OnDisconnect.setWithPriority",3,n,!0);var r=new mt;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Vt("OnDisconnect.update",1,2,arguments.length),hn("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Ce("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}on("OnDisconnect.update",1,t,this.path_,!1),Ht("OnDisconnect.update",2,e,!0);var i=new mt;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),fn=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Vt("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),dn=(He="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ke=0,Ge=[],function(t){var e,n=t===Ke;Ke=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=He.charAt(t%64),t=Math.floor(t/64);lt(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===Ge[e];e--)Ge[e]=0;Ge[e]++}else for(e=0;e<12;e++)Ge[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=He.charAt(Ge[e]);return lt(20===i.length,"nextPushId: Length should be 20."),i}),vn=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),yn=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new vn(Ie,t),r=new vn(Ie,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return vn.MIN},t}(),_n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return it(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Qe},set:function(t){Qe=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return Re(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw pt("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return vn.MIN},e.prototype.maxPost=function(){return new vn(Ne,Qe)},e.prototype.makePost=function(t,e){return lt("string"==typeof t,"KeyIndex indexValue must always be a string."),new vn(t,Qe)},e.prototype.toString=function(){return".key"},e}(yn),gn=new _n,En=function(t){return"number"==typeof t?"number:"+Le(t):"string:"+t},Tn=function(t){if(t.isLeafNode()){var e=t.val();lt("string"==typeof e||"number"==typeof e||"object"==(void 0===e?"undefined":_typeof(e))&&At(e,".sv"),"Priority must be a string or number.")}else lt(t===ze||t.isEmpty(),"priority of unexpected type.");lt(t===ze||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Cn=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,lt(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Tn(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return mn},set:function(t){mn=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(lt(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+En(this.priorityNode_.val())+":");var e=_typeof(this.value_);t+=e+":",t+="number"===e?Le(this.value_):this.value_,this.lazyHash_=ve(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(lt(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=_typeof(e.value_),r=_typeof(this.value_),i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return lt(i>=0,"Unknown leaf type: "+n),lt(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Nn=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return it(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Re(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return vn.MIN},e.prototype.maxPost=function(){return new vn(Ne,new Cn("[PRIORITY-POST]",wn))},e.prototype.makePost=function(t,e){var n=bn(t);return new vn(e,new Cn("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(yn)),Rn=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),An=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:On.EMPTY_NODE,this.right=null!=o?o:On.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r,i;return(i=(r=n(t,(i=this).key))<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return On.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return On.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),kn=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new An(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),On=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,An.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,An.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Rn(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Rn(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Rn(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Rn(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new kn,t}(),Pn=Math.log(2),Dn=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Pn,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Ln=function(t,e,n,r){t.sort(e);var i=function i(e,r){var o,a,s=r-e;if(0==s)return null;if(1==s)return o=t[e],a=n?n(o):o,new An(a,o.node,An.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),h=i(u+1,r);return o=t[u],a=n?n(o):o,new An(a,o.node,An.BLACK,c,h)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),h=t[o],l=n?n(h):h;u(new An(l,h.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?s(l,An.BLACK):(s(l,An.BLACK),s(l,An.RED))}return o}(new Dn(t.length));return new On(r||e,o)},xn={},Fn=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return lt(xn&&Nn,"ChildrenNode.ts has not been loaded"),Sn=Sn||new t({".priority":xn},{".priority":Nn})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=kt(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e===xn?null:e},t.prototype.hasIndex=function(t){return At(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){lt(e!==gn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(vn.Wrap),s=a.getNext();s;)o=o||e.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?Ln(i,e.getCompare()):xn;var u=e.toString(),c=Pt(this.indexSet_);c[u]=e;var h=Pt(this.indexes_);return h[u]=r,new t(h,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(xt(this.indexes_,function(t,i){var o=kt(r.indexSet_,i);if(lt(o,"Missing index implementation for "+i),t===xn){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(vn.Wrap),u=s.getNext();u;)u.name!=e.name&&a.push(u),u=s.getNext();return a.push(e),Ln(a,o.getCompare())}return xn}var c=n.get(e.name),h=t;return c&&(h=h.remove(new vn(e.name,c))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(xt(this.indexes_,function(t){if(t===xn)return t;var r=n.get(e.name);return r?t.remove(new vn(e.name,r)):t}),this.indexSet_)},t}(),Wn=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Tn(this.priorityNode_),this.children_.isEmpty()&&lt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return In||(In=new t(new On(Mn),null,Fn.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||In},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?In:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(lt(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new vn(e,n),i=void 0,o=void 0;return n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_)),new t(i,i.isEmpty()?In:this.priorityNode_,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;lt(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Nn,function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+En(this.getPriority().val())+":"),this.forEachChild(Nn,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":ve(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new vn(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new vn(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new vn(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,vn.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,vn.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Bn?-1:0},t.prototype.withIndex=function(e){if(e===gn||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===gn||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Nn),r=e.getIterator(Nn),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===gn?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Bn=new(function(t){function e(){return t.call(this,new On(Mn),Wn.EMPTY_NODE,Fn.Default)||this}return it(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Wn.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Wn));Object.defineProperties(vn,{MIN:{value:new vn(Ie,Wn.EMPTY_NODE)},MAX:{value:new vn(Ne,Bn)}}),_n.__EMPTY_NODE=Wn.EMPTY_NODE,Cn.__childrenNodeConstructor=Wn,ze=Bn,function(t){wn=t}(Bn);var jn=!0;!function(t){bn=t}(Vn);var qn,Hn,Kn=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return it(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Re(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return vn.MIN},e.prototype.maxPost=function(){return vn.MAX},e.prototype.makePost=function(t,e){var n=Vn(t);return new vn(e,n)},e.prototype.toString=function(){return".value"},e}(yn)),Gn=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,lt(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return it(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Re(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Vn(t),r=Wn.EMPTY_NODE.updateChild(this.indexPath_,n);return new vn(e,r)},e.prototype.maxPost=function(){var t=Wn.EMPTY_NODE.updateChild(this.indexPath_,Bn);return new vn(Ne,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(yn),Qn=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Vt("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Vt("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Vt("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Vt("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Vt("DataSnapshot.child",0,1,arguments.length),e=String(e),cn("DataSnapshot.child",1,e,!1);var n=new Be(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Nn)},t.prototype.hasChild=function(t){Vt("DataSnapshot.hasChild",1,1,arguments.length),cn("DataSnapshot.hasChild",1,t,!1);var e=new Be(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Vt("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;return Vt("DataSnapshot.forEach",1,1,arguments.length),Ht("DataSnapshot.forEach",1,e,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Nn))})},t.prototype.hasChildren=function(){return Vt("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return Vt("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Vt("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),zn=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Nt(this.snapshot.exportVal())},t}(),Yn=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Xn=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new zn("value",this,new Qn(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){lt(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yn(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),$n=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,At(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yn(this,t,e):null},t.prototype.createEvent=function(t,e){lt(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new zn(t.type,this,new Qn(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){
lt(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var n=Lt(e.callbacks_);if(n===Lt(this.callbacks_)){if(1===n){var r=Ut(e.callbacks_),i=Ut(this.callbacks_);return!(i!==r||e.callbacks_[r]&&this.callbacks_[i]&&e.callbacks_[r]!==this.callbacks_[i])}return function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!function(t,n){return e.callbacks_[t]===n}(n,t[n]))return!1;return!0}(this.callbacks_)}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Jn=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return lt(qn,"Reference.ts has not been loaded"),qn},set:function(t){qn=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===gn){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!=Ie)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!=Ne)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Nn){if(null!=e&&!en(e)||null!=n&&!en(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(lt(t.getIndex()instanceof Gn||t.getIndex()===Kn,"unknown index type."),null!=e&&"object"==(void 0===e?"undefined":_typeof(e))||null!=n&&"object"==(void 0===n?"undefined":_typeof(n)))throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Vt("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Vt("Query.on",2,4,arguments.length),sn("Query.on",1,e,!1),Ht("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Xn(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new $n(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Vt("Query.off",0,3,arguments.length),sn("Query.off",1,t,!0),Ht("Query.off",2,e,!0),Kt("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new Xn(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new $n(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;Vt("Query.once",1,4,arguments.length),sn("Query.once",1,e,!1),Ht("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),s=!0,u=new mt;u.promise.catch(function(){});var c=function c(t){s&&(s=!1,o.off(e,c),n&&n.bind(a.context)(t),u.resolve(t))};return this.on(e,c,function(t){o.off(e,c),a.cancel&&a.cancel.bind(a.context)(t),u.reject(t)}),u.promise},t.prototype.limitToFirst=function(e){if(Vt("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Vt("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Vt("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');cn("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Be(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Gn(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Vt("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(gn);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Vt("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Nn);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Vt("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Kn);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Vt("Query.startAt",0,2,arguments.length),nn("Query.startAt",1,e,this.path,!0),un("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Vt("Query.endAt",0,2,arguments.length),nn("Query.endAt",1,e,this.path,!0),un("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Vt("Query.equalTo",1,2,arguments.length),nn("Query.equalTo",1,t,this.path,!1),un("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Vt("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Vt("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=Oe(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Vt("Query.isEqual",1,1,arguments.length),!(e instanceof t))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var n=this.repo===e.repo,r=this.path.equals(e.path),i=this.queryIdentifier()===e.queryIdentifier();return n&&r&&i},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Ht(t,3,r.cancel,!0),r.context=n,Kt(t,4,r.context,!0);else if(e)if("object"==(void 0===e?"undefined":_typeof(e))&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(qt(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Zn=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return At(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return Dt(this.set)},t.prototype.count=function(){return Lt(this.set)},t.prototype.each=function(t){Ot(this.set,function(e,n){return t(e,n)})},t.prototype.keys=function(){var t=[];return Ot(this.set,function(e){t.push(e)}),t},t}(),tr=function(){function t(){this.value_=null,this.children_=null}return t.prototype.find=function(t){if(null!=this.value_)return this.value_.getChild(t);if(t.isEmpty()||null==this.children_)return null;var e=t.getFront();return t=t.popFront(),this.children_.contains(e)?this.children_.get(e).find(t):null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,n);else{null==this.children_&&(this.children_=new Zn);var r=e.getFront();this.children_.contains(r)||this.children_.add(r,new t);var i=this.children_.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var e=this.value_;this.value_=null;var n=this;return e.forEachChild(Nn,function(t,e){n.remember(new Be(t),e)}),this.forget(t)}if(null!==this.children_){var r=t.getFront();return t=t.popFront(),this.children_.contains(r)&&this.children_.get(r).forget(t)&&this.children_.remove(r),!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},t.prototype.forEachTree=function(t,e){null!==this.value_?e(t,this.value_):this.forEachChild(function(n,r){var i=new Be(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){null!==this.children_&&this.children_.each(function(e,n){t(e,n)})},t}(),er=function(t,e){return t&&"object"==(void 0===t?"undefined":_typeof(t))?(lt(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},nr=function nr(t,e){var n,r=t.getPriority().val(),i=er(r,e);if(t.isLeafNode()){var o=t,a=er(o.getValue(),e);return a!==o.getValue()||i!==o.getPriority().val()?new Cn(a,Vn(i)):t}var s=t;return n=s,i!==s.getPriority().val()&&(n=n.updatePriority(new Cn(i))),s.forEachChild(Nn,function(t,r){var i=nr(r,e);i!==r&&(n=n.updateImmediateChild(t,i))}),n};!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Hn||(Hn={}));var rr,ir,or=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,lt(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),ar=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Hn.ACK_USER_WRITE,this.source=or.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return lt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Be(e));return new t(Be.Empty,n,this.revert)}return lt(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),sr=function(){return rr||(rr=new On(Ae)),rr},ur=function(){function t(t,e){void 0===e&&(e=sr()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return Ot(e,function(t,e){n=n.set(new Be(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Be.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new Be(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=(this.children.get(r)||t.Empty).setTree(e.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(Be.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Be.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Be.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(Be.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),cr=function(){function t(t,e){this.source=t,this.path=e,this.type=Hn.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Be.Empty):new t(this.source,this.path.popFront())},t}(),hr=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Hn.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Be.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),lr=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Hn.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Be(e));return n.isEmpty()?null:n.value?new hr(this.source,Be.Empty,n.value):new t(this.source,Be.Empty,n)}return lt(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),pr=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),fr=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new pr(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new pr(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new pr(Wn.EMPTY_NODE,!1,!1),new pr(Wn.EMPTY_NODE,!1,!1)),t}(),dr=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),vr=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){lt(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()==n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(dr.childRemovedChange(e,a)):lt(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(dr.childAddedChange(e,n)):o.trackChildChange(dr.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Nn,function(t,r){e.hasChild(t)||n.trackChildChange(dr.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(Nn,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(dr.childChangedChange(e,r,i))}else n.trackChildChange(dr.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Wn.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),yr=function(){function t(){this.changeMap_={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;lt(e==dr.CHILD_ADDED||e==dr.CHILD_CHANGED||e==dr.CHILD_REMOVED,"Only child changes supported for tracking"),lt(".priority"!==n,"Only non-priority child changes can be tracked.");var r=kt(this.changeMap_,n);if(r){var i=r.type;if(e==dr.CHILD_ADDED&&i==dr.CHILD_REMOVED)this.changeMap_[n]=dr.childChangedChange(n,t.snapshotNode,r.snapshotNode);else if(e==dr.CHILD_REMOVED&&i==dr.CHILD_ADDED)delete this.changeMap_[n];else if(e==dr.CHILD_REMOVED&&i==dr.CHILD_CHANGED)this.changeMap_[n]=dr.childRemovedChange(n,r.oldSnap);else if(e==dr.CHILD_CHANGED&&i==dr.CHILD_ADDED)this.changeMap_[n]=dr.childAddedChange(n,t.snapshotNode);else{if(e!=dr.CHILD_CHANGED||i!=dr.CHILD_CHANGED)throw pt("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap_[n]=dr.childChangedChange(n,t.snapshotNode,r.oldSnap)}}else this.changeMap_[n]=t},t.prototype.getChanges=function(){return function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e}(this.changeMap_)},t}(),_r=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),gr=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new pr(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),mr=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),br=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){lt(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),lt(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,a,s=new yr;if(n.type===Hn.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,s):(lt(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,a,s))}else if(n.type===Hn.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,s):(lt(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,a,s))}else if(n.type===Hn.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,s):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,s)}else{if(n.type!==Hn.LISTEN_COMPLETE)throw pt("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,s)}var l=s.getChanges();return t.maybeAddValueEvent_(e,o,l),new mr(o,l)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(dr.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,s=void 0;if(e.isEmpty())if(lt(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof Wn?u:Wn.EMPTY_NODE,h=n.calcCompleteEventChildren(c);a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var p=e.getFront();if(".priority"==p){lt(1==e.getLength(),"Can't have a priority with additional path components");var f=o.getNode();s=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,f,s);a=null!=d?this.filter_.updatePriority(f,d):o.getNode()}else{var v=e.popFront(),y=void 0;if(o.isCompleteForChild(p)){s=t.getServerCache().getNode();var _=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),s);y=null!=_?o.getNode().getImmediateChild(p).updateChild(v,_):o.getNode().getImmediateChild(p)}else y=n.calcCompleteChild(p,t.getServerCache());a=null!=y?this.filter_.updateChild(o.getNode(),p,y,v,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),h,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var p=e.popFront(),f=u.getNode().getImmediateChild(l).updateChild(p,n);s=".priority"==l?c.updatePriority(u.getNode(),f):c.updateChild(u.getNode(),l,f,p,_r,null)}var d=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new gr(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new gr(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),p=u.getNode().getImmediateChild(h),f=void 0;if(l.isEmpty())f=n;else{var d=c.getCompleteChild(h);f=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):Wn.EMPTY_NODE}if(p.equals(f))a=t;else{var v=this.filter_.updateChild(u.getNode(),h,f,l,c,o);a=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach(function(r,c){var h=n.child(r);t.cacheHasChild_(e,h.getFront())&&(u=s.applyUserOverwrite_(u,h,c,i,o,a))}),r.foreach(function(r,c){var h=n.child(r);t.cacheHasChild_(e,h.getFront())||(u=s.applyUserOverwrite_(u,h,c,i,o,a))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:ur.Empty.setTree(e,n);var h=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(h.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),l=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new Be(e),l,r,i,o,a)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!h.hasChild(e)&&!u){var l=t.getServerCache().getNode().getImmediateChild(e),p=s.applyMerge_(l,n);c=s.applyServerOverwrite_(c,new Be(e),p,r,i,o,a)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=ur.Empty;return s.getNode().forEachChild(gn,function(t,e){u=u.set(new Be(t),e)}),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=ur.Empty;return n.foreach(function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,_r,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new gr(n,t,r),s=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();lt(h instanceof Wn,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(s,c,i)}else{var l=e.getFront(),p=n.calcCompleteChild(l,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(l)&&(p=s.getImmediateChild(l)),(u=null!=p?this.filter_.updateChild(s,l,p,e.popFront(),a,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(s,l,Wn.EMPTY_NODE,e.popFront(),a,i):s).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Be.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),wr=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===dr.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(dr.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,dr.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,dr.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,dr.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,dr.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,dr.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter(function(t){return t.type===e});a.sort(this.compareChanges_.bind(this)),a.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw pt("Should only compare child_ events.");var n=new vn(t.childName,t.snapshotNode),r=new vn(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Er=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new vr(n.getIndex()),i=n.getNodeFilter();this.processor_=new br(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(Wn.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Wn.EMPTY_NODE,a.getNode(),null),c=new pr(s,o.isFullyInitialized(),r.filtersNodes()),h=new pr(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new fr(h,c),this.eventGenerator_=new wr(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){lt(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){
t.type===Hn.MERGE&&null!==t.source.queryId&&(lt(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),lt(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),lt(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Nn,function(t,e){n.push(dr.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(dr.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),Tr=function(){function t(){this.views_={}}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return lt(ir,"Reference.ts has not been loaded"),ir},set:function(t){lt(!ir,"__referenceConstructor has already been defined"),ir=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return Dt(this.views_)},t.prototype.applyOperation=function(t,e,n){var r=t.source.queryId;if(null!==r){var i=kt(this.views_,r);return lt(null!=i,"SyncTree gave us an op for an invalid query."),i.applyOperation(t,e,n)}var o=[];return Ot(this.views_,function(r,i){o=o.concat(i.applyOperation(t,e,n))}),o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=kt(this.views_,o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof Wn?(s=n.calcCompleteEventChildren(r),u=!1):(s=Wn.EMPTY_NODE,u=!1);var c=new fr(new pr(s,u,!1),new pr(r,i,!1));a=new Er(t,c),this.views_[o]=a}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i=e.queryIdentifier(),o=[],a=[],s=this.hasCompleteView();if("default"===i){var u=this;Ot(this.views_,function(t,e){a=a.concat(e.removeEventRegistration(n,r)),e.isEmpty()&&(delete u.views_[t],e.getQuery().getQueryParams().loadsAllData()||o.push(e.getQuery()))})}else{var c=kt(this.views_,i);c&&(a=a.concat(c.removeEventRegistration(n,r)),c.isEmpty()&&(delete this.views_[i],c.getQuery().getQueryParams().loadsAllData()||o.push(c.getQuery())))}return s&&!this.hasCompleteView()&&o.push(new t.__referenceConstructor(e.repo,e.path)),{removed:o,events:a}},t.prototype.getQueryViews=function(){var t=this;return Object.keys(this.views_).map(function(e){return t.views_[e]}).filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},t.prototype.getCompleteServerCache=function(t){var e=null;return Ot(this.views_,function(n,r){e=e||r.getCompleteServerCache(t)}),e},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return kt(this.views_,e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,n;return t=this.views_,(n=Ft(t,function(t){return t.getQuery().getQueryParams().loadsAllData()},void 0))&&t[n]||null},t}(),Cr=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new ur(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=Be.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new ur(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return Ot(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,ur.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Be.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Nn,function(e,n){t.push(new vn(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new vn(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new ur(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(e){return t.applySubtreeWrite_(Be.Empty,this.writeTree_,e)},t.Empty=new t(new ur(null)),t.applySubtreeWrite_=function(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal(function(n,o){".priority"===n?(lt(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t.applySubtreeWrite_(e.child(n),o,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r},t}(),Sr=function(){function t(){this.visibleWrites_=Cr.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ir(t,this)},t.prototype.addOverwrite=function(t,e,n,r){lt(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){lt(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});lt(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var s=this.allWrites_[a];s.visible&&(a>=n&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}if(i){if(o)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(r.path);else{var u=r.children;Ot(u,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})}return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(Be.Empty)){var a=t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);return c=n||Wn.EMPTY_NODE,a.apply(c)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(Be.Empty)){var c=n||Wn.EMPTY_NODE;return u.apply(c)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Wn.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Nn,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Nn,function(t,e){var r=i.childCompoundWrite(new Be(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){lt(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(Be.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),p=l.getNext();p&&c.length<r;)0!==h(p,n)&&c.push(p),p=l.getNext();return c},t.prototype.recordContainsPath_=function(t,e){return t.snap?t.path.contains(e):!!Ft(t.children,function(n,r){return t.path.child(r).contains(e)})},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Be.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Cr.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=Be.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=Be.relativePath(a,n),r=r.addWrite(Be.Empty,o.snap.getChild(s)));else{if(!o.children)throw pt("WriteRecord should have .snap or .children");if(n.contains(a))s=Be.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if((s=Be.relativePath(a,n)).isEmpty())r=r.addWrites(Be.Empty,o.children);else{var u=kt(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(Be.Empty,c)}}}}}return r},t}(),Ir=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Nr=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=ur.Empty,this.pendingWriteTree_=new Sr,this.tagToQueryMap_={},this.queryToTagMap_={}}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new hr(or.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=ur.fromObject(e);return this.applyOperationToSyncPoints_(new lr(or.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=ur.Empty;return null!=n.snap?r=r.set(Be.Empty,!0):Ot(n.children,function(t,e){r=r.set(new Be(t),e)}),this.applyOperationToSyncPoints_(new ar(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new hr(or.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=ur.fromObject(e);return this.applyOperationToSyncPoints_(new lr(or.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new cr(or.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=Be.relativePath(a,e),c=new hr(or.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=Be.relativePath(a,e),c=ur.fromObject(n),h=new lr(or.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,h)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=Be.relativePath(o,e),u=new cr(or.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=Be.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var a,s=this.syncPointTree_.get(r);s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(Be.Empty)):(s=new Tr,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i?a=!0:(a=!1,i=Wn.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(Be.Empty);n&&(i=i.updateImmediateChild(t,n))}));var u=s.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);lt(!(c in this.queryToTagMap_),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap_[c]=h,this.tagToQueryMap_["_"+h]=c}var l=this.pendingWriteTree_.childWrites(r),p=s.addEventRegistration(e,n,l,i,a);if(!u&&!o){var f=s.viewForQuery(e);p=p.concat(this.setupListener_(e,f))}return p},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var h=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),l=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(h&&!l){var p=this.syncPointTree_.subtree(o);if(!p.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(p),d=0;d<f.length;++d){var v=f[d],y=v.getQuery(),_=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),_.hashFn,_.onComplete)}}!l&&c.length>0&&!r&&(h?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach(function(e){var n=i.queryToTagMap_[t.makeQueryKey_(e)];i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=Be.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Ot(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap_[i];delete this.queryToTagMap_[i],delete this.tagToQueryMap_["_"+o]}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),s=this.syncPointTree_.subtree(r);if(i)lt(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),Ot(n,function(t,e){r=r.concat(e)}),r}),c=0;c<u.length;++c){var h=u[c];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Wn.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return lt(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Be(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap_["_"+t]},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return kt(this.queryToTagMap_,n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);lt(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Be.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Be.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Be.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,h=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Be.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Be.Empty));var a=[];return e.children.inorderTraversal(function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))}),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),Rr=function(){function t(){this.rootNode_=Wn.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Ar=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(be("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ce(t)},t}(),kr=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),At(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return yt(this.counters_)},t}(),Or=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new kr),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Pr=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Pt(t);return this.last_&&Ot(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Dr=1e4,Lr=3e4,xr=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Pr(t);var n=Dr+(Lr-Dr)*Math.random();We(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;Ot(e,function(e,i){i>0&&At(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),We(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Fr=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Ur(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Ur=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();_e&&be("event: "+e.toString()),Ue(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Mr=function(){function t(t){this.allowedEvents_=t,this.listeners_={},lt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=this.listeners_[t].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){lt(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),Wr=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return it(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return lt("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Mr),Br=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||bt()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return it(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return lt("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Mr),jr=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var r=0;r<t.length;++r)!function(_e3){t[_e3]&&Ue(function(){n.onMessage_(t[_e3])})}(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++}(););},t}(),Vr="pLPCommand",qr="pRTLPCB",Hr=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=we(t),this.stats_=Or.getCollection(e),this.urlFn=function(t){return e.connectionURL(Ve,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new jr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(wt()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Kr(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1],o=t[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"==r)n.id=i,n.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(i,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,i)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),!wt()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==("undefined"==typeof window?"undefined":_typeof(window))&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==("undefined"==typeof Windows?"undefined":_typeof(Windows))&&"object"==_typeof(Windows.UI))&&!wt()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Nt(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=ft(e),dt.encodeByteArray(n,!0)),i=Pe(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!wt()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Nt(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Kr=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Zn,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,wt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=de(),window[Vr+this.uniqueCallbackIdentifier]=e,window[qr+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(t){be("frame writing exception"),t.stack&&be(t.stack),be(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||be("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var e=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0))),wt()&&this.myID){var n={disconn:"t"};n.id=this.myID,n.pw=this.myPW;var r=this.urlFn(n);t.nodeRestRequest(r)}var i=this.onDisconnect;i&&(this.onDisconnect=null,i())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){
var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e,1);var r=function(){n.outstandingRequests.remove(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;wt()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){be("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}},Math.floor(1))},t}(),Gr=null;"undefined"!=typeof MozWebSocket?Gr=MozWebSocket:"undefined"!=typeof WebSocket&&(Gr=WebSocket);var Qr=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=we(this.connId),this.stats_=Or.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!wt()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,le.set("previous_websocket_failure",!0);try{if(wt()){var i={headers:{"User-Agent":"Firebase/5/"+te.SDK_VERSION+"/"+process.platform+"/Node"}},o=process.env,a=0==this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new Gr(this.connURL,[],i)}else this.mySock=new Gr(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var s=t.message||t.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Gr&&!t.forceDisallow_},t.previouslyFailed=function(){return le.isInMemoryStorage||!0===le.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){le.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=It(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(lt(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Nt(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=Pe(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),zr=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Hr,Qr]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n=Qr&&Qr.isAvailable(),r=n&&!Qr.previouslyFailed();if(e.webSocketOnly&&(n||Ce("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Qr];else{var i=this.transports_=[];De(t.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&i.push(e)})}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Yr=function(){function t(t,e,n,r,i,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=we("c:"+this.id+":"),this.transportManager_=new zr(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=We(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!=e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=ke("t",t),n=ke("d",t);if("c"==e)this.onSecondaryControl_(n);else{if("d"!=e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=ke("t",t),n=ke("d",t);"c"==e?this.onControl_(n):"d"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||--this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy())},t.prototype.onControl_=function(t){var e=ke("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?Ee("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ee("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Ce("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),We(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):We(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(le.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Xr=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),$r=1e3,Jr=3e5,Zr=function(t){function e(n,r,i,o,a,s){var u=t.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=r,u.onConnectStatus_=i,u.onServerInfoUpdate_=o,u.authTokenProvider_=a,u.authOverride_=s,u.id=e.nextPersistentConnectionId_++,u.log_=we("p:"+u.id+":"),u.interruptReasons_={},u.listens_={},u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=$r,u.maxReconnectDelay_=Jr,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,s&&!wt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),Wr.getInstance().on("visible",u.onVisible_,u),-1===n.host.indexOf("fblocal")&&Br.getInstance().on("online",u.onOnline_,u),u}return it(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Nt(i)),lt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},lt(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),lt(!this.listens_[o][i],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens_[o][i]=a,this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens_[i]&&n.listens_[i][o])===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==(void 0===t?"undefined":_typeof(t))&&At(t,"w")){var n=kt(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();Ce("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==_typeof(e=Rt(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t,e,n=this;if(this.connected_&&this.authToken_){var r=this.authToken_,i=(t=Rt(r),e=t.claims,t.signature&&e&&"object"==(void 0===e?"undefined":_typeof(e))&&e.hasOwnProperty("iat")?"auth":"gauth"),o={cred:r};null===this.authOverride_?o.noauth=!0:"object"==_typeof(this.authOverride_)&&(o.authvar=this.authOverride_),this.sendRequest(i,o,function(t){var e=t.s,i=t.d||"error";n.authToken_===r&&("ok"===e?n.invalidAuthTokenCount_=0:n.onAuthRevoked_(e,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),lt(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Nt(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Ee("Unrecognized action received from server: "+Nt(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;lt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$r,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=$r,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=$r),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,r())};this.realtime_={close:c,sendRequest:function(t){lt(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then(function(e){s?be("getToken() completed but was canceled"):(be("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,u=new Yr(i,o.repoInfo_,t,n,r,function(t){Ce(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},a))}).then(null,function(t){o.log_("Failed to get token: "+t),s||c()})}},e.prototype.interrupt=function(t){be("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){be("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Dt(this.interruptReasons_)&&(this.reconnectDelay_=$r,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return Oe(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Be(t).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][e],delete this.listens_[r][e],0===Lt(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},e.prototype.onAuthRevoked_=function(t,e){be("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||++this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t=this;this.tryAuth(),Ot(this.listens_,function(e,n){Ot(n,function(e,n){t.sendListen_(n)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";t["sdk."+e+"."+te.SDK_VERSION.replace(/\./g,"-")]=1,bt()?t["framework.cordova"]=1:"object"==("undefined"==typeof navigator?"undefined":_typeof(navigator))&&"ReactNative"===navigator.product&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Br.getInstance().currentlyOnline();return Dt(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Xr),ti=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=we("p:rest:"),i.listens_={},i}return it(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(lt(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var s=e.getListenId_(t,r),u={};this.listens_[s]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",c,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),kt(o.listens_,s)===u&&i(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a,s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?"+(a=[],Ot(e,function(t,e){Array.isArray(e)?e.forEach(function(e){a.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}):a.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}),a.length?"&"+a.join("&"):"");r.log_("Sending REST request for "+s);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+s+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=It(u.responseText)}catch(t){Ce("Failed to parse JSON response for "+s+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&Ce("Got unsuccessful REST response for "+s+" Status: "+u.status),n(u.status);n=null}},u.open("GET",s,!0),u.send()})},e}(Xr),ei=function(){function t(t,e,n){var r=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Fr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new tr,this.persistentConnection_=null;var i=new Ar(n);if(this.stats_=Or.getCollection(t),e||Me())this.server_=new ti(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(void 0!==o&&null!==o){if("object"!=(void 0===o?"undefined":_typeof(o)))throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Nt(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new Zr(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){r.server_.refreshAuthToken(t)}),this.statsReporter_=Or.getOrCreateReporter(t,function(){return new xr(r.stats_,r.server_)}),this.transactions_init_(),this.infoData_=new Rr,this.infoSyncTree_=new Nr({startListening:function(t,e,n,i){var o=[],a=r.infoData_.getNode(t.path);return a.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Nr({startListening:function(t,e,n,i){return r.server_.listen(t,n,e,function(e,n){var o=i(e,n);r.eventQueue_.raiseEventsForChangedPath(t.path,o)}),[]},stopListening:function(t,e){r.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Be(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Be(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=xt(e,function(t){return Vn(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=Vn(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=xt(e,function(t){return Vn(t)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=Vn(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;De(t,function(t,n){e.updateInfo_(n,t)})},t.prototype.updateInfo_=function(t,e){var n=new Be("/.info/"+t),r=Vn(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=Vn(e,n),s=nr(a,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(t,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(t.toString(),a.val(!0),function(e,n){var o="ok"===e;o||Ce("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)});var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(Ot(e,function(t,e){i=!1;var n=Vn(e);a[t]=nr(n,o)}),i)be("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||Ce("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,i)}),Ot(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),
this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=[];(function(t,e){var n=new tr;return t.forEachTree(new Be(""),function(t,r){n.remember(t,nr(r,e))}),n})(this.onDisconnect_,e).forEachTree(Be.Empty,function(e,r){n=n.concat(t.serverSyncTree_.applyServerOverwrite(e,r));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new tr,this.eventQueue_.raiseEventsForChangedPath(Be.Empty,n)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Vn(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Vn(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Dt(e))return be("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&Ot(e,function(e,n){var i=Vn(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Pr(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);Ot(e,function(t,e){for(var r=t.length;r<n+2;r++)t+=" ";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),be.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&Ue(function(){if("ok"==e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new li(this))},enumerable:!0,configurable:!0}),t}(),ni=function(){function t(e){this.indexedFilter_=new vr(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new vn(e,n))||(n=Wn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Wn.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Wn.EMPTY_NODE);var i=this;return e.forEachChild(Nn,function(t,e){i.matches(new vn(t,e))||(r=r.updateImmediateChild(t,Wn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ri=function(){function t(t){this.rangedFilter_=new ni(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new vn(e,n))||(n=Wn.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Wn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Wn.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Wn.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();)a=i.getNext(),!l&&c(s,a)<=0&&(l=!0),l&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Wn.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;lt(s.numChildren()==this.limit_,"");var u=new vn(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var l=s.getImmediateChild(e),p=r.getChildAfterChild(this.index_,c,this.reverse_);null!=p&&(p.name==e||s.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var f=null==p?1:o(p,u);if(h&&!n.isEmpty()&&f>=0)return null!=i&&i.trackChildChange(dr.childChangedChange(e,n,l)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(dr.childRemovedChange(e,l));var d=s.updateImmediateChild(e,Wn.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(dr.childAddedChange(p.name,p.node)),d.updateImmediateChild(p.name,p.node)):d}return n.isEmpty()?t:h&&o(c,u)>=0?(null!=i&&(i.trackChildChange(dr.childRemovedChange(c.name,c.node)),i.trackChildChange(dr.childAddedChange(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,Wn.EMPTY_NODE)):t},t}(),ii=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nn}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return lt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return lt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ie},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return lt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return lt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ne},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return lt(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Nn&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==Nn},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new vr(this.getIndex()):this.hasLimit()?new ri(this):new ni(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()?r:(this.index_===Nn?e=n.PRIORITY_INDEX:this.index_===Kn?e=n.VALUE_INDEX:this.index_===gn?e=n.KEY_INDEX:(lt(this.index_ instanceof Gn,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Nt(e),this.startSet_&&(r[n.START_AT]=Nt(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Nt(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Nt(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Nt(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_),r)},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),oi=function(t){function e(e,n){if(!(e instanceof ei))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,ii.DEFAULT,!1)||this}return it(e,t),e.prototype.getKey=function(){return Vt("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Vt("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Be||(null===this.path.getFront()?function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),cn("Reference.child",1,n,!1)}(0,0,t):cn("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Vt("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Vt("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Vt("Reference.set",1,2,arguments.length),hn("Reference.set",this.path),nn("Reference.set",1,t,this.path,!1),Ht("Reference.set",2,e,!0);var n=new mt;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Vt("Reference.update",1,2,arguments.length),hn("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Ce("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}on("Reference.update",1,t,this.path,!1),Ht("Reference.update",2,e,!0);var i=new mt;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Vt("Reference.setWithPriority",2,3,arguments.length),hn("Reference.setWithPriority",this.path),nn("Reference.setWithPriority",1,t,this.path,!1),an("Reference.setWithPriority",2,e,!1),Ht("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new mt;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Vt("Reference.remove",0,1,arguments.length),hn("Reference.remove",this.path),Ht("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Vt("Reference.transaction",1,3,arguments.length),hn("Reference.transaction",this.path),Ht("Reference.transaction",1,t,!1),Ht("Reference.transaction",2,e,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(qt("Reference.transaction",3,!0)+"must be a boolean.")}(0,0,n),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new mt;return"function"==typeof e&&r.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,n,i){t?r.reject(t):r.resolve(new fn(n,i)),"function"==typeof e&&e(t,n,i)},n),r.promise},e.prototype.setPriority=function(t,e){Vt("Reference.setPriority",1,2,arguments.length),hn("Reference.setPriority",this.path),an("Reference.setPriority",1,t,!1),Ht("Reference.setPriority",2,e,!0);var n=new mt;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Vt("Reference.push",0,2,arguments.length),hn("Reference.push",this.path),nn("Reference.push",1,t,this.path,!0),Ht("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=dn(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},e.prototype.onDisconnect=function(){return hn("Reference.onDisconnect",this.path),new pn(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(Jn);Jn.__referenceConstructor=oi,Tr.__referenceConstructor=oi;var ai,si=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),ui=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new si),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n,r=e instanceof Be?e:new Be(e),i=this;null!==(n=r.getFront());)i=new t(n,i,kt(i.node_.children,n)||new si),r=r.popFront();return i},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){lt(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;Ot(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new Be(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=At(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(ai||(ai={})),ei.MAX_TRANSACTION_RETRIES_=25,ei.prototype.transactions_init_=function(){this.transactionQueueTree_=new ui},ei.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new oi(this,t);o.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:de(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(t);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var c=new Qn(a.currentInputSnapshot,new oi(this,a.path),Nn);a.onComplete(null,!1,c)}}else{rn("transaction failed: Data returned ",u,a.path),a.status=ai.RUN;var h=this.transactionQueueTree_.subTree(t),l=h.getValue()||[];l.push(a),h.setValue(l);var p=void 0;"object"==(void 0===u?"undefined":_typeof(u))&&null!==u&&At(u,".priority")?(p=kt(u,".priority"),lt(en(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(this.serverSyncTree_.calcCompleteEventCache(t)||Wn.EMPTY_NODE).getPriority().val(),p=p;var f=this.generateServerValues(),d=Vn(u,p),v=nr(d,f);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,v,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,y),this.sendReadyTransactions_()}},ei.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Wn.EMPTY_NODE},ei.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);lt(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===ai.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},ei.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),o=i,a=i.hash(),s=0;s<e.length;s++){var u=e[s];lt(u.status===ai.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=ai.SENT,u.retryCount++;var c=Be.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),l=t;this.server_.put(l.toString(),h,function(r){n.log_("transaction put response",{path:l.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=ai.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new oi(n,e[a].path),c=new Qn(s,u,Nn);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),a=0;a<o.length;a++)Ue(o[a])}else{if("datastale"===r)for(a=0;a<e.length;a++)e[a].status===ai.SENT_NEEDS_ABORT?e[a].status=ai.NEEDS_ABORT:e[a].status=ai.RUN;else for(Ce("transaction at "+l.toString()+" failed: "+r),a=0;a<e.length;a++)e[a].status=ai.NEEDS_ABORT,e[a].abortReason=r;n.rerunTransactions_(t)}},a)},ei.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},ei.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===ai.RUN}).map(function(t){return t.currentWriteId}),a=0;a<t.length;a++){var s=t[a],u=Be.relativePath(e,s.path),c=!1,h=void 0;if(lt(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===ai.NEEDS_ABORT)c=!0,h=s.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===ai.RUN)if(s.retryCount>=ei.MAX_TRANSACTION_RETRIES_)c=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var l=this.getLatestState_(s.path,o);s.currentInputSnapshot=l;var p=t[a].update(l.val());if(void 0!==p){rn("transaction failed: Data returned ",p,s.path);var f=Vn(p);"object"==(void 0===p?"undefined":_typeof(p))&&null!=p&&At(p,".priority")||(f=f.updatePriority(l.getPriority()));var d=s.currentWriteId,v=this.generateServerValues(),y=nr(f,v);s.currentOutputSnapshotRaw=f,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(s.path,y,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[a].status=ai.COMPLETED,n=t[a].unwatcher,setTimeout(n,Math.floor(0)),t[a].onComplete))if("nodata"===h){var _=new oi(this,t[a].path),g=t[a].currentInputSnapshot,m=new Qn(g,_,Nn);r.push(t[a].onComplete.bind(null,null,!1,m))}else r.push(t[a].onComplete.bind(null,new Error(h),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),a=0;a<r.length;a++)Ue(r[a]);this.sendReadyTransactions_()}},ei.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},ei.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},ei.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},ei.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==ai.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},ei.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},ei.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===ai.SENT_NEEDS_ABORT||(e[o].status===ai.SENT?(lt(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=ai.SENT_NEEDS_ABORT,e[o].abortReason="set"):(lt(e[o].status===ai.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)Ue(n[o])}};var ci,hi=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return ci||(ci=new t),ci},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options.databaseURL;void 0===n&&Te("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var r=Ye(n),i=r.repoInfo;return ln("Invalid Firebase Database URL",1,r),r.path.isEmpty()||Te("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,t).database},t.prototype.deleteRepo=function(t){var e=kt(this.repos_,t.app.name);e&&kt(e,t.repoInfo_.toURLString())===t||Te("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=kt(this.repos_,e.name);n||(n={},this.repos_[e.name]=n);var r=kt(n,t.toURLString());return r&&Te("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new ei(t,this.useRestClient_,e),n[t.toURLString()]=r,r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),li=function(){function t(t){this.repo_=t,t instanceof ei||Te("Don't call new Database() directly - please use firebase.database()."),this.root_=new oi(t,Be.Empty),this.INTERNAL=new pi(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),Vt("database.ref",0,1,arguments.length),t instanceof oi?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Vt(e,1,1,arguments.length);var n=Ye(t);ln(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&Te(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&Te("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Vt("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Vt("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),pi=function(){function t(t){this.database=t}return t.prototype.delete=function(){return at(this,void 0,void 0,function(){return st(this,function(t){return this.database.checkDeleted_("delete"),hi.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},t}(),fi=Object.freeze({forceLongPolling:function(){Qr.forceDisallow(),Hr.forceAllow()},forceWebSockets:function(){Hr.forceDisallow()},isWebSocketsAvailable:function(){return Qr.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),di=Zr;Zr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Zr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var vi,yi=Yr,_i=qe,gi=Object.freeze({DataConnection:di,RealTimeConnection:yi,hijackHash:function(t){var e=Zr.prototype.put;return Zr.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Zr.prototype.put=e}},ConnectionTarget:_i,queryIdentifier:function(t){return t.queryIdentifier()},listens:function(t){return t.repo.persistentConnection_.listens_},forceRestClient:function(t){hi.getInstance().forceRestClient(t)}}),mi=li.ServerValue;vi=te.INTERNAL.registerService("database",function(t,e,n){return hi.getInstance().databaseFromApp(t,n)},{Reference:oi,Query:Jn,Database:li,enableLogging:me,INTERNAL:fi,ServerValue:mi,TEST_ACCESS:gi},null,!0),wt()&&(module.exports=vi);var bi,wi,Ei,Ti={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",TOKEN_UNSUBSCRIBE_FAILED:"token-unsubscribe-failed",TOKEN_UPDATE_FAILED:"token-update-failed",TOKEN_UPDATE_NO_TOKEN:"token-update-no-token",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key",INVALID_PUBLIC_VAPID_KEY:"invalid-public-vapid-key",
USE_PUBLIC_KEY_BEFORE_GET_TOKEN:"use-public-key-before-get-token",PUBLIC_KEY_DECRYPTION_FAILED:"public-vapid-key-decryption-failed"},Ci=((bi={})[Ti.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",bi[Ti.AVAILABLE_IN_SW]="This method is available in a service worker context.",bi[Ti.SHOULD_BE_INHERITED]="This method should be overriden by extended classes.",bi[Ti.BAD_SENDER_ID]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",bi[Ti.PERMISSION_DEFAULT]="The required permissions were not granted and dismissed instead.",bi[Ti.PERMISSION_BLOCKED]="The required permissions were not granted and blocked instead.",bi[Ti.UNSUPPORTED_BROWSER]="This browser doesn't support the API's required to use the firebase SDK.",bi[Ti.NOTIFICATIONS_BLOCKED]="Notifications have been blocked.",bi[Ti.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",bi[Ti.SW_REGISTRATION_EXPECTED]="A service worker registration was the expected input.",bi[Ti.GET_SUBSCRIPTION_FAILED]="There was an error when trying to get any existing Push Subscriptions.",bi[Ti.INVALID_SAVED_TOKEN]="Unable to access details of the saved token.",bi[Ti.SW_REG_REDUNDANT]="The service worker being used for push was made redundant.",bi[Ti.TOKEN_SUBSCRIBE_FAILED]="A problem occured while subscribing the user to FCM: {$message}",bi[Ti.TOKEN_SUBSCRIBE_NO_TOKEN]="FCM returned no token when subscribing the user to push.",bi[Ti.TOKEN_SUBSCRIBE_NO_PUSH_SET]="FCM returned an invalid response when getting an FCM token.",bi[Ti.TOKEN_UNSUBSCRIBE_FAILED]="A problem occured while unsubscribing the user from FCM: {$message}",bi[Ti.TOKEN_UPDATE_FAILED]="A problem occured while updating the user from FCM: {$message}",bi[Ti.TOKEN_UPDATE_NO_TOKEN]="FCM returned no token when updating the user to push.",bi[Ti.USE_SW_BEFORE_GET_TOKEN]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",bi[Ti.INVALID_DELETE_TOKEN]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",bi[Ti.DELETE_TOKEN_NOT_FOUND]="The deletion attempt for token could not be performed as the token was not found.",bi[Ti.DELETE_SCOPE_NOT_FOUND]="The deletion attempt for service worker scope could not be performed as the scope was not found.",bi[Ti.BG_HANDLER_FUNCTION_EXPECTED]="The input to setBackgroundMessageHandler() must be a function.",bi[Ti.NO_WINDOW_CLIENT_TO_MSG]="An attempt was made to message a non-existant window client.",bi[Ti.UNABLE_TO_RESUBSCRIBE]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",bi[Ti.NO_FCM_TOKEN_FOR_RESUBSCRIBE]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",bi[Ti.FAILED_TO_DELETE_TOKEN]="Unable to delete the currently saved token.",bi[Ti.NO_SW_IN_REG]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",bi[Ti.INCORRECT_GCM_SENDER_ID]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",bi[Ti.BAD_SCOPE]="The service worker scope must be a string with at least one character.",bi[Ti.BAD_VAPID_KEY]="The public VAPID key is not a Uint8Array with 65 bytes.",bi[Ti.BAD_SUBSCRIPTION]="The subscription must be a valid PushSubscription.",bi[Ti.BAD_TOKEN]="The FCM Token used for storage / lookup was not a valid token string.",bi[Ti.BAD_PUSH_SET]="The FCM push set used for storage / lookup was not not a valid push set string.",bi[Ti.FAILED_DELETE_VAPID_KEY]="The VAPID key could not be deleted.",bi[Ti.INVALID_PUBLIC_VAPID_KEY]="The public VAPID key must be a string.",bi[Ti.PUBLIC_KEY_DECRYPTION_FAILED]="The public VAPID key did not equal 65 bytes when decrypted.",bi),Si=new St("messaging","Messaging",Ci),Ii=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),Ni="https://fcm.googleapis.com";!function(t){t.TYPE_OF_MSG="firebase-messaging-msg-type",t.DATA="firebase-messaging-msg-data"}(wi||(wi={})),function(t){t.PUSH_MSG_RECEIVED="push-msg-received",t.NOTIFICATION_CLICKED="notification-clicked"}(Ei||(Ei={}));var ki=function(){function t(){}return t.prototype.getToken=function(t,e,n){return at(this,void 0,void 0,function(){var r,i,o,a,s,u,c,h;return st(this,function(l){switch(l.label){case 0:r=Ai(e.getKey("p256dh")),i=Ai(e.getKey("auth")),o="authorized_entity="+t+"&endpoint="+e.endpoint+"&encryption_key="+r+"&encryption_auth="+i,n!==Ii&&(a=Ai(n),o+="&application_pub_key="+a),(s=new Headers).append("Content-Type","application/x-www-form-urlencoded"),u={method:"POST",headers:s,body:o},l.label=1;case 1:return l.trys.push([1,4,,5]),[4,fetch(Ni+"/fcm/connect/subscribe",u)];case 2:return[4,l.sent().json()];case 3:return c=l.sent(),[3,5];case 4:throw l.sent(),Si.create(Ti.TOKEN_SUBSCRIBE_FAILED);case 5:if(c.error)throw h=c.error.message,Si.create(Ti.TOKEN_SUBSCRIBE_FAILED,{message:h});if(!c.token)throw Si.create(Ti.TOKEN_SUBSCRIBE_NO_TOKEN);if(!c.pushSet)throw Si.create(Ti.TOKEN_SUBSCRIBE_NO_PUSH_SET);return[2,{token:c.token,pushSet:c.pushSet}]}})})},t.prototype.updateToken=function(t,e,n,r,i){return at(this,void 0,void 0,function(){var o,a,s,u,c,h,l,p;return st(this,function(f){switch(f.label){case 0:o=Ai(r.getKey("p256dh")),a=Ai(r.getKey("auth")),s="push_set="+n+"&token="+e+"&authorized_entity="+t+"&endpoint="+r.endpoint+"&encryption_key="+o+"&encryption_auth="+a,i!==Ii&&(u=Ai(i),s+="&application_pub_key="+u),(c=new Headers).append("Content-Type","application/x-www-form-urlencoded"),h={method:"POST",headers:c,body:s},f.label=1;case 1:return f.trys.push([1,4,,5]),[4,fetch(Ni+"/fcm/connect/subscribe",h)];case 2:return[4,f.sent().json()];case 3:return l=f.sent(),[3,5];case 4:throw f.sent(),Si.create(Ti.TOKEN_UPDATE_FAILED);case 5:if(l.error)throw p=l.error.message,Si.create(Ti.TOKEN_UPDATE_FAILED,{message:p});if(!l.token)throw Si.create(Ti.TOKEN_UPDATE_NO_TOKEN);return[2,l.token]}})})},t.prototype.deleteToken=function(t,e,n){return at(this,void 0,void 0,function(){var r,i,o,a,s;return st(this,function(u){switch(u.label){case 0:r="authorized_entity="+t+"&token="+e+"&pushSet="+n,(i=new Headers).append("Content-Type","application/x-www-form-urlencoded"),o={method:"POST",headers:i,body:r},u.label=1;case 1:return u.trys.push([1,4,,5]),[4,fetch(Ni+"/fcm/connect/unsubscribe",o)];case 2:return[4,u.sent().json()];case 3:if((a=u.sent()).error)throw s=a.error.message,Si.create(Ti.TOKEN_UNSUBSCRIBE_FAILED,{message:s});return[3,5];case 4:throw u.sent(),Si.create(Ti.TOKEN_UNSUBSCRIBE_FAILED);case 5:return[2]}})})},t}(),Pi="undefined",Di="fcm_token_object_Store",xi=function(){function t(){this.dbPromise=null}return t.prototype.get=function(t){return this.createTransaction(function(e){return e.get(t)})},t.prototype.getIndex=function(t,e){return this.createTransaction(function(n){return n.index(t).get(e)})},t.prototype.put=function(t){return this.createTransaction(function(e){return e.put(t)},"readwrite")},t.prototype.delete=function(t){return this.createTransaction(function(e){return e.delete(t)},"readwrite")},t.prototype.closeDatabase=function(){return at(this,void 0,void 0,function(){return st(this,function(t){switch(t.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:t.sent().close(),this.dbPromise=null,t.label=2;case 2:return[2]}})})},t.prototype.createTransaction=function(t,e){return at(this,void 0,void 0,function(){var n,r,i,o;return st(this,function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),r=n.transaction(this.objectStoreName,e),i=r.objectStore(this.objectStoreName),[4,function(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}(t(i))];case 2:return o=a.sent(),[2,new Promise(function(t,e){r.oncomplete=function(){t(o)},r.onerror=function(){e(r.error)}})]}})})},t.prototype.getDb=function(){var t=this;return this.dbPromise||(this.dbPromise=new Promise(function(e,n){var r=indexedDB.open(t.dbName,t.dbVersion);r.onsuccess=function(){e(r.result)},r.onerror=function(){t.dbPromise=null,n(r.error)},r.onupgradeneeded=function(e){return t.onDbUpgrade(r,e)}})),this.dbPromise},t}(),Fi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_token_details_db",e.dbVersion=3,e.objectStoreName="fcm_token_object_Store",e}return it(e,t),e.prototype.onDbUpgrade=function(t,e){var n=t.result;switch(e.oldVersion){case 0:(r=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),r.createIndex("fcmToken","fcmToken",{unique:!0});case 1:Li();case 2:var r,i=(r=t.transaction.objectStore(this.objectStoreName)).openCursor();i.onsuccess=function(){var t=i.result;if(t){var e=t.value,n=ot({},e);e.createTime||(n.createTime=Date.now()),"string"==typeof e.vapidKey&&(n.vapidKey=Oi(e.vapidKey)),"string"==typeof e.auth&&(n.auth=Oi(e.auth).buffer),"string"==typeof e.auth&&(n.p256dh=Oi(e.p256dh).buffer),t.update(n),t.continue()}}}},e.prototype.getTokenDetailsFromToken=function(t){return at(this,void 0,void 0,function(){return st(this,function(e){if(!t)throw Si.create(Ti.BAD_TOKEN);return Ui({fcmToken:t}),[2,this.getIndex("fcmToken",t)]})})},e.prototype.getTokenDetailsFromSWScope=function(t){return at(this,void 0,void 0,function(){return st(this,function(e){if(!t)throw Si.create(Ti.BAD_SCOPE);return Ui({swScope:t}),[2,this.get(t)]})})},e.prototype.saveTokenDetails=function(t){return at(this,void 0,void 0,function(){return st(this,function(e){if(!t.swScope)throw Si.create(Ti.BAD_SCOPE);if(!t.vapidKey)throw Si.create(Ti.BAD_VAPID_KEY);if(!t.endpoint||!t.auth||!t.p256dh)throw Si.create(Ti.BAD_SUBSCRIPTION);if(!t.fcmSenderId)throw Si.create(Ti.BAD_SENDER_ID);if(!t.fcmToken)throw Si.create(Ti.BAD_TOKEN);if(!t.fcmPushSet)throw Si.create(Ti.BAD_PUSH_SET);return Ui(t),[2,this.put(t)]})})},e.prototype.deleteToken=function(t){return at(this,void 0,void 0,function(){var e;return st(this,function(n){switch(n.label){case 0:return"string"!=typeof t||0===t.length?[2,Promise.reject(Si.create(Ti.INVALID_DELETE_TOKEN))]:[4,this.getTokenDetailsFromToken(t)];case 1:if(!(e=n.sent()))throw Si.create(Ti.DELETE_TOKEN_NOT_FOUND);return[4,this.delete(e.swScope)];case 2:return n.sent(),[2,e]}})})},e}(xi),Mi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_vapid_details_db",e.dbVersion=1,e.objectStoreName="fcm_vapid_object_Store",e}return it(e,t),e.prototype.onDbUpgrade=function(t){t.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},e.prototype.getVapidFromSWScope=function(t){return at(this,void 0,void 0,function(){var e;return st(this,function(n){switch(n.label){case 0:if("string"!=typeof t||0===t.length)throw Si.create(Ti.BAD_SCOPE);return[4,this.get(t)];case 1:return[2,(e=n.sent())?e.vapidKey:void 0]}})})},e.prototype.saveVapidDetails=function(t,e){return at(this,void 0,void 0,function(){var n;return st(this,function(r){if("string"!=typeof t||0===t.length)throw Si.create(Ti.BAD_SCOPE);if(null===e||65!==e.length)throw Si.create(Ti.BAD_VAPID_KEY);return n={swScope:t,vapidKey:e},[2,this.put(n)]})})},e.prototype.deleteVapidDetails=function(t){return at(this,void 0,void 0,function(){var e;return st(this,function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(t)];case 1:if(!(e=n.sent()))throw Si.create(Ti.DELETE_SCOPE_NOT_FOUND);return[4,this.delete(t)];case 2:return n.sent(),[2,e]}})})},e}(xi),Wi="messagingSenderId",Bi=function(){function t(t){var e=this;if(!t.options[Wi]||"string"!=typeof t.options[Wi])throw Si.create(Ti.BAD_SENDER_ID);this.messagingSenderId=t.options[Wi],this.tokenDetailsModel=new Fi,this.vapidDetailsModel=new Mi,this.iidModel=new ki,this.app=t,this.INTERNAL={delete:function(){return e.delete()}}}return t.prototype.getToken=function(){return at(this,void 0,void 0,function(){var t,e,n,r,i;return st(this,function(o){switch(o.label){case 0:return"granted"!==(t=this.getNotificationPermission_())?"denied"===t?[2,Promise.reject(Si.create(Ti.NOTIFICATIONS_BLOCKED))]:[2,Promise.resolve(null)]:[4,this.getSWRegistration_()];case 1:return e=o.sent(),[4,this.getPublicVapidKey_()];case 2:return n=o.sent(),[4,this.getPushSubscription(e,n)];case 3:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(e.scope)];case 4:return(i=o.sent())?[2,this.manageExistingToken(e,r,n,i)]:[2,this.getNewToken(e,r,n)]}})})},t.prototype.manageExistingToken=function(t,e,n,r){return at(this,void 0,void 0,function(){return st(this,function(i){switch(i.label){case 0:return function(t,e,n){if(!Ri(e.buffer,n.vapidKey.buffer))return!1;var r=t.endpoint===n.endpoint,i=Ri(t.getKey("auth"),n.auth),o=Ri(t.getKey("p256dh"),n.p256dh);return r&&i&&o}(e,n,r)?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(t,e,n,r)]:[4,this.deleteTokenFromDB(r.fcmToken)];case 1:return i.sent(),[2,this.getNewToken(t,e,n)]}})})},t.prototype.updateToken=function(t,e,n,r){return at(this,void 0,void 0,function(){var i,o,a;return st(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,r.fcmToken,r.fcmPushSet,e,n)];case 1:return i=s.sent(),o={swScope:t.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:i,fcmPushSet:r.fcmPushSet,createTime:Date.now(),endpoint:e.endpoint,auth:e.getKey("auth"),p256dh:e.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(t.scope,n)];case 3:return s.sent(),[2,i];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}})})},t.prototype.getNewToken=function(t,e,n){return at(this,void 0,void 0,function(){var r,i;return st(this,function(o){switch(o.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,e,n)];case 1:return r=o.sent(),i={swScope:t.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:r.token,fcmPushSet:r.pushSet,createTime:Date.now(),endpoint:e.endpoint,auth:e.getKey("auth"),p256dh:e.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(t.scope,n)];case 3:return o.sent(),[2,r.token]}})})},t.prototype.deleteToken=function(t){return at(this,void 0,void 0,function(){var e,n;return st(this,function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(t)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return(e=r.sent())?[4,e.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}})})},t.prototype.deleteTokenFromDB=function(t){return at(this,void 0,void 0,function(){var e;return st(this,function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(t)];case 1:return e=n.sent(),[4,this.iidModel.deleteToken(e.fcmSenderId,e.fcmToken,e.fcmPushSet)];case 2:return n.sent(),[2]}})})},t.prototype.getPushSubscription=function(t,e){return t.pushManager.getSubscription().then(function(n){return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e})})},t.prototype.requestPermission=function(){throw Si.create(Ti.AVAILABLE_IN_WINDOW)},t.prototype.useServiceWorker=function(t){throw Si.create(Ti.AVAILABLE_IN_WINDOW)},t.prototype.usePublicVapidKey=function(t){throw Si.create(Ti.AVAILABLE_IN_WINDOW)},t.prototype.onMessage=function(t,e,n){throw Si.create(Ti.AVAILABLE_IN_WINDOW)},t.prototype.onTokenRefresh=function(t,e,n){throw Si.create(Ti.AVAILABLE_IN_WINDOW)},t.prototype.setBackgroundMessageHandler=function(t){throw Si.create(Ti.AVAILABLE_IN_SW)},t.prototype.delete=function(){return at(this,void 0,void 0,function(){return st(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return t.sent(),[2]}})})},t.prototype.getNotificationPermission_=function(){return Notification.permission},t.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},t.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},t.prototype.getIIDModel=function(){return this.iidModel},t}(),ji=function(t){function e(e){var n=t.call(this,e)||this;return n.bgMessageHandler=null,self.addEventListener("push",function(t){n.onPush(t)}),self.addEventListener("pushsubscriptionchange",function(t){n.onSubChange(t)}),self.addEventListener("notificationclick",function(t){n.onNotificationClick(t)}),n}return it(e,t),e.prototype.onPush=function(t){t.waitUntil(this.onPush_(t))},e.prototype.onSubChange=function(t){t.waitUntil(this.onSubChange_(t))},e.prototype.onNotificationClick=function(t){t.waitUntil(this.onNotificationClick_(t))},e.prototype.onPush_=function(t){return at(this,void 0,void 0,function(){var e,n,r;return st(this,function(i){switch(i.label){case 0:if(!t.data)return[2];try{e=t.data.json()}catch(t){return[2]}return[4,this.hasVisibleClients_()];case 1:return i.sent()?e.notification||this.bgMessageHandler?[2,this.sendMessageToWindowClients_(e)]:[2]:(n=this.getNotificationData_(e))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return[2,i.sent().showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:return i.sent(),[2];case 5:return[2]}})})},e.prototype.onSubChange_=function(t){return at(this,void 0,void 0,function(){var t,e,n,r;return st(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return t=i.sent(),[3,3];case 2:throw e=i.sent(),Si.create(Ti.UNABLE_TO_RESUBSCRIBE,{message:e});case 3:return i.trys.push([3,5,,8]),[4,t.pushManager.getSubscription()];case 4:return i.sent(),[3,8];case 5:return n=i.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(t.scope)];case 6:if(!(r=i.sent()))throw n;return[4,this.deleteToken(r.fcmToken)];case 7:throw i.sent(),n;case 8:return[2]}})})},e.prototype.onNotificationClick_=function(t){return at(this,void 0,void 0,function(){var e,n,r,i;return st(this,function(o){switch(o.label){case 0:return t.notification&&t.notification.data&&t.notification.data.FCM_MSG?(t.stopImmediatePropagation(),t.notification.close(),(e=t.notification.data.FCM_MSG).notification&&(n=e.notification.click_action)?[4,this.getWindowClient_(n)]:[2]):[2];case 1:return(r=o.sent())?[3,3]:[4,self.clients.openWindow(n)];case 2:return r=o.sent(),[3,5];case 3:return[4,r.focus()];case 4:r=o.sent(),o.label=5;case 5:return r?(delete e.notification,i=qi(Ei.NOTIFICATION_CLICKED,e),[2,this.attemptToMessageClient_(r,i)]):[2]}})})},e.prototype.getNotificationData_=function(t){if(t&&"object"==_typeof(t.notification)){var e,n=ot({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}},e.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw Si.create(Ti.BG_HANDLER_FUNCTION_EXPECTED);this.bgMessageHandler=t},e.prototype.getWindowClient_=function(t){return at(this,void 0,void 0,function(){var e,n,r,i;return st(this,function(o){switch(o.label){case 0:return e=new URL(t,self.location.href).href,[4,Vi()];case 1:for(n=o.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===e){r=n[i];break}return[2,r]}})})},e.prototype.attemptToMessageClient_=function(t,e){return at(this,void 0,void 0,function(){return st(this,function(n){if(!t)throw Si.create(Ti.NO_WINDOW_CLIENT_TO_MSG);return t.postMessage(e),[2]})})},e.prototype.hasVisibleClients_=function(){return at(this,void 0,void 0,function(){return st(this,function(t){switch(t.label){case 0:return[4,Vi()];case 1:return[2,t.sent().some(function(t){return"visible"===t.visibilityState})]}})})},e.prototype.sendMessageToWindowClients_=function(t){return at(this,void 0,void 0,function(){var e,n,r=this;return st(this,function(i){switch(i.label){case 0:return[4,Vi()];case 1:return e=i.sent(),n=qi(Ei.PUSH_MSG_RECEIVED,t),[4,Promise.all(e.map(function(t){return r.attemptToMessageClient_(t,n)}))];case 2:return i.sent(),[2]}})})},e.prototype.getSWRegistration_=function(){return at(this,void 0,void 0,function(){return st(this,function(t){return[2,self.registration]})})},e.prototype.getPublicVapidKey_=function(){return at(this,void 0,void 0,function(){var t,e;return st(this,function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(t=n.sent()))throw Si.create(Ti.SW_REGISTRATION_EXPECTED);return[4,this.getVapidDetailsModel().getVapidFromSWScope(t.scope)];case 2:return null==(e=n.sent())?[2,Ii]:[2,e]}})})},e}(Bi),Hi=function(t){function e(e){var n=t.call(this,e)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.manifestCheckPromise=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=Wt(function(t){n.messageObserver=t}),n.onTokenRefreshInternal=Wt(function(t){n.tokenRefreshObserver=t}),n.setupSWMessageListener_(),n}return it(e,t),e.prototype.getToken=function(){var e=this;return this.isSupported_()?this.manifestCheck_().then(function(){return t.prototype.getToken.call(e)}):Promise.reject(Si.create(Ti.UNSUPPORTED_BROWSER))},e.prototype.manifestCheck_=function(){if(this.manifestCheckPromise)return this.manifestCheckPromise;var t=document.querySelector('link[rel="manifest"]');return this.manifestCheckPromise=t?fetch(t.href).then(function(t){return t.json()}).catch(function(){}).then(function(t){if(t&&t.gcm_sender_id&&"103953800507"!==t.gcm_sender_id)throw Si.create(Ti.INCORRECT_GCM_SENDER_ID)}):Promise.resolve(),this.manifestCheckPromise},e.prototype.requestPermission=function(){return at(this,void 0,void 0,function(){return st(this,function(t){return"granted"===Notification.permission?[2]:[2,new Promise(function(t,e){var n=function(_n2){return"granted"===_n2?t():e("denied"===_n2?Si.create(Ti.PERMISSION_BLOCKED):Si.create(Ti.PERMISSION_DEFAULT))},r=Notification.requestPermission(n);r&&r.then(n)})]})})},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Si.create(Ti.SW_REGISTRATION_EXPECTED);if(null!=this.registrationToUse)throw Si.create(Ti.USE_SW_BEFORE_GET_TOKEN);this.registrationToUse=t},e.prototype.usePublicVapidKey=function(t){if("string"!=typeof t)throw Si.create(Ti.INVALID_PUBLIC_VAPID_KEY);if(null!=this.publicVapidKeyToUse)throw Si.create(Ti.USE_PUBLIC_KEY_BEFORE_GET_TOKEN);var e=Oi(t);if(65!==e.length)throw Si.create(Ti.PUBLIC_KEY_DECRYPTION_FAILED);this.publicVapidKeyToUse=e},e.prototype.onMessage=function(t,e,n){return"function"==typeof t?this.onMessageInternal(t,e,n):this.onMessageInternal(t)},e.prototype.onTokenRefresh=function(t,e,n){return"function"==typeof t?this.onTokenRefreshInternal(t,e,n):this.onTokenRefreshInternal(t)},e.prototype.waitForRegistrationToActivate_=function(t){var e=t.installing||t.waiting||t.active;return new Promise(function(n,r){if(e)if("activated"!==e.state)if("redundant"!==e.state){var i=function i(){if("activated"===e.state)n(t);else{if("redundant"!==e.state)return;r(Si.create(Ti.SW_REG_REDUNDANT))}e.removeEventListener("statechange",i)};e.addEventListener("statechange",i)}else r(Si.create(Ti.SW_REG_REDUNDANT));else n(t);else r(Si.create(Ti.NO_SW_IN_REG))})},e.prototype.getSWRegistration_=function(){var t=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(t){throw Si.create(Ti.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:t.message})}).then(function(e){return t.waitForRegistrationToActivate_(e).then(function(){return t.registrationToUse=e,e.update(),e})}))},e.prototype.getPublicVapidKey_=function(){return this.publicVapidKeyToUse?Promise.resolve(this.publicVapidKeyToUse):Promise.resolve(Ii)},e.prototype.setupSWMessageListener_=function(){var t=this;"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(e){if(e.data&&e.data[wi.TYPE_OF_MSG]){var n=e.data;switch(n[wi.TYPE_OF_MSG]){case Ei.PUSH_MSG_RECEIVED:case Ei.NOTIFICATION_CLICKED:var r=n[wi.DATA];t.messageObserver&&t.messageObserver.next(r)}}},!1)},e.prototype.isSupported_=function(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")},e}(Bi);!function(t){var e={Messaging:Hi};t.INTERNAL.registerService("messaging",function(t){return self&&"ServiceWorkerGlobalScope"in self?new ji(t):new Hi(t)},e)}(te);var yo,Ki="https://firebasestorage.googleapis.com",Gi="https://firebasestorage.googleapis.com",Qi="/v0",zi="/v0",Yi=12e4,Xi=6e4,$i=-9007199254740991,Ji=function(){function t(t,e){this.code_=to(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return to(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),Zi={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"},uo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ho=function(){return function(t,e){this.data=t,this.contentType=e||null}}(),vo=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw ao(uo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i}}(),_o={STATE_CHANGED:"state_changed"},go={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},mo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(yo||(yo={}));var Lo=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=yo.NO_ERROR,this.sendPromise_=Co(function(e,n){t.xhr_.addEventListener("abort",function(n){t.errorCode_=yo.ABORT,e(t)}),t.xhr_.addEventListener("error",function(n){t.errorCode_=yo.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(n){e(t)})})}return t.prototype.send=function(t,e,n,r){var i=this;if(this.sent_)throw so("cannot .send() more than once");return this.sent_=!0,this.xhr_.open(e,t,!0),Io(r)&&Eo(r,function(t,e){i.xhr_.setRequestHeader(t,e.toString())}),Io(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw so("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw so("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw so("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){Io(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){Io(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),xo=function(){function t(){}return t.prototype.createXhrIo=function(){return new Lo},t}(),Uo=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n,r;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw r=e,new Ji(Zi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")},t.makeFromUrl=function(e){for(var n=null,r=[{regex:new RegExp("^gs://([A-Za-z0-9.\\-]+)(/(.*))?$","i"),indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],i=0;i<r.length;i++){var o=r[i],a=o.regex.exec(e);if(a){var s=a[o.indices.bucket],u=a[o.indices.path];u||(u=""),n=new t(s,u),o.postModify(n);break}}if(null==n)throw function(t){return new Ji(Zi.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return n},t}(),qo=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Vo}}(),Ho=null,Xo=function(){return function(t,e){var n=this;this.validator=function(e){n.optional&&!No(e)||t(e)},this.optional=!!e}}(),ra=function(){function t(t,e){var n=0,r="";Po(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Po(this.data_)){var r=this.data_,i=(a=e,s=n,(o=r).webkitSlice?o.webkitSlice(a,s):o.mozSlice?o.mozSlice(a,s):o.slice?o.slice(a,s):null);return null===i?null:new t(i)}var o,a,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Do()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=na();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Do())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}.apply(null,r))}var i=e.map(function(t){return Oo(t)?lo(uo.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var a=new Uint8Array(o),s=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]
}),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}(),oa=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}(),pa=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}(),va=function(){return function(t,e,n){if(Ro(t)||Io(e)||Io(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}}(),ya=function(){function t(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}return Object.defineProperty(t.prototype,"downloadURL",{get:function(){if(null!==this.metadata){var t=this.metadata.downloadURLs;return null!=t&&null!=t[0]?t[0]:null}return null},enumerable:!0,configurable:!0}),t}(),ga=function(){function t(t,e,n,r,i,o){void 0===o&&(o=null);var a=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=go.RUNNING,this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals(Zi.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_(go.ERROR))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals(Zi.CANCELED)?a.completeTransitions_():(a.error_=t,a.transition_(go.ERROR))},this.promise_=Co(function(t,e){a.resolve_=t,a.reject_=e,a.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n,r){t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===go.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then(function(n){switch(e.state_){case go.RUNNING:t(n);break;case go.CANCELING:e.transition_(go.CANCELED);break;case go.PAUSING:e.transition_(go.PAUSED)}})},t.prototype.createResumable_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=la(e,r,i),s={name:a.fullPath},u=Bo(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=Qo(a,n),l=t.maxUploadRetryTime(),p=new oa(u,"POST",function(t,e){var n;fa(t);try{n=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){aa(!1)}return aa(Oo(n)),n},l);return p.urlParams=s,p.headers=c,p.body=h,p.errorHandler=ua(e),p}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()},t.errorHandler_)})},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_(function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime(),o=new oa(n,"POST",function(t,e){var n,i=fa(t,["active","final"]);try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){aa(!1)}var o=parseInt(n,10);return aa(!isNaN(o)),new pa(o,r.size(),"final"===i)},i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=ua(e),o}(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then(function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()},t.errorHandler_)})},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new pa(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(i){var o;try{o=da(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(e){return t.error_=e,void t.transition_(go.ERROR)}var a=t.authWrapper_.makeRequest(o,i);t.request_=a,a.getPromise().then(function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(go.SUCCESS)):t.completeTransitions_()},t.errorHandler_)})},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_(function(e){var n=ha(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.transition_(go.SUCCESS)},t.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=la(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Qo(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",l=ra.getBlob(c,r,h);if(null===l)throw ro();var p={name:u.fullPath},f=Bo(o),d=t.maxUploadRetryTime(),v=new oa(f,"POST",sa(t,n),d);return v.urlParams=p,v.headers=a,v.body=l.uploadData(),v.errorHandler=ua(e),v}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(go.SUCCESS)},t.errorHandler_)})},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case go.CANCELING:case go.PAUSING:this.state_=t,null!==this.request_&&this.request_.cancel();break;case go.RUNNING:var e=this.state_===go.PAUSED;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case go.PAUSED:this.state_=t,this.notifyObservers_();break;case go.CANCELED:this.error_=no(),this.state_=t,this.notifyObservers_();break;case go.ERROR:case go.SUCCESS:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case go.PAUSING:this.transition_(go.PAUSED);break;case go.CANCELING:this.transition_(go.CANCELED);break;case go.RUNNING:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=bo(this.state_);return new ya(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){function s(t){try{return void o(t)}catch(t){}try{if(a(t),!(No(t.next)||No(t.error)||No(t.complete)))throw"";return}catch(t){throw i}}function c(t){return function(e,n,i){null!==t&&Yo("on",t,arguments);var o=new va(e,n,r);return u.addObserver_(o),function(){u.removeObserver_(o)}}}void 0===e&&(e=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0);var i="Expected a function or an Object with one of `next`, `error`, `complete` properties.",o=ea(!0).validator,a=ta(null,!0).validator;Yo("on",[$o(function(e){if(t!==_o.STATE_CHANGED)throw"Expected one of the event types: ["+_o.STATE_CHANGED+"]."}),ta(s,!0),ea(!0),ea(!0)],arguments);var u=this,h=[ta(function(t){if(null===t)throw i;s(t)}),ea(!0),ea(!0)];return No(e)||No(n)||No(r)?c(null)(e,n,r):c(h)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e,n,r;e=this.observers_,n=t,-1!==(r=e.indexOf(n))&&e.splice(r,1)},t.prototype.notifyObservers_=function(){var t,e=this;this.finishPromise_(),(t=this.observers_,Array.prototype.slice.call(t)).forEach(function(t){e.notifyObserver_(t)})},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(bo(this.state_)){case mo.SUCCESS:_a(this.resolve_.bind(null,this.snapshot))();break;case mo.CANCELED:case mo.ERROR:_a(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(bo(this.state_)){case mo.RUNNING:case mo.PAUSED:null!==t.next&&_a(t.next.bind(t,this.snapshot))();break;case mo.SUCCESS:null!==t.complete&&_a(t.complete.bind(t))();break;case mo.CANCELED:case mo.ERROR:null!==t.error&&_a(t.error.bind(t,this.error_))();break;default:null!==t.error&&_a(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){Yo("resume",[],arguments);var t=this.state_===go.PAUSED||this.state_===go.PAUSING;return t&&this.transition_(go.RUNNING),t},t.prototype.pause=function(){Yo("pause",[],arguments);var t=this.state_===go.RUNNING;return t&&this.transition_(go.PAUSING),t},t.prototype.cancel=function(){Yo("cancel",[],arguments);var t=this.state_===go.RUNNING||this.state_===go.PAUSING;return t&&this.transition_(go.CANCELING),t},t}(),ma=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof Uo?e:Uo.makeFromUrl(e)}return t.prototype.toString=function(){return Yo("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return Ko()},t.prototype.child=function(t){Yo("child",[$o()],arguments);var e=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(this.location.path,t),n=new Uo(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0==t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new Uo(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new Uo(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Mo(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),Yo("put",[new Xo(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||Do()&&t instanceof Blob))throw"Expected Blob or File."}),Jo(!0)],arguments),this.throwIfRoot_("put"),new ga(this,this.authWrapper,this.location,this.mappings(),new ra(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=uo.RAW),Yo("putString",[$o(),$o(co,!0),Jo(!0)],arguments),this.throwIfRoot_("putString");var r=lo(e,t),i=To(n);return!Io(i.contentType)&&Io(r.contentType)&&(i.contentType=r.contentType),new ga(this,this.authWrapper,this.location,this.mappings(),new ra(r.data,!0),i)},t.prototype.delete=function(){Yo("delete",[],arguments),this.throwIfRoot_("delete");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=function(t,e){var n=Wo(e.fullServerUrl()),r=t.maxOperationRetryTime(),i=new oa(n,"DELETE",function(t,e){},r);return i.successCodes=[200,204],i.errorHandler=ca(e),i}(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.getMetadata=function(){Yo("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=ha(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.updateMetadata=function(t){Yo("updateMetadata",[Jo()],arguments),this.throwIfRoot_("updateMetadata");var e=this;return this.authWrapper.getAuthToken().then(function(n){var r=function(t,e,n,r){var i=Wo(e.fullServerUrl()),o=Qo(n,r),a=t.maxOperationRetryTime(),s=new oa(i,"PATCH",sa(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=ca(e),s}(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.getDownloadURL=function(){return Yo("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.getMetadata().then(function(t){var e=t.downloadURLs[0];if(Io(e))return e;throw new Ji(Zi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")})},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new Ji(Zi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),ba=function(){function t(t){this.promise_=function(t){return Promise.reject(t)}(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){void 0===t&&(t=!1)},t}(),wa=function(){function t(){this.map_={},this.id_=$i}return t.prototype.addRequest=function(t){function r(){delete n.map_[e]}var e=this.id_;this.id_++,this.map_[e]=t;var n=this;t.getPromise().then(r,r)},t.prototype.clear=function(){Eo(this.map_,function(t,e){e&&e.cancel(!0)}),this.map_={}},t}(),Ea=function(){function t(e,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var a=this.app_.options;Io(a)&&(this.bucket_=t.extractBucket_(a))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=Yi,this.maxUploadRetryTime_=Xi,this.requestMap_=new wa}return t.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:Uo.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){return null!==this.app_&&Io(this.app_.INTERNAL)&&Io(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(t){return null!==t?t.accessToken:null},function(t){return null}):So(null)},t.prototype.bucket=function(){if(this.deleted_)throw oo();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new ba(oo());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}(),Ta=function(){function t(t,e,n,r,i,o,a,s,u,c,h){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h;var l=this;this.promise_=Co(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}return t.prototype.start_=function(){function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());No(s)?i(s):i()}catch(t){o(t)}else null!==a?((r=eo()).setServerResponseProp(a.getResponseText()),o(t.errorCallback_?t.errorCallback_(a,r):r)):o(n.canceled?r=t.appDelete_?oo():no():r=new Ji(Zi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}var t=this;this.canceled_?e(0,new Ca(!1,null,!0)):this.backoffId_=function(t,e,n){function s(){return 2===a}function c(){u||(u=!0,e.apply(null,arguments))}function h(e){i=setTimeout(function(){i=null,t(l,s())},e)}function l(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];u||(t?c.apply(null,arguments):s()||o?c.apply(null,arguments):(r<64&&(r*=2),1===a?(a=2,e=0):e=1e3*(r+Math.random()),h(e)))}function f(t){p||(p=!0,u||(null!==i?(t||(a=2),clearTimeout(i),h(0)):t||(a=1)))}var r=1,i=null,o=!1,a=0,u=!1,p=!1;return h(0),setTimeout(function(){o=!0,f(!0)},n),f}(function(e,n){function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}if(n)e(!1,new Ca(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===yo.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=ia(t.successCodes_,o);e(!0,new Ca(a,n))}else{var s=n.getErrorCode()===yo.ABORT;e(!1,new Ca(!1,null,s))}})}},e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=ia([408,429],t),r=ia(this.additionalRetryCodes_,t);return e||n||r},t}(),Ca=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}(),Ia=function(){function t(t,e,n){if(this.bucket_=null,this.authWrapper_=new Ea(t,function(t,e){return new ma(t,e)},Sa,this,e),this.app_=t,null!=n)this.bucket_=Uo.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new Uo(r,""))}this.internals_=new Na(this)}return t.prototype.ref=function(t){if(Yo("ref",[$o(function(t){if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new ma(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},t.prototype.refFromURL=function(t){return Yo("refFromURL",[$o(function(t){if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{Uo.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new ma(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){Yo("setMaxUploadRetryTime",[Zo()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(t){Yo("setMaxOperationRetryTime",[Zo()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Na=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),So(void 0)},t}();return function(t){var e={TaskState:mo,TaskEvent:_o,StringFormat:uo,Storage:Ia,Reference:ma};t.INTERNAL.registerService("storage",Aa,e,void 0,!0)}(te),re});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.firebase=e()}(this,function(){"use strict";function e(){}function r(t){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],a(t,this)}function n(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,r._immediateFn(function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value)}catch(t){return void i(e.promise,t)}o(e.promise,n)}else(1===t._state?o:i)(e.promise,t._value)})):t._deferreds.push(e)}function o(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==(void 0===e?"undefined":_typeof(e))||"function"==typeof e)){var n=e.then;if(e instanceof r)return t._state=3,t._value=e,void s(t);if("function"==typeof n)return void a((o=n,c=e,function(){o.apply(c,arguments)}),t)}t._state=1,t._value=e,s(t)}catch(e){i(t,e)}var o,c}function i(t,e){t._state=2,t._value=e,s(t)}function s(t){2===t._state&&0===t._deferreds.length&&r._immediateFn(function(){t._handled||r._unhandledRejectionFn(t._value)});for(var e=0,o=t._deferreds.length;e<o;e++)n(t,t._deferreds[e]);t._deferreds=null}function a(t,e){var r=!1;try{t(function(t){r||(r=!0,o(e,t))},function(t){r||(r=!0,i(e,t))})}catch(t){if(r)return;r=!0,i(e,t)}}function u(t,e){return t(e={exports:{}},e.exports),e.exports}function ot(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&(t[r]=ot(t[r],e[r]));return t}function it(t,e,r){t[e]=r}function ft(t,e){var r=new ht(t,e);return r.subscribe.bind(r)}function pt(){}function bt(t,e){throw mt.create(t,e)}!function(t){function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function c(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(r[Symbol.iterator]=function(){return r}),r}function f(t){this.map={},t instanceof f?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function l(t){var e=new FileReader,r=p(e);return e.readAsArrayBuffer(t),r}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&n(t))this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!o(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var t,e,r,n=h(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=p(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}function v(t,e){var r,n,o=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),i.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function b(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function m(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=function(t){return t&&DataView.prototype.isPrototypeOf(t)},o=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};f.prototype.append=function(t,e){t=a(t),e=c(e);var r=this.map[t];this.map[t]=r?r+","+e:e},f.prototype.delete=function(t){delete this.map[a(t)]},f.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},f.prototype.set=function(t,e){this.map[a(t)]=c(e)},f.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},f.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),u(t)},f.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),u(t)},f.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),u(t)},e.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);var i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var s=[301,302,303,307,308];m.redirect=function(t,e){if(-1===s.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.Headers=f,t.Request=v,t.Response=m,t.fetch=function(t,r){return new Promise(function(n,o){var i=new v(t,r),s=new XMLHttpRequest;s.onload=function(){var t,e,r={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}}),e)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;n(new m(o,r))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&e.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0);var t=setTimeout;r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,r){var o=new this.constructor(e);return n(this,new function(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}(t,r,o)),o},r.prototype.finally=function(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})},r.all=function(t){return new r(function(e,r){function i(t,s){try{if(s&&("object"==(void 0===s?"undefined":_typeof(s))||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){i(t,e)},r)}n[t]=s,0==--o&&e(n)}catch(t){r(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);for(var o=n.length,s=0;s<n.length;s++)i(s,n[s])})},r.resolve=function(t){return t&&"object"==(void 0===t?"undefined":_typeof(t))&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(t){return new r(function(e,r){r(t)})},r.race=function(t){return new r(function(e,r){for(var n=0,o=t.length;n<o;n++)t[n].then(e,r)})},r._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(e){t(e,0)},r._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var c=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();c.Promise||(c.Promise=r);var f=u(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),h=u(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),p=(h.version,function(t){return"object"==(void 0===t?"undefined":_typeof(t))?null!==t:"function"==typeof t}),l=function(t){if(!p(t))throw TypeError(t+" is not an object!");return t},d=function(t){try{return!!t()}catch(t){return!0}},y=!d(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),v=f.document,b=p(v)&&p(v.createElement),m=!y&&!d(function(){return 7!=Object.defineProperty((t="div",b?v.createElement(t):{}),"a",{get:function(){return 7}}).a;var t}),_=Object.defineProperty,w={f:y?Object.defineProperty:function(t,e,r){if(l(t),e=function(t,e){if(!p(t))return t;var r,n
;if("function"==typeof(r=t.toString)&&!p(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!p(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}(e),l(r),m)try{return _(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},g=y?function(t,e,r){return w.f(t,e,function(t,e){return{enumerable:!1,configurable:!0,writable:!0,value:e}}(0,r))}:function(t,e,r){return t[e]=r,t},A={}.hasOwnProperty,E=function(t,e){return A.call(t,e)},O=0,j=Math.random(),P=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++O+j).toString(36))},T=u(function(t){var e=P("src"),r=Function.toString,n=(""+r).split("toString");h.inspectSource=function(t){return r.call(t)},(t.exports=function(t,r,o,i){var s="function"==typeof o;s&&(E(o,"name")||g(o,"name",r)),t[r]!==o&&(s&&(E(o,e)||g(o,e,t[r]?""+t[r]:n.join(String(r)))),t===f?t[r]=o:i?t[r]?t[r]=o:g(t,r,o):(delete t[r],g(t,r,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||r.call(this)})}),S=function(t,e,r){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}},x=function x(t,e,r){var n,o,i,s,a=t&x.F,c=t&x.G,u=t&x.S,p=t&x.P,l=t&x.B,d=c?f:u?f[e]||(f[e]={}):(f[e]||{}).prototype,y=c?h:h[e]||(h[e]={}),v=y.prototype||(y.prototype={});for(n in c&&(r=e),r)i=((o=!a&&d&&void 0!==d[n])?d:r)[n],s=l&&o?S(i,f):p&&"function"==typeof i?S(Function.call,i):i,d&&T(d,n,i,t&x.U),y[n]!=i&&g(y,n,s),p&&v[n]!=i&&(v[n]=i)};f.core=h,x.F=1,x.G=2,x.S=4,x.P=8,x.B=16,x.W=32,x.U=64,x.R=128;var k=x,F={}.toString,B=function(t){return F.call(t).slice(8,-1)},D=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==B(t)?t.split(""):Object(t)},I=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},N=Math.ceil,R=Math.floor,U=Math.min,C=function(t){return t>0?U(function(t){return isNaN(t=+t)?0:(t>0?R:N)(t)}(t),9007199254740991):0},L=Array.isArray||function(t){return"Array"==B(t)},z=f["__core-js_shared__"]||(f["__core-js_shared__"]={}),M=function(t){return z[t]||(z[t]={})},W=u(function(t){var e=M("wks"),r=f.Symbol,n="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=n&&r[t]||(n?r:P)("Symbol."+t))}).store=e}),$=W("species"),q=function(t,e){return new(function(t){var e;return L(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!L(e.prototype)||(e=void 0),p(e)&&null===(e=e[$])&&(e=void 0)),void 0===e?Array:e}(t))(e)},H=function(t,e){var r=1==t,n=2==t,o=3==t,i=4==t,s=6==t,a=5==t||s,c=e||q;return function(e,u,f){for(var h,p,l=Object(I(e)),d=D(l),y=S(u,f,3),v=C(d.length),b=0,m=r?c(e,v):n?c(e,0):void 0;v>b;b++)if((a||b in d)&&(p=y(h=d[b],b,l),t))if(r)m[b]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return b;case 2:m.push(h)}else if(i)return!1;return s?-1:o||i?i:m}},G=W("unscopables"),K=Array.prototype;void 0==K[G]&&g(K,G,{});var V=function(t){K[G][t]=!0},X=H(5),J=!0;"find"in[]&&Array(1).find(function(){J=!1}),k(k.P+k.F*J,"Array",{find:function(t){return X(this,t,arguments.length>1?arguments[1]:void 0)}}),V("find"),h.Array.find;var Q=H(6),Y=!0;"findIndex"in[]&&Array(1).findIndex(function(){Y=!1}),k(k.P+k.F*Y,"Array",{findIndex:function(t){return Q(this,t,arguments.length>1?arguments[1]:void 0)}}),V("findIndex"),h.Array.findIndex;var Z=W("match"),tt=function(t,e,r){if(p(n=e)&&(void 0!==(o=n[Z])?o:"RegExp"==B(n)))throw TypeError("String#"+r+" doesn't accept regex!");var n,o;return String(I(t))},et=W("match"),rt="".startsWith;k(k.P+k.F*function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[et]=!1,!"/./"[t](e)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(t){var e=tt(this,t,"startsWith"),r=C(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return rt?rt.call(e,n,r):e.slice(r,r+n.length)===n}}),h.String.startsWith;var nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},st="FirebaseError",at=Error.captureStackTrace,ct=function(){return function(t,e){if(this.code=t,this.message=e,at)at(this,ut.prototype.create);else{var r=Error.apply(this,arguments);this.name=st,Object.defineProperty(this,"stack",{get:function(){return r.stack}})}}}();ct.prototype=Object.create(Error.prototype),ct.prototype.constructor=ct,ct.prototype.name=st;var ut=function(){function t(t,e,r){this.service=t,this.serviceName=e,this.errors=r,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var r,n=this.errors[t],o=this.service+"/"+t;r=void 0===n?"Error":n.replace(this.pattern,function(t,r){var n=e[r];return void 0!==n?n.toString():"<"+r+"?>"}),r=this.serviceName+": "+r+" ("+o+").";var i=new ct(o,r);for(var s in e)e.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(i[s]=e[s]);return i},t}();!function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var r=1;r<e.blockSize;++r)e.pad_[r]=0;return e.reset(),e}(function(t,e){function r(){this.constructor=t}nt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)})(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var r=this.W_;if("string"==typeof t)for(var n=0;n<16;n++)r[n]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(n=0;n<16;n++)r[n]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(n=16;n<80;n++){var o=r[n-3]^r[n-8]^r[n-14]^r[n-16];r[n]=4294967295&(o<<1|o>>>31)}var i,s,a=this.chain_[0],c=this.chain_[1],u=this.chain_[2],f=this.chain_[3],h=this.chain_[4];for(n=0;n<80;n++)n<40?n<20?(i=f^c&(u^f),s=1518500249):(i=c^u^f,s=1859775393):n<60?(i=c&u|f&(c|u),s=2400959708):(i=c^u^f,s=3395469782),o=(a<<5|a>>>27)+i+h+s+r[n]&4294967295,h=f,f=u,u=4294967295&(c<<30|c>>>2),c=a,a=o;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var r=e-this.blockSize,n=0,o=this.buf_,i=this.inbuf_;n<e;){if(0==i)for(;n<=r;)this.compress_(t,n),n+=this.blockSize;if("string"==typeof t){for(;n<e;)if(o[i]=t.charCodeAt(n),++n,++i==this.blockSize){this.compress_(o),i=0;break}}else for(;n<e;)if(o[i]=t[n],++n,++i==this.blockSize){this.compress_(o),i=0;break}}this.inbuf_=i,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&e,e/=256;this.compress_(this.buf_);var n=0;for(r=0;r<5;r++)for(var o=24;o>=0;o-=8)t[n]=this.chain_[r]>>o&255,++n;return t}}(function(){return function(){this.blockSize=-1}}());var ht=function(){function t(t,e){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(r)}).catch(function(t){r.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,r){var n,o=this;if(void 0===t&&void 0===e&&void 0===r)throw new Error("Missing Observer.");void 0===(n=function(t,e){if("object"!=(void 0===t?"undefined":_typeof(t))||null===t)return!1;for(var r=0,n=e;r<n.length;r++){var o=n[r];if(o in t&&"function"==typeof t[o])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:r}).next&&(n.next=pt),void 0===n.error&&(n.error=pt),void 0===n.complete&&(n.complete=pt);var i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?n.error(o.finalError):n.complete()}catch(t){}}),this.observers.push(n),i},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var r=this;this.task.then(function(){if(void 0!==r.observers&&void 0!==r.observers[t])try{e(r.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}(),lt=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},dt="[DEFAULT]",yt=[],vt=function(){function t(t,e,r){this.firebase_=r,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=ot(void 0,t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){yt.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){yt=yt.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(r){Object.keys(t.services_[r]).forEach(function(n){e.push(t.services_[r][n])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=dt),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var r=e!==dt?e:void 0,n=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),r);this.services_[t][e]=n}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;ot(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(yt.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),yt=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&bt("app-deleted",{name:this.name_})},t}();vt.prototype.name&&vt.prototype.options||vt.prototype.delete||console.log("dc");var mt=new ut("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),_t=function t(){function i(t){return lt(e,t=t||dt)||bt("no-app",{name:t}),e[t]}function s(){return Object.keys(e).map(function(t){return e[t]})}function a(t,e){Object.keys(r).forEach(function(r){var o=c(t,r);null!==o&&n[o]&&n[o](e,t)})}function c(t,e){if("serverAuth"===e)return null;var r=e;return t.options,r}var e={},r={},n={},o={__esModule:!0,initializeApp:function(t,r){if(void 0===r&&(r={}),"object"!=(void 0===r?"undefined":_typeof(r))||null===r){r={name:r}}var i=r;void 0===i.name&&(i.name=dt);var s=i.name;"string"==typeof s&&s||bt("bad-app-name",{name:s+""}),lt(e,s)&&bt("duplicate-app",{name:s});var c=new vt(t,i,o);return e[s]=c,a(c,"create"),c},app:i,apps:null,Promise:Promise,SDK_VERSION:"4.13.1",INTERNAL:{registerService:function(t,e,a,c,u){r[t]&&bt("duplicate-service",{name:t}),r[t]=e,c&&(n[t]=c,s().forEach(function(t){c("create",t)}));var f=function(e){return void 0===e&&(e=i()),"function"!=typeof e[t]&&bt("invalid-app-argument",{name:t}),e[t]()};return void 0!==a&&ot(f,a),o[t]=f,vt.prototype[t]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._getService.bind(this,t).apply(this,u?e:[])},f},createFirebaseNamespace:t,extendNamespace:function(t){ot(o,t)},createSubscribe:ft,ErrorFactory:ut,removeApp:function(t){a(e[t],"delete"),delete e[t]},factories:r,useAsService:c,Promise:Promise,deepExtend:ot}};return it(o,"default",o),Object.defineProperty(o,"apps",{get:s}),it(i,"App",vt),o}(),wt=Object.freeze({default:_t,firebase:_t});return(wt&&_t||wt).default});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(t,e){"use strict";try{var r=function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=function(t,e){function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},c=function(t){return function t(e,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:var r=n;return new Date(r.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return n}for(var i in n)n.hasOwnProperty(i)&&(e[i]=t(e[i],n[i]));return e}(void 0,t)},m=function(t){return JSON.parse(t)},C=function(t){return JSON.stringify(t)},x=function(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "},F=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(x(t,e,r)+"must be a valid function.")},A=function(t,e,n,r){if((!r||n)&&("object"!=(void 0===n?"undefined":_typeof(n))||null===n))throw new Error(x(t,e,r)+"must be a valid context object.")},pe=function(t,e){return at(t.name,e.name)},de=function(t,e){return at(t,e)},ve=function ve(t,e){if(void 0===e&&(e=null),null===t)return fe.EMPTY_NODE;if("object"==(void 0===t?"undefined":_typeof(t))&&".priority"in t&&(e=t[".priority"]),s(null===e||"string"==typeof e||"number"==typeof e||"object"==(void 0===e?"undefined":_typeof(e))&&".sv"in e,"Invalid priority type found: "+(void 0===e?"undefined":_typeof(e))),"object"==(void 0===t?"undefined":_typeof(t))&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=(void 0===t?"undefined":_typeof(t))||".sv"in t)return new Zt(t,ve(e));if(t instanceof Array||!ye){var n=fe.EMPTY_NODE,r=t;return S(r,function(t,e){if(w(r,t)&&"."!==t.substring(0,1)){var i=ve(e);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}}),n.updatePriority(ve(e))}var i=[],o=!1,a=t;if(S(a,function(t,e){if("string"!=typeof t||"."!==t.substring(0,1)){var n=ve(a[t]);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),i.push(new Bt(t,n)))}}),0==i.length)return fe.EMPTY_NODE;var h=ue(i,pe,function(t){return t.name},de);if(o){var u=ue(i,ne.getCompare());return new fe(h,ve(e),new ce({".priority":u},{".priority":ne}))}return new fe(h,ve(e),ce.Default)},Gn=function(t){var e=t.INTERNAL.registerService("database",function(t,e,n){return Qn.getInstance().databaseFromApp(t,n)},{Reference:An,Query:Ie,Database:Un,enableLogging:J,INTERNAL:Hn,ServerValue:zn,TEST_ACCESS:Yn},null,!0);f()&&(module.exports=e)};e=e&&e.hasOwnProperty("default")?e.default:e;var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},s=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},h=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,h=i+2<t.length,u=h?t[i+2]:0,l=o>>2,c=(3&o)<<4|a>>4,p=(15&a)<<2|u>>6,d=63&u;h||(d=64,s||(p=64)),r.push(n[l],n[c],n[p],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,h=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==h)throw Error();var u=o<<2|s>>4;if(r.push(u),64!=a){var l=s<<4&240|a>>2;if(r.push(l),64!=h){var c=a<<6&192|h;r.push(c)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},l=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},p=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}(),d=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")},f=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},_="FirebaseError",y=Error.captureStackTrace,v=function(){return function(t,e){if(this.code=t,this.message=e,y)y(this,g.prototype.create);else{var n=Error.apply(this,arguments);this.name=_,Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}}();v.prototype=Object.create(Error.prototype),v.prototype.constructor=v,v.prototype.name=_;var L,g=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var o=new v(i,n);for(var s in e)e.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(o[s]=e[s]);return o},t}(),E=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=m(l(o[0])||""),n=m(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},w=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},b=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},S=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},T=function(t){return e={},S(t,function(t,n){e[t]=n}),e;var e},N=function(t){for(var e in t)return!1;return!0},I=function(t){var e=0;for(var n in t)e++;return e},R=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},P=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},D=function(t){for(var e in t)return e},O=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return r(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],h=this.chain_[1],u=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=l^h&(u^l),s=1518500249):(o=h^u^l,s=1859775393):r<60?(o=h&u|l&(h|u),s=2400959708):(o=h^u^l,s=3395469782),i=(a<<5|a>>>27)+o+c+s+n[r]&4294967295,c=l,l=u,u=4294967295&(h<<30|h>>>2),h=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+h&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}(function(){return function(){this.blockSize=-1}}()),k=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},M=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(L||(L={}));var bt,St,zt,Gt,Xt,te,ee,W=L.INFO,q=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case L.DEBUG:case L.VERBOSE:console.log.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case L.INFO:console.info.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case L.WARN:console.warn.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case L.ERROR:console.error.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},Q=function(){function t(t){this.name=t,this._logLevel=W,this._logHandler=q}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in L))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,L.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,L.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,L.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,L.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,L.ERROR].concat(t))},t}(),U=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),C(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:m(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),V=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return w(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),H=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new U(e)}}catch(t){}return new V},B=H("localStorage"),j=H("sessionStorage"),K=new Q("@firebase/database"),Y=(Zn=1,function(){return Zn++}),z=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;s(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new O;n.update(e);var r=n.digest();return u.encodeByteArray(r)},G=function G(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++)Array.isArray(t[r])||t[r]&&"object"==_typeof(t[r])&&"number"==typeof t[r].length?n+=G.apply(null,t[r]):"object"==_typeof(t[r])?n+=C(t[r]):n+=t[r],n+=" ";return n},X=null,$=!0,J=function(t,e){s(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(K.logLevel=L.VERBOSE,X=K.log.bind(K),e&&j.set("logging_enabled",!0)):"function"==typeof t?X=t:(X=null,j.remove("logging_enabled"))},Z=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===$&&($=!1,null===X&&!0===j.get("logging_enabled")&&J(!0)),X){var n=G.apply(null,t);X(n)}},tt=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Z.apply(void 0,[t].concat(e))}},et=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+G.apply(void 0,t);K.error(n)},nt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+G.apply(void 0,t);throw K.error(n),new Error(n)},rt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+G.apply(void 0,t);K.warn(n)},it=function(t){return"number"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},ot="[MIN_NAME]",st="[MAX_NAME]",at=function(t,e){if(t===e)return 0;if(t===ot||e===st)return-1;if(e===ot||t===st)return 1;var n=_t(t),r=_t(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},ht=function(t,e){return t===e?0:t<e?-1:1},ut=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+C(e))},lt=function lt(t){if("object"!=(void 0===t?"undefined":_typeof(t))||null===t)return C(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=C(e[i]),r+=":",r+=lt(t[e[i]]);return r+="}"},ct=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r},pt=function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;++n)e(n,t[n]);else S(t,function(t,n){return e(n,t)})},dt=function(t){s(!it(t),"Invalid JSON number");var e,n,r,i,o,a,h;for(0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074)))),a=[],o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse(),h=a.join("");var u="";for(o=0;o<64;o+=8){var l=parseInt(h.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),u+=l}return u.toLowerCase()},ft=new RegExp("^-?\\d{1,10}$"),_t=function(t){if(ft.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},yt=function(t){try{t()}catch(t){setTimeout(function(){var e=t.stack||"";throw rt("Exception was thrown by user callback.",e),t},Math.floor(0))}},vt=function(){
return("object"==("undefined"==typeof window?"undefined":_typeof(window))&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},gt=function(t,e){var n=setTimeout(t,e);return"object"==(void 0===n?"undefined":_typeof(n))&&n.unref&&n.unref(),n},mt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=at(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),Ct=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=M(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=M(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=M(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Et="long_polling",wt=function(){function t(t,e,n,r,i){void 0===i&&(i=""),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=B.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&B.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(s("string"==typeof t,"typeof type must == string"),s("object"==(void 0===e?"undefined":_typeof(e)),"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Et)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return S(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),Tt=function(t){var e=Nt(t),n=e.subdomain;"firebase"===e.domain&&nt(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===e.domain||nt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&rt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new wt(e.host,e.secure,n,r),path:new mt(e.pathString)}},Nt=function(t){var e="",n="",r="",i="",o=!0,s="https",a=443;if("string"==typeof t){var h=t.indexOf("//");h>=0&&(s=t.substring(0,h-1),t=t.substring(h+2));var u=t.indexOf("/");-1===u&&(u=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(u,l)),u<l&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(u,l)));var c=function(t){var e={};t.startsWith("?")&&(t=t.substring(1));for(var n=0,r=t.split("&");n<r.length;n++){var i=r[n];if(0!==i.length){var o=i.split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):rt("Invalid query segment '"+i+"' in query '"+t+"'")}}return e}(t.substring(Math.min(t.length,l)));(h=e.indexOf(":"))>=0?(o="https"===s||"wss"===s,a=parseInt(e.substring(h+1),10)):h=t.length;var p=e.split(".");3===p.length?(n=p[1],r=p[0].toLowerCase()):2===p.length?n=p[0]:"localhost"===p[0].slice(0,h).toLowerCase()&&(n="localhost"),""===r&&"ns"in c&&(r=c.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:s,pathString:i}},It=/[\[\].#$\/\u0000-\u001F\u007F]/,Rt=/[\[\].#$\u0000-\u001F\u007F]/,Pt=function(t){return"string"==typeof t&&0!==t.length&&!It.test(t)},Dt=function(t){return"string"==typeof t&&0!==t.length&&!Rt.test(t)},Ot=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!it(t)||t&&"object"==(void 0===t?"undefined":_typeof(t))&&w(t,".sv")},kt=function(t,e,n,r,i){i&&void 0===n||xt(x(t,e,i),n,r)},xt=function xt(t,e,n){var r=n instanceof mt?new Ct(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(it(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&M(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==(void 0===e?"undefined":_typeof(e))){var i=!1,o=!1;if(S(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!Pt(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),xt(t,n,r),r.pop()}),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Ft=function(t,e,n,r,i){if(!i||void 0!==n){var o=x(t,e,i);if(!n||"object"!=(void 0===n?"undefined":_typeof(n))||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];S(n,function(t,e){var n=new mt(t);if(xt(o,e,r.child(n)),".priority"===n.getBack()&&!Ot(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Pt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(mt.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},At=function(t,e,n,r){if(!r||void 0!==n){if(it(n))throw new Error(x(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ot(n))throw new Error(x(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Lt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(x(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Mt=function(t,e,n,r){if(!(r&&void 0===n||Pt(n)))throw new Error(x(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Wt=function(t,e,n,r){if(!(r&&void 0===n||Dt(n)))throw new Error(x(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},Qt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Pt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Dt(t)}(r))throw new Error(x(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ut=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){k("OnDisconnect.cancel",0,1,arguments.length),F("OnDisconnect.cancel",1,t,!0);var e=new p;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){k("OnDisconnect.remove",0,1,arguments.length),qt("OnDisconnect.remove",this.path_),F("OnDisconnect.remove",1,t,!0);var e=new p;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){k("OnDisconnect.set",1,2,arguments.length),qt("OnDisconnect.set",this.path_),kt("OnDisconnect.set",1,t,this.path_,!1),F("OnDisconnect.set",2,e,!0);var n=new p;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){k("OnDisconnect.setWithPriority",2,3,arguments.length),qt("OnDisconnect.setWithPriority",this.path_),kt("OnDisconnect.setWithPriority",1,t,this.path_,!1),At("OnDisconnect.setWithPriority",2,e,!1),F("OnDisconnect.setWithPriority",3,n,!0);var r=new p;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(k("OnDisconnect.update",1,2,arguments.length),qt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,rt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ft("OnDisconnect.update",1,t,this.path_,!1),F("OnDisconnect.update",2,e,!0);var i=new p;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Vt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return k("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ht=(Xn="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",$n=0,Jn=[],function(t){var e,n=t===$n;$n=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=Xn.charAt(t%64),t=Math.floor(t/64);s(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===Jn[e];e--)Jn[e]=0;Jn[e]++}else for(e=0;e<12;e++)Jn[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=Xn.charAt(Jn[e]);return s(20===i.length,"nextPushId: Length should be 20."),i}),Bt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),jt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Bt(ot,t),r=new Bt(ot,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Bt.MIN},t}(),Kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return bt},set:function(t){bt=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return at(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw a("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Bt.MIN},e.prototype.maxPost=function(){return new Bt(st,bt)},e.prototype.makePost=function(t,e){return s("string"==typeof t,"KeyIndex indexValue must always be a string."),new Bt(t,bt)},e.prototype.toString=function(){return".key"},e}(jt),Yt=new Kt,$t=function(t){return"number"==typeof t?"number:"+dt(t):"string:"+t},Jt=function(t){if(t.isLeafNode()){var e=t.val();s("string"==typeof e||"number"==typeof e||"object"==(void 0===e?"undefined":_typeof(e))&&w(e,".sv"),"Priority must be a string or number.")}else s(t===St||t.isEmpty(),"priority of unexpected type.");s(t===St||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Zt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,s(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Jt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return zt},set:function(t){zt=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(s(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+$t(this.priorityNode_.val())+":");var e=_typeof(this.value_);t+=e+":",t+="number"===e?dt(this.value_):this.value_,this.lazyHash_=z(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(s(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=_typeof(e.value_),r=_typeof(this.value_),i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return s(i>=0,"Unknown leaf type: "+n),s(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),ne=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?at(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Bt.MIN},e.prototype.maxPost=function(){return new Bt(st,new Zt("[PRIORITY-POST]",Xt))},e.prototype.makePost=function(t,e){var n=Gt(t);return new Bt(e,new Zt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(jt)),re=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),ie=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:se.EMPTY_NODE,this.right=null!=o?o:se.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r,i;return(i=(r=n(t,(i=this).key))<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return se.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return se.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),oe=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ie(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),se=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ie.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ie.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new re(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new re(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new re(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new re(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new oe,t}(),ae=Math.log(2),he=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/ae,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),ue=function(t,e,n,r){t.sort(e);var i=function i(e,r){var o,s,a=r-e;if(0==a)return null;if(1==a)return o=t[e],s=n?n(o):o,new ie(s,o.node,ie.BLACK,null,null);var h=parseInt(a/2,10)+e,u=i(e,h),l=i(h+1,r);return o=t[h],s=n?n(o):o,new ie(s,o.node,ie.BLACK,u,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var u=i(o+1,a),l=t[o],c=n?n(l):l;h(new ie(c,l.node,r,null,u))},h=function(t){r?(r.left=t,r=t):(o=t,r=t)},u=0;u<e.count;++u){var l=e.nextBitIsOne(),c=Math.pow(2,e.count-(u+1));l?a(c,ie.BLACK):(a(c,ie.BLACK),a(c,ie.RED))}return o}(new he(t.length));return new se(r||e,o)},le={},ce=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return s(le&&ne,"ChildrenNode.ts has not been loaded"),te=te||new t({".priority":le},{".priority":ne})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=b(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e===le?null:e},t.prototype.hasIndex=function(t){return w(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){s(e!==Yt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(Bt.Wrap),h=a.getNext();h;)o=o||e.isDefinedOn(h.node),i.push(h),h=a.getNext();r=o?ue(i,e.getCompare()):le;var u=e.toString(),l=T(this.indexSet_);l[u]=e;var c=T(this.indexes_);return c[u]=r,new t(c,l)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(R(this.indexes_,function(t,i){var o=b(r.indexSet_,i);if(s(o,"Missing index implementation for "+i),t===le){if(o.isDefinedOn(e.node)){for(var a=[],h=n.getIterator(Bt.Wrap),u=h.getNext();u;)u.name!=e.name&&a.push(u),u=h.getNext();return a.push(e),ue(a,o.getCompare())}return le}var l=n.get(e.name),c=t;return l&&(c=c.remove(new Bt(e.name,l))),c.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(R(this.indexes_,function(t){if(t===le)return t;var r=n.get(e.name);return r?t.remove(new Bt(e.name,r)):t}),this.indexSet_)},t}(),fe=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Jt(this.priorityNode_),this.children_.isEmpty()&&s(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return ee||(ee=new t(new se(de),null,ce.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||ee},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?ee:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(s(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Bt(e,n),i=void 0,o=void 0;return n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_)),new t(i,i.isEmpty()?ee:this.priorityNode_,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;s(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(ne,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+$t(this.getPriority().val())+":"),this.forEachChild(ne,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":z(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Bt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Bt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Bt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===_e?-1:0},t.prototype.withIndex=function(e){if(e===Yt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Yt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t
;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(ne),r=e.getIterator(ne),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Yt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),_e=new(function(t){function e(){return t.call(this,new se(de),fe.EMPTY_NODE,ce.Default)||this}return r(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return fe.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(fe));Object.defineProperties(Bt,{MIN:{value:new Bt(ot,fe.EMPTY_NODE)},MAX:{value:new Bt(st,_e)}}),Kt.__EMPTY_NODE=fe.EMPTY_NODE,Zt.__childrenNodeConstructor=fe,St=_e,function(t){Xt=t}(_e);var ye=!0;!function(t){Gt=t}(ve);var ge,me,Ce=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?at(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Bt.MIN},e.prototype.maxPost=function(){return Bt.MAX},e.prototype.makePost=function(t,e){var n=ve(t);return new Bt(e,n)},e.prototype.toString=function(){return".value"},e}(jt)),Ee=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,s(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return r(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?at(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=ve(t),r=fe.EMPTY_NODE.updateChild(this.indexPath_,n);return new Bt(e,r)},e.prototype.maxPost=function(){var t=fe.EMPTY_NODE.updateChild(this.indexPath_,_e);return new Bt(st,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(jt),we=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return k("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return k("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return k("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return k("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){k("DataSnapshot.child",0,1,arguments.length),e=String(e),Wt("DataSnapshot.child",1,e,!1);var n=new mt(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,ne)},t.prototype.hasChild=function(t){k("DataSnapshot.hasChild",1,1,arguments.length),Wt("DataSnapshot.hasChild",1,t,!1);var e=new mt(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return k("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;return k("DataSnapshot.forEach",1,1,arguments.length),F("DataSnapshot.forEach",1,e,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),ne))})},t.prototype.hasChildren=function(){return k("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return k("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return k("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),be=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+C(this.snapshot.exportVal())},t}(),Se=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Te=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new be("value",this,new we(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){s(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Se(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Ne=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,w(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Se(this,t,e):null},t.prototype.createEvent=function(t,e){s(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new be(t.type,this,new we(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){s(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var n=I(e.callbacks_);if(n===I(this.callbacks_)){if(1===n){var r=D(e.callbacks_),i=D(this.callbacks_);return!(i!==r||e.callbacks_[r]&&this.callbacks_[i]&&e.callbacks_[r]!==this.callbacks_[i])}return function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!function(t,n){return e.callbacks_[t]===n}(n,t[n]))return!1;return!0}(this.callbacks_)}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Ie=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return s(ge,"Reference.ts has not been loaded"),ge},set:function(t){ge=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Yt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!=ot)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!=st)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===ne){if(null!=e&&!Ot(e)||null!=n&&!Ot(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(s(t.getIndex()instanceof Ee||t.getIndex()===Ce,"unknown index type."),null!=e&&"object"==(void 0===e?"undefined":_typeof(e))||null!=n&&"object"==(void 0===n?"undefined":_typeof(n)))throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return k("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){k("Query.on",2,4,arguments.length),Lt("Query.on",1,e,!1),F("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[e]=n,this.onChildEvent(s,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Te(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Ne(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){k("Query.off",0,3,arguments.length),Lt("Query.off",1,t,!0),F("Query.off",2,e,!0),A("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new Te(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Ne(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;k("Query.once",1,4,arguments.length),Lt("Query.once",1,e,!1),F("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),a=!0,h=new p;h.promise.catch(function(){});var u=function u(t){a&&(a=!1,o.off(e,u),n&&n.bind(s.context)(t),h.resolve(t))};return this.on(e,u,function(t){o.off(e,u),s.cancel&&s.cancel.bind(s.context)(t),h.reject(t)}),h.promise},t.prototype.limitToFirst=function(e){if(k("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(k("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(k("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Wt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new mt(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Ee(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){k("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Yt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){k("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(ne);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){k("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Ce);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),k("Query.startAt",0,2,arguments.length),kt("Query.startAt",1,e,this.path,!0),Mt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),k("Query.endAt",0,2,arguments.length),kt("Query.endAt",1,e,this.path,!0),Mt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(k("Query.equalTo",1,2,arguments.length),kt("Query.equalTo",1,t,this.path,!1),Mt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return k("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return k("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=lt(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(k("Query.isEqual",1,1,arguments.length),!(e instanceof t))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var n=this.repo===e.repo,r=this.path.equals(e.path),i=this.queryIdentifier()===e.queryIdentifier();return n&&r&&i},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,F(t,3,r.cancel,!0),r.context=n,A(t,4,r.context,!0);else if(e)if("object"==(void 0===e?"undefined":_typeof(e))&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(x(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Re=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return w(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return N(this.set)},t.prototype.count=function(){return I(this.set)},t.prototype.each=function(t){S(this.set,function(e,n){return t(e,n)})},t.prototype.keys=function(){var t=[];return S(this.set,function(e){t.push(e)}),t},t}(),Pe=function(){function t(){this.value_=null,this.children_=null}return t.prototype.find=function(t){if(null!=this.value_)return this.value_.getChild(t);if(t.isEmpty()||null==this.children_)return null;var e=t.getFront();return t=t.popFront(),this.children_.contains(e)?this.children_.get(e).find(t):null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,n);else{null==this.children_&&(this.children_=new Re);var r=e.getFront();this.children_.contains(r)||this.children_.add(r,new t);var i=this.children_.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var e=this.value_;this.value_=null;var n=this;return e.forEachChild(ne,function(t,e){n.remember(new mt(t),e)}),this.forget(t)}if(null!==this.children_){var r=t.getFront();return t=t.popFront(),this.children_.contains(r)&&this.children_.get(r).forget(t)&&this.children_.remove(r),!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},t.prototype.forEachTree=function(t,e){null!==this.value_?e(t,this.value_):this.forEachChild(function(n,r){var i=new mt(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){null!==this.children_&&this.children_.each(function(e,n){t(e,n)})},t}(),De=function(t,e){return t&&"object"==(void 0===t?"undefined":_typeof(t))?(s(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},Oe=function Oe(t,e){var n,r=t.getPriority().val(),i=De(r,e);if(t.isLeafNode()){var o=t,s=De(o.getValue(),e);return s!==o.getValue()||i!==o.getPriority().val()?new Zt(s,ve(i)):t}var a=t;return n=a,i!==a.getPriority().val()&&(n=n.updatePriority(new Zt(i))),a.forEachChild(ne,function(t,r){var i=Oe(r,e);i!==r&&(n=n.updateImmediateChild(t,i))}),n};!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(me||(me={}));var ke,xe,Fe=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,s(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),Ae=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=me.ACK_USER_WRITE,this.source=Fe.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return s(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new mt(e));return new t(mt.Empty,n,this.revert)}return s(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),Le=function(){return ke||(ke=new se(ht)),ke},Me=function(){function t(t,e){void 0===e&&(e=Le()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return S(e,function(t,e){n=n.set(new mt(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:mt.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new mt(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=(this.children.get(r)||t.Empty).setTree(e.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(mt.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,mt.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,mt.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(mt.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),We=function(){function t(t,e){this.source=t,this.path=e,this.type=me.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,mt.Empty):new t(this.source,this.path.popFront())},t}(),qe=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=me.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,mt.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),Qe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=me.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new mt(e));return n.isEmpty()?null:n.value?new qe(this.source,mt.Empty,n.value):new t(this.source,mt.Empty,n)}return s(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ue=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ve=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Ue(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Ue(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new Ue(fe.EMPTY_NODE,!1,!1),new Ue(fe.EMPTY_NODE,!1,!1)),t}(),He=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),Be=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){s(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()==n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(He.childRemovedChange(e,a)):s(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(He.childAddedChange(e,n)):o.trackChildChange(He.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(ne,function(t,r){e.hasChild(t)||n.trackChildChange(He.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(ne,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(He.childChangedChange(e,r,i))}else n.trackChildChange(He.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?fe.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),je=function(){function t(){this.changeMap_={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;s(e==He.CHILD_ADDED||e==He.CHILD_CHANGED||e==He.CHILD_REMOVED,"Only child changes supported for tracking"),s(".priority"!==n,"Only non-priority child changes can be tracked.");var r=b(this.changeMap_,n);if(r){var i=r.type;if(e==He.CHILD_ADDED&&i==He.CHILD_REMOVED)this.changeMap_[n]=He.childChangedChange(n,t.snapshotNode,r.snapshotNode);else if(e==He.CHILD_REMOVED&&i==He.CHILD_ADDED)delete this.changeMap_[n];else if(e==He.CHILD_REMOVED&&i==He.CHILD_CHANGED)this.changeMap_[n]=He.childRemovedChange(n,r.oldSnap);else if(e==He.CHILD_CHANGED&&i==He.CHILD_ADDED)this.changeMap_[n]=He.childAddedChange(n,t.snapshotNode);else{if(e!=He.CHILD_CHANGED||i!=He.CHILD_CHANGED)throw a("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap_[n]=He.childChangedChange(n,t.snapshotNode,r.oldSnap)}}else this.changeMap_[n]=t},t.prototype.getChanges=function(){return function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e}(this.changeMap_)},t}(),Ke=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ye=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ue(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),ze=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Ge=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){s(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),s(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,h,u=new je;if(n.type===me.OVERWRITE){var l=n;l.source.fromUser?o=this.applyUserOverwrite_(e,l.path,l.snap,r,i,u):(s(l.source.fromServer,"Unknown source."),h=l.source.tagged||e.getServerCache().isFiltered()&&!l.path.isEmpty(),o=this.applyServerOverwrite_(e,l.path,l.snap,r,i,h,u))}else if(n.type===me.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,u):(s(c.source.fromServer,"Unknown source."),h=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,h,u))}else if(n.type===me.ACK_USER_WRITE){var p=n;o=p.revert?this.revertUserWrite_(e,p.path,r,i,u):this.ackUserWrite_(e,p.path,p.affectedTree,r,i,u)}else{if(n.type!==me.LISTEN_COMPLETE)throw a("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,u)}var d=u.getChanges();return t.maybeAddValueEvent_(e,o,d),new ze(o,d)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(He.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,h=void 0;if(e.isEmpty())if(s(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),l=u instanceof fe?u:fe.EMPTY_NODE,c=n.calcCompleteEventChildren(l);a=this.filter_.updateFullNode(t.getEventCache().getNode(),c,i)}else{var p=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),p,i)}else{var d=e.getFront();if(".priority"==d){s(1==e.getLength(),"Can't have a priority with additional path components");var f=o.getNode();h=t.getServerCache().getNode();var _=n.calcEventCacheAfterServerOverwrite(e,f,h);a=null!=_?this.filter_.updatePriority(f,_):o.getNode()}else{var y=e.popFront(),v=void 0;if(o.isCompleteForChild(d)){h=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),h);v=null!=g?o.getNode().getImmediateChild(d).updateChild(y,g):o.getNode().getImmediateChild(d)}else v=n.calcCompleteChild(d,t.getServerCache());a=null!=v?this.filter_.updateChild(o.getNode(),d,v,y,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,h=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=u.updateFullNode(h.getNode(),n,null);else if(u.filtersNodes()&&!h.isFiltered()){var l=h.getNode().updateChild(e,n);a=u.updateFullNode(h.getNode(),l,null)}else{var c=e.getFront();if(!h.isCompleteForPath(e)&&e.getLength()>1)return t;var p=e.popFront(),d=h.getNode().getImmediateChild(c).updateChild(p,n);a=".priority"==c?u.updatePriority(h.getNode(),d):u.updateChild(h.getNode(),c,d,p,Ke,null)}var f=t.updateServerSnap(a,h.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),_=new Ye(r,f,i);return this.generateEventCacheAfterServerEvent_(f,e,r,_,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,h=t.getEventCache(),u=new Ye(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront()
;if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,h.isFullyInitialized(),h.isFiltered());else{var c=e.popFront(),p=h.getNode().getImmediateChild(l),d=void 0;if(c.isEmpty())d=n;else{var f=u.getCompleteChild(l);d=null!=f?".priority"===c.getBack()&&f.getChild(c.parent()).isEmpty()?f:f.updateChild(c,n):fe.EMPTY_NODE}if(p.equals(d))s=t;else{var _=this.filter_.updateChild(h.getNode(),l,d,c,u,o);s=t.updateEventSnap(_,h.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,h=e;return r.foreach(function(r,u){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(h=a.applyUserOverwrite_(h,l,u,i,o,s))}),r.foreach(function(r,u){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(h=a.applyUserOverwrite_(h,l,u,i,o,s))}),h},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var h,u=t;h=e.isEmpty()?n:Me.Empty.setTree(e,n);var l=t.getServerCache().getNode();return h.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var h=t.getServerCache().getNode().getImmediateChild(e),c=a.applyMerge_(h,n);u=a.applyServerOverwrite_(u,new mt(e),c,r,i,o,s)}}),h.children.inorderTraversal(function(e,n){var h=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!h){var c=t.getServerCache().getNode().getImmediateChild(e),p=a.applyMerge_(c,n);u=a.applyServerOverwrite_(u,new mt(e),p,r,i,o,s)}}),u},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var h=Me.Empty;return a.getNode().forEachChild(Yt,function(t,e){h=h.set(new mt(t),e)}),this.applyServerMerge_(t,e,h,r,i,s,o)}return t}var u=Me.Empty;return n.foreach(function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(u=u.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,u,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ke,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new Ye(n,t,r),h=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var c=t.getServerCache().getNode();s(c instanceof fe,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(c)}l=l,u=this.filter_.updateFullNode(h,l,i)}else{var p=e.getFront(),d=n.calcCompleteChild(p,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(p)&&(d=h.getImmediateChild(p)),(u=null!=d?this.filter_.updateChild(h,p,d,e.popFront(),a,i):t.getEventCache().getNode().hasChild(p)?this.filter_.updateChild(h,p,fe.EMPTY_NODE,e.popFront(),a,i):h).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(mt.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),Xe=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===He.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(He.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,He.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,He.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,He.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,He.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,He.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter(function(t){return t.type===e});s.sort(this.compareChanges_.bind(this)),s.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw a("Should only compare child_ events.");var n=new Bt(t.childName,t.snapshotNode),r=new Bt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),$e=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Be(n.getIndex()),i=n.getNodeFilter();this.processor_=new Ge(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(fe.EMPTY_NODE,o.getNode(),null),h=i.updateFullNode(fe.EMPTY_NODE,s.getNode(),null),u=new Ue(a,o.isFullyInitialized(),r.filtersNodes()),l=new Ue(h,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Ve(l,u),this.eventGenerator_=new Xe(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){s(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===me.MERGE&&null!==t.source.queryId&&(s(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),s(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),s(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(ne,function(t,e){n.push(He.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(He.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),Je=function(){function t(){this.views_={}}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return s(xe,"Reference.ts has not been loaded"),xe},set:function(t){s(!xe,"__referenceConstructor has already been defined"),xe=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return N(this.views_)},t.prototype.applyOperation=function(t,e,n){var r=t.source.queryId;if(null!==r){var i=b(this.views_,r);return s(null!=i,"SyncTree gave us an op for an invalid query."),i.applyOperation(t,e,n)}var o=[];return S(this.views_,function(r,i){o=o.concat(i.applyOperation(t,e,n))}),o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=b(this.views_,o);if(!s){var a=n.calcCompleteEventCache(i?r:null),h=!1;a?h=!0:r instanceof fe?(a=n.calcCompleteEventChildren(r),h=!1):(a=fe.EMPTY_NODE,h=!1);var u=new Ve(new Ue(a,h,!1),new Ue(r,i,!1));s=new $e(t,u),this.views_[o]=s}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i=e.queryIdentifier(),o=[],s=[],a=this.hasCompleteView();if("default"===i){var h=this;S(this.views_,function(t,e){s=s.concat(e.removeEventRegistration(n,r)),e.isEmpty()&&(delete h.views_[t],e.getQuery().getQueryParams().loadsAllData()||o.push(e.getQuery()))})}else{var u=b(this.views_,i);u&&(s=s.concat(u.removeEventRegistration(n,r)),u.isEmpty()&&(delete this.views_[i],u.getQuery().getQueryParams().loadsAllData()||o.push(u.getQuery())))}return a&&!this.hasCompleteView()&&o.push(new t.__referenceConstructor(e.repo,e.path)),{removed:o,events:s}},t.prototype.getQueryViews=function(){var t=this;return Object.keys(this.views_).map(function(e){return t.views_[e]}).filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},t.prototype.getCompleteServerCache=function(t){var e=null;return S(this.views_,function(n,r){e=e||r.getCompleteServerCache(t)}),e},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return b(this.views_,e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,n;return t=this.views_,(n=P(t,function(t){return t.getQuery().getQueryParams().loadsAllData()},void 0))&&t[n]||null},t}(),Ze=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new Me(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=mt.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new Me(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return S(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,Me.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(mt.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(ne,function(e,n){t.push(new Bt(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new Bt(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new Me(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(e){return t.applySubtreeWrite_(mt.Empty,this.writeTree_,e)},t.Empty=new t(new Me(null)),t.applySubtreeWrite_=function(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal(function(n,o){".priority"===n?(s(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t.applySubtreeWrite_(e.child(n),o,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r},t}(),tn=function(){function t(){this.visibleWrites_=Ze.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new en(t,this)},t.prototype.addOverwrite=function(t,e,n,r){s(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){s(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});s(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var h=this.allWrites_[a];h.visible&&(a>=n&&this.recordContainsPath_(h,r.path)?i=!1:r.path.contains(h.path)&&(o=!0)),a--}if(i){if(o)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(r.path);else{var u=r.children;S(u,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})}return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(mt.Empty)){var s=t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);return u=n||fe.EMPTY_NODE,s.apply(u)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var h=this.visibleWrites_.childCompoundWrite(e);if(h.isEmpty())return n;if(null!=n||h.hasCompleteWrite(mt.Empty)){var u=n||fe.EMPTY_NODE;return h.apply(u)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=fe.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(ne,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(ne,function(t,e){var r=i.childCompoundWrite(new mt(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){s(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),h=a.getCompleteNode(mt.Empty);if(null!=h)s=h;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var u=[],l=o.getCompare(),c=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),p=c.getNext();p&&u.length<r;)0!==l(p,n)&&u.push(p),p=c.getNext();return u},t.prototype.recordContainsPath_=function(t,e){return t.snap?t.path.contains(e):!!P(t.children,function(n,r){return t.path.child(r).contains(e)})},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,mt.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ze.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,h=void 0;if(o.snap)n.contains(s)?(h=mt.relativePath(n,s),r=r.addWrite(h,o.snap)):s.contains(n)&&(h=mt.relativePath(s,n),r=r.addWrite(mt.Empty,o.snap.getChild(h)));else{if(!o.children)throw a("WriteRecord should have .snap or .children");if(n.contains(s))h=mt.relativePath(n,s),r=r.addWrites(h,o.children);else if(s.contains(n))if((h=mt.relativePath(s,n)).isEmpty())r=r.addWrites(mt.Empty,o.children);else{var u=b(o.children,h.getFront());if(u){var l=u.getChild(h.popFront());r=r.addWrite(mt.Empty,l)}}}}}return r},t}(),en=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),nn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=Me.Empty,this.pendingWriteTree_=new tn,this.tagToQueryMap_={},this.queryToTagMap_={}}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new qe(Fe.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Me.fromObject(e);return this.applyOperationToSyncPoints_(new Qe(Fe.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Me.Empty;return null!=n.snap?r=r.set(mt.Empty,!0):S(n.children,function(t,e){r=r.set(new mt(t),e)}),this.applyOperationToSyncPoints_(new Ae(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new qe(Fe.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=Me.fromObject(e);return this.applyOperationToSyncPoints_(new Qe(Fe.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new We(Fe.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,h=mt.relativePath(s,e),u=new qe(Fe.forServerTaggedQuery(a),h,n);return this.applyTaggedOperation_(s,u)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,h=mt.relativePath(s,e),u=Me.fromObject(n),l=new Qe(Fe.forServerTaggedQuery(a),h,u);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=mt.relativePath(o,e),h=new We(Fe.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,h)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=mt.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var a,h=this.syncPointTree_.get(r);h?(o=o||h.hasCompleteView(),i=i||h.getCompleteServerCache(mt.Empty)):(h=new Je,this.syncPointTree_=this.syncPointTree_.set(r,h)),null!=i?a=!0:(a=!1,i=fe.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(mt.Empty);n&&(i=i.updateImmediateChild(t,n))}));var u=h.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);s(!(l in this.queryToTagMap_),"View does not exist, but we have a tag");var c=t.getNextQueryTag_();this.queryToTagMap_[l]=c,this.tagToQueryMap_["_"+c]=l}var p=this.pendingWriteTree_.childWrites(r),d=h.addEventRegistration(e,n,p,i,a);if(!u&&!o){var f=h.viewForQuery(e);d=d.concat(this.setupListener_(e,f))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var h=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var u=h.removed;a=h.events;var l=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),c=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!c){var p=this.syncPointTree_.subtree(o);if(!p.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(p),f=0;f<d.length;++f){var _=d[f],y=_.getQuery(),v=this.createListenerForView_(_);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),v.hashFn,v.onComplete)}}!c&&u.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):u.forEach(function(e){var n=i.queryToTagMap_[t.makeQueryKey_(e)];i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(u)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=mt.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),S(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap_[i];delete this.queryToTagMap_[i],delete this.tagToQueryMap_["_"+o]}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),h=this.syncPointTree_.subtree(r);if(i)s(!h.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=h.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),S(n,function(t,e){r=r.concat(e)}),r}),l=0;l<u.length;++l){var c=u[l];this.listenProvider_.stopListening(t.queryForListening_(c),this.tagForQuery_(c))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||fe.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return s(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new mt(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap_["_"+t]},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return b(this.queryToTagMap_,n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);s(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(mt.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(mt.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(mt.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),h=e.children.get(s);if(h&&a){var u=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,h,u,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(mt.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(mt.Empty));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,h=r.child(e),u=t.operationForChild(e);u&&(s=s.concat(i.applyOperationDescendantsHelper_(u,o,a,h)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),rn=function(){function t(){this.rootNode_=fe.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),on=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(Z("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rt(t)},t}(),sn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),w(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return c(this.counters_)},t}(),an=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new sn),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),hn=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=T(t);return this.last_&&S(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),un=1e4,ln=3e4,cn=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new hn(t);var n=un+(ln-un)*Math.random();gt(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;S(e,function(e,i){i>0&&w(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),gt(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),pn=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new dn(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),dn=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();X&&Z("event: "+e.toString()),yt(n)}}},t.prototype.getPath=function(){return this.path_},t}(),fn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},s(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=this.listeners_[t].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){s(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),_n=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return r(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return s("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(fn),yn=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||d()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return r(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return s("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(fn),vn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum]
;for(var r=0;r<t.length;++r)!function(_e2){t[_e2]&&yt(function(){n.onMessage_(t[_e2])})}(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++}(););},t}(),gn="pLPCommand",mn="pRTLPCB",Cn=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=tt(t),this.stats_=an.getCollection(e),this.urlFn=function(t){return e.connectionURL(Et,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new vn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(f()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new En(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1],o=t[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"==r)n.id=i,n.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(i,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,i)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),!f()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==("undefined"==typeof window?"undefined":_typeof(window))&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==("undefined"==typeof Windows?"undefined":_typeof(Windows))&&"object"==_typeof(Windows.UI))&&!f()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=C(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=h(e),u.encodeByteArray(n,!0)),i=ct(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!f()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=C(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),En=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Re,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,f())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Y(),window[gn+this.uniqueCallbackIdentifier]=e,window[mn+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(t){Z("frame writing exception"),t.stack&&Z(t.stack),Z(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Z("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var e=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0))),f()&&this.myID){var n={disconn:"t"};n.id=this.myID,n.pw=this.myPW;var r=this.urlFn(n);t.nodeRestRequest(r)}var i=this.onDisconnect;i&&(this.onDisconnect=null,i())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e,1);var r=function(){n.outstandingRequests.remove(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;f()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){Z("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}},Math.floor(1))},t}(),wn=null;"undefined"!=typeof MozWebSocket?wn=MozWebSocket:"undefined"!=typeof WebSocket&&(wn=WebSocket);var bn=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=tt(this.connId),this.stats_=an.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!f()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,B.set("previous_websocket_failure",!0);try{if(f()){var i=o.NODE_ADMIN?"AdminNode":"Node",s={headers:{"User-Agent":"Firebase/5/"+e.SDK_VERSION+"/"+process.platform+"/"+i}},a=process.env,h=0==this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;h&&(s.proxy={origin:h}),this.mySock=new wn(this.connURL,[],s)}else this.mySock=new wn(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var u=t.message||t.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&r.log_(e),r.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==wn&&!t.forceDisallow_},t.previouslyFailed=function(){return B.isInMemoryStorage||!0===B.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){B.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=m(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(s(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=C(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=ct(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Sn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Cn,bn]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n=bn&&bn.isAvailable(),r=n&&!bn.previouslyFailed();if(e.webSocketOnly&&(n||rt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[bn];else{var i=this.transports_=[];pt(t.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&i.push(e)})}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Tn=function(){function t(t,e,n,r,i,o,s){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=tt("c:"+this.id+":"),this.transportManager_=new Sn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=gt(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!=e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=ut("t",t),n=ut("d",t);if("c"==e)this.onSecondaryControl_(n);else{if("d"!=e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=ut("t",t),n=ut("d",t);"c"==e?this.onControl_(n):"d"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||--this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy())},t.prototype.onControl_=function(t){var e=ut("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?et("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):et("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&rt("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),gt(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gt(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(B.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Nn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),In=1e3,Rn=3e5,Pn=function(t){function n(e,r,i,o,s,a){var h=t.call(this)||this;if(h.repoInfo_=e,h.onDataUpdate_=r,h.onConnectStatus_=i,h.onServerInfoUpdate_=o,h.authTokenProvider_=s,h.authOverride_=a,h.id=n.nextPersistentConnectionId_++,h.log_=tt("p:"+h.id+":"),h.interruptReasons_={},h.listens_={},h.outstandingPuts_=[],h.outstandingPutCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=In,h.maxReconnectDelay_=Rn,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,a&&!f())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return h.scheduleConnect_(0),_n.getInstance().on("visible",h.onVisible_,h),-1===e.host.indexOf("fblocal")&&yn.getInstance().on("online",h.onOnline_,h),h}return r(n,t),n.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(C(i)),s(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},n.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},s(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),s(!this.listens_[o][i],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens_[o][i]=a,this.connected_&&this.sendListen_(a)},n.prototype.sendListen_=function(t){var e=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,h=s.s;n.warnOnListenWarnings_(a,r),(e.listens_[i]&&e.listens_[i][o])===t&&(e.log_("listen response",s),"ok"!==h&&e.removeListen_(i,o),t.onComplete&&t.onComplete(h,a))})},n.warnOnListenWarnings_=function(t,e){if(t&&"object"==(void 0===t?"undefined":_typeof(t))&&w(t,"w")){var n=b(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();rt("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},n.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},n.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==_typeof(e=E(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},n.prototype.tryAuth=function(){var t,e,n=this;if(this.connected_&&this.authToken_){var r=this.authToken_,i=(t=E(r),e=t.claims,t.signature&&e&&"object"==(void 0===e?"undefined":_typeof(e))&&e.hasOwnProperty("iat")?"auth":"gauth"),o={cred:r};null===this.authOverride_?o.noauth=!0:"object"==_typeof(this.authOverride_)&&(o.authvar=this.authOverride_),this.sendRequest(i,o,function(t){var e=t.s,i=t.d||"error";n.authToken_===r&&("ok"===e?n.invalidAuthTokenCount_=0:n.onAuthRevoked_(e,i))})}},n.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),s(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},n.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},n.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},n.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},n.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},n.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},n.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},n.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},n.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},n.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},n.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}})}},n.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+C(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},n.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):et("Unrecognized action received from server: "+C(t)+"\nAre you using the latest client?")},n.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},n.prototype.scheduleConnect_=function(t){var e=this;s(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},n.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=In,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},n.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=In,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},n.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=In),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},n.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+n.nextConnectionId_++,a=this,h=this.lastSessionId,u=!1,l=null,c=function(){l?l.close():(u=!0,r())};this.realtime_={close:c,sendRequest:function(t){s(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(p).then(function(n){u?Z("getToken() completed but was canceled"):(Z("getToken() completed. Creating connection."),a.authToken_=n&&n.accessToken,l=new Tn(i,a.repoInfo_,t,e,r,function(t){rt(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},h))}).then(null,function(t){a.log_("Failed to get token: "+t),u||(o.NODE_ADMIN&&rt(t),c())})}},n.prototype.interrupt=function(t){Z("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},n.prototype.resume=function(t){Z("Resuming connection for reason: "+t),delete this.interruptReasons_[t],N(this.interruptReasons_)&&(this.reconnectDelay_=In,this.realtime_||this.scheduleConnect_(0))},n.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},n.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},n.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return lt(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},n.prototype.removeListen_=function(t,e){var n,r=new mt(t).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][e],delete this.listens_[r][e],0===I(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},n.prototype.onAuthRevoked_=function(t,e){Z("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||++this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken())},n.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},n.prototype.restoreState_=function(){var t=this;this.tryAuth(),S(this.listens_,function(e,n){S(n,function(e,n){t.sendListen_(n)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},n.prototype.sendConnectStats_=function(){var t={},n="js";o.NODE_ADMIN?n="admin_node":o.NODE_CLIENT&&(n="node"),t["sdk."+n+"."+e.SDK_VERSION.replace(/\./g,"-")]=1,d()?t["framework.cordova"]=1:"object"==("undefined"==typeof navigator?"undefined":_typeof(navigator))&&"ReactNative"===navigator.product&&(t["framework.reactnative"]=1),this.reportStats(t)},n.prototype.shouldReconnect_=function(){var t=yn.getInstance().currentlyOnline();return N(this.interruptReasons_)&&t},n.nextPersistentConnectionId_=0,
n.nextConnectionId_=0,n}(Nn),Dn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=tt("p:rest:"),i.listens_={},i}return r(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(s(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=e.getListenId_(t,r),h={};this.listens_[a]=h;var u=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",u,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(s,n,!1,r),b(o.listens_,a)===h&&i(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var o=i&&i.accessToken;o&&(e.auth=o);var s,a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?"+(s=[],S(e,function(t,e){Array.isArray(e)?e.forEach(function(e){s.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}):s.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}),s.length?"&"+s.join("&"):"");r.log_("Sending REST request for "+a);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+a+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=m(h.responseText)}catch(t){rt("Failed to parse JSON response for "+a+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&rt("Got unsuccessful REST response for "+a+" Status: "+h.status),n(h.status);n=null}},h.open("GET",a,!0),h.send()})},e}(Nn),On=function(){function t(t,e,n){var r=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new pn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Pe,this.persistentConnection_=null;var i=new on(n);if(this.stats_=an.getCollection(t),e||vt())this.server_=new Dn(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(void 0!==o&&null!==o){if("object"!=(void 0===o?"undefined":_typeof(o)))throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{C(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new Pn(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){r.server_.refreshAuthToken(t)}),this.statsReporter_=an.getOrCreateReporter(t,function(){return new cn(r.stats_,r.server_)}),this.transactions_init_(),this.infoData_=new rn,this.infoSyncTree_=new nn({startListening:function(t,e,n,i){var o=[],s=r.infoData_.getNode(t.path);return s.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(t.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new nn({startListening:function(t,e,n,i){return r.server_.listen(t,n,e,function(e,n){var o=i(e,n);r.eventQueue_.raiseEventsForChangedPath(t.path,o)}),[]},stopListening:function(t,e){r.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new mt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new mt(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=R(e,function(t){return ve(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=ve(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var h=R(e,function(t){return ve(t)});o=this.serverSyncTree_.applyServerMerge(i,h)}else{var u=ve(e);o=this.serverSyncTree_.applyServerOverwrite(i,u)}var l=i;o.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;pt(t,function(t,n){e.updateInfo_(n,t)})},t.prototype.updateInfo_=function(t,e){var n=new mt("/.info/"+t),r=ve(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=ve(e,n),a=Oe(s,o),h=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserOverwrite(t,a,h,!0);this.eventQueue_.queueEvents(u),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||rt("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(h,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)});var l=this.abortTransactions_(t);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(S(e,function(t,e){i=!1;var n=ve(e);s[t]=Oe(n,o)}),i)Z("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(h),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||rt("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),h=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(h,s),r.callOnCompleteCallback(n,e,i)}),S(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=[];(function(t,e){var n=new Pe;return t.forEachTree(new mt(""),function(t,r){n.remember(t,Oe(r,e))}),n})(this.onDisconnect_,e).forEachTree(mt.Empty,function(e,r){n=n.concat(t.serverSyncTree_.applyServerOverwrite(e,r));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new Pe,this.eventQueue_.raiseEventsForChangedPath(mt.Empty,n)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=ve(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=ve(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(N(e))return Z("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&S(e,function(e,n){var i=ve(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new hn(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);S(e,function(t,e){for(var r=t.length;r<n+2;r++)t+=" ";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Z.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&yt(function(){if("ok"==e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new Un(this))},enumerable:!0,configurable:!0}),t}(),kn=function(){function t(e){this.indexedFilter_=new Be(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Bt(e,n))||(n=fe.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=fe.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(fe.EMPTY_NODE);var i=this;return e.forEachChild(ne,function(t,e){i.matches(new Bt(t,e))||(r=r.updateImmediateChild(t,fe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),xn=function(){function t(t){this.rangedFilter_=new kn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Bt(e,n))||(n=fe.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=fe.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=fe.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(fe.EMPTY_NODE);var a=void 0,h=void 0,u=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),h=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();u=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),h=this.rangedFilter_.getEndPost(),u=this.index_.getCompare();o=0;for(var c=!1;i.hasNext();)s=i.getNext(),!c&&u(a,s)<=0&&(c=!0),c&&o<this.limit_&&u(s,h)<=0?o++:r=r.updateImmediateChild(s.name,fe.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var h=t;s(h.numChildren()==this.limit_,"");var u=new Bt(e,n),l=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(h.hasChild(e)){for(var p=h.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name==e||h.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var f=null==d?1:o(d,u);if(c&&!n.isEmpty()&&f>=0)return null!=i&&i.trackChildChange(He.childChangedChange(e,n,p)),h.updateImmediateChild(e,n);null!=i&&i.trackChildChange(He.childRemovedChange(e,p));var _=h.updateImmediateChild(e,fe.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(He.childAddedChange(d.name,d.node)),_.updateImmediateChild(d.name,d.node)):_}return n.isEmpty()?t:c&&o(l,u)>=0?(null!=i&&(i.trackChildChange(He.childRemovedChange(l.name,l.node)),i.trackChildChange(He.childAddedChange(e,n))),h.updateImmediateChild(e,n).updateImmediateChild(l.name,fe.EMPTY_NODE)):t},t}(),Fn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ne}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return s(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return s(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ot},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return s(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return s(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:st},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return s(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==ne&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==ne},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new Be(this.getIndex()):this.hasLimit()?new xn(this):new kn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()?r:(this.index_===ne?e=n.PRIORITY_INDEX:this.index_===Ce?e=n.VALUE_INDEX:this.index_===Yt?e=n.KEY_INDEX:(s(this.index_ instanceof Ee,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=C(e),this.startSet_&&(r[n.START_AT]=C(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+C(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=C(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+C(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_),r)},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),An=function(t){function e(e,n){if(!(e instanceof On))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,Fn.DEFAULT,!1)||this}return r(e,t),e.prototype.getKey=function(){return k("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return k("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof mt||(null===this.path.getFront()?function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Wt("Reference.child",1,n,!1)}(0,0,t):Wt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){k("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){k("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){k("Reference.set",1,2,arguments.length),qt("Reference.set",this.path),kt("Reference.set",1,t,this.path,!1),F("Reference.set",2,e,!0);var n=new p;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(k("Reference.update",1,2,arguments.length),qt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,rt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ft("Reference.update",1,t,this.path,!1),F("Reference.update",2,e,!0);var i=new p;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(k("Reference.setWithPriority",2,3,arguments.length),qt("Reference.setWithPriority",this.path),kt("Reference.setWithPriority",1,t,this.path,!1),At("Reference.setWithPriority",2,e,!1),F("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new p;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return k("Reference.remove",0,1,arguments.length),qt("Reference.remove",this.path),F("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(k("Reference.transaction",1,3,arguments.length),qt("Reference.transaction",this.path),F("Reference.transaction",1,t,!1),F("Reference.transaction",2,e,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(x("Reference.transaction",3,!0)+"must be a boolean.")}(0,0,n),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new p;return"function"==typeof e&&r.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,n,i){t?r.reject(t):r.resolve(new Vt(n,i)),"function"==typeof e&&e(t,n,i)},n),r.promise},e.prototype.setPriority=function(t,e){k("Reference.setPriority",1,2,arguments.length),qt("Reference.setPriority",this.path),At("Reference.setPriority",1,t,!1),F("Reference.setPriority",2,e,!0);var n=new p;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){k("Reference.push",0,2,arguments.length),qt("Reference.push",this.path),kt("Reference.push",1,t,this.path,!0),F("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Ht(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then(function(){return s}):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},e.prototype.onDisconnect=function(){return qt("Reference.onDisconnect",this.path),new Ut(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(Ie);Ie.__referenceConstructor=An,Je.__referenceConstructor=An;var Ln,Mn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),Wn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Mn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n,r=e instanceof mt?e:new mt(e),i=this;null!==(n=r.getFront());)i=new t(n,i,b(i.node_.children,n)||new Mn),r=r.popFront();return i},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){s(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;S(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new mt(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=w(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(Ln||(Ln={})),On.MAX_TRANSACTION_RETRIES_=25,On.prototype.transactions_init_=function(){this.transactionQueueTree_=new Wn},On.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new An(this,t);o.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:Y(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=this.getLatestState_(t);a.currentInputSnapshot=h;var u=a.update(h.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new we(a.currentInputSnapshot,new An(this,a.path),ne);a.onComplete(null,!1,l)}}else{xt("transaction failed: Data returned ",u,a.path),a.status=Ln.RUN;var c=this.transactionQueueTree_.subTree(t),p=c.getValue()||[];p.push(a),c.setValue(p);var d=void 0;"object"==(void 0===u?"undefined":_typeof(u))&&null!==u&&w(u,".priority")?(d=b(u,".priority"),s(Ot(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||fe.EMPTY_NODE).getPriority().val(),d=d;var f=this.generateServerValues(),_=ve(u,d),y=Oe(_,f);a.currentOutputSnapshotRaw=_,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,y,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_()}},On.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||fe.EMPTY_NODE},On.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);s(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===Ln.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},On.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),o=i,a=i.hash(),h=0;h<e.length;h++){var u=e[h];s(u.status===Ln.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=Ln.SENT,u.retryCount++;var l=mt.relativePath(t,u.path);o=o.updateChild(l,u.currentOutputSnapshotRaw)}var c=o.val(!0),p=t;this.server_.put(p.toString(),c,function(r){n.log_("transaction put response",{path:p.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=Ln.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,h=new An(n,e[s].path),u=new we(a,h,ne);o.push(e[s].onComplete.bind(null,null,!0,u))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)yt(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status===Ln.SENT_NEEDS_ABORT?e[s].status=Ln.NEEDS_ABORT:e[s].status=Ln.RUN;else for(rt("transaction at "+p.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=Ln.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}},a)},On.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},On.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===Ln.RUN}).map(function(t){return t.currentWriteId}),a=0;a<t.length;a++){var h=t[a],u=mt.relativePath(e,h.path),l=!1,c=void 0;if(s(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===Ln.NEEDS_ABORT)l=!0,c=h.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(h.currentWriteId,!0));else if(h.status===Ln.RUN)if(h.retryCount>=On.MAX_TRANSACTION_RETRIES_)l=!0,c="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(h.currentWriteId,!0));else{var p=this.getLatestState_(h.path,o);h.currentInputSnapshot=p;var d=t[a].update(p.val());if(void 0!==d){xt("transaction failed: Data returned ",d,h.path);var f=ve(d);"object"==(void 0===d?"undefined":_typeof(d))&&null!=d&&w(d,".priority")||(f=f.updatePriority(p.getPriority()));var _=h.currentWriteId,y=this.generateServerValues(),v=Oe(f,y);h.currentOutputSnapshotRaw=f,h.currentOutputSnapshotResolved=v,h.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(_),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(h.path,v,h.currentWriteId,h.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(_,!0))}else l=!0,c="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(h.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],l&&(t[a].status=Ln.COMPLETED,n=t[a].unwatcher,setTimeout(n,Math.floor(0)),t[a].onComplete))if("nodata"===c){var g=new An(this,t[a].path),m=t[a].currentInputSnapshot,C=new we(m,g,ne);r.push(t[a].onComplete.bind(null,null,!1,C))}else r.push(t[a].onComplete.bind(null,new Error(c),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),a=0;a<r.length;a++)yt(r[a]);this.sendReadyTransactions_()}},On.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},On.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},On.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},On.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Ln.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},On.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},On.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){
for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===Ln.SENT_NEEDS_ABORT||(e[o].status===Ln.SENT?(s(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=Ln.SENT_NEEDS_ABORT,e[o].abortReason="set"):(s(e[o].status===Ln.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)yt(n[o])}};var qn,Qn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return qn||(qn=new t),qn},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options.databaseURL;void 0===n&&nt("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var r=Tt(n),i=r.repoInfo;return Qt("Invalid Firebase Database URL",1,r),r.path.isEmpty()||nt("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,t).database},t.prototype.deleteRepo=function(t){var e=b(this.repos_,t.app.name);e&&b(e,t.repoInfo_.toURLString())===t||nt("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=b(this.repos_,e.name);n||(n={},this.repos_[e.name]=n);var r=b(n,t.toURLString());return r&&nt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new On(t,this.useRestClient_,e),n[t.toURLString()]=r,r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),Un=function(){function t(t){this.repo_=t,t instanceof On||nt("Don't call new Database() directly - please use firebase.database()."),this.root_=new An(t,mt.Empty),this.INTERNAL=new Vn(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),k("database.ref",0,1,arguments.length),t instanceof An?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),k(e,1,1,arguments.length);var n=Tt(t);Qt(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&nt(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&nt("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){k("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){k("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),Vn=function(){function t(t){this.database=t}return t.prototype.delete=function(){return t=this,e=void 0,r=function(){return i(this,function(t){return this.database.checkDeleted_("delete"),Qn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})},new((n=void 0)||(n=Promise))(function(i,o){function s(t){try{h(r.next(t))}catch(t){o(t)}}function a(t){try{h(r.throw(t))}catch(t){o(t)}}function h(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}h((r=r.apply(t,e||[])).next())});var t,e,n,r},t}(),Hn=Object.freeze({forceLongPolling:function(){bn.forceDisallow(),Cn.forceAllow()},forceWebSockets:function(){Cn.forceDisallow()},isWebSocketsAvailable:function(){return bn.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),Bn=Pn;Pn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Pn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var jn=Tn,Kn=wt,Yn=Object.freeze({DataConnection:Bn,RealTimeConnection:jn,hijackHash:function(t){var e=Pn.prototype.put;return Pn.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Pn.prototype.put=e}},ConnectionTarget:Kn,queryIdentifier:function(t){return t.queryIdentifier()},listens:function(t){return t.repo.persistentConnection_.listens_},forceRestClient:function(t){Qn.getInstance().forceRestClient(t)}}),zn=Un.ServerValue;return Gn(e),Object.freeze({registerDatabase:Gn,Database:Un,Query:Ie,Reference:An,enableLogging:J,ServerValue:zn,DataSnapshot:we,OnDisconnect:Ut})}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-database - be sure to load firebase-app.js first.")}var Xn,$n,Jn,Zn}(this.firebase=this.firebase||{},firebase);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?exports.Pusher=e():t.Pusher=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var i=n(1);t.exports=i.default},function(t,e,n){"use strict";function i(t){if(null===t||void 0===t)throw"You must pass your app key when you instantiate Pusher."}var o=n(2),r=n(9),s=n(24),a=n(39),c=n(40),u=n(41),l=n(12),h=n(5),p=n(63),f=n(8),d=n(43),y=n(14),v=function(){function t(e,n){var l=this;if(i(e),n=n||{},!n.cluster&&!n.wsHost&&!n.httpHost){var v=y.default.buildLogSuffix("javascriptQuickStart");f.default.warn("You should always specify a cluster when connecting. "+v)}this.key=e,this.config=r.extend(p.getGlobalConfig(),n.cluster?p.getClusterConfig(n.cluster):{},n),this.channels=d.default.createChannels(),this.global_emitter=new s.default,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new a.default(this.key,this.sessionID,{cluster:this.config.cluster,features:t.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:c.default.INFO,version:h.default.VERSION}),this.config.disableStats||(this.timelineSender=d.default.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+o.default.TimelineTransport.name}));var g=function(t){var e=r.extend({},l.config,t);return u.build(o.default.getDefaultStrategy(e),e)};this.connection=d.default.createConnectionManager(this.key,r.extend({getStrategy:g,timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()})),this.connection.bind("connected",function(){l.subscribeAll(),l.timelineSender&&l.timelineSender.send(l.connection.isEncrypted())}),this.connection.bind("message",function(t){var e=0===t.event.indexOf("pusher_internal:");if(t.channel){var n=l.channel(t.channel);n&&n.handleEvent(t.event,t.data)}e||l.global_emitter.emit(t.event,t.data)}),this.connection.bind("connecting",function(){l.channels.disconnect()}),this.connection.bind("disconnected",function(){l.channels.disconnect()}),this.connection.bind("error",function(t){f.default.warn("Error",t)}),t.instances.push(this),this.timeline.info({instances:t.instances.length}),t.isReady&&this.connect()}return t.ready=function(){t.isReady=!0;for(var e=0,n=t.instances.length;e<n;e++)t.instances[e].connect()},t.log=function(e){t.logToConsole&&window.console&&window.console.log&&window.console.log(e)},t.getClientFeatures=function(){return r.keys(r.filterObject({ws:o.default.Transports.ws},function(t){return t.isSupported({})}))},t.prototype.channel=function(t){return this.channels.find(t)},t.prototype.allChannels=function(){return this.channels.all()},t.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isEncrypted(),e=this.timelineSender;this.timelineSenderTimer=new l.PeriodicTimer(6e4,function(){e.send(t)})}},t.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},t.prototype.bind=function(t,e,n){return this.global_emitter.bind(t,e,n),this},t.prototype.unbind=function(t,e,n){return this.global_emitter.unbind(t,e,n),this},t.prototype.bind_global=function(t){return this.global_emitter.bind_global(t),this},t.prototype.unbind_global=function(t){return this.global_emitter.unbind_global(t),this},t.prototype.unbind_all=function(t){return this.global_emitter.unbind_all(),this},t.prototype.subscribeAll=function(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},t.prototype.subscribe=function(t){var e=this.channels.add(t,this);return e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==this.connection.state||e.subscribe(),e},t.prototype.unsubscribe=function(t){var e=this.channels.find(t);e&&e.subscriptionPending?e.cancelSubscription():(e=this.channels.remove(t))&&"connected"===this.connection.state&&e.unsubscribe()},t.prototype.send_event=function(t,e,n){return this.connection.send_event(t,e,n)},t.prototype.isEncrypted=function(){return"https:"===o.default.getProtocol()||Boolean(this.config.encrypted)},t.instances=[],t.isReady=!1,t.logToConsole=!1,t.Runtime=o.default,t.ScriptReceivers=o.default.ScriptReceivers,t.DependenciesReceivers=o.default.DependenciesReceivers,t.auth_callbacks=o.default.auth_callbacks,t}();e.__esModule=!0,e.default=v,o.default.setup(v)},function(t,e,n){"use strict";var i=n(3),o=n(7),r=n(15),s=n(16),a=n(17),c=n(4),u=n(18),l=n(19),h=n(26),p=n(27),f=n(28),d=n(29),y={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:c.ScriptReceivers,DependenciesReceivers:i.DependenciesReceivers,getDefaultStrategy:p.default,Transports:l.default,transportConnectionInitializer:f.default,HTTPFactory:d.default,TimelineTransport:u.default,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(t){var e=this;window.Pusher=t;var n=function(){e.onDocumentBody(t.ready)};window.JSON?n():i.Dependencies.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:o.default,jsonp:r.default}},onDocumentBody:function(t){var e=this;document.body?t():setTimeout(function(){e.onDocumentBody(t)},0)},createJSONPRequest:function(t,e){return new a.default(t,e)},createScriptRequest:function(t){return new s.default(t)},getLocalStorage:function(){try{return window.localStorage}catch(t){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return h.Network},createWebSocket:function(t){return new(this.getWebSocketAPI())(t)},createSocketRequest:function(t,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(t,e);if(this.isXDRSupported(0===e.indexOf("https:")))return this.HTTPFactory.createXDR(t,e);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var t=this.getXHRAPI();return Boolean(t)&&void 0!==(new t).withCredentials},isXDRSupported:function(t){var e=t?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===e},addUnloadListener:function(t){void 0!==window.addEventListener?window.addEventListener("unload",t,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",t)},removeUnloadListener:function(t){void 0!==window.addEventListener?window.removeEventListener("unload",t,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",t)}};e.__esModule=!0,e.default=y},function(t,e,n){"use strict";var i=n(4),o=n(5),r=n(6);e.DependenciesReceivers=new i.ScriptReceiverFactory("_pusher_dependencies","Pusher.DependenciesReceivers"),e.Dependencies=new r.default({cdn_http:o.default.cdn_http,cdn_https:o.default.cdn_https,version:o.default.VERSION,suffix:o.default.dependency_suffix,receivers:e.DependenciesReceivers})},function(t,e){"use strict";var n=function(){function t(t,e){this.lastId=0,this.prefix=t,this.name=e}return t.prototype.create=function(t){this.lastId++;var e=this.lastId,n=this.prefix+e,i=this.name+"["+e+"]",o=!1,r=function(){o||(t.apply(null,arguments),o=!0)};return this[e]=r,{number:e,id:n,name:i,callback:r}},t.prototype.remove=function(t){delete this[t.number]},t}();e.ScriptReceiverFactory=n,e.ScriptReceivers=new n("_pusher_script_","Pusher.ScriptReceivers")},function(t,e){"use strict";var n={VERSION:"4.2.2",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,ws_path:"",sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12e4,pong_timeout:3e4,unavailable_timeout:1e4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:".min"};e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var i=n(4),o=n(2),r=function(){function t(t){this.options=t,this.receivers=t.receivers||i.ScriptReceivers,this.loading={}}return t.prototype.load=function(t,e,n){var i=this;if(i.loading[t]&&i.loading[t].length>0)i.loading[t].push(n);else{i.loading[t]=[n];var r=o.default.createScriptRequest(i.getPath(t,e)),s=i.receivers.create(function(e){if(i.receivers.remove(s),i.loading[t]){var n=i.loading[t];delete i.loading[t];for(var o=function(t){t||r.cleanup()},a=0;a<n.length;a++)n[a](e,o)}});r.send(s)}},t.prototype.getRoot=function(t){var e,n=o.default.getDocument().location.protocol;return e=t&&t.encrypted||"https:"===n?this.options.cdn_https:this.options.cdn_http,e.replace(/\/*$/,"")+"/"+this.options.version},t.prototype.getPath=function(t,e){return this.getRoot(e)+"/"+t+this.options.suffix+".js"},t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=n(8),o=n(2),r=n(14),s=function(t,e,n){var s,a=this;s=o.default.createXHR(),s.open("POST",a.options.authEndpoint,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var c in this.authOptions.headers)s.setRequestHeader(c,this.authOptions.headers[c]);return s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){var t,e=!1;try{t=JSON.parse(s.responseText),e=!0}catch(t){n(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+s.responseText)}e&&n(!1,t)}else{var o=r.default.buildLogSuffix("authenticationEndpoint");i.default.warn("Couldn't retrieve authentication info. "+s.status+"Clients must be authenticated to join private or presence channels. "+o),n(!0,s.status)}},s.send(this.composeQuery(e)),s};e.__esModule=!0,e.default=s},function(t,e,n){"use strict";var i=n(9),o=n(1),r={debug:function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];o.default.log&&o.default.log(i.stringify.apply(this,arguments))},warn:function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=i.stringify.apply(this,arguments);o.default.log?o.default.log(n):window.console&&(window.console.warn?window.console.warn(n):window.console.log&&window.console.log(n))}};e.__esModule=!0,e.default=r},function(t,e,n){"use strict";function i(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=0;o<e.length;o++){var r=e[o];for(var s in r)r[s]&&r[s].constructor&&r[s].constructor===Object?t[s]=i(t[s]||{},r[s]):t[s]=r[s]}return t}function o(){for(var t=["Pusher"],e=0;e<arguments.length;e++)"string"==typeof arguments[e]?t.push(arguments[e]):t.push(_(arguments[e]));return t.join(" : ")}function r(t,e){var n=Array.prototype.indexOf;if(null===t)return-1;if(n&&t.indexOf===n)return t.indexOf(e);for(var i=0,o=t.length;i<o;i++)if(t[i]===e)return i;return-1}function s(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function a(t){var e=[];return s(t,function(t,n){e.push(n)}),e}function c(t){var e=[];return s(t,function(t){e.push(t)}),e}function u(t,e,n){for(var i=0;i<t.length;i++)e.call(n||window,t[i],i,t)}function l(t,e){for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i,t,n));return n}function h(t,e){var n={};return s(t,function(t,i){n[i]=e(t)}),n}function p(t,e){e=e||function(t){return!!t};for(var n=[],i=0;i<t.length;i++)e(t[i],i,t,n)&&n.push(t[i]);return n}function f(t,e){var n={};return s(t,function(i,o){(e&&e(i,o,t,n)||Boolean(i))&&(n[o]=i)}),n}function d(t){var e=[];return s(t,function(t,n){e.push([n,t])}),e}function y(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1}function v(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0}function g(t){return h(t,function(t){return"object"==(void 0===t?"undefined":_typeof(t))&&(t=_(t)),encodeURIComponent(w.default(t.toString()))})}function m(t){return l(d(g(f(t,function(t){return void 0!==t}))),k.default.method("join","=")).join("&")}function b(t){var e=[],n=[];return function t(i,o){var r,s,a;switch(void 0===i?"undefined":_typeof(i)){case"object":if(!i)return null;for(r=0;r<e.length;r+=1)if(e[r]===i)return{$ref:n[r]};if(e.push(i),n.push(o),"[object Array]"===Object.prototype.toString.apply(i))for(a=[],r=0;r<i.length;r+=1)a[r]=t(i[r],o+"["+r+"]");else{a={};for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(a[s]=t(i[s],o+"["+JSON.stringify(s)+"]"))}return a;case"number":case"string":case"boolean":return i}}(t,"$")}function _(t){try{return JSON.stringify(t)}catch(e){return JSON.stringify(b(t))}}var w=n(10),k=n(11);e.extend=i,e.stringify=o,e.arrayIndexOf=r,e.objectApply=s,e.keys=a,e.values=c,e.apply=u,e.map=l,e.mapObject=h,e.filter=p,e.filterObject=f,e.flatten=d,e.any=y,e.all=v,e.encodeParamsObject=g,e.buildQueryString=m,e.decycleObject=b,e.safeJSONStringify=_},function(t,e,n){"use strict";function i(t){return p(l(t))}e.__esModule=!0,e.default=i;for(var o=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s={},a=0,c=r.length;a<c;a++)s[r.charAt(a)]=a;var u=function(t){var e=t.charCodeAt(0);return e<128?t:e<2048?o(192|e>>>6)+o(128|63&e):o(224|e>>>12&15)+o(128|e>>>6&63)+o(128|63&e)},l=function(t){return t.replace(/[^\x00-\x7F]/g,u)},h=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[r.charAt(n>>>18),r.charAt(n>>>12&63),e>=2?"=":r.charAt(n>>>6&63),e>=1?"=":r.charAt(63&n)].join("")},p=window.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,h)}},function(t,e,n){"use strict";var i=n(12),o={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(t){return new i.OneOffTimer(0,t)},method:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1);return function(e){return e[t].apply(e,i.concat(arguments))}}};e.__esModule=!0,e.default=o},function(t,e,n){"use strict";function i(t){window.clearTimeout(t)}function o(t){window.clearInterval(t)}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(13),a=function(t){function e(e,n){t.call(this,setTimeout,i,e,function(t){return n(),null})}return r(e,t),e}(s.default);e.OneOffTimer=a;var c=function(t){function e(e,n){t.call(this,setInterval,o,e,function(t){return n(),t})}return r(e,t),e}(s.default);e.PeriodicTimer=c},function(t,e){"use strict";var n=function(){function t(t,e,n,i){var o=this;this.clear=e,this.timer=t(function(){o.timer&&(o.timer=i(o.timer))},n)}return t.prototype.isRunning=function(){return null!==this.timer},t.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},t}();e.__esModule=!0,e.default=n},function(t,e){"use strict";var n={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"}}},i=function(t){var i=n.urls[t];if(!i)return"";var o;return i.fullUrl?o=i.fullUrl:i.path&&(o=n.baseUrl+i.path),o?"See: "+o:""};e.__esModule=!0,e.default={buildLogSuffix:i}},function(t,e,n){"use strict";var i=n(8),o=function(t,e,n){void 0!==this.authOptions.headers&&i.default.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var o=t.nextAuthCallbackID.toString();t.nextAuthCallbackID++;var r=t.getDocument(),s=r.createElement("script");t.auth_callbacks[o]=function(t){n(!1,t)};var a="Pusher.auth_callbacks['"+o+"']";s.src=this.options.authEndpoint+"?callback="+encodeURIComponent(a)+"&"+this.composeQuery(e);var c=r.getElementsByTagName("head")[0]||r.documentElement;c.insertBefore(s,c.firstChild)};e.__esModule=!0,e.default=o},function(t,e){"use strict";var n=function(){function t(t){this.src=t}return t.prototype.send=function(t){var e=this,n="Error loading "+e.src;e.script=document.createElement("script"),e.script.id=t.id,e.script.src=e.src,e.script.type="text/javascript",e.script.charset="UTF-8",e.script.addEventListener?(e.script.onerror=function(){t.callback(n)},e.script.onload=function(){t.callback(null)}):e.script.onreadystatechange=function(){"loaded"!==e.script.readyState&&"complete"!==e.script.readyState||t.callback(null)},void 0===e.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(e.errorScript=document.createElement("script"),e.errorScript.id=t.id+"_error",e.errorScript.text=t.name+"('"+n+"');",e.script.async=e.errorScript.async=!1):e.script.async=!0;var i=document.getElementsByTagName("head")[0];i.insertBefore(e.script,i.firstChild),e.errorScript&&i.insertBefore(e.errorScript,e.script.nextSibling)},t.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},t}();e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var i=n(9),o=n(2),r=function(){function t(t,e){this.url=t,this.data=e}return t.prototype.send=function(t){if(!this.request){var e=i.buildQueryString(this.data),n=this.url+"/"+t.number+"?"+e;this.request=o.default.createScriptRequest(n),this.request.send(t)}},t.prototype.cleanup=function(){this.request&&this.request.cleanup()},t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=n(2),o=n(4),r=function(t,e){return function(n,r){var s="http"+(e?"s":"")+"://",a=s+(t.host||t.options.host)+t.options.path,c=i.default.createJSONPRequest(a,n),u=i.default.ScriptReceivers.create(function(e,n){o.ScriptReceivers.remove(u),c.cleanup(),n&&n.host&&(t.host=n.host),r&&r(e,n)});c.send(u)}},s={name:"jsonp",getAgent:r};e.__esModule=!0,e.default=s},function(t,e,n){"use strict";var i=n(20),o=n(22),r=n(21),s=n(2),a=n(3),c=n(9),u=new o.default({file:"sockjs",urls:r.sockjs,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(t,e){return new window.SockJS(t,null,{js_path:a.Dependencies.getPath("sockjs",{encrypted:e.encrypted}),ignore_null_origin:e.ignoreNullOrigin})},beforeOpen:function(t,e){t.send(JSON.stringify({path:e}))}}),l={isSupported:function(t){return s.default.isXDRSupported(t.encrypted)}},h=new o.default(c.extend({},i.streamingConfiguration,l)),p=new o.default(c.extend({},i.pollingConfiguration,l));i.default.xdr_streaming=h,i.default.xdr_polling=p,i.default.sockjs=u,e.__esModule=!0,e.default=i.default},function(t,e,n){"use strict";var i=n(21),o=n(22),r=n(9),s=n(2),a=new o.default({urls:i.ws,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(s.default.getWebSocketAPI())},isSupported:function(){return Boolean(s.default.getWebSocketAPI())},getSocket:function(t){return s.default.createWebSocket(t)}}),c={urls:i.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}};e.streamingConfiguration=r.extend({getSocket:function(t){return s.default.HTTPFactory.createStreamingSocket(t)}},c),e.pollingConfiguration=r.extend({getSocket:function(t){return s.default.HTTPFactory.createPollingSocket(t)}},c);var u={isSupported:function(){return s.default.isXHRSupported()}},l=new o.default(r.extend({},e.streamingConfiguration,u)),h=new o.default(r.extend({},e.pollingConfiguration,u)),p={ws:a,xhr_streaming:l,xhr_polling:h};e.__esModule=!0,e.default=p},function(t,e,n){"use strict";function i(t,e,n){return t+(e.encrypted?"s":"")+"://"+(e.encrypted?e.hostEncrypted:e.hostUnencrypted)+n}function o(t,e){return"/app/"+t+"?protocol="+r.default.PROTOCOL+"&client=js&version="+r.default.VERSION+(e?"&"+e:"")}var r=n(5);e.ws={getInitial:function(t,e){return i("ws",e,(e.httpPath||"")+o(t,"flash=false"))}},e.http={getInitial:function(t,e){return i("http",e,(e.httpPath||"/pusher")+o(t))}},e.sockjs={getInitial:function(t,e){return i("http",e,e.httpPath||"/pusher")},getPath:function(t,e){return o(t)}}},function(t,e,n){"use strict";var i=n(23),o=function(){function t(t){this.hooks=t}return t.prototype.isSupported=function(t){return this.hooks.isSupported(t)},t.prototype.createConnection=function(t,e,n,o){return new i.default(this.hooks,t,e,n,o)},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(11),r=n(9),s=n(24),a=n(8),c=n(2),u=function(t){function e(e,n,i,o,r){t.call(this),this.initialize=c.default.transportConnectionInitializer,this.hooks=e,this.name=n,this.priority=i,this.key=o,this.options=r,this.state="new",this.timeline=r.timeline,this.activityTimeout=r.activityTimeout,this.id=this.timeline.generateUniqueID()}return i(e,t),e.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},e.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},e.prototype.connect=function(){var t=this;if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(e){return o.default.defer(function(){t.onError(e),t.changeState("closed")}),!1}return this.bindListeners(),a.default.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0},e.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},e.prototype.send=function(t){var e=this;return"open"===this.state&&(o.default.defer(function(){e.socket&&e.socket.send(t)}),!0)},e.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},e.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},e.prototype.onError=function(t){this.emit("error",{type:"WebSocketError",error:t}),this.timeline.error(this.buildTimelineMessage({error:t.toString()}))},e.prototype.onClose=function(t){t?this.changeState("closed",{code:t.code,reason:t.reason,wasClean:t.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},e.prototype.onMessage=function(t){this.emit("message",t)},e.prototype.onActivity=function(){this.emit("activity")},e.prototype.bindListeners=function(){var t=this;this.socket.onopen=function(){t.onOpen()},this.socket.onerror=function(e){t.onError(e)},this.socket.onclose=function(e){t.onClose(e)},this.socket.onmessage=function(e){t.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=function(){t.onActivity()})},e.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},e.prototype.changeState=function(t,e){this.state=t,this.timeline.info(this.buildTimelineMessage({state:t,params:e})),this.emit(t,e)},e.prototype.buildTimelineMessage=function(t){return r.extend({cid:this.id},t)},e}(s.default);e.__esModule=!0,e.default=u},function(t,e,n){"use strict";var i=n(9),o=n(25),r=function(){function t(t){this.callbacks=new o.default,this.global_callbacks=[],this.failThrough=t}return t.prototype.bind=function(t,e,n){return this.callbacks.add(t,e,n),this},t.prototype.bind_global=function(t){return this.global_callbacks.push(t),this},t.prototype.unbind=function(t,e,n){return this.callbacks.remove(t,e,n),this},t.prototype.unbind_global=function(t){return t?(this.global_callbacks=i.filter(this.global_callbacks||[],function(e){return e!==t}),this):(this.global_callbacks=[],this)},t.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},t.prototype.emit=function(t,e){var n;for(n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](t,e);var i=this.callbacks.get(t);if(i&&i.length>0)for(n=0;n<i.length;n++)i[n].fn.call(i[n].context||window,e);else this.failThrough&&this.failThrough(t,e);return this},t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";function i(t){return"_"+t}var o=n(9),r=function(){function t(){this._callbacks={}}return t.prototype.get=function(t){return this._callbacks[i(t)]},t.prototype.add=function(t,e,n){var o=i(t);this._callbacks[o]=this._callbacks[o]||[],this._callbacks[o].push({fn:e,context:n})},t.prototype.remove=function(t,e,n){if(!t&&!e&&!n)return void(this._callbacks={});var r=t?[i(t)]:o.keys(this._callbacks);e||n?this.removeCallback(r,e,n):this.removeAllCallbacks(r)},t.prototype.removeCallback=function(t,e,n){o.apply(t,function(t){this._callbacks[t]=o.filter(this._callbacks[t]||[],function(t){return e&&e!==t.fn||n&&n!==t.context}),0===this._callbacks[t].length&&delete this._callbacks[t]},this)},t.prototype.removeAllCallbacks=function(t){o.apply(t,function(t){delete this._callbacks[t]},this)},t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(24),r=function(t){function e(){t.call(this);var e=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1))}return i(e,t),e.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},e}(o.default);e.NetInfo=r,e.Network=new r},function(t,e){"use strict";var n=function(t){var e;return e=t.encrypted?[":best_connected_ever",":ws_loop",[":delayed",2e3,[":http_fallback_loop"]]]:[":best_connected_ever",":ws_loop",[":delayed",2e3,[":wss_loop"]],[":delayed",5e3,[":http_fallback_loop"]]],[[":def","ws_options",{hostUnencrypted:t.wsHost+":"+t.wsPort,hostEncrypted:t.wsHost+":"+t.wssPort,httpPath:t.wsPath}],[":def","wss_options",[":extend",":ws_options",{
encrypted:!0}]],[":def","sockjs_options",{hostUnencrypted:t.httpHost+":"+t.httpPort,hostEncrypted:t.httpHost+":"+t.httpsPort,httpPath:t.httpPath}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:t.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:t.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def_transport","xhr_streaming","xhr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xdr_streaming","xdr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":sockjs_options"],[":def_transport","xdr_polling","xdr_polling",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","streaming_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_streaming"],":xhr_streaming",":xdr_streaming"]]],[":def","polling_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_polling"],":xhr_polling",":xdr_polling"]]],[":def","http_loop",[":if",[":is_supported",":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4e3,[":polling_loop"]]],[":polling_loop"]]],[":def","http_fallback_loop",[":if",[":is_supported",":http_loop"],[":http_loop"],[":sockjs_loop"]]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],e,":http_fallback_loop"]]]]]};e.__esModule=!0,e.default=n},function(t,e,n){"use strict";function i(){var t=this;t.timeline.info(t.buildTimelineMessage({transport:t.name+(t.options.encrypted?"s":"")})),t.hooks.isInitialized()?t.changeState("initialized"):t.hooks.file?(t.changeState("initializing"),o.Dependencies.load(t.hooks.file,{encrypted:t.options.encrypted},function(e,n){t.hooks.isInitialized()?(t.changeState("initialized"),n(!0)):(e&&t.onError(e),t.onClose(),n(!1))})):t.onClose()}var o=n(3);e.__esModule=!0,e.default=i},function(t,e,n){"use strict";var i=n(30),o=n(32);o.default.createXDR=function(t,e){return this.createRequest(i.default,t,e)},e.__esModule=!0,e.default=o.default},function(t,e,n){"use strict";var i=n(31),o={getRequest:function(t){var e=new window.XDomainRequest;return e.ontimeout=function(){t.emit("error",new i.RequestTimedOut),t.close()},e.onerror=function(e){t.emit("error",e),t.close()},e.onprogress=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText)},e.onload=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText),t.emit("finished",200),t.close()},e},abortRequest:function(t){t.ontimeout=t.onerror=t.onprogress=t.onload=null,t.abort()}};e.__esModule=!0,e.default=o},function(t,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.BadEventName=i;var o=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.RequestTimedOut=o;var r=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.TransportPriorityTooLow=r;var s=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.TransportClosed=s;var a=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.UnsupportedTransport=a;var c=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.UnsupportedStrategy=c},function(t,e,n){"use strict";var i=n(33),o=n(34),r=n(36),s=n(37),a=n(38),c={createStreamingSocket:function(t){return this.createSocket(r.default,t)},createPollingSocket:function(t){return this.createSocket(s.default,t)},createSocket:function(t,e){return new o.default(t,e)},createXHR:function(t,e){return this.createRequest(a.default,t,e)},createRequest:function(t,e,n){return new i.default(t,e,n)}};e.__esModule=!0,e.default=c},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(2),r=n(24),a=function(t){function e(e,n,i){t.call(this),this.hooks=e,this.method=n,this.url=i}return i(e,t),e.prototype.start=function(t){var e=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){e.close()},o.default.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(t)},e.prototype.close=function(){this.unloader&&(o.default.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},e.prototype.onChunk=function(t,e){for(;;){var n=this.advanceBuffer(e);if(!n)break;this.emit("chunk",{status:t,data:n})}this.isBufferTooLong(e)&&this.emit("buffer_too_long")},e.prototype.advanceBuffer=function(t){var e=t.slice(this.position),n=e.indexOf("\n");return-1!==n?(this.position+=n+1,e.slice(0,n)):null},e.prototype.isBufferTooLong=function(t){return this.position===t.length&&t.length>262144},e}(r.default);e.__esModule=!0,e.default=a},function(t,e,n){"use strict";function i(t){var e=/([^\?]*)\/*(\??.*)/.exec(t);return{base:e[1],queryString:e[2]}}function o(t,e){return t.base+"/"+e+"/xhr_send"}function r(t){return t+(-1===t.indexOf("?")?"?":"&")+"t="+ +new Date+"&n="+p++}function s(t,e){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t);return n[1]+e+n[3]}function a(t){return Math.floor(Math.random()*t)}function c(t){for(var e=[],n=0;n<t;n++)e.push(a(32).toString(32));return e.join("")}var u=n(35),l=n(11),h=n(2),p=1,f=function(){function t(t,e){this.hooks=t,this.session=a(1e3)+"/"+c(8),this.location=i(e),this.readyState=u.default.CONNECTING,this.openStream()}return t.prototype.send=function(t){return this.sendRaw(JSON.stringify([t]))},t.prototype.ping=function(){this.hooks.sendHeartbeat(this)},t.prototype.close=function(t,e){this.onClose(t,e,!0)},t.prototype.sendRaw=function(t){if(this.readyState!==u.default.OPEN)return!1;try{return h.default.createSocketRequest("POST",r(o(this.location,this.session))).start(t),!0}catch(t){return!1}},t.prototype.reconnect=function(){this.closeStream(),this.openStream()},t.prototype.onClose=function(t,e,n){this.closeStream(),this.readyState=u.default.CLOSED,this.onclose&&this.onclose({code:t,reason:e,wasClean:n})},t.prototype.onChunk=function(t){if(200===t.status){this.readyState===u.default.OPEN&&this.onActivity();var e;switch(t.data.slice(0,1)){case"o":e=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(e);break;case"a":e=JSON.parse(t.data.slice(1)||"[]");for(var i=0;i<e.length;i++)this.onEvent(e[i]);break;case"m":e=JSON.parse(t.data.slice(1)||"null"),this.onEvent(e);break;case"h":this.hooks.onHeartbeat(this);break;case"c":e=JSON.parse(t.data.slice(1)||"[]"),this.onClose(e[0],e[1],!0)}}},t.prototype.onOpen=function(t){this.readyState===u.default.CONNECTING?(t&&t.hostname&&(this.location.base=s(this.location.base,t.hostname)),this.readyState=u.default.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},t.prototype.onEvent=function(t){this.readyState===u.default.OPEN&&this.onmessage&&this.onmessage({data:t})},t.prototype.onActivity=function(){this.onactivity&&this.onactivity()},t.prototype.onError=function(t){this.onerror&&this.onerror(t)},t.prototype.openStream=function(){var t=this;this.stream=h.default.createSocketRequest("POST",r(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(e){t.onChunk(e)}),this.stream.bind("finished",function(e){t.hooks.onFinished(t,e)}),this.stream.bind("buffer_too_long",function(){t.reconnect()});try{this.stream.start()}catch(e){l.default.defer(function(){t.onError(e),t.onClose(1006,"Could not start streaming",!1)})}},t.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},t}();e.__esModule=!0,e.default=f},function(t,e){"use strict";var n;!function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSED=3]="CLOSED"}(n||(n={})),e.__esModule=!0,e.default=n},function(t,e){"use strict";var n={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr_streaming"+t.queryString},onHeartbeat:function(t){t.sendRaw("[]")},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){t.onClose(1006,"Connection interrupted ("+e+")",!1)}};e.__esModule=!0,e.default=n},function(t,e){"use strict";var n={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr"+t.queryString},onHeartbeat:function(){},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){200===e?t.reconnect():t.onClose(1006,"Connection interrupted ("+e+")",!1)}};e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var i=n(2),o={getRequest:function(t){var e=i.default.getXHRAPI(),n=new e;return n.onreadystatechange=n.onprogress=function(){switch(n.readyState){case 3:n.responseText&&n.responseText.length>0&&t.onChunk(n.status,n.responseText);break;case 4:n.responseText&&n.responseText.length>0&&t.onChunk(n.status,n.responseText),t.emit("finished",n.status),t.close()}},n},abortRequest:function(t){t.onreadystatechange=null,t.abort()}};e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=n(9),o=n(11),r=n(40),s=function(){function t(t,e,n){this.key=t,this.session=e,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}return t.prototype.log=function(t,e){t<=this.options.level&&(this.events.push(i.extend({},e,{timestamp:o.default.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},t.prototype.error=function(t){this.log(r.default.ERROR,t)},t.prototype.info=function(t){this.log(r.default.INFO,t)},t.prototype.debug=function(t){this.log(r.default.DEBUG,t)},t.prototype.isEmpty=function(){return 0===this.events.length},t.prototype.send=function(t,e){var n=this,o=i.extend({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(o,function(t,i){t||n.sent++,e&&e(t,i)}),!0},t.prototype.generateUniqueID=function(){return++this.uniqueID},t}();e.__esModule=!0,e.default=s},function(t,e){"use strict";var n;!function(t){t[t.ERROR=3]="ERROR",t[t.INFO=6]="INFO",t[t.DEBUG=7]="DEBUG"}(n||(n={})),e.__esModule=!0,e.default=n},function(t,e,n){"use strict";function i(t){return function(e){return[t.apply(this,arguments),e]}}function o(t){return"string"==typeof t&&":"===t.charAt(0)}function r(t,e){return e[t.slice(1)]}function s(t,e){if(0===t.length)return[[],e];var n=u(t[0],e),i=s(t.slice(1),n[1]);return[[n[0]].concat(i[0]),i[1]]}function a(t,e){if(!o(t))return[t,e];var n=r(t,e);if(void 0===n)throw"Undefined symbol "+t;return[n,e]}function c(t,e){if(o(t[0])){var n=r(t[0],e);if(t.length>1){if("function"!=typeof n)throw"Calling non-function "+t[0];var i=[l.extend({},e)].concat(l.map(t.slice(1),function(t){return u(t,l.extend({},e))[0]}));return n.apply(this,i)}return[n,e]}return s(t,e)}function u(t,e){return"string"==typeof t?a(t,e):"object"==(void 0===t?"undefined":_typeof(t))&&t instanceof Array&&t.length>0?c(t,e):[t,e]}var l=n(9),h=n(11),p=n(42),f=n(31),d=n(56),y=n(57),v=n(58),g=n(59),m=n(60),b=n(61),_=n(62),w=n(2),k=w.default.Transports;e.build=function(t,e){return u(t,l.extend({},C,e))[1].strategy};var S={isSupported:function(){return!1},connect:function(t,e){var n=h.default.defer(function(){e(new f.UnsupportedStrategy)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},C={extend:function(t,e,n){return[l.extend({},e,n),t]},def:function(t,e,n){if(void 0!==t[e])throw"Redefining symbol "+e;return t[e]=n,[void 0,t]},def_transport:function(t,e,n,i,o,r){var s=k[n];if(!s)throw new f.UnsupportedTransport(n);var a;a=t.enabledTransports&&-1===l.arrayIndexOf(t.enabledTransports,e)||t.disabledTransports&&-1!==l.arrayIndexOf(t.disabledTransports,e)?S:new d.default(e,i,r?r.getAssistant(s):s,l.extend({key:t.key,encrypted:t.encrypted,timeline:t.timeline,ignoreNullOrigin:t.ignoreNullOrigin},o));var u=t.def(t,e,a)[1];return u.Transports=t.Transports||{},u.Transports[e]=a,[void 0,u]},transport_manager:i(function(t,e){return new p.default(e)}),sequential:i(function(t,e){var n=Array.prototype.slice.call(arguments,2);return new y.default(n,e)}),cached:i(function(t,e,n){return new g.default(n,t.Transports,{ttl:e,timeline:t.timeline,encrypted:t.encrypted})}),first_connected:i(function(t,e){return new _.default(e)}),best_connected_ever:i(function(){var t=Array.prototype.slice.call(arguments,1);return new v.default(t)}),delayed:i(function(t,e,n){return new m.default(n,{delay:e})}),if:i(function(t,e,n,i){return new b.default(e,n,i)}),is_supported:i(function(t,e){return function(){return e.isSupported()}})}},function(t,e,n){"use strict";var i=n(43),o=function(){function t(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}return t.prototype.getAssistant=function(t){return i.default.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},t.prototype.isAlive=function(){return this.livesLeft>0},t.prototype.reportDeath=function(){this.livesLeft-=1},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=n(44),o=n(45),r=n(48),s=n(49),a=n(50),c=n(51),u=n(52),l=n(54),h=n(55),p={createChannels:function(){return new h.default},createConnectionManager:function(t,e){return new l.default(t,e)},createChannel:function(t,e){return new u.default(t,e)},createPrivateChannel:function(t,e){return new c.default(t,e)},createPresenceChannel:function(t,e){return new a.default(t,e)},createTimelineSender:function(t,e){return new s.default(t,e)},createAuthorizer:function(t,e){return e.authorizer?e.authorizer(t,e):new r.default(t,e)},createHandshake:function(t,e){return new o.default(t,e)},createAssistantToTheTransportManager:function(t,e,n){return new i.default(t,e,n)}};e.__esModule=!0,e.default=p},function(t,e,n){"use strict";var i=n(11),o=n(9),r=function(){function t(t,e,n){this.manager=t,this.transport=e,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}return t.prototype.createConnection=function(t,e,n,r){var s=this;r=o.extend({},r,{activityTimeout:this.pingDelay});var a=this.transport.createConnection(t,e,n,r),c=null,u=function u(){a.unbind("open",u),a.bind("closed",l),c=i.default.now()},l=function l(t){if(a.unbind("closed",l),1002===t.code||1003===t.code)s.manager.reportDeath();else if(!t.wasClean&&c){var e=i.default.now()-c;e<2*s.maxPingDelay&&(s.manager.reportDeath(),s.pingDelay=Math.max(e/2,s.minPingDelay))}};return a.bind("open",u),a},t.prototype.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=n(9),o=n(46),r=n(47),s=function(){function t(t,e){this.transport=t,this.callback=e,this.bindListeners()}return t.prototype.close=function(){this.unbindListeners(),this.transport.close()},t.prototype.bindListeners=function(){var t=this;this.onMessage=function(e){t.unbindListeners();var n;try{n=o.processHandshake(e)}catch(e){return t.finish("error",{error:e}),void t.transport.close()}"connected"===n.action?t.finish("connected",{connection:new r.default(n.id,t.transport),activityTimeout:n.activityTimeout}):(t.finish(n.action,{error:n.error}),t.transport.close())},this.onClosed=function(e){t.unbindListeners();var n=o.getCloseAction(e)||"backoff",i=o.getCloseError(e);t.finish(n,{error:i})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},t.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},t.prototype.finish=function(t,e){this.callback(i.extend({transport:this.transport,action:t},e))},t}();e.__esModule=!0,e.default=s},function(t,e){"use strict";e.decodeMessage=function(t){try{var e=JSON.parse(t.data);if("string"==typeof e.data)try{e.data=JSON.parse(e.data)}catch(t){if(!(t instanceof SyntaxError))throw t}return e}catch(e){throw{type:"MessageParseError",error:e,data:t.data}}},e.encodeMessage=function(t){return JSON.stringify(t)},e.processHandshake=function(t){if(t=e.decodeMessage(t),"pusher:connection_established"===t.event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},e.getCloseAction=function(t){return t.code<4e3?t.code>=1002&&t.code<=1004?"backoff":null:4e3===t.code?"ssl_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},e.getCloseError=function(t){return 1e3!==t.code&&1001!==t.code?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),r=n(24),s=n(46),a=n(8),c=function(t){function e(e,n){t.call(this),this.id=e,this.transport=n,this.activityTimeout=n.activityTimeout,this.bindListeners()}return i(e,t),e.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},e.prototype.send=function(t){return this.transport.send(t)},e.prototype.send_event=function(t,e,n){var i={event:t,data:e};return n&&(i.channel=n),a.default.debug("Event sent",i),this.send(s.encodeMessage(i))},e.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},e.prototype.close=function(){this.transport.close()},e.prototype.bindListeners=function(){var t=this,e={message:function(e){var n;try{n=s.decodeMessage(e)}catch(n){t.emit("error",{type:"MessageParseError",error:n,data:e.data})}if(void 0!==n){switch(a.default.debug("Event recd",n),n.event){case"pusher:error":t.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":t.emit("ping");break;case"pusher:pong":t.emit("pong")}t.emit("message",n)}},activity:function(){t.emit("activity")},error:function(e){t.emit("error",{type:"WebSocketError",error:e})},closed:function(e){n(),e&&e.code&&t.handleCloseEvent(e),t.transport=null,t.emit("closed")}},n=function(){o.objectApply(e,function(e,n){t.transport.unbind(n,e)})};o.objectApply(e,function(e,n){t.transport.bind(n,e)})},e.prototype.handleCloseEvent=function(t){var e=s.getCloseAction(t),n=s.getCloseError(t);n&&this.emit("error",n),e&&this.emit(e)},e}(r.default);e.__esModule=!0,e.default=c},function(t,e,n){"use strict";var i=n(2),o=function(){function t(t,e){this.channel=t;var n=e.authTransport;if(void 0===i.default.getAuthorizers()[n])throw"'"+n+"' is not a recognized auth transport";this.type=n,this.options=e,this.authOptions=(e||{}).auth||{}}return t.prototype.composeQuery=function(t){var e="socket_id="+encodeURIComponent(t)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)e+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return e},t.prototype.authorize=function(e,n){return t.authorizers=t.authorizers||i.default.getAuthorizers(),t.authorizers[this.type].call(this,i.default,e,n)},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=n(2),o=function(){function t(t,e){this.timeline=t,this.options=e||{}}return t.prototype.send=function(t,e){this.timeline.isEmpty()||this.timeline.send(i.default.TimelineTransport.getAgent(this,t),e)},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(51),r=n(8),s=n(53),a=n(14),c=function(t){function e(e,n){t.call(this,e,n),this.members=new s.default}return i(e,t),e.prototype.authorize=function(e,n){var i=this;t.prototype.authorize.call(this,e,function(t,e){if(!t){if(void 0===e.channel_data){var o=a.default.buildLogSuffix("authenticationEndpoint");return r.default.warn("Invalid auth response for channel '"+i.name+"',expected 'channel_data' field. "+o),void n("Invalid auth response")}var s=JSON.parse(e.channel_data);i.members.setMyID(s.user_id)}n(t,e)})},e.prototype.handleEvent=function(t,e){switch(t){case"pusher_internal:subscription_succeeded":this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e),this.emit("pusher:subscription_succeeded",this.members));break;case"pusher_internal:member_added":var n=this.members.addMember(e);this.emit("pusher:member_added",n);break;case"pusher_internal:member_removed":var i=this.members.removeMember(e);i&&this.emit("pusher:member_removed",i);break;default:o.default.prototype.handleEvent.call(this,t,e)}},e.prototype.disconnect=function(){this.members.reset(),t.prototype.disconnect.call(this)},e}(o.default);e.__esModule=!0,e.default=c},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(43),r=n(52),s=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype.authorize=function(t,e){return o.default.createAuthorizer(this,this.pusher.config).authorize(t,e)},e}(r.default);e.__esModule=!0,e.default=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(24),r=n(31),s=n(8),a=function(t){function e(e,n){t.call(this,function(t,n){s.default.debug("No callbacks on "+e+" for "+t)}),this.name=e,this.pusher=n,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}return i(e,t),e.prototype.authorize=function(t,e){return e(!1,{})},e.prototype.trigger=function(t,e){if(0!==t.indexOf("client-"))throw new r.BadEventName("Event '"+t+"' does not start with 'client-'");return this.pusher.send_event(t,e,this.name)},e.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},e.prototype.handleEvent=function(t,e){0===t.indexOf("pusher_internal:")?"pusher_internal:subscription_succeeded"===t&&(this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e)):this.emit(t,e)},e.prototype.subscribe=function(){var t=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(e,n){e?t.handleEvent("pusher:subscription_error",n):t.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:t.name})}))},e.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},e.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},e.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},e}(o.default);e.__esModule=!0,e.default=a},function(t,e,n){"use strict";var i=n(9),o=function(){function t(){this.reset()}return t.prototype.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},t.prototype.each=function(t){var e=this;i.objectApply(this.members,function(n,i){t(e.get(i))})},t.prototype.setMyID=function(t){this.myID=t},t.prototype.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},t.prototype.addMember=function(t){return null===this.get(t.user_id)&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},t.prototype.removeMember=function(t){var e=this.get(t.user_id);return e&&(delete this.members[t.user_id],this.count--),e},t.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(24),r=n(12),s=n(8),a=n(9),c=n(2),u=function(t){function e(e,n){var i=this;t.call(this),this.key=e,this.options=n||{},this.state="initialized",this.connection=null,this.encrypted=!!n.encrypted,this.timeline=this.options.timeline,this.connectionCallbacks=this.buildConnectionCallbacks(),this.errorCallbacks=this.buildErrorCallbacks(),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var o=c.default.getNetwork();o.bind("online",function(){i.timeline.info({netinfo:"online"}),"connecting"!==i.state&&"unavailable"!==i.state||i.retryIn(0)}),o.bind("offline",function(){i.timeline.info({netinfo:"offline"}),i.connection&&i.sendActivityCheck()}),this.updateStrategy()}return i(e,t),e.prototype.connect=function(){if(!this.connection&&!this.runner){if(!this.strategy.isSupported())return void this.updateState("failed");this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},e.prototype.send=function(t){return!!this.connection&&this.connection.send(t)},e.prototype.send_event=function(t,e,n){return!!this.connection&&this.connection.send_event(t,e,n)},e.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},e.prototype.isEncrypted=function(){return this.encrypted},e.prototype.startConnecting=function(){var t=this,e=function e(n,i){n?t.runner=t.strategy.connect(0,e):"error"===i.action?(t.emit("error",{type:"HandshakeError",error:i.error}),t.timeline.error({handshakeError:i.error})):(t.abortConnecting(),t.handshakeCallbacks[i.action](i))};this.runner=this.strategy.connect(0,e)},e.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},e.prototype.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){this.abandonConnection().close()}},e.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})},e.prototype.retryIn=function(t){var e=this;this.timeline.info({action:"retry",delay:t}),t>0&&this.emit("connecting_in",Math.round(t/1e3)),this.retryTimer=new r.OneOffTimer(t||0,function(){e.disconnectInternally(),e.connect()})},e.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},e.prototype.setUnavailableTimer=function(){var t=this;this.unavailableTimer=new r.OneOffTimer(this.options.unavailableTimeout,function(){t.updateState("unavailable")})},e.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},e.prototype.sendActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new r.OneOffTimer(this.options.pongTimeout,function(){t.timeline.error({pong_timed_out:t.options.pongTimeout}),t.retryIn(0)})},e.prototype.resetActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new r.OneOffTimer(this.activityTimeout,function(){t.sendActivityCheck()}))},e.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},e.prototype.buildConnectionCallbacks=function(){var t=this;return{message:function(e){t.resetActivityCheck(),t.emit("message",e)},ping:function(){t.send_event("pusher:pong",{})},activity:function(){t.resetActivityCheck()},error:function(e){t.emit("error",{type:"WebSocketError",error:e})},closed:function(){t.abandonConnection(),t.shouldRetry()&&t.retryIn(1e3)}}},e.prototype.buildHandshakeCallbacks=function(t){var e=this;return a.extend({},t,{connected:function(t){e.activityTimeout=Math.min(e.options.activityTimeout,t.activityTimeout,t.connection.activityTimeout||1/0),e.clearUnavailableTimer(),e.setConnection(t.connection),e.socket_id=e.connection.id,e.updateState("connected",{socket_id:e.socket_id})}})},e.prototype.buildErrorCallbacks=function(){var t=this,e=function(_e){return function(n){n.error&&t.emit("error",{type:"WebSocketError",error:n.error}),_e(n)}};return{ssl_only:e(function(){t.encrypted=!0,t.updateStrategy(),t.retryIn(0)}),refused:e(function(){t.disconnect()}),backoff:e(function(){t.retryIn(1e3)}),retry:e(function(){t.retryIn(0)})}},e.prototype.setConnection=function(t){this.connection=t;for(var e in this.connectionCallbacks)this.connection.bind(e,this.connectionCallbacks[e]);this.resetActivityCheck()},e.prototype.abandonConnection=function(){if(this.connection){this.stopActivityCheck();for(var t in this.connectionCallbacks)this.connection.unbind(t,this.connectionCallbacks[t]);var e=this.connection;return this.connection=null,e}},e.prototype.updateState=function(t,e){var n=this.state;if(this.state=t,n!==t){var i=t;"connected"===i&&(i+=" with new socket ID "+e.socket_id),s.default.debug("State changed",n+" -> "+i),this.timeline.info({state:t,params:e}),this.emit("state_change",{previous:n,current:t}),this.emit(t,e)}},e.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},e}(o.default);e.__esModule=!0,e.default=u},function(t,e,n){"use strict";function i(t,e){return 0===t.indexOf("private-")?r.default.createPrivateChannel(t,e):0===t.indexOf("presence-")?r.default.createPresenceChannel(t,e):r.default.createChannel(t,e)}var o=n(9),r=n(43),s=function(){function t(){this.channels={}}return t.prototype.add=function(t,e){return this.channels[t]||(this.channels[t]=i(t,e)),this.channels[t]},t.prototype.all=function(){return o.values(this.channels)},t.prototype.find=function(t){return this.channels[t]},t.prototype.remove=function(t){var e=this.channels[t];return delete this.channels[t],e},t.prototype.disconnect=function(){o.objectApply(this.channels,function(t){t.disconnect()})},t}();e.__esModule=!0,e.default=s},function(t,e,n){"use strict";function i(t,e){return r.default.defer(function(){e(t)}),{abort:function(){},forceMinPriority:function(){}}}var o=n(43),r=n(11),s=n(31),a=n(9),c=function(){function t(t,e,n,i){this.name=t,this.priority=e,this.transport=n,this.options=i||{}}return t.prototype.isSupported=function(){return this.transport.isSupported({encrypted:this.options.encrypted})},t.prototype.connect=function(t,e){var n=this;if(!this.isSupported())return i(new s.UnsupportedStrategy,e);if(this.priority<t)return i(new s.TransportPriorityTooLow,e);var r=!1,c=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),u=null,l=function l(){c.unbind("initialized",l),c.connect()},h=function(){u=o.default.createHandshake(c,function(t){r=!0,d(),e(null,t)})},p=function(t){d(),e(t)},f=function(){d();var t;t=a.safeJSONStringify(c),e(new s.TransportClosed(t))},d=function(){c.unbind("initialized",l),c.unbind("open",h),c.unbind("error",p),c.unbind("closed",f)};return c.bind("initialized",l),c.bind("open",h),c.bind("error",p),c.bind("closed",f),c.initialize(),{abort:function(){r||(d(),u?u.close():c.close())},forceMinPriority:function(t){r||n.priority<t&&(u?u.close():c.close())}}},t}();e.__esModule=!0,e.default=c},function(t,e,n){"use strict";var i=n(9),o=n(11),r=n(12),s=function(){function t(t,e){this.strategies=t,this.loop=Boolean(e.loop),this.failFast=Boolean(e.failFast),this.timeout=e.timeout,this.timeoutLimit=e.timeoutLimit}return t.prototype.isSupported=function(){
return i.any(this.strategies,o.default.method("isSupported"))},t.prototype.connect=function(t,e){var n=this,i=this.strategies,o=0,r=this.timeout,s=null,a=function a(c,u){u?e(null,u):(o+=1,n.loop&&(o%=i.length),o<i.length?(r&&(r*=2,n.timeoutLimit&&(r=Math.min(r,n.timeoutLimit))),s=n.tryStrategy(i[o],t,{timeout:r,failFast:n.failFast},a)):e(!0))};return s=this.tryStrategy(i[o],t,{timeout:r,failFast:this.failFast},a),{abort:function(){s.abort()},forceMinPriority:function(e){t=e,s&&s.forceMinPriority(e)}}},t.prototype.tryStrategy=function(t,e,n,i){var o=null,s=null;return n.timeout>0&&(o=new r.OneOffTimer(n.timeout,function(){s.abort(),i(!0)})),s=t.connect(e,function(t,e){t&&o&&o.isRunning()&&!n.failFast||(o&&o.ensureAborted(),i(t,e))}),{abort:function(){o&&o.ensureAborted(),s.abort()},forceMinPriority:function(t){s.forceMinPriority(t)}}},t}();e.__esModule=!0,e.default=s},function(t,e,n){"use strict";function i(t,e,n){var i=s.map(t,function(t,i,o,r){return t.connect(e,n(i,r))});return{abort:function(){s.apply(i,r)},forceMinPriority:function(t){s.apply(i,function(e){e.forceMinPriority(t)})}}}function o(t){return s.all(t,function(t){return Boolean(t.error)})}function r(t){t.error||t.aborted||(t.abort(),t.aborted=!0)}var s=n(9),a=n(11),c=function(){function t(t){this.strategies=t}return t.prototype.isSupported=function(){return s.any(this.strategies,a.default.method("isSupported"))},t.prototype.connect=function(t,e){return i(this.strategies,t,function(t,n){return function(i,r){return n[t].error=i,i?void(o(n)&&e(!0)):(s.apply(n,function(t){t.forceMinPriority(r.transport.priority)}),void e(null,r))}})},t}();e.__esModule=!0,e.default=c},function(t,e,n){"use strict";function i(t){return"pusherTransport"+(t?"Encrypted":"Unencrypted")}function o(t){var e=c.default.getLocalStorage();if(e)try{var n=e[i(t)];if(n)return JSON.parse(n)}catch(e){s(t)}return null}function r(t,e,n){var o=c.default.getLocalStorage();if(o)try{o[i(t)]=l.safeJSONStringify({timestamp:a.default.now(),transport:e,latency:n})}catch(t){}}function s(t){var e=c.default.getLocalStorage();if(e)try{delete e[i(t)]}catch(t){}}var a=n(11),c=n(2),u=n(57),l=n(9),h=function(){function t(t,e,n){this.strategy=t,this.transports=e,this.ttl=n.ttl||18e5,this.encrypted=n.encrypted,this.timeline=n.timeline}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n=this.encrypted,i=o(n),c=[this.strategy];if(i&&i.timestamp+this.ttl>=a.default.now()){var l=this.transports[i.transport];l&&(this.timeline.info({cached:!0,transport:i.transport,latency:i.latency}),c.push(new u.default([l],{timeout:2*i.latency+1e3,failFast:!0})))}var h=a.default.now(),p=c.pop().connect(t,function i(o,u){o?(s(n),c.length>0?(h=a.default.now(),p=c.pop().connect(t,i)):e(o)):(r(n,u.transport.name,a.default.now()-h),e(null,u))});return{abort:function(){p.abort()},forceMinPriority:function(e){t=e,p&&p.forceMinPriority(e)}}},t}();e.__esModule=!0,e.default=h},function(t,e,n){"use strict";var i=n(12),o=function(){function t(t,e){var n=e.delay;this.strategy=t,this.options={delay:n}}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n,o=this.strategy,r=new i.OneOffTimer(this.options.delay,function(){n=o.connect(t,e)});return{abort:function(){r.ensureAborted(),n&&n.abort()},forceMinPriority:function(e){t=e,n&&n.forceMinPriority(e)}}},t}();e.__esModule=!0,e.default=o},function(t,e){"use strict";var n=function(){function t(t,e,n){this.test=t,this.trueBranch=e,this.falseBranch=n}return t.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},t.prototype.connect=function(t,e){return(this.test()?this.trueBranch:this.falseBranch).connect(t,e)},t}();e.__esModule=!0,e.default=n},function(t,e){"use strict";var n=function(){function t(t){this.strategy=t}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n=this.strategy.connect(t,function(t,i){i&&n.abort(),e(t,i)});return n},t}();e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var i=n(5);e.getGlobalConfig=function(){return{wsHost:i.default.host,wsPort:i.default.ws_port,wssPort:i.default.wss_port,wsPath:i.default.ws_path,httpHost:i.default.sockjs_host,httpPort:i.default.sockjs_http_port,httpsPort:i.default.sockjs_https_port,httpPath:i.default.sockjs_path,statsHost:i.default.stats_host,authEndpoint:i.default.channel_auth_endpoint,authTransport:i.default.channel_auth_transport,activity_timeout:i.default.activity_timeout,pong_timeout:i.default.pong_timeout,unavailable_timeout:i.default.unavailable_timeout}},e.getClusterConfig=function(t){return{wsHost:"ws-"+t+".pusher.com",httpHost:"sockjs-"+t+".pusher.com"}}}])}),function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="accordeon",defaults={duration:500,header:".js-accordeon-header",content:".js-accordeon-content",class:"js-accordeon-open"};Plugin.prototype={init:function(){this.setElements(),this.setEvents(),this.$element.hasClass(this.settings.class)?(this.$content.show(),this.$icon.removeClass("icon--arrowbottom").addClass("icon--arrowtop")):(this.$content.hide(),this.$icon.removeClass("icon--arrowtop").addClass("icon--arrowbottom"))},setElements:function(){this.$element=$(this.element),this.$header=$(this.element).find(this.settings.header),this.$content=$(this.element).find(this.settings.content),this.$icon=$(this.element).find(".icon")},setEvents:function(){this.$header.on("click",$.proxy(this.toggle,this))},toggle:function(e){this.$content.toggle(0),this.$element.hasClass(this.settings.class)?(this.$element.removeClass(this.settings.class),this.$icon.removeClass("icon--arrowtop").addClass("icon--arrowbottom")):(this.$element.addClass(this.settings.class),this.$icon.removeClass("icon--arrowbottom").addClass("icon--arrowtop"))}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="allo",defaults={interval:60};$.extend(Plugin.prototype,{init:function(){localStorage.removeItem("pusherDraws"),this.setElements(),this.setVars(),this.setEvents(),this.autoRefresh()},setElements:function(){this.$element=$(this.element),this.$templatings=this.$element.find(".js-alloGhost-templating"),this.$filterTemplating=this.$element.find(".js-allo-filters-templating"),this.$feedTemplating=this.$element.find(".js-allo-feed-templating"),this.$tweets=this.$element.find(".js-commTweet"),this.$draw=this.$element.find(".js-draw")},setVars:function(){this.pusher=null,this.refreshLiveInterval=12e4,this.refreshDrawInterval=3e4,this.commentsNb=10,this.isFiltering=0},setEvents:function(){var that=this;this.$element.on("click",".js-refreshAllo",$.proxy(function(e){clearInterval(that.$autoRefreshInterval),refreshPub("byclick"),this.refreshDatas(),that.autoRefresh(),e.preventDefault()},this)),this.$element.on("click",".js-openComment",$.proxy(function(e){this.showPhotoComment(e.target)},this)),this.$element.on("click",".js-closeComment",$.proxy(function(e){this.hidePhotoComment(e.target)},this)),this.$element.on("click",".js-poll-form-item",$.proxy(function(e){$(e.currentTarget).parents(".js-poll").polling($(e.currentTarget))},this)),$(document).on("click",".js-chatAskQuestion",$.proxy(function(e){$(".js-alloChatForm, .js-chatAskQuestion").toggleClass("is-hidden")},this)),$(document).on("click","#userAsking-publier",$.proxy(function(type){that.publier("question")},this)),$(document).on("click","#userAsking-publier--repondre",$.proxy(function(type){that.publier("reponse")},this)),this.$filterTemplating.templating({callback:function(){$(document).on("click",".js-validateFilter,.js-resetFilter",$.proxy(function(e){setTimeout(function(){$(".js-allo-feed-templating").data("plugin_lazyload").listTemplating(50),$(".js-feedItemError").toggleClass("is-show",$(".js-allo-feed-templating .isFiltered").length>0&&0==$(".js-allo-feed-templating .isFiltered--true.isFiltered").length)},500)},this))}}),this.$templatings.templating({callback:function(){that.$feedTemplating.hasClass("is-templated")?(that.isFiltering=1,that.$feedTemplating.data("templating-json",that.$feedTemplating.data("templating-jsonfeed")),that.$lazyloadPlugin.getFirstData(),that.onRefreshTemplate()):that.$lazyloadPlugin=that.$feedTemplating.lazyload({templatingCallback:function(){$("[data-templating]:not(.js-draw)").templating({callback:function(){$("[data-templating]:not(.js-draw)").templating({callback:function(){$("[data-templating]:not(.js-draw)").templating(),that.onRefreshTemplate()}}),that.onRefreshTemplate(),that.onRefreshLazyload()}}),that.onRefreshTemplate(),that.$draw.templating({callback:function(){if($("[data-templating]").templating({callback:function(){$("[data-templating]").templating({callback:function(){$("[data-templating]").templating(),that.onRefreshTemplate(),that.retrievePusherDatas()}}),that.onRefreshTemplate(),that.onRefreshShares()}}),that.$draw.length>0){$("[data-nbdrawed]").attr("data-nbdrawed",$(".draw__data--matches .js-teamLogo").length+$(".draw__data--groups .js-teamLogo").length),$("[data-nbnotdrawed]").attr("data-nbnotdrawed",$(".draw__pots .draw__team:not(.is-drawed)").length);var compet=that.$draw.data("pusherchannel");if(!compet||""===compet)return console.error("Pusher channel is not defined"),!1;that.pusherDatas(compet)}that.onRefreshTemplate(),that.$autoRefreshDrawInterval||(that.$autoRefreshDrawInterval=setInterval(function(){that.$draw.each(function(){$(this).data("plugin_templating").loadContent()})},that.refreshDrawInterval))}})}}).data("plugin_lazyload"),$(".js-filters").filters(),$(".js-feedItemError").toggleClass("is-show",$(".js-allo-feed-templating .isFiltered").length>0&&0==$(".js-allo-feed-templating .isFiltered--true.isFiltered").length),that.$resultTemplating=that.$element.find(".js-allo-resultFall-templating"),that.$resultTemplating.templating({callback:function(){$(".js-allo-resultFall-templating [data-templating]").templating({callback:function(e){setTimeout(function(){that.$resultTemplating.parents(".js-alloResultFall").css("min-height",that.$resultTemplating.parents(".js-alloResultFall").height())},1e3)}})}})}})},autoRefresh:function(){var that=this;this.$autoRefreshInterval=setInterval(function(){refreshPub("byclick"),that.refreshDatas()},that.refreshLiveInterval)},refreshDatas:function(){this.$templatings.each(function(){$(this).data("plugin_templating").loadContent()})},refreshTweets:function(){this.$tweets.each(function(){$(this).data("loaded")||(twttr.widgets.createTweet($(this).data("tweetid"),document.getElementById($(this).attr("id"))),$(this).data("loaded",!0))})},onRefreshTemplate:function(){this.setElements(),this.refreshTweets(),this.$element.find(".js-poll").polling(),$(".livecomments__itemContent").length>1&&($(".js-filters").data("plugin_filters")||($(".js-filters").filters(),$(".js-feedItemError").toggleClass("is-show",$(".js-allo-feed-templating .isFiltered").length>0&&0==$(".js-allo-feed-templating .isFiltered--true.isFiltered").length)))},onRefreshLazyload:function(){$(".js-filters").data("plugin_filters")&&($(".js-filters").data("plugin_filters").getStorageFilters(),$(".js-filters").data("plugin_filters").filteringContent(),$(".js-feedItemError").toggleClass("is-show",$(".js-allo-feed-templating .isFiltered").length>0&&0==$(".js-allo-feed-templating .isFiltered--true.isFiltered").length))},onRefreshShares:function(){$(".js-share").length>0&&"undefined"!=typeof FB&&(window.fbAsyncInit=function(){FB.init({appId:"261959740493169",status:!0,cookie:!0,xfbml:!0,version:"v2.3"})},window.fbAsyncInit(),"undefined"!=typeof twttr&&twttr.events.bind("tweet",function(event){var href=getCurrentUrl();u=href,$.get("/v6/php/socialCountUpdate.php?provider=google&href="+u),$.get("/v6/php/socialCountUpdate.php?provider=twitter&href="+u,function(data){parseInt(data)&&$(".shareCount b").html(parseInt(data)),checkShareCountColor()})}),getShareCount())},showPhotoComment:function(e){$(e).parents(".js-legendDisplay").find("table").removeClass("is-disable"),$(e).parents(".js-legendDisplay").find(".js-openComment").addClass("is-disable"),event.preventDefault()},hidePhotoComment:function(e){$(e).parents(".js-legendDisplay").find("table").addClass("is-disable"),$(e).parents(".js-legendDisplay").find(".js-openComment").removeClass("is-disable"),event.preventDefault()},publier:function(type){if(""==$("#usercoms-texte").val())return!1;var aText=$("#usercoms-texte").val(),anId=$(".js-allos").data("id"),anIdMatch=void 0!=$("#qIdm").val()?$("#qIdm").val():0,anIdSport=void 0!=$("#qIds").val()?$("#qIds").val():0,anUrl=document.location.pathname,wording_verb="poser";type&&"réponse"==type&&(wording_verb="donner"),$.ajax({url:"/club/allos/questions/react.php",type:"post",data:{query:type.replace("é","e"),text:aText,idMatch:anIdMatch,idSport:anIdSport,idAllo:anId,url:anUrl},dataType:"json",success:function(ret){var msg;if(200===ret.code)msg="Votre question a bien été prise en compte.",$("#usercoms-texte").val("").change(),$("#usercoms-response").html(""),$("#usercoms-texte").attr("idParent",""),$(".js-reponse-callback").slideUp(),$(".article__comments__formulaire--titre").html(msg).css({"font-size":"25px","line-height":"25px","margin-bottom":"30px","text-align":"center"});else{switch(msg=ret.message,ret.code){case 510:msg="Vous devez être connecté pour "+wording_verb+" une "+type+".";break;case 511:msg="Votre texte est trop long (255 caractères max) ou trop court (3 mini).";break;case 512:msg="Merci d'attendre 30s entre deux "+type+"s.";break;default:msg="Votre "+type+" n'a pas pu être enregistrée."}$("#usercoms-response").css("color","#c01a00").html(msg).show()}}})},pusherDatas:function(code){if(null===this.pusher){Pusher.logToConsole=!0,this.pusher=new Pusher("6b6a18b25bfaaca16402",{encrypted:!0});var LSDraw,channel=this.pusher.subscribe("tirage-"+code),that=this;channel.bind("ajoutEquipeTirage",function(data){if($(".team-"+data.EQUIPE).length<=1){$(".team-"+data.EQUIPE).addClass("is-drawing");var logoSrc=$(".team-"+data.EQUIPE+" img").attr("src");$(".team-"+data.EQUIPE+" img").attr("src")&&$(".team-"+data.EQUIPE+" img").attr("src",logoSrc.replace("declinaison","alt"))}that.pusherOutputAdd(data),LSDraw=null===localStorage.getItem("pusherDraws")?[]:JSON.parse(localStorage.getItem("pusherDraws")),data.MATCH?(LSDraw[parseInt(data.MATCH)-1]||(LSDraw[parseInt(data.MATCH)-1]=[]),LSDraw[parseInt(data.MATCH)-1][parseInt(data.POSITION)-1]=data):LSDraw.push(data),localStorage.setItem("pusherDraws",JSON.stringify(LSDraw)),setTimeout(function(){$(".team-"+data.EQUIPE).removeClass("is-drawing").addClass("is-drawed");var logoSrc=$(".team-"+data.EQUIPE).find("img").attr("src");$(".team-"+data.EQUIPE+" img").attr("src")&&$(".team-"+data.EQUIPE).find("img").attr("src",logoSrc.replace("-alt","-B")),$("[data-nbnotdrawed]").attr("data-nbnotdrawed",$(".draw__pots .draw__team:not(.is-drawed)").length)},5e3)}),channel.bind("supprEquipeTirage",function(data){if(that.pusherOutputSuppr(data),LSDraw=null===localStorage.getItem("pusherDraws")?[]:JSON.parse(localStorage.getItem("pusherDraws")))for(i=0;i<LSDraw.length;i++)LSDraw[i].EQUIPE==data.EQUIPE&&(LSDraw=LSDraw.filter(function(e){return e.EQUIPE!=data.EQUIPE}));localStorage.setItem("pusherDraws",JSON.stringify(LSDraw)),setTimeout(function(){$(".team-"+data.EQUIPE).removeClass("is-drawing").addClass("is-drawed");var logoSrc=$(".team-"+data.EQUIPE).find("img").attr("src");$(".team-"+data.EQUIPE+" img").attr("src")&&$(".team-"+data.EQUIPE).find("img").attr("src",logoSrc.replace("-alt","-B")),$("[data-nbnotdrawed]").attr("data-nbnotdrawed",$(".draw__pots .draw__team:not(.is-drawed)").length)},5e3)})}},pusherOutputAdd:function(data){var teamSorted=$("#team-"+data.EQUIPE).parent().removeAttr("data-templating");if(data.MATCH){if("1257"==data.EQUIPE)return $('.js-drawGame[data-posmatch="'+data.MATCH+'"] .draw__team[data-posteam="'+data.POSITION+'"]').html(""),!1;$(".draw__block").removeClass("is-empty");var numMatch=parseInt(data.MATCH),teamDest=$('.js-drawGame[data-posmatch="'+numMatch+'"] .team-'+data.EQUIPE),posTeam=data.POSITION,dest=$('.js-drawGame[data-posmatch="'+numMatch+'"] [data-posteam="'+posTeam+'"]').removeAttr("data-templating");0==teamDest.length&&(0==dest.length?$('.js-drawGame[data-posmatch="'+numMatch+'"]').prepend('<div class="dropped" data-posteam="'+posTeam+'">'+teamSorted.html()+"</div>"):dest.addClass("dropped").attr("data-posteam",posTeam).data("data-posteam",posTeam).html(teamSorted.html())),$("[data-nbdrawed]").attr("data-nbdrawed",$(".draw__data--matches .js-teamLogo").length),$("[data-nbnotdrawed]").attr("data-nbnotdrawed",$(".draw__pots .draw__team:not(.is-drawed)").length)}if(data.GROUPE){var numGroup=parseInt(data.GROUPE),posTeam=parseInt(data.POSITION),teamDest=$('.js-drawGroupContent[data-group="'+numGroup+'"] .team-'+data.EQUIPE),dest=$('.js-drawGroupContent[data-group="'+numGroup+'"] [data-posteam="'+posTeam+'"]').removeAttr("data-templating");0==teamDest.length&&(0==dest.length?$('.js-drawGroupContent[data-group="'+numGroup+'"]').append('<div class="js-drawLine draw__blockLine dropped">'+teamSorted.html()+"</div>"):dest.addClass("dropped").attr("data-posteam",posTeam).data("data-posteam",posTeam).html(teamSorted.html())),$("[data-nbdrawed]").attr("data-nbdrawed",$(".draw__data--groups .js-teamLogo").length),$("[data-nbnotdrawed]").attr("data-nbnotdrawed",$(".draw__pots .draw__team:not(.is-drawed)").length)}},pusherOutputSuppr:function(data){if(data.MATCH){var numMatch=parseInt(data.MATCH),posTeam=data.POSITION;$('.js-drawGame[data-posmatch="'+numMatch+'"] [data-posteam="'+posTeam+'"]').removeAttr("data-templating").removeClass(".team-"+data.EQUIPE).html(""),$("[data-nbdrawed]").attr("data-nbdrawed",$(".draw__data--matches .js-teamLogo").length)}if(data.GROUPE){parseInt(data.GROUPE);$(".js-drawGroupContent .team-"+data.EQUIPE).removeClass(".team-"+data.EQUIPE).html("");$(".js-drawGroupContent .js-drawLine:not(.dropped)").removeAttr("data-templating");$("[data-nbdrawed]").attr("data-nbdrawed",$(".draw__data--groups .js-teamLogo").length)}$("#team-"+data.EQUIPE).removeClass("is-drawed").parent().removeClass("dropped")},retrievePusherDatas:function(){var PusherDraw=JSON.parse(localStorage.getItem("pusherDraws"));if(PusherDraw)for(i=0;i<PusherDraw.length;i++)if("object"==_typeof(PusherDraw[i])&&null!==PusherDraw[i])if(PusherDraw[i].GROUPE){var el=PusherDraw[i];this.pusherOutputAdd(el),$("#team-"+el.EQUIPE+", .draw__pots .team-"+el.EQUIPE).addClass("is-drawed")}else{var el=PusherDraw[i][0];"object"==(void 0===el?"undefined":_typeof(el))&&null!==el&&(this.pusherOutputAdd(el),$("#team-"+el.EQUIPE+", .draw__pots .team-"+el.EQUIPE).addClass("is-drawed"));var el=PusherDraw[i][1];"object"==(void 0===el?"undefined":_typeof(el))&&null!==el&&(this.pusherOutputAdd(el),$("#team-"+el.EQUIPE+", .draw__pots .team-"+el.EQUIPE).addClass("is-drawed"))}$("[data-nbdrawed]").attr("data-nbdrawed",$(".draw__data--matches .js-teamLogo").length+$(".draw__data--groups .js-teamLogo").length)}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="articleSelection",defaults={duration:500,classClosed:"is-closed",classOpen:"is-open",articleSelection:".js-articleSelection",articleSelectionItem:".js-articleSelectionItem",articleItemArrow:".js-icon"};Plugin.prototype={init:function(){this.setElements(),this.setEvents()},setElements:function(){this.$element=$(this.element),this.$articleSelectionItem=$(this.element).find(this.settings.articleSelectionItem),this.$articleItemArrow=$(this.element).find(this.settings.articleItemArrow)},setEvents:function(){var that=this;this.$articleItemArrow.on("click",function(){that.toggle($(this).parent())})},toggle:function(e){e.hasClass(this.settings.classClosed)?(this.$articleSelectionItem.addClass(this.settings.classClosed).removeClass(this.settings.classOpen),this.$articleItemArrow.removeClass("icon--arrowtop").addClass("icon--arrowbottom"),e.removeClass(this.settings.classClosed).addClass(this.settings.classOpen),e.find(this.$articleItemArrow).removeClass("icon--arrowbottom").addClass("icon--arrowtop")):(this.$articleSelectionItem.addClass(this.settings.classClosed).removeClass(this.settings.classOpen),this.$articleItemArrow.removeClass("icon--arrowtop").addClass("icon--arrowbottom"))}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document),function(){var getVerticalScrollbarWidth;!function($,window){$.fn.autogrow=function(options){if(null==options&&(options={}),null==options.horizontal&&(options.horizontal=!0),null==options.vertical&&(options.vertical=!0),null==options.debugx&&(options.debugx=-1e4),null==options.debugy&&(options.debugy=-1e4),null==options.debugcolor&&(options.debugcolor="yellow"),null==options.flickering&&(options.flickering=!0),null==options.postGrowCallback&&(options.postGrowCallback=function(){}),null==options.verticalScrollbarWidth&&(options.verticalScrollbarWidth=getVerticalScrollbarWidth()),!1!==options.horizontal||!1!==options.vertical)return this.filter("textarea").each(function(){var $e,$shadow,fontSize,heightPadding,minHeight,minWidth,update;if($e=$(this),!$e.data("autogrow-enabled"))return $e.data("autogrow-enabled"),minHeight=$e.height(),minWidth=$e.width(),heightPadding=1*$e.css("lineHeight")||0,$e.hasVerticalScrollBar=function(){return $e[0].clientHeight<$e[0].scrollHeight},$shadow=$('<div class="autogrow-shadow"></div>').css({position:"absolute",display:"inline-block","background-color":options.debugcolor,top:options.debugy,left:options.debugx,"max-width":$e.css("max-width"),padding:$e.css("padding"),fontSize:$e.css("fontSize"),fontFamily:$e.css("fontFamily"),fontWeight:$e.css("fontWeight"),lineHeight:$e.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),!1===options.horizontal?$shadow.css({width:$e.width()}):(fontSize=$e.css("font-size"),$shadow.css("padding-right","+="+fontSize),$shadow.normalPaddingRight=$shadow.css("padding-right")),update=function(_this){return function(event){var height,val,width;return val=_this.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n /g,"<br/>&nbsp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(space){return Array(space.length-1).join("&nbsp;")+" "}),/(\n|\r)/.test(_this.value)&&(val+="<br />",!1===options.flickering&&(val+="<br />")),$shadow.html(val),!0===options.vertical&&(height=Math.max($shadow.height()+heightPadding,minHeight),$e.height(height)),!0===options.horizontal&&($shadow.css("padding-right",$shadow.normalPaddingRight),!1===options.vertical&&$e.hasVerticalScrollBar()&&$shadow.css("padding-right","+="+options.verticalScrollbarWidth+"px"),width=Math.max($shadow.outerWidth(),minWidth),$e.width(width)),options.postGrowCallback($e)}}(this),$e.change(update).keyup(update).keydown(update),$(window).resize(update),update()})}}(window.jQuery,window),getVerticalScrollbarWidth=function(){var inner,outer,w1,w2;return inner=document.createElement("p"),inner.style.width="100%",inner.style.height="200px",outer=document.createElement("div"),outer.style.position="absolute",outer.style.top="0px",outer.style.left="0px",outer.style.visibility="hidden",outer.style.width="200px",outer.style.height="150px",outer.style.overflow="hidden",outer.appendChild(inner),document.body.appendChild(outer),w1=inner.offsetWidth,outer.style.overflow="scroll",w2=inner.offsetWidth,w1===w2&&(w2=outer.clientWidth),document.body.removeChild(outer),w1-w2}}.call(this),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="backtotoping",defaults={backtotop:".js-backtotop",activeClass:"is-active"};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.$backtotop.length&&this.setEvents()},setElements:function(){this.$window=$(this.element),this.$backtotop=$(this.settings.backtotop)},setEvents:function(){this.$window.on("scroll",$.proxy(function(){var scrollTop=this.$window.scrollTop(),windowHeight=this.$window.height();scrollTop>=windowHeight&&!this.isVisible?(this.isVisible=!0,this.$backtotop.addClass(this.settings.activeClass)):scrollTop<windowHeight&&this.isVisible&&(this.isVisible=!1,this.$backtotop.removeClass(this.settings.activeClass))},this)),this.$backtotop.on("click",function(e){$("html, body").animate({scrollTop:0},500),e.preventDefault()})}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,$(window).on("resize",$.proxy(function(){this.screenWidth=$(window).width(),this.init()},this)),$(window).trigger("resize")}var pluginName="carrousel",defaults={tabsContainer:".js-carrousel-tabs",tabsElements:".js-carrousel-tab",tabActiveClass:"is-active",items:".js-carrousel-item",content:".js-carrousel-content",container:".js-carrousel-container",contentNav:".js-carrousel-hscroll",autoTab:!0,timerInterval:5e3};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.unsetEvents(),this.unsetDefaultStyles(),this.setVars(),this.setDefaultStyles(),this.setActiveItem(),this.setEvents(),this.$tabs.filter("."+this.settings.tabActiveClass).length?this.$tabs.filter("."+this.settings.tabActiveClass).removeClass(this.settings.tabActiveClass).trigger("click"):this.$tabs.first().trigger("click"),this.settings.autoTab&&this.setTimer()},setElements:function(){this.$element=$(this.element),this.$container=this.$element.find(this.settings.container),this.$content=this.$element.find(this.settings.content),this.$items=this.$element.find(this.settings.items),this.$tabsContainer=this.$element.find(this.settings.tabsContainer),this.$contentNav=this.$element.find(this.settings.contentNav),this.setTabs(),this.setNav(),this.setActiveItem()},setTabs:function(){this.$tabsContainer.empty();var listNode=document.createElement("ul");this.$items.each(function(){var tab=document.createElement("li");tab.className="carrousel__tab js-carrousel-tab",tab.append(document.createTextNode($(this).attr("data-tab"))),listNode.append(tab)}),this.$tabsContainer.append(listNode),this.$tabs=this.$element.find(this.settings.tabsElements)},setNav:function(){var plugin=this;this.$contentNav.empty(),this.$items.each(function(){var navItem=document.createElement("span");navItem.className="carrousel__navItem js-carrousel-navItem",plugin.$contentNav.append(navItem)}),this.$navItems=this.$element.find(".js-carrousel-navItem")},setActiveItem:function(){this.$activeTab=this.$tabs.filter(".is-active"),this.activeTabIndex=this.$tabs.index(this.$activeTab)},setVars:function(){this.visibleWidth=this.$container.width(),this.itemNum=this.$items.length,this.contentWidth=this.visibleWidth*this.itemNum,this.currentTabIndex=0},setDefaultStyles:function(){var plugin=this;this.$content.css({position:"absolute",left:0,width:plugin.contentWidth}),this.$items.each(function(){$(this).css({width:plugin.visibleWidth})})},unsetDefaultStyles:function(){this.$content.removeAttr("style"),this.$items.removeAttr("style")},setControllers:function(tabIndex){this.$tab.hasClass(this.settings.tabActiveClass)||(this.$tabs.filter("."+this.settings.tabActiveClass).removeClass(this.settings.tabActiveClass),this.$navItems.filter("."+this.settings.tabActiveClass).removeClass(this.settings.tabActiveClass),this.$tab.addClass(this.settings.tabActiveClass),this.$navItems.eq(tabIndex).addClass(this.settings.tabActiveClass))},setEvents:function(){this.$tabs.on("click",$.proxy(function(e){clearTimeout(this.autoTimer),this.$tab=$(e.currentTarget);var tabIndex=this.$tabs.index(this.$tab);this.slideTo(tabIndex),e.preventDefault()},this)),this.$navItems.on("click",$.proxy(function(e){clearTimeout(this.autoTimer);var navItemIndex=this.$navItems.index($(e.currentTarget));this.$tab=this.$tabs.eq(navItemIndex),this.slideTo(navItemIndex),e.preventDefault()},this))},setTimer:function(){var plugin=this;this.autoTimer=setInterval(function(){if(plugin.currentTabIndex>=0){var nextIndex=plugin.currentTabIndex<plugin.itemNum-1?plugin.currentTabIndex+1:0;plugin.$tab=plugin.$tabs.eq(nextIndex),plugin.slideTo(nextIndex)}},this.settings.timerInterval)},unsetEvents:function(){this.$tabs.off("click"),this.$navItems.off("click")},slideTo:function(newItemIndex){var offsetLeft=newItemIndex>0?-1*this.$items.eq(newItemIndex).position().left:0;this.$content.css({left:offsetLeft}),this.currentTabIndex=newItemIndex,this.setControllers(newItemIndex)}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="comments",defaults={};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.setEvents(),this.setConnexion(),this.setDatas()},setElements:function(){this.$element=$(this.element)},setConnexion:function(){var that=this;if(0===$("#ComForm").length)return!1;$("#ComForm").data("startCom",1),$(document).on("click","#usercoms-inscription",function(event){event.preventDefault(),loginPopin()}),$("#ComForm .clubconnect-go").on("click",$.proxy(that.commentConnect,that)),$("#ComForm .clubconnect-email,#ComForm .clubconnect-pass").keypress(function(k){13==k.keyCode&&that.commentConnect()}),$("#ComForm .clubconnect-disconnect").on("click",that.commentLogout),$("#usercoms-publier").on("click",that.publier),$("#usercoms-texte").bind("keypress keyup change",that.updateNbChars)},setEvents:function(){var that=this;$(document).on("click",".js-voteplus",function(){var idDoc=$(this).parents("li").attr("idComm");idDoc&&(that.likeCom(this,"like","commentaire",idDoc),$(this).removeClass("voteplus--off"),$(this).addClass("voteplus--on"))}),$(document).on("click",".js-votemoins",function(){var idDoc=$(this).parents("li").attr("idComm");idDoc&&(that.likeCom(this,"dislike","commentaire",idDoc),$(this).removeClass("votemoins--off"),$(this).addClass("votemoins--on"))}),$(document).on("click",".js-signaler",function(){var idDoc=$(this).parents("li").attr("idComm");that.signaler(idDoc)}),$(document).on("click",".js-reagir",function(){var idDoc=$(this).parents("li").attr("idComm"),aPseudo=$(this).parents("li").find("span.auteur a").html();that.repondreA(idDoc,aPseudo)}),$(document).on("click",".js-openComments",function(){$(this).addClass("is-disabled"),
$(".js-commentBlock").removeClass("is-disabled")})},setDatas:function(){var dwhUrl="https://dwh.lequipe.fr/api/efr/comments",nbLoadComments=1;if($("#ComForm").attr("canonical_url"))var pathBase=$("#ComForm").attr("canonical_url").replace("http://www.lequipe.fr","").replace("https://www.lequipe.fr","");else var pathBase=document.location.pathname;$(".js-commentsCount").replaceWith('<div class="article__comments__titre js-commentsCount" data-templating="#tpl-comments_count" data-templating-json="'+dwhUrl+pathBase+'/count"></div>'),$(".js-commentsCount").templating({callback:function(){var count=$(".js-countComments").data("count");0===count?$(".js-commentsCount, .js-allComments").hide():count<=1&&$(".js-allComments").hide(),$(".js-allCommentsCount").append(" ("+count+")")}}),$(".js-commentsList").replaceWith('<div class="commentsList js-commentsList" data-templating="#tpl-comments_list" data-templating-json="'+dwhUrl+pathBase+'/limits/1/lasts/0/best"></div>'),$(".js-commentsList").templating(),$(document).on("click",".js-filterAllComments, .js-filterBestComments, .js-allComments",function(){var that=$(this),displayType="";($(this).hasClass("js-filterBestComments")||!$(this).hasClass("js-filterAllComments")&&$(".js-filterBestComments").hasClass("active"))&&(displayType="/best"),$(this).hasClass("js-allComments")&&(nbLoadComments=500),$(".js-commentsList").replaceWith('<div class="commentsList js-commentsList" data-templating="#tpl-comments_list" data-templating-json="'+dwhUrl+pathBase+"/limits/"+nbLoadComments+"/lasts/0"+displayType+'"></div>'),$(".js-commentsList").templating({callback:function(){$(".js-filterAllComments, .js-filterBestComments").removeClass("active"),"/best"===displayType?$(".js-filterBestComments").addClass("active"):$(".js-filterAllComments").addClass("active"),(that.hasClass("js-allComments")||500===nbLoadComments)&&($(".js-subComments").removeClass("is-hidden"),$(".js-allComments").addClass("is-disabled"))}})})},likeCom:function(element,aType,aTypeDoc,anIdDoc){return!1!==$.inArray(aType,["like","dislike"])&&(!1!==$.inArray(aTypeDoc,["news","commentaire","match"])&&void $.ajax({url:"/like.php",type:"post",data:{query:aType,typedoc:aTypeDoc,iddoc:anIdDoc},dataType:"json",success:function(ret){if(200===ret.code){var nb=""==$(element).html()?0:parseInt($(element).html());$(element).html(nb+1)}else 503===ret.code&&alert("Vous devez être connecté pour effectuer cette action."),520===ret.code&&alert("Votre vote a déjà été enregistré.")}}))},repondreA:function(anId,aPseudo){$("#usercoms-texte").attr("idParent",anId),$("#usercoms-response").html("<strong>en réponse à "+aPseudo+'</strong><span class="close"></span>').hide().find(".close").on("click",function(){$(this).parent().fadeOut(),$("#usercoms-texte").attr("idParent","")}),$(".js-openComments").addClass("is-disabled"),$(".js-commentBlock").removeClass("is-disabled"),$("html,body").animate({scrollTop:$("#ComForm").offset().top},function(){$("#usercoms-response").fadeIn()}),$("#usercoms-texte").focus()},publier:function(){var aText=$("#usercoms-texte").val(),anIdParent=$("#usercoms-texte").attr("idParent");$.ajax({url:"/club/commentaires/react.php",type:"post",data:{query:"comment",text:aText,idParent:anIdParent},dataType:"json",success:function(ret){var msg;if(200===ret.code)msg="Votre contribution a bien été prise en compte et sera mise en ligne après modération.",$("#usercoms-texte").val("").change(),$("#usercoms-response").html(""),$("#usercoms-texte").attr("idParent","");else switch(msg=ret.message,ret.code){case 510:msg="Vous devez être connecté pour poster un commentaire.";break;case 511:msg="Votre texte est trop long (500 caractères max) ou trop court (3 mini).";break;case 512:msg="Merci d'attendre 30s entre deux réactions.";break;default:msg="Votre commentaire n'a pas pu être enregistré."}alert(msg)}})},signaler:function(anIdComm){var that=this;$.ajax({url:"/club/commentaires/react.php",type:"post",data:{query:"signal",idcomment:anIdComm},dataType:"json",success:function(ret){var msg="";if(200===ret.code)msg="Merci";else switch(ret.code){case 509:msg="Vous devez être connecté.";break;case 510:msg="Vous avez déjà signalé ce commentaire."}that.setSignalementTooltip($("li[idComm="+anIdComm+"] .signaler"),msg)}})},commentConnect:function(){var that=this;that.loginComment("#ComForm",that.setupConnectedInfos),that.commentAfterLogin()},commentAfterLogin:function(){$("#usercoms-texte").focus()},loginComment:function(mondiv,callback,fallback){loginMail({login:this.getInputTextVal(mondiv+" .clubconnect-email"),pass:this.getInputTextVal(mondiv+" .clubconnect-pass")},callback,function(errorTxt){fallback(),alert(errorTxt)})},getInputTextVal:function(selector){var el=$(selector);return el.attr("placeholder")&&el.val()==el.attr("placeholder")?"":el.val()},commentLogout:function(){logout()},setupConnectedInfos:function(infos){$("#ComForm").addClass("is-connected"),$("#usercoms-connectformspace").hide(),$("#ComForm .article__comments__formulaire--titre span").hide(),$("#usercoms-loggedspace span").html(infos.nickname).parent().show()},failConnectInfos:function(text){alert(text)},setSignalementTooltip:function(element,msg){$("#commentaires").append('<p class="bulle"><span>'+msg+"</span></p>"),$("#commentaires").find("p.bulle:last").css({top:element.get(0).offsetTop-40,left:element.get(0).offsetLeft-25}).fadeIn(function(){var $this=$(this);setTimeout(function(){$this.fadeOut(function(){$(this).remove()})},4e3)})},updateNbChars:function(){var msg,nb=500-$("#usercoms-texte").val().length;nb>=0?msg=nb+" caractère"+(nb>1?"s":"")+" restant"+(nb>1?"s":""):(nb*=-1,msg='<span style="color:red">'+nb+" caractères en trop</span>"),$("#usercoms-nbcomsleft").html(msg)}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="concours",defaults={maxCharact:1500};Plugin.prototype={init:function(){this.setElements(),this.setVars(),this.checkUser(),this.setEvents()},setElements:function(){this.$element=$(this.element),this.$button=$(this.element).find(".js-concours__btn"),this.$text=$(this.element).find("textarea"),this.$charactLeft=$(this.element).find(".concours__container__left"),this.$img=$(this.element).find(".concours__image"),this.$idConcours=$(this.element).find("#idConcours"),this.$checkboxes=$(this.element).find(".concours__checkbox"),this.$anonymous=$(this.element).find("#anonymat"),this.$user=$(this.element).find(".concours__user__name"),this.$image=$(this.element).find(".image__input"),this.$form=$(this.element).find(".concours__form"),this.$spinner=$(this.element).find(".spinner"),this.$information=$(this.element).find(".concours__information")},setVars:function(){this.idConcours=$(this.element).attr("data-id-concours"),this.idQuestion=$(this.element).attr("data-id-question"),this.idReponse=$(this.element).attr("data-id-reponse"),this.charLeft=defaults.maxCharact,this.maxUploadSize=500},checkUser:function(){this.user=setUserInfos(),this.user?(this.$user.html(this.user.nickname),$(".connexion__premium").hide(),$(".concours-inside").show()):($(".connexion__premium").show(),$(".concours-inside").hide())},setEvents:function(){this.$button.on("click",$.proxy(this.submit,this),$.proxy(this.isAuthorized,this)),this.$text.on("input propertychange keyup mousemove",$.proxy(this.checkText,this)),this.$anonymous.on("click",$.proxy(this.anonymous,this))},checkText:function(e){this.charLeft=this.settings.maxCharact-e.currentTarget.value.length;var text=this.charLeft>0?this.charLeft+" caractères restants":"";this.$charactLeft.html(text)},anonymous:function(e){if(!this.user)return!1;$(e.currentTarget).is(":checked")?this.$user.html("Anonyme"):this.$user.html(this.user.nickname)},setErrorPopup:function(text){return{width:400,height:60,html:'<div class="concours__errorPopin "> <h3 class="errorPopup__message">'+text+"</h3> </div>"}},isAuthorized:function(e){if(e.preventDefault(),this.$button.hasClass("concours__btn--disabled"))return!1;var that=this,certified=!1;if(this.$checkboxes.each(function(){certified=$(this).is(":checked")?1:0}),this.charLeft>0)return this.message("Vos motivations doivent comprendre au moins 1500 caractères."),!1;var file=this.$image.prop("files")[0];return file?file.size>1024*this.maxUploadSize?(this.message("La taille de votre photo ne doit pas dépasser "+this.maxUploadSize+" Ko."),!1):1!=certified?(this.message("Vous devez accepter les conditions générales."),!1):void $.ajax({url:"/concours/concours_ajax.php",type:"post",data:{query:"isAuthorized",idConcours:this.idConcours,urlHash:window.location.hash},dataType:"json",beforeSend:function(){that.showSpinner()},success:function(ret){that.hideSpinner();var res=ret.datas;if(0===res&&e.data)e.data();else if(1===res){that.message("Vous avez déjà participé à ce jeu concours. Votre nouvelle participation ne peut pas être prise en compte.")}},error:function(ret){return that.hideSpinner(),that.message(ret.message),!1}}):(this.message("Vous devez associer une photo à votre message pour participer (max "+this.maxUploadSize+" Ko)."),!1)},createIframe:function(data){var uploadFrame=$("<iframe>").attr({src:"#",name:"uploadFrame",type:"hidden",style:{display:"none"}}).appendTo(this.element);this.$form.find("input:hidden:not(:checkbox)").remove();for(var i in data){$("<input>").attr("type","hidden").attr("name",i).val(data[i]).appendTo(this.$form)}this.showSpinner(),uploadFrame.load($.proxy(function(){var res=uploadFrame[0].contentDocument||uploadFrame[0].contentWindow.document;this.hideSpinner(),this.success(res,$.proxy(function(){uploadFrame.remove()},this))},this))},submit:function(){if(!this.user)return loginPopin(),!1;var ids=[];ids.push({idQuestion:this.idQuestion,idReponse:this.$text.val()});var data={query:"insertParticipation_new",idConcours:this.idConcours,reponsesQuestionnaire:JSON.stringify(ids)};this.$checkboxes.each(function(){data[$(this).attr("name")]=$(this).is(":checked")?1:0}),this.createIframe(data),this.$form.submit()},success:function(response,callback){if("object"===(void 0===response?"undefined":_typeof(response))&&response.body)try{response=JSON.parse(response.body.textContent)}catch(e){response={}}"object"===(void 0===response?"undefined":_typeof(response))&&"200"==response.code?(this.message("Votre témoignage a bien été envoyé à notre rédaction."),this.$form.remove(),this.$information.remove()):this.message(response.message),"function"==typeof callback&&callback()},error:function(jqXHR,textStatus,errorThrown){this.message()},message:function(_message){_message=_message||"Une erreur est survenue, veuillez réessayer dans quelques instants.",conxpopup(this.setErrorPopup(_message))},showSpinner:function(){this.$button.addClass("concours__btn--disabled"),this.$spinner.addClass("spinner--waiting")},hideSpinner:function(){this.$button.removeClass("concours__btn--disabled"),this.$spinner.removeClass("spinner--waiting")}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="cyclingTimeline",defaults={aDays:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],weekLength:5};Plugin.prototype={init:function(){this.setHTML(),this.setElements(),this.setVars(),this.setSteps(),this.setEvents()},setElements:function(){this.$timeline=$(this.element),this.$etapes=this.$timeline.find("#etapes"),this.$loading=this.$timeline.find(".loading"),this.$arrows=this.$timeline.find(".arrows"),this.$arrow=this.$timeline.find("arrow")},setVars:function(){this.currentYear=parseInt(this.$timeline.attr("year"))||(new Date).getFullYear(),this.race=this.$timeline.attr("race"),this.race||console.error("Aucune course n'est renseignée pour cette frise"),this.activeWeek=0,this.weekLength=this.settings.weekLength},setEvents:function(){$(".arrow").click($.proxy(this.handleArrows,this))},setHTML:function(){$(this.element).append('<div class="arrows"><div class="arrow left"><img src="/elements/img/timeline/arrow_left.svg"/><a href="" onclick="return false;"></a></div><div class="arrow right"><img src="/elements/img/timeline/arrow_right.svg"/><a href="" onclick="return false;"></a></div></div><div id="frise"><div id="etapes"></div><div class="loading"><div class="anim"><img src="/elements/img/timeline/loader.gif"/></div></div></div>')},setSteps:function(){var that=this;this.currentYear>0&&$.getJSON("/datas/cyclisme/"+that.race+"/"+that.currentYear+"/calendrier.json",function(data){data=$(data)[0];var currentWeek,length=0,lengthWeeks=0;$.each(data,function(i,item){length%that.settings.weekLength==0&&(currentWeek=$('<div class="week" id="week_'+length/that.settings.weekLength+'"></div>'),that.$etapes.append(currentWeek),lengthWeeks++);var date=new Date(item.DATE_ETAPE),typeEtape="";item.TYPE&&(typeEtape=item.TYPE.toString().replace("[object Object]","").replace(" par équipe","E"));var linkLibelle="",linkHtml='<a href="'+item.url+'" target="_blank"></a>',type="",pictoMsg="";if("CLME"===typeEtape&&(pictoMsg="par équipe"),profil='<img src="/common/img/routes/sports/cycling/'+that.race+"/"+that.currentYear+"/timeline/stage_"+that.dizaine(item.NO_ETAPE)+'.png"/>',"REPOS"==item.LIBELLE)linkLibelle="repos",linkHtml="",type=" repos",new Date>=date&&(type=" direct repos"),profil='<img src="/common/img/routes/sports/cycling/'+that.race+"/"+that.currentYear+'/timeline/rest.png"/>';else if(linkLibelle='<div class="details">voir le profil</div>',new Date>=date){type=" direct";var directURL="/Cyclisme/course/"+item.IDCOURSE+"/"+that.slugify(item.LIBELLE);linkHtml="<a href="+directURL+' target="_blank"></a>',linkLibelle='<div class="libelle--direct">en direct</div>'}else type=" normal";var dayStage="";date.getDate()&&(dayStage=that.settings.aDays[date.getDay()]+" "+that.dizaine(date.getDate())+"/"+that.dizaine(date.getMonth()+1));var etape=$('<div class="etape'+type+'" id="etape'+item.NO_ETAPE+'"><div class="titre titre--'+that.race+'">'+dayStage+'</div><div class="titre titre--'+that.race+' titre--etape">&eacute;tape '+item.NO_ETAPE+'</div><div class="etape__infos"><div class="profil"><div class="back_profil"></div><div class="live_profil live_profil--'+that.race+'"></div><div class="mask_profil">'+profil+'</div><div class="picto"><div class="'+typeEtape+'"></div><div class="picto__msg">'+pictoMsg+'</div></div><div class="infos"><div class="libelle">'+item.LIBELLE.replace(" - ","<br/>")+'</div><div class="km">('+item.KILOMETRAGE+"km)</div></div>"+linkHtml+'</div><div class="links">'+linkHtml+'<div class="live_current"><div class="bottom_arrow"></div></div><div class="link_content"><div class="libelle">'+linkLibelle+"</div></div></div></div>");"REPOS"==item.LIBELLE&&(etape.find(".profil a").remove(),etape.find(".live_profil").remove()),currentWeek.append(etape),length++}),that.checkArrows(),that.$etapes.width(that.$timeline.width()*that.$etapes.children().length);new Date;$.getJSON("/datas/cyclisme/"+that.race+"/"+that.currentYear+"/directs.json",function(data){that.parseDatas(data)})})},parseDatas:function(jsonDatas){var that=this;$.proxy($.each(jsonDatas,function(i,item){var idEtape=parseInt(item.NUM),divEtape=that.$timeline.find('.etape[id="etape'+idEtape+'"]'),avancee=parseFloat(item.KM_PARCOURUS)/parseFloat(divEtape.find(".km").text().replace(/km|\)|\(/g,""));avancee=parseInt(100*avancee);var isCLM="CLM"==divEtape.find(".CLM").attr("class")||"CLME"==divEtape.find(".CLME").attr("class");(avancee>0||isCLM)&&("etape direct"==divEtape.attr("class")&&(divEtape.find(".live_profil").width(100-avancee+"%"),divEtape.find(".live_profil").css("left",1+avancee+"%")),(avancee>=100||isCLM||item.NOM_VAINQ_ETAPE)&&(divEtape.find(".live_profil").css("display","none"),divEtape.find(".km").width(item.KM_PARCOURUS+"km"),(item.NEWS||item.VIDEO||item.RESULTAT)&&(divEtape.addClass("terminee"),item.NEWS?buttonNews=' active"><a href="'+item.NEWS+'" target="_blank"></a>':buttonNews=' inactive">',item.VIDEO?buttonVideo=' active"><a href="'+item.VIDEO+'" target="_blank"></a>':buttonVideo=' inactive">',item.RESULTAT?buttonResult=' active"><a href="'+item.RESULTAT+'" target="_blank"></a>':buttonResult=' inactive">',that.currentYear>2013?(divEtape.find(".link_content>.libelle").addClass("rollover"),item.VIDEO?divEtape.find(".link_content>a").attr("href",item.VIDEO):divEtape.find(".link_content>a").attr("href",item.NEWS),divEtape.find(".link_content>.libelle").html('<div class="rollout"><div class="resultats"></div></div>'),item.NOM_VAINQ_ETAPE&&(vainqueur="",vainqueur+=item.NOM_VAINQ_ETAPE.slice(0,12),pays_vainq=item.PAYS_VAINQ_ETAPE,divEtape.find(".link_content>.libelle .resultats").append('<div class="vainq_etape"><img src="/common/img/pictos/sports/cycling/common/trophy.svg"/><div class="resultats__name"> : '+vainqueur+'</div><div class="flag flag--'+pays_vainq+'"></span></div>')),item.NOM_LEADER_GEN&&(maillot_jaune="",maillot_jaune+=item.NOM_LEADER_GEN.slice(0,12),null!=item.NOM_VAINQ_ETAPE&&item.NOM_VAINQ_ETAPE.length>11&&(vainqueur+="."),pays_jaune=item.PAYS_LEADER_GEN,divEtape.find(".link_content>.libelle .resultats").append('<div class="maillot_jaune"><img src="/common/img/pictos/sports/cycling/'+that.race+'/jersey-leader.svg"/><div class="resultats__name"> : '+maillot_jaune+'</div><div class="flag flag--'+pays_jaune+'"></div></div>'),divEtape.addClass("finish")),divEtape.find(".link_content>.libelle").append('<div class="rollin">voir le r&eacute;sum&eacute;</div>'),divEtape.find(".profil a").attr("href",item.NEWS),divEtape.find(".links a").attr("href",item.NEWS)):(divEtape.find(".link_content>a").remove(),divEtape.find(".link_content>.libelle").html('<div class="link_news'+buttonNews+'</div><div class="link_video'+buttonVideo+'</div><div class="link_results'+buttonResult+"</div>")))))}),this);var etapesDirect=$(".direct");if(etapesDirect.length>0){var $etapesList=this.$timeline.find(".etape");that.activeWeek=etapesDirect[etapesDirect.length-1].parentElement.id.replace("week_","");var lastStep=etapesDirect[etapesDirect.length-1],indexOfLastStep=$etapesList.index(lastStep);indexOfLastStep<=1||indexOfLastStep>=$etapesList.length-2||(that.lastStep=etapesDirect[etapesDirect.length-1])}else that.$timeline.find(".finish")[0]?(lastLinkArray=$(".finish"),lastLink=lastLinkArray[lastLinkArray.length-1],lastWeek=$(lastLink).parent(),that.activeWeek=lastWeek.attr("id").replace("week_","")):that.activeWeek=0;this.start()},start:function(){this.$arrows.css("display","block"),this.$loading.css("display","none"),this.$etapes.css("transition","left 0.5s linear"),this.slideTimeLine(this.lastStep)},slideTimeLine:function(lastStep){var $activeWeek=this.$timeline.find("#week_"+this.activeWeek),pos=-$activeWeek.position().left;if(lastStep&&(pos-=$(lastStep).position().left-2*($(lastStep).outerWidth()+12)),!lastStep&&$activeWeek.children().length<this.weekLength){var decal=0;$activeWeek.children().each(function(){decal+=$(this).outerWidth()+12}),pos+=-decal+this.$timeline.width()}this.$etapes.css("left",pos),this.checkArrows()},checkArrows:function(){0==this.activeWeek?$(".arrow:first-child").addClass("arrow--disabled"):($(".arrow:first-child").removeClass("arrow--disabled"),this.activeWeek==this.$etapes.children().length-1?$(".arrow:last-child").addClass("arrow--disabled"):$(".arrow:last-child").removeClass("arrow--disabled"))},handleArrows:function(e){e.currentTarget.attributes.class.value.match("right")?this.activeWeek<this.$etapes.children().length-1&&this.activeWeek++:this.activeWeek>0&&this.activeWeek--,this.checkArrows(),this.slideTimeLine()},dizaine:function(nombre){return nombre<10?"0"+nombre:""+nombre},printDate:function(temp){return this.padStr(temp.getFullYear())+"/"+this.padStr(1+temp.getMonth())+"/"+this.padStr(temp.getDate())},padStr:function(i){return i<10?"0"+i:""+i},slugify:function(str){str=str.replace(/^\s+|\s+$/g,""),str=str.toLowerCase();for(var from="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",to="aaaaeeeeiiiioooouuuunc------",i=0,l=from.length;i<l;i++)str=str.replace(new RegExp(from.charAt(i),"g"),to.charAt(i));return str=str.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="dailymotionAPI",defaults={callback:function(){},defaultWidth:640,defaultHeight:360,videoID:""};Plugin.prototype={init:function(){var _this=this;this.setElements(),this.setEvents(),this.setVars(),this.loadAPI().then(function(DM){return _this.graphAPICall(DM)})},setElements:function(){this.$element=$(this.element)},setEvents:function(){$(".js-videoDM__mute").on("click",function(){player.setMuted(!1)})},setVars:function(){this.width=this.$element.data("width")||this.settings.defaultWidth,this.height=this.$element.data("height")||this.settings.defaultHeight,this.videoID=this.$element.data("id")||this.settings.videoID,this.autoplay=this.getAutoplay()},loadAPI:function(){return new Promise(function(resolve){if(void 0!==window.DM)resolve(DM);else{var e=document.createElement("script");e.id="dm-api",e.async=!0,e.src="https://api.dmcdn.net/all.js",e.onload=function(){return resolve(window.DM)};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(e,s)}})},graphAPICall:function(DM){DM.api("/video/"+this.videoID,{fields:["id","duration"]},this.handleAPIResponse.bind(this))},handleAPIResponse:function(response){var durationParam="";if(!response.error){var durationType="";durationType=0===response.duration?"long":response.duration<40?"court":response.duration<60?"moyen":"long",durationParam="longueur="+durationType}window.player=DM.player(this.element,{video:this.videoID,width:this.width,height:this.height,params:{"queue-enable":!1,autoplay:this.autoplay,"autoplay-mute":this.autoplay,ads_params:durationParam}}),player.addEventListener("playing",function(){player.muted?$(".js-videoDM__mute").removeClass("is-hidden"):$(".js-videoDM__mute").addClass("is-hidden")}),player.addEventListener("volumechange",function(event){player.muted?$(".js-videoDM__mute").removeClass("is-hidden"):$(".js-videoDM__mute").addClass("is-hidden")})},getAutoplay:function(){return window.autoplay?window.autoplay=!1:void 0===window.autoplay&&(window.autoplay=!0),window.autoplay}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="explorePromo",defaults={};Plugin.prototype={init:function(){this.setElements(),this.setVars()},setElements:function(){this.$element=$(this.element),this.$exploreLink=this.$element.find(".js-promoted"),this.$exploreImg=this.$exploreLink.find("img")},setVars:function(){this.getExplores()},getExplores:function(){var that=this;$.getJSON("/explore/explores.json",function(res){var explores=res,selectedItem=Math.random()<.5?explores.leader:explores.coleader1;that.setLink(selectedItem)})},setLink:function(explore){this.$exploreLink.attr("href",explore.lien),this.$exploreImg.attr("src",resizeImage(explore.image,400,explore.ratio)),this.$exploreImg.attr("title",explore.texte)}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document);var selectedFilters={},appliedFilters={};!function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="filters",defaults={filters:".js-filters",filtersItem:".js-filtersItem",filtersItemDirect:".js-filtersItem--direct",item:".js-filterItem",filterContent:".js-filter",validate:".js-validateFilter",reset:".js-resetFilter",onLiveFilter:function(){}};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.setEvents(),this.getStorageFilters(),this.filteringContent()},setElements:function(){this.$element=$(this.element),this.$filtersItem=$(this.element).find(this.settings.filtersItem),this.$filtersItemDirect=$(this.element).find(this.settings.filtersItemDirect),this.$item=$(this.element).find(this.settings.item),this.$validate=$(this.element).find(this.settings.validate),this.$reset=$(this.element).find(this.settings.reset),this.$tabitem=$(".js-tabs-item"),this.$filterContent=$(this.element).find(this.settings.filterContent),this.$icon=$(this.element).find(".icon"),this.$grid=$(".js-scheduleItems"),this.$gridItem=$(".js-scheduleItem"),this.$gridItemError=$(".js-scheduleItemError")},setEvents:function(){this.$filtersItem.on("click",$.proxy(this.toggle,this)),this.$item.on("click",$.proxy(this.selectItem,this)),this.$validate.on("click",$.proxy(this.validateFilters,this)),this.$reset.on("click",$.proxy(this.resetFilters,this)),$(document).on("click",".js-validateAllSubFilter",function(){$(this).parents(".js-filter-category").find(".js-filterItemCategory").removeClass("is-selected").trigger("click"),$(this).parents(".js-filter-category").find($(".js-validateAllSubFilter")).hide(),$(this).parents(".js-filter-category").find($(".js-resetAllSubFilter")).show()}),$(document).on("click",".js-resetAllSubFilter",function(){$(this).parents(".js-filter-category").find(".js-filterItemCategory").addClass("is-selected").trigger("click"),$(this).parents(".js-filter-category").find($(".js-validateAllSubFilter")).show(),$(this).parents(".js-filter-category").find($(".js-resetAllSubFilter")).hide()})},validateFilters:function(e){var filterItem=$(e.currentTarget).parents(".filter").attr("filter");$(e.currentTarget).hasClass("js-validateFilterSub")?($(e.currentTarget).parents(".js-filter-category").removeClass("is-open"),$(e.currentTarget).parents(".js-filter").find(".js-filterItemTitle").removeClass("filter__item--selected").removeClass("is-use")):($(e.currentTarget).parents(".js-filter").removeClass("is-open"),$(".js-filtersItem.filters__item--"+filterItem).removeClass("is-selected")),selectedFilters[filterItem]&&0==Object.keys(selectedFilters[filterItem]).length&&delete selectedFilters[filterItem],this.filterCount(e),this.setFiltersObjects(),this.filteringContent()},getStorageFilters:function(e){if($(".js-filterItem[filter]").removeClass("is-activated"),(appliedFilters=JSON.parse(localStorage.getItem("filtersAllo")))&&Object.keys(appliedFilters).length)for($(".js-filterItem").removeClass("is-selected"),i=0;i<Object.keys(appliedFilters).length;i++){var code=Object.keys(appliedFilters)[i],nbFilterItem=Object.keys(appliedFilters[code]).length;appliedFilters[code];for(j=0;j<nbFilterItem;j++){var keyWord=appliedFilters[code][j];$(".js-filterItem[filter="+keyWord+"]").trigger("click").addClass("is-activated")}nbFilterItem>0?$(".js-filtersItem.filters__item--"+code+" .js-filtersCount").html("&nbsp;("+nbFilterItem+")"):$(".js-filtersItem.filters__item--"+code+" .js-filtersCount").html("")}this.subFilterCount(),this.setFiltersObjects()},filteringContent:function(e){var nbToApplyFilters,toApplyFilters={},toApplyCode={},toApplyValues={},isFilterdeItems=[];$(".livecomments__itemContent").length>1&&$(".livecomments__itemContent").each(function(){if(void 0!==$(this).data("filters")&&$(this).data("filters").length>0&&void 0!==appliedFilters&&Object.keys(appliedFilters).length>0)for($(this).parents(".js-tabs-container").addClass("is-filtered"),$(".js-filters").addClass("is-filtering"),toApplyFilters=$(this).data("filters"),nbToApplyFilters=$(this).data("filters").length,isFilterdeItems=[],i=0;i<nbToApplyFilters;i++)if(toApplyCode=toApplyFilters[i].code,toApplyValues=toApplyFilters[i].values)for(j=0;j<toApplyValues.length;j++){if(appliedFilters[toApplyCode])var index=appliedFilters[toApplyCode].indexOf(toApplyValues[j]);else index=-1;if(index>-1&&isFilterdeItems.push(toApplyFilters[i].code),Object.keys(appliedFilters).length===isFilterdeItems.length){$(this).parent().removeClass("isFiltered--false").addClass("isFiltered--true").addClass("isFiltered");break}$(this).parent().addClass("isFiltered--false").removeClass("isFiltered--true").addClass("isFiltered")}else $(this).parent().addClass("isFiltered");else $(this).parents(".js-tabs-container").removeClass("is-filtered"),$(".js-filters").removeClass("is-filtering"),$(this).parent().removeClass("isFiltered--false").removeClass("isFiltered--true").removeClass("isFiltered")})},filterCount:function(e){var filterItem=$(e.currentTarget).parents(".filter").attr("filter"),nbFilterItem=$(".filter--"+filterItem+" .is-selected").length;nbFilterItem>0?$(".js-filtersItem.filters__item--"+filterItem+" .js-filtersCount").html("&nbsp;("+nbFilterItem+")"):$(".js-filtersItem.filters__item--"+filterItem+" .js-filtersCount").html(""),this.subFilterCount()},subFilterCount:function(e){var filterWording="",filterWordings=[];$(".js-filter-category").each(function(){var wordingSelect=" sélectionné",filterItemSub=$(this).find(".js-filterItemCategory.is-selected").length;$(this).find(".js-filterItemCategory.is-selected").each(function(){var that=this;filterWording=$(this).html().trim(),filterWordings.push(filterWording),$(that).parents(".js-filter-category").find(".js-filterTitleCount").html(JSON.stringify(filterWordings).replace("[","").replace("]","").replace(/\"/g," "))}),filterWordings=[],filterItemSub>0?(filterItemSub>1&&(wordingSelect+="s"),$(this).find(".js-filterselectCount").html(filterItemSub+wordingSelect),$(this).prev().find(".js-filterCount").html("("+filterItemSub+")"),filterItemSub>=2&&($(this).find($(".js-validateAllSubFilter")).hide(),$(this).find($(".js-resetAllSubFilter")).show())):($(this).find(".js-filterselectCount").html("0"+wordingSelect),$(this).prev().find(".js-filterCount").html(""),$(this).find($(".js-validateAllSubFilter")).show(),$(this).find($(".js-resetAllSubFilter")).hide(),$(this).find($(".js-filterTitleCount")).html(""))})},resetFilters:function(e){var filter=$(e.currentTarget).attr("filter"),filterItem=$(e.currentTarget).parents(".filter").attr("filter");$(e.currentTarget).hasClass("js-resetFilterSub")?($(e.currentTarget).parents(".js-filter-category").removeClass("is-open"),$(e.currentTarget).parents(".js-filter").find(".js-filterItemTitle").removeClass("filter__item--selected").removeClass("is-use")):($(".js-filter.filter--"+filter+" .js-filterItem").removeClass("is-selected"),$(e.currentTarget).parents(".filter").removeClass("is-open"),$(".js-filtersItem.filters__item--"+filterItem).removeClass("is-selected")),$(".js-filtersItem.filters__item--"+filterItem+" .js-filtersCount").html(""),$(e.currentTarget).parents(".js-filter-category").find(".js-filterItemCategory").addClass("is-selected").trigger("click"),$(e.currentTarget).parents(".js-filter-category").find($(".js-validateAllSubFilter")).show(),$(e.currentTarget).parents(".js-filter-category").find($(".js-resetAllSubFilter")).hide(),
delete selectedFilters[filterItem],this.setFiltersObjects(),this.filteringContent()},toggle:function(e){var filter=$(e.currentTarget),filterContent=".filter--"+$(e.currentTarget).attr("filter");filter.hasClass("is-selected")?(filter.removeClass("is-selected"),filter.hasClass("js-filtersItemMultiple")&&($(filterContent).removeClass("is-open"),$(filterContent).addClass("is-closed"))):(this.$filtersItem.removeClass("is-selected"),this.$filterContent.removeClass("is-open"),filter.addClass("is-selected"),filter.hasClass("js-filtersItemMultiple")&&($(filterContent).removeClass("is-closed"),$(filterContent).addClass("is-open")),$(".js-filterItem").removeClass("is-use").removeClass("filter__item--selected"))},selectItem:function(e){var filter=$(e.currentTarget),filterContent=$(e.currentTarget).next(),filterCode=$(e.currentTarget).attr("code");if(filter.hasClass("js-filterItemTitle"))filter.hasClass("is-use")?(filter.removeClass("is-use").removeClass("filter__item--selected"),filterContent.addClass("is-closed").removeClass("is-open")):($(".js-filter-category").removeClass("is-open").addClass("is-closed"),$(".js-filterItemTitle").removeClass("is-use").removeClass("filter__item--selected"),filter.addClass("is-use").addClass("filter__item--selected"),filterContent.removeClass("is-closed").addClass("is-open"));else if(filter.hasClass("is-selected")){if(filter.removeClass("is-selected"),selectedFilters[filterCode])var index=selectedFilters[filterCode].indexOf(filter.attr("filter"));index>-1&&selectedFilters[filterCode].splice(index,1),filter.hasClass("js-filtersItemSingle")&&(delete selectedFilters[filterCode],localStorage.setItem("filtersAllo",JSON.stringify(selectedFilters)),this.setFiltersObjects(),this.filteringContent())}else{filter.addClass("is-selected");var newFilter=filter.attr("filter");selectedFilters[filterCode]||(selectedFilters[filterCode]=[]),-1===selectedFilters[filterCode].indexOf(newFilter)&&(selectedFilters[filterCode].push(newFilter),filter.hasClass("js-filtersItemSingle")&&($(this).addClass("is-selected"),localStorage.setItem("filtersAllo",JSON.stringify(selectedFilters)),this.setFiltersObjects(),this.filteringContent()))}this.setNoResults(e),this.setOddItems(),init_lazyloads()},setNoResults:function(){0===$(".js-scheduleItem:visible:not(.js-scheduleItemError):not(.js-schedule_item_datas):not(.is-off)").length?$(".js-scheduleItemError").addClass("is-show"):$(".js-scheduleItemError").removeClass("is-show")},setFiltersObjects:function(){appliedFilters=JSON.stringify(selectedFilters),localStorage.setItem("filtersAllo",appliedFilters),appliedFilters=JSON.parse(appliedFilters)},setOddItems:function(){$(".schedule__item:visible:odd").removeClass("is-even").addClass("is-odd"),$(".schedule__item:visible:even").removeClass("is-odd").addClass("is-even")}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="filtersSchedule",defaults={filters:".js-filtersSchedule",filtersItem:".js-filtersItem",filtersItemDirect:".js-filtersItem--direct",item:".js-filterItem",filterContent:".js-filter",onLiveFilter:function(){}};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.setEvents()},setElements:function(){this.$element=$(this.element),this.$filtersItem=$(this.element).find(this.settings.filtersItem),this.$filtersItemDirect=$(this.element).find(this.settings.filtersItemDirect),this.$item=$(this.element).find(this.settings.item),this.$tabitem=$(".js-tabs-item"),this.$filterContent=$(this.element).find(this.settings.filterContent),this.$icon=$(this.element).find(".icon"),this.$selectionTv=$(".js-filtersItemSelection"),this.$selectionTvContent=$(".js-articleSelection"),this.$grid=$(".js-scheduleItems"),this.$gridItem=$(".js-scheduleItem"),this.$gridItemError=$(".js-scheduleItemError")},setEvents:function(){this.$filtersItem.on("click",$.proxy(this.toggle,this)),this.$filtersItemDirect.on("click",$.proxy(this.refreshGridDirect,this)),this.$item.on("click",$.proxy(this.refreshGrid,this)),this.$tabitem.on("click",$.proxy(this.tabRefreshGrid,this)),this.$selectionTv.on("click",$.proxy(this.setSelectionTv,this))},refreshGridDirect:function(e){if(this.$filtersItemDirect.hasClass("is-disabled"))return!1;this.$filtersItemDirect.hasClass("is-selected")?(this.$filtersItemDirect.removeClass("is-selected"),this.$grid.removeClass("is-live")):(this.$filtersItemDirect.addClass("is-selected"),this.$grid.addClass("is-live"));var $filtersItemDirect=this.$filtersItemDirect;$('*[data-status="encours"]').each(function(){$(this).parents(".js-filtersItems").attr("data-status","encours")}),$('*[data-status="mi-temps"]').each(function(){$(this).parents(".js-filtersItems").attr("data-status","mi-temps")}),$(".js-filtersItems").each(function(key,item){"encours"!==item.dataset.status&&"mi-temps"!==item.dataset.status&&$(item).toggle(!$filtersItemDirect.hasClass("is-selected"))}),this.settings.onLiveFilter(),this.setOddItems(),this.setNoResults(),init_lazyloads(),e.preventDefault()},setSelectionTv:function(e){this.$selectionTv.hasClass("is-selected")?(this.$selectionTv.removeClass("is-selected"),this.$selectionTvContent.addClass("is-closed"),this.$selectionTvContent.removeClass("is-open")):(this.$selectionTv.addClass("is-selected"),this.$selectionTvContent.removeClass("is-closed"),this.$selectionTvContent.addClass("is-open")),init_lazyloads(),e.preventDefault()},toggle:function(e){var filter=$(e.currentTarget),filterContent=".filter--"+$(e.currentTarget).attr("filter");filter.hasClass("is-selected")?(filter.removeClass("is-selected"),$(filterContent).removeClass("is-open"),$(filterContent).addClass("is-closed")):(this.$filtersItem.removeClass("is-selected"),this.$filterContent.removeClass("is-open"),filter.addClass("is-selected"),$(filterContent).removeClass("is-closed"),$(filterContent).addClass("is-open"))},tabRefreshGrid:function(e){var tabId=$(e.currentTarget).attr("id"),sportId=$(".js-scheduleItems").attr("data-sportid"),$filterWording=$(".js-filtersItem[filter=channels] .js-filtersWording");this.$selectionTv.removeClass("is-selected"),this.$selectionTvContent.removeClass("is-open").addClass("is-closed"),"grid-lachaine"===tabId?($(".js-scheduleItem").removeClass("is-off"),$('.js-scheduleItem[data-channelid="158"]').removeClass("is-off"),$(".js-scheduleItems").removeAttr("data-channelids").removeClass("is-now").removeClass("is-tonight").addClass("is-channel"),$filterWording.html($('.js-filterItem[data-filterchannelids="158"]').html()),this.$item.removeClass("is-selected"),sportId&&$('.js-scheduleItem:not([data-sportid="'+sportId+'"])').addClass("is-off")):("grid-now"===tabId?$(".js-scheduleItems").removeClass("is-tonight").addClass("is-now").removeClass("is-all"):"grid-tonight"===tabId?$(".js-scheduleItems").removeClass("is-now").addClass("is-tonight").removeClass("is-all"):$(".js-scheduleItems").removeClass("is-now").removeClass("is-tonight").addClass("is-all"),$(".js-scheduleItems").hasClass("is-channel")&&($(".js-scheduleItems").removeClass("is-channel"),$filterWording.html($filterWording.attr("data-wording")))),e.preventDefault(),this.setOddItems(),this.setNoResults(),this.toggle(e),init_lazyloads()},refreshGrid:function(e){var that=this,filter=$(e.currentTarget),articleSelection=$(".js-articleSelection"),filterSportId=$(e.currentTarget).attr("data-filtersportid"),filterChannelIds=$(e.currentTarget).attr("data-filterchannelids"),setTabs=!0;this.$selectionTv.removeClass("is-selected"),filter.hasClass("js-filterItem--all")?(this.setInitFilters(filterSportId),$(".js-scheduleItems").removeAttr("data-sportId").removeAttr("data-channelids"),$(".js-scheduleItem").removeClass("is-off"),this.sportFilterLives("General")):(this.setFilterStatus(filter),this.setDaySelection(articleSelection),this.setInitFilters(filterSportId),this.setWordingFilters(filter),"channels"===filter.attr("data-filtertype")?(that.$grid.attr("data-channelids",filterChannelIds).removeAttr("data-sportid"),$(".js-scheduleItem[data-channelid]").each(function(){if("158"===filterChannelIds)setTabs=!1,that.$grid.addClass("is-channel").removeClass("is-now").removeClass("is-tonight").removeAttr("data-channelids"),$(".js-filtersItem[filter=channels]").attr("channel","lachainelequipe"),$(".js-tabs-item").removeClass("is-active");else{var scheduleItemChannelId=JSON.parse("["+$(this).attr("data-channelid")+"]");-1===JSON.parse("["+filterChannelIds+"]").indexOf(scheduleItemChannelId[0])?$(this).addClass("is-off"):$(this).removeClass("is-off"),that.$grid.removeClass("is-channel"),$(".js-filtersItem[filter=channels]").removeAttr("channel")}})):(window.tabClass=that.$grid.attr("class"),$(".js-scheduleItem").removeClass("is-off"),that.$grid.attr("data-sportid",filterSportId).removeAttr("data-channelids"),$(".js-scheduleItem:not(.js-scheduleItemError):not(.is-live):not([data-sportid="+filterSportId+"])").addClass("is-off"),$(".js-filtersItem[filter=channels]").removeAttr("channel"),that.sportFilterLives(filter.html())),this.setTabs(setTabs)),this.setNoResults(e),this.toggle(e),this.setOddItems(),init_lazyloads()},sportFilterLives:function(sportName){var $body=$("body");if($body.attr("class")){var bodyCLasses=$body.attr("class").split(/\s+/),filteredClasses=bodyCLasses.filter(function(elt){return!elt.match("is-(?!ready)([A-zÀ-ÿ0-9._-]*)$")});$body.attr("class",filteredClasses.join().replace(/,/g," ")),sportName=sportName.replace(" ","-"),$body.addClass("is-"+sportName),this.settings.onLiveFilter()}},setNoResults:function(){0===$(".js-scheduleItem:visible:not(.js-scheduleItemError):not(.js-schedule_item_datas):not(.is-off)").length?$(".js-scheduleItemError").addClass("is-show"):$(".js-scheduleItemError").removeClass("is-show")},setTabs:function(_setTabs){_setTabs?($(".js-tabs-item").removeClass("is-active"),$(".js-tabs-all").addClass("is-active"),$(".js-scheduleItems").addClass("is-all").removeClass("is-tonight").removeClass("is-now")):($(".js-tabs-lachaine").addClass("is-active"),$(".js-scheduleItem").removeClass("is-off"))},setOddItems:function(){$(".schedule__item:visible:odd").removeClass("is-even").addClass("is-odd"),$(".schedule__item:visible:even").removeClass("is-odd").addClass("is-even")},setInitFilters:function(filterSportId){$(".js-scheduleItems:not([data-sportId="+filterSportId+"])").removeClass("is-off"),$(".js-filterItem").removeClass("is-selected"),$(".js-filtersWording").each(function(){$(this).html($(this).attr("data-wording"))}),$(".js-scheduleItems").removeClass("is-channel")},setWordingFilters:function(filter){$(".js-filtersWording").each(function(){$(this).html($(this).attr("data-wording"))}),$(".js-filtersItem[filter="+filter.attr("data-filtertype")+"] .js-filtersWording").html(filter.html())},setFilterStatus:function(filter){$(".js-filterItem").removeClass("is-selected"),$(filter).addClass("is-selected"),$(".js-filtersItem--selection").removeClass("is-selected")},setDaySelection:function(articleSelection){articleSelection.addClass("is-closed"),articleSelection.removeClass("is-open")}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="firebaseConnexion",defaults={rtdb:null};Plugin.prototype={init:function(){this.setElements(),this.setVars()},setElements:function(){features.feed.indexOf("qlf-")>1?this.$pK="AIzaSyBTUIB3LzFx8ZF2ARffrfKQYdzN-AMhun0":this.$pK="AIzaSyC1-WZsJKC8ETjlfHC2Y73_1_aEKRH6Y6c",this.$firebase,this.$firebaseApp=null,this.$firebaseDatabase=null,this.$firebaseConfig=null,this.$styles=["min-width: 200px","background: linear-gradient(#FFCA29, #FFA60F)","border-right: 4px solid #039BE5","margin: 0","width: 100%","color: white","padding: 5px 1em","display: block","text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3)","box-shadow: 0 1px 0 rgba(255, 255, 255, 0.4) inset, 0 5px 3px -5px rgba(0, 0, 0, 0.5), 0 -13px 5px -10px rgba(255, 255, 255, 0.4) inset","text-align: center","font-family: Caviar Dreams Bold, Caviar Dreams, Trebuchet MS, Arial","font-weight: bold"].join(";")},setVars:function(){this.rtdb=this.settings.rtdb},setConfig:function(rtdb){if(!rtdb)return!1;if(localStorage.getItem("RTDB")&&localStorage.getItem("RTDB")<rtdb.length)var num=localStorage.getItem("RTDB");else var num=parseInt(Math.random()*rtdb.length);var channel=rtdb[num];if(!channel.db_name)return!1;var db_name=channel.db_name.split(/(['\/.'])/)[4],server_name=db_name.replace(/lives-lequipe-(.[a-z0-9]*)(.*)/g,"lives-lequipe-$1");if(!db_name||!channel.path)return!1;var configObj={s:server_name,c:db_name,pK:this.$pK,p:channel.path};this.$firebaseConfig={apiKey:configObj.pK,authDomain:configObj.s+".firebaseapp.com",databaseURL:"https://"+configObj.c+".firebaseio.com",projectId:configObj.s,path:configObj.p},localStorage.setItem("RTDB",num)},setConnexion:function(rtdb){rtdb&&(this.$firebaseApp||(this.$firebaseApp=firebase.initializeApp(this.$firebaseConfig),this.$firebaseDatabase=this.$firebaseApp.database(),this.$firebaseDatabaseRef=this.$firebaseDatabase.ref(),console.log("%cFIREBASE CONNECTED ",this.$styles)))},disconnect:function(){this.$firebaseApp&&(this.$firebaseApp.delete(),console.log("%cFIREBASE DISCONNECTED ",this.$styles),this.$firebaseApp=null)},getConnexionInfos:function(rtdb){if(!rtdb)return!1;this.setConfig(rtdb);return this.$firebaseApp||this.setConnexion(rtdb),{firebaseDatabase:this.$firebaseDatabase,firebaseDatabaseRef:this.$firebaseDatabaseRef,path:this.$firebaseConfig.path}}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="hCalendar",defaults={list:".js-hCalendarList",items:".js-hCalendarItem",onDateSelected:function(date){}};$.extend(Plugin.prototype,{init:function(){this.setVars(),this.setElements(),this.setEvents(),(this.currentDate?this.$items.filter(".is-selected"):this.$items.filter(".js-hCalendarItemToday")).trigger("click"),$(".js-navscroll").navpagescrolling({scrollDirection:"horizontal",anchor:"center",transition:"ease .7s"})},setVars:function(){this.currentDate=window.location.hash.match("[0-9]+[0-9]+[0-9]+")?window.location.hash.match("[0-9]+[0-9]+[0-9]+")[0]:null},setElements:function(){this.$element=$(this.element),this.$items=$(this.element).find(this.settings.items);var that=this;this.$items.each(function(){$(this).data("date").toString()===that.currentDate&&$(this).addClass("is-selected")}),this.$itemIsDaySelected=$(this.element).find(this.settings.itemIsDaySelected)},setEvents:function(){this.$items.on("click",$.proxy(this.setDate,this))},setDate:function(e){if(window.history.pushState){var $calendarItem=$(e.currentTarget),date=$calendarItem.data("date"),url=this.$element.data("url");$calendarItem.data("status")?history.replaceState({date:date},date,url+".html"):history.pushState({date:date},date,"#"+date),this.$items.removeClass("is-selected"),$calendarItem.addClass("is-selected"),this.settings.onDateSelected(date)}}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="halfDonutChart",defaults={};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.setEvents(),this.setCharts()},setElements:function(){this.$element=$(this.element),this.$chart=this.$element.find(".js-pie-container")},setEvents:function(){},setCharts:function(){this.$chart.each(function(){var color_one=$(this).data("color-one"),color_two=$(this).data("color-two"),pie=$(this).find(".js-pie-graph"),deg=pie.data("pourcentage"),pourcentage=deg/100*180;$(this).find(".js-pie-graph").css("background","linear-gradient("+pourcentage+"deg , "+color_one+" 50% , "+color_two+" 50%)")})}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="kiosk",defaults={};Plugin.prototype={init:function(){this.setElements(),this.setVars(),this.setEvents(),this.isUserPremium()},setElements:function(){this.$element=$(this.element)},setVars:function(){this.isPremium=!1},setEvents:function(){},isToday:function(dateToCheck){var today=new Date,month=today.getMonth()+1,day=today.getDate();return dateToCheck==[today.getFullYear(),month<10?"0"+month:month,day<10?"0"+day:day].join("")},isUserPremium:function(){var self=this;$.ajax({url:"/vel/getRight.php",dataType:"json",success:function(data){if("511"!==data.code&&$(".kiosk__insert").remove(),void 0!==data.LEQ_ARTICLE){var date_max=Math.max.apply(Math,data.LEQ_ARTICLE.jour),$eqmag=$("#kiosque .js-tabs-content").eq(1);self.isToday(date_max)?$eqmag.find(".kiosk__highlight .button, .kiosk__element .button").each(function(ind,elemt){self.buttonToRead(elemt,"/Quotidien/liseuse.php?d="+$(this).attr("data-date")+"&l=equipemag")}):self.setAvailable(data.LEQ_ARTICLE.jour,$eqmag,"&l=equipemag")}void 0!==data.LEQ_PDF&&self.setAvailable(data.LEQ_PDF.jour,$("#kiosque .js-tabs-content").eq(0),""),void 0!==data.MAG_PDF&&self.setAvailable(data.MAG_PDF.jour,$("#kiosque .js-tabs-content").eq(1),"&l=equipemag"),void 0!==data.VELO_PDF&&self.setAvailable(data.VELO_PDF.jour,$("#kiosque .js-tabs-content").eq(3),"&l=velomag"),void 0!==data.FF_PDF&&self.setAvailable(data.FF_PDF.jour,$("#kiosque .js-tabs-content").eq(4),"&l=journalff"),$("#kiosque .js-tabs-content").eq(2).find(".kiosk__highlight, .kiosk__element").each(function(index,element){var tag=element.getAttribute("data-tag");void 0!==data.LEQ_HS&&-1!=$.inArray(tag,data.LEQ_HS)&&self.buttonToRead($(element).find(".button"),"/Quotidien/horsSerie.php?c="+tag)})}})},setAvailable:function(editionAvailable,selector,endingURL){var self=this;$(editionAvailable).each(function(i,val){self.buttonToRead(selector.find('div[data-date="'+val+'"] .button'),"/Quotidien/liseuse.php?d="+val+endingURL)})},buttonToRead:function(button,linkURL){$(button).removeClass("button--black").addClass("button--yellow"),$(button).html("lire"),$(button).attr("href",linkURL)}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.status="play",this.isIos=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),this.isIE=/Edge\/|Trident\/|MSIE /.test(window.navigator.userAgent),this.init()}var pluginName="lazyload",defaults={templatingCallback:function(){}};Plugin.prototype={init:function(){$(".js-outLazyload").hide(),this.setElements(),this.setVars(),this.setEvents(),this.getFirstData(),this.itemsNb=10,this.$element.attr("data-lazyload-refresh")&&(this.clearTemplating(),this.setRefresh(1e3*this.$element.data("lazyload-refresh"),this.$element.attr("data-url-refresh")))},setElements:function(){this.$element=$(this.element)},setRefresh:function(interval,url){var that=this;this.autoTimer=setInterval($.proxy(function(){$.getJSON(url,$.proxy(function(json){that.listJSON=json,that.setEvents(),that.getFirstData(),that.itemsNb=json.length,that.handleScroll()},that))},this),interval)},clearTemplating:function(){$(".js-outLazyload").show(),clearInterval(this.autoTimer)},setVars:function(){this.commentsJSONUrl=this.$element.data().templatingJson,this.itemsNb=10},setEvents:function(){this.isIos||this.isIE||$(window).on("scroll",$.proxy(this.handleScroll,this))},handleScroll:function(){"play"==this.status&&this.$element.length>0&&($(window).scrollTop()+window.innerHeight)/(this.$element.offset().top+this.$element.height())>1&&(this.listTemplating(this.itemsNb),this.itemsNb+=10)},listTemplating:function(maxIndex){$(".js-outLazyload").hide();var newJson,that=this;if(this.listJSON){var json=this.listJSON;(this.isIos||this.isIE)&&(maxIndex=json.length),newJson=json.length>0?json.slice(0,maxIndex):json,(newJson.length==json.length||this.isIos||this.isIE)&&($(".js-outLazyload").show(),$(window).off("scroll",this.handleScroll)),this.templatingPlugin?(this.templatingPlugin.jsonData=newJson,this.templatingPlugin.loadContent()):(this.$element.data("templating-json",newJson),this.templatingPlugin=this.$element.templating({callback:function(){that.settings.templatingCallback()}}).data("plugin_templating"))}},getFirstData:function(){var that=this,objData=this.commentsJSONUrl;"string"==typeof objData&&$.getJSON(objData,$.proxy(function(json){if($('[data-templating-jsonsource="'+that.$element.data("templating")+'"]').length>0){$('[data-templating-jsonsource="'+that.$element.data("templating")+'"]').data("templating-json",json).templating()}if(that.$element.attr("data-templating-key")){var needle=this.$element.attr("data-templating-key"),newJson=findKey(needle,json);newJson&&newJson.length>0&&(json=newJson[0][needle])}that.listJSON=json,that.listTemplating(that.itemsNb)},this)),"object"==(void 0===objData?"undefined":_typeof(objData))&&(that.listJSON=objData,that.listTemplating(that.itemsNb))}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="matchRatings",defaults={tplHeader:".js-matchRatingsHeader-templating",tplList:".js-matchRatingsList-templating",btnScoringScale:".js-matchRatings-scoringScaleBtn",btnSubmit:".js-matchRatings-btnSubmit"};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.setTemplating()},setElements:function(){this.$element=$(this.element)},setVars:function(){this.match_id=this.$element.find(".js-matchRatings-matchId").data("match-id")},setTemplatizedElements:function(){this.$header=this.$element.find(this.settings.tplHeader),this.$btnScoringScale=this.$element.find(this.settings.btnScoringScale),this.$ratablePersonsList=this.$element.find(this.settings.tplList),this.$btnSubmit=this.$element.find(this.settings.btnSubmit)},setTemplating:function(){var self=this;this.$element.templating({callback:function(){self.$element.find(self.settings.tplHeader).templating({callback:function(){self.$element.find(self.settings.tplList).templating({callback:function(){self.setTemplatizedElements(),self.setVars(),self.setEvents(),self.getLocalStorageDatas(),self.updateCounter(),self.hideLoader()}})}})}})},showLoader:function(){$(".js-matchRatings-loader").show()},hideLoader:function(){$(".js-matchRatings-loader").hide()},setEvents:function(){this.$btnScoringScale.on("click",$.proxy(function(){this.$element.find(".js-matchRatings-scoringScale").toggle(),this.$btnScoringScale.find(".js-matchRatings-iconArrow").toggleClass("icon--slimArrowBottom").toggleClass("icon--slimArrowTop")},this)),this.$ratablePersonsList.find(".js-matchRatings-person-button").on("click",$.proxy(function(e){var $button=$(e.currentTarget),$person=$button.parents(".js-matchRatings-person"),$personChoice=$person.find(".js-matchRatings-person-choice");$button.hasClass("is-active")?this.unratePerson($button,$personChoice):this.ratePerson($button,$person,$personChoice),this.updateCounter()},this)),this.$btnSubmit.on("click",$.proxy(function(e){this.submitMatchRatings()},this))},getLocalStorageDatas:function(){for(var localRatings=null,cookies=decodeURIComponent(document.cookie).split(";"),i=0;i<cookies.length;i++){var c=cookies[i].trim();0==c.indexOf("ratings=")&&(localRatings=c.substring("ratings=".length,c.length))}if(null!==localRatings){localRatings=JSON.parse(localRatings);for(var _iterator=localRatings,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}var r=_ref,$person=this.$ratablePersonsList.find('.js-matchRatings-person[data-person-id="'+r.person_id+'"]');if($person.length>0){var $personChoice=$person.find(".js-matchRatings-person-choice"),$button=$person.find('.js-matchRatings-person-button[data-rating="'+r.rating+'"]');this.ratePerson($button,$person,$personChoice)}}this.updateCounter(),document.cookie="ratings=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain=.lequipe.fr"}},ratePerson:function($button,$person,$personChoice){var colorsOpts=this.getColors($person.data("person")),colorObj={color:colorsOpts.selected_text_color,backgroundColor:colorsOpts.selected_background_color};$personChoice.text($button.text()),$person.find(".js-matchRatings-person-button.is-active").removeAttr("style").removeClass("is-active"),$button.addClass("is-active"),$personChoice.add($button).css(colorObj)},unratePerson:function($button,$personChoice){$personChoice.text("-"),$personChoice.removeAttr("style"),$button.removeAttr("style").removeClass("is-active")},getColors:function(data){var colorObj={};for(var i in data.options)"couleur"===data.options[i].objet.__type&&(colorObj[data.options[i].type]=data.options[i].objet.couleur);return colorObj},updateCounter:function(){this.$ratablePersonsList.find(".is-active").length>0?(this.$element.find(".js-matchRatings-counter").hide(),this.$btnSubmit.removeAttr("disabled")):(this.$element.find(".js-matchRatings-counter").show(),this.$btnSubmit.attr("disabled",!0))},submitMatchRatings:function(){var user=setUserInfos();-1!==window.location.host.indexOf(".local:3000")&&(user={id:"null"});var ratingsParam={match_id:this.match_id,ratings:[],__type:"rated_person_list"};if(this.$ratablePersonsList.find(".js-matchRatings-person").each(function(){if($(this).find(".is-active").length>0){var personData=$(this).data("person"),person_id=personData.objet.person.id,personChoice=parseFloat($(this).find(".js-matchRatings-person-choice").text()),team_id=null;personData.objet.person.club&&(team_id=personData.objet.person.club.id),personChoice>10?personChoice=10:personChoice<0&&(personChoice=0),ratingsParam.ratings.push({person_id:person_id,team_id:team_id,rating:personChoice,__type:"rated_person"})}}),user)ratingsParam.user_id=user.id.toString(),this.postRatings(ratingsParam);else{var d=new Date;d.setTime(d.getTime()+18e5);var expires="expires="+d.toUTCString();document.cookie="ratings="+JSON.stringify(ratingsParam.ratings)+";"+expires+";path=/;domain=.lequipe.fr",loginPopin(void 0,$.proxy(function(){user=setUserInfos(),ratingsParam.user_id=user.id.toString(),this.postRatings(ratingsParam)},this))}},postRatings:function(ratingsParam){this.showLoader(),$.ajax({url:this.$element.data("submit-url"),method:this.$element.data("submit-method"),dataType:"json",contentType:"application/json",data:JSON.stringify(ratingsParam)}).done(function(){document.cookie="ratings=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain=.lequipe.fr",delete ratingsParam.user_id;var url=window.location.href;url=url.replace(/\/Article\/|\/Actualites\//,"/Notes-internautes/"),window.location.href=url+"?ratings="+JSON.stringify(ratingsParam)})}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="matchRatingsOverall",defaults={tplMatchRecap:".js-matchRatingsOverallMatchRecap-templating",tplField:".js-matchRatingsOverallField-templating",tplHeader:".js-matchRatingsOverallHeader-templating",tplList:".js-matchRatingsOverallList-templating"};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.setVars(),this.setTemplating()},setElements:function(){this.$element=$(this.element)},setVars:function(){this.params=this.getParams(),this.match_id=this.params.match_id,this.team_id=this.params.ratings[0].team_id},getParams:function(){var params={};if(decodeURIComponent(window.location.search).substring(1).split("&").forEach(function(param){if(-1!==param.indexOf("=")){var paramSplitted=param.split("=");params[paramSplitted[0]]=paramSplitted[1]}else params[param]=!0}),params.ratings){var ratings=JSON.parse(params.ratings);params=$.extend({},params,ratings)}return params},setTemplatizedElements:function(){this.$field=this.$element.find(this.settings.tplField),this.$share=this.$element.find(".js-share")},setTemplating:function(){var self=this,dataUrl=this.$element.data("templating-json").replace("{match_id}",this.match_id).replace("{team_id}",this.team_id);this.$element.data("templating-json",dataUrl),this.$element.templating({callback:function(){self.$element.find(self.settings.tplMatchRecap).templating({callback:function(){self.$element.find(self.settings.tplField).templating({callback:function(){self.$element.find(self.settings.tplHeader).templating({callback:function(){var next=function(){self.setTemplatizedElements(),self.setMetaElements(),self.checkIsAwayTeamRating(),self.updateRatingsWithParams(),self.setEvents(),self.hideLoader()};self.params.share?(next(),$("title").text(self.$element.find(".js-matchRatingsOverall-title").text())):self.$element.find(self.settings.tplList).templating({callback:function(){next(),history.pushState(null,null,location.href+"&share")}})}})}})}})}})},setMetaElements:function(){function replaceAttrValue(el,attr){var value=el.attr(attr);value=value.replace(regx,replaceValue),el.attr(attr,value)}var regx=/\/Article\/|\/Actualites\//,replaceValue="/Notes-internautes/";replaceAttrValue($('meta[itemprop="url"]'),"content"),replaceAttrValue($('link[rel="canonical"]'),"href"),replaceAttrValue($('link[rel="alternate"][media*="only screen"]'),"href"),replaceAttrValue($('meta[property="og:url"]'),"content"),replaceAttrValue($('meta[name="twitter:url"]'),"content")},hideLoader:function(){$(".js-matchRatingsOverall-loader").hide()},checkIsAwayTeamRating:function(){var dataMatch=this.$field.find(".js-field").data("match");this.team_id===dataMatch.exterieur.equipe.id&&this.$field.find(".js-field").addClass("field--away")},updateRatingsWithParams:function(){var self=this,averageTeamRating=0,ratingCounter=0;this.$element.find(".js-personRating").each(function(){var person_id=$(this).data("person-id"),rating="-",player=self.params.ratings.filter(function(person){return person.person_id==person_id})[0]
;if(player&&(player.rating=parseInt(player.rating),!isNaN(player.rating)&&player.rating>=0&&player.rating<=10)){rating=player.rating,averageTeamRating+=rating,ratingCounter++;var overallPersonRating=self.$element.find('.js-overallPersonRating[data-person-id="'+person_id+'"]');if(overallPersonRating.length>0){var text=overallPersonRating.text().replace("-",rating+"/10");overallPersonRating.text(text)}}$(this).text(rating)}),averageTeamRating=parseFloat(averageTeamRating/ratingCounter).toFixed(1).toString().replace(".",","),this.$field.find(".js-field-averageTeamRating").text(averageTeamRating)},setEvents:function(){this.$share.on("click",".js-share-facebook",$.proxy(function(e){fbs_click({params:"?ratings="+encodeURIComponent(JSON.stringify(this.params))+"&share"})},this)),this.$share.on("click",".js-share-twitter",$.proxy(function(e){$('meta[name="twitter:title"]').attr("content",$(e.currentTarget).data("message")),twt_click(e,{params:"?ratings="+encodeURIComponent(JSON.stringify(this.params))+"&share",tinyurl:!0,specialOpen:!0})},this))}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="navigationsetting",defaults={itemElement:"js-navigation-item",activeClass:"is-active"};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.$items.length&&this.setClass()},setElements:function(){this.$element=$(this.element),this.$items=this.$element.find(this.settings.itemElement)},setClass:function(){var plugin=this,url=document.location.href.replace(document.location.origin,"");this.$items.each(function(){var href="";$(this).attr("href")?href=$(this).attr("href"):$(this).find("a").attr("href")&&(href=$(this).find("a").attr("href")),url+="/",href&&url.indexOf(href)>-1&&(plugin.$items.removeClass(plugin.settings.activeClass),$(this).addClass(plugin.settings.activeClass))})}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,$(window).on("resize",$.proxy(function(){this.screenWidth=$(window).width(),this.init()},this)),$(window).trigger("resize")}var pluginName="navpagescrolling",defaults={container:".js-navscroll-mask",scroller:".js-navscroll-list",controllerPrev:".js-navscroll-prev",controllerNext:".js-navscroll-next",pager:{current:".js-navscroll-current",total:".js-navscroll-total"},scrollDirection:"horizontal",transition:"linear 0.25s"};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.unsetEvents(),this.setVars(),this.setDefaultStyles(),this.settings.pager&&this.setPager(),this.setControllers(),this.setEvents(),this.settings.anchor&&this.setAnchor(this.settings.anchor)},setElements:function(){this.$element=$(this.element),this.$container=this.$element.find(this.settings.container),this.$scroller=this.$element.find(this.settings.scroller),this.$items=this.$scroller.children(),this.$prev=this.$element.find(this.settings.controllerPrev),this.$next=this.$element.find(this.settings.controllerNext),this.settings.pager&&(this.$pagerCurrent=this.$element.find(this.settings.pager.current),this.$pagerTotal=this.$element.find(this.settings.pager.total))},setVars:function(){var scrollerSize=0;"vertical"==this.settings.scrollDirection?(this.$items.each(function(){scrollerSize+=$(this).outerHeight(!0)}),this.visibleSize=this.$container.height()):(this.scrollerHeight=this.$items.filter(":first").outerHeight(!0),this.$items.each(function(){scrollerSize+=$(this).outerWidth(!0)}),this.visibleSize=this.$container.width()),this.scrollerSize=scrollerSize,this.itemNum=this.$items.length,this.currentItemIndex=0;var plugin=this;if(this.settings.pager){var pages=[0];$(this.$items.get()).each(function(){"vertical"==plugin.settings.scrollDirection?$(this).position().top+$(this).outerHeight(!0)>plugin.$items.eq(pages[pages.length-1]).position().top+plugin.visibleSize&&pages.push($(this).index()):$(this).position().left+$(this).outerWidth(!0)>plugin.$items.eq(pages[pages.length-1]).position().left+20+plugin.visibleSize&&pages.push($(this).index())}),this.pages=pages}},setDefaultStyles:function(){this.$container.css({position:"relative",overflow:"hidden"}),this.settings.transition&&this.$scroller.css({transition:"all "+this.settings.transition}),"vertical"==this.settings.scrollDirection?this.$scroller.css({position:"absolute",top:0,height:this.scrollerSize}):(this.$container.css({height:this.scrollerHeight}),this.$scroller.css({position:"absolute",left:0,width:this.scrollerSize}))},unsetDefaultStyles:function(){this.$container.removeAttr("style"),this.$scroller.removeAttr("style")},setControllers:function(){1==this.currentPage?this.$prev.addClass("is-disabled"):this.$prev.removeClass("is-disabled"),this.currentPage==this.pages.length?(this.$next.addClass("is-disabled"),this.setAnchor("end")):this.$next.removeClass("is-disabled")},setPager:function(){for(var count=0,i=0;i<this.pages.length;i++)this.currentItemIndex>=this.pages[i]&&count++;this.currentPage=count,this.$pagerCurrent.text(this.currentPage),this.$pagerTotal.text(this.pages.length)},setEvents:function(){this.$prev.on("click",$.proxy(this.toPrev,this)),this.$next.on("click",$.proxy(this.toNext,this))},unsetEvents:function(){this.$prev.off("click"),this.$next.off("click")},toNext:function(e){var plugin=this;if(!this.$next.hasClass("is-disabled")){var newItemIndex,end="vertical"==this.settings.scrollDirection?this.$items.eq(this.currentItemIndex).position().top+this.visibleSize:this.$items.eq(this.currentItemIndex).position().left+20+this.visibleSize;$(this.$items.get()).each(function(){"vertical"==plugin.settings.scrollDirection?$(this).position().top+$(this).outerHeight(!0)<=end&&(newItemIndex=$(this).index()+1):$(this).position().left+$(this).outerWidth(!0)<=end&&(newItemIndex=$(this).index()+1)}),newItemIndex=Math.min(this.itemNum-1,newItemIndex),this.slideTo(newItemIndex)}e.preventDefault()},toPrev:function(e){var plugin=this;if(!this.$prev.hasClass("is-disabled")){var newItemIndex,start="vertical"==this.settings.scrollDirection?this.$items.eq(this.currentItemIndex).position().top-this.visibleSize:this.$items.eq(this.currentItemIndex).position().left-20-this.visibleSize;$(this.$items.get().reverse()).each(function(){"vertical"==plugin.settings.scrollDirection?$(this).position().top>=start&&(newItemIndex=$(this).index()):$(this).position().left>=start&&(newItemIndex=$(this).index())}),newItemIndex=Math.max(0,newItemIndex),this.slideTo(newItemIndex)}e.preventDefault()},slideTo:function(newItemIndex){if("vertical"==this.settings.scrollDirection){var offsetTop=newItemIndex>0?-1*this.$items.eq(newItemIndex).position().top:-(parseInt(this.$items.css("margin-top"))+parseInt(this.$items.css("margin-bottom")));this.$scroller.css({top:offsetTop})}else{var offsetLeft=newItemIndex>0?-1*this.$items.eq(newItemIndex).position().left:-(parseInt(this.$items.css("margin-left"))+parseInt(this.$items.css("margin-right")));this.$scroller.css({left:offsetLeft})}this.currentItemIndex=newItemIndex,this.settings.pager&&this.setPager(),this.setControllers()},setAnchor:function(position){if("end"===position&&this.scrollerSize>this.visibleSize){if("vertical"==this.settings.scrollDirection){var offsetTop=-1*this.scrollerSize+this.visibleSize+parseInt(this.$items.css("margin-top"))+parseInt(this.$items.css("margin-bottom"));this.$scroller.css({top:offsetTop})}else{var offsetLeft=-1*this.scrollerSize+this.visibleSize+parseInt(this.$items.css("margin-left"))+parseInt(this.$items.css("margin-right"));this.$scroller.css({left:offsetLeft})}this.currentPage=this.pages.length}if("center"===position){if("vertical"==this.settings.scrollDirection){var offsetTop=-1*this.scrollerSize/2+1*this.visibleSize/2;this.$scroller.css({top:offsetTop})}else{var offsetLeft=-1*this.scrollerSize/2+1*this.visibleSize/2;this.$scroller.css({left:offsetLeft})}this.currentPage=-1,this.setControllers()}this.setPager()}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="navtabing",defaults={tabElements:".js-tabs-item",tabContentElements:".js-tabs-content",tabContentBloc:".js-tabs-container",tabActiveClass:"is-active",tabDisabledClass:"is-disabled",matchUrl:!1,tabSelect:!1};$.extend(Plugin.prototype,{init:function(){if(this.setElements(),this.setEvents(),this.settings.matchUrl){var hasMatched=!1,url=location.host+location.pathname;this.$tabs.each(function(){url.indexOf($(this).children("a").attr("href"))===url.length-$(this).children("a").attr("href").length&&(hasMatched=!0,$(this).trigger("click"))}),hasMatched||this.$tabs.not("."+this.settings.tabDisabledClass).first().trigger("click")}else this.$tabs.filter("."+this.settings.tabActiveClass).length?this.$tabsContent.length?this.$tabsContent.filter("[data-tabs-eq]").length||(this.$tabsContent.first().attr("data-tabs-eq",this.$tabs.filter("."+this.settings.tabActiveClass).index()),this.$tabs.filter("."+this.settings.tabActiveClass).attr("data-tabs-refresh")&&(this.$tab=this.$tabs.filter("."+this.settings.tabActiveClass),this.setRefresh(1e3*this.$tab.data("tabs-refresh"),this.$tab.data("tabs-refresh-condition")))):this.$tabs.filter("."+this.settings.tabActiveClass).removeClass(this.settings.tabActiveClass).trigger("click"):this.$tabs.not("."+this.settings.tabDisabledClass).first().trigger("click")},setElements:function(){this.$element=$(this.element),this.$tabs=this.$element.find(this.settings.tabElements),this.$tabsContent=this.$element.find(this.settings.tabContentElements),this.$tabsContentBloc=this.$element.find(this.settings.tabContentBloc)},setEvents:function(){this.$tabs.on("click",$.proxy(function(e){if(this.$tab=$(e.currentTarget),!this.xhr&&!this.$tab.hasClass(this.settings.tabDisabledClass)){clearTimeout(this.autoTimer);var tabIndex=this.$tabs.index(this.$tab);if(1!=this.$tabsContent.length||this.$tabsContent.filter("[data-tabs-eq]").length||(this.$tabsContent.first().attr("data-tabs-eq",tabIndex),this.$tab.attr("data-tabs-refresh")||this.$tab.removeAttr("data-tabs-load")),this.$tab.attr("data-tabs-load")?this.loadContent(tabIndex):this.showContent(tabIndex),window.history.pushState&&this.$tab.children("a").length&&this.$tab.children("a").attr("href").length>1){var scrollTop=0;$(window).scrollTop()?scrollTop=$(window).scrollTop():window.location.hash&&$(window.location.hash).length?scrollTop=$(window.location.hash).offset().top:window.location.hash&&$("a[name='"+window.location.hash.substr(1)+'"').length&&(scrollTop=$("a[name='"+window.location.hash.substr(1)+'"').offset().top),window.history.pushState({tabIndex:tabIndex,scrollTop:scrollTop},tabIndex,this.$tab.children("a").attr("href"))}this.$element.trigger("tabing")}e.preventDefault()},this)),$(window).on("popstate",$.proxy(function(){if(window.history.state){var datas=window.history.state;this.$tab=this.$tabs.eq(datas.tabIndex),this.$tab.attr("data-tabs-load")?this.loadContent(datas.tabIndex):this.showContent(datas.tabIndex),$(window).scrollTop(datas.scrollTop)}},this)),this.settings.tabSelect&&this.$element.find(this.settings.tabSelect).on("change",$.proxy(function(){var index=this.$tabs.filter(":selected").index();this.$tabs.eq(index).trigger("click")},this))},loadContent:function(tabIndex){var url=this.$tab.data("tabs-load");this.$element.addClass("is-loading"),this.xhr=$.get(url,$.proxy(function(html){if(this.$tabsContent.filter("[data-tabs-eq='"+tabIndex+"']").length){var parsedHTML=$.parseHTML(html);$(parsedHTML).filter(this.settings.tabContentElements).attr("data-tabs-eq",tabIndex),this.$tabsContent.filter("[data-tabs-eq='"+tabIndex+"']").replaceWith(parsedHTML),this.$tabsContent=this.$element.find(this.settings.tabContentElements),this.$tab.hasClass(this.settings.tabActiveClass)&&this.$element.trigger("tabing-refresh")}else this.$tabsContentBloc.append(html),this.$tabsContent=this.$element.find(this.settings.tabContentElements),this.$tabsContent.last().attr("data-tabs-eq",tabIndex);this.showContent(tabIndex),this.$tab.attr("data-tabs-refresh")?this.setRefresh(1e3*this.$tab.data("tabs-refresh"),this.$tab.data("tabs-refresh-condition")):this.$tab.removeAttr("data-tabs-load")},this)).always($.proxy(function(){this.$element.removeClass("is-loading"),this.xhr=null},this))},showContent:function(tabIndex){this.$tab.hasClass(this.settings.tabActiveClass)||(this.$tabs.filter("."+this.settings.tabActiveClass).removeClass(this.settings.tabActiveClass),this.$tab.addClass(this.settings.tabActiveClass),this.$tabsContent.hide(),this.$tabsContent.filter("[data-tabs-eq='"+tabIndex+"']").length?this.$tabsContent.filter("[data-tabs-eq='"+tabIndex+"']").show():this.$tabsContent.eq(tabIndex).attr("data-tabs-eq",tabIndex).show(),this.$element.trigger("tabing-ready"))},setRefresh:function(interval,condition){condition&&!this.$element.find(condition).length||(this.autoTimer=setTimeout($.proxy(function(){this.$tab.trigger("click")},this),interval))}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="pageHome",defaults={};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.setPlugins()},setElements:function(){this.$element=$(this.element),this.$player=this.$element.find(".js-player")},setPlugins:function(){this.$player.scheduledVisibility({callback:this.handleChannelPlayerContent})},handleChannelPlayerContent:function(elt,slot){var $player=elt.find(".js-video-live"),videoID=slot.playerSrc.split("/")[slot.playerSrc.split("/").length-1];$player.dailymotionAPI({videoID:videoID});var $title=elt.find(".js-playerTitle");-1===slot.playerSrc.indexOf(channelPlayerId)&&$title.html("la chaine L'Équipe en direct")}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="pageLive",defaults={interval:60,intervalPub:180};$.extend(Plugin.prototype,{init:function(){this.$firebaseTimeConnexion=0,this.$sport=$("body").data("sport"),this.$idMatch=$("body").data("id"),this.$feedNewComments=[],this.$feedComments=[],this.$isAutoCommented=null,this.$isChrono=document.location.search.indexOf("chrono")>0,this.$highlightWatcher=0,this.$nbRefreshes=0,this.$nbTotalRefreshes=0,this.playersSet=!1,this.performSuperlive=null,this.lequipePlayerHash=null,this.lequipeHeaderPlayerHash=null,this.playerVideo=null,this.$firebaseConnexion=!1,this.$firebaseAction=null,this.$firebaseLimit=10,this.$firebasePlugin=null,this.$FeedTypesItem={texte:"Classic",photo:"Photo",but:"Goal",tirs_au_but:"PenaltyShootOut",carton:"Card",remplacement:"Substitution",embed:"Embed",chiffre:"Number",note:"Rating",sondage:"Poll",stats:"Stats",quiz:"Quiz",article:"Article",tweet:"Tweet",outbrain:"Outbrain",pub:"Pub",prelive:"Prelive",AutoComment:"AutoComment"},this.setElements(),this.setVars(),this.setEvents(),this.setTemplates(),this.refreshStatus()},setElements:function(){this.$element=$(this.element),this.$newCommentsButton=this.$element.find(".js-newcomms"),this.$refreshButton=this.$element.find(".js-refreshLive"),this.$tabCommentsBefore=this.$element.find(".js-tabs-comments-before"),this.$tabCommentsNotBefore=this.$element.find(".js-tabs-comments-notbefore"),this.$tabHighlights=this.$element.find(".js-tabs-highlights"),this.$tabCommentsRankings=this.$element.find(".js-tabs-rankings"),this.$tabCommentsStats=this.$element.find(".js-tabs-stats"),this.$scoreboard=this.$element.find("[data-tracking-status]"),this.$templatings=this.$element.find(".js-live-templating"),this.$liveitems=this.$element.find(".js-live-item"),this.$navscroll=this.$element.find(".js-tplhnavscroll"),this.$tweets=this.$element.find(".js-commTweet"),this.$adSlots=this.$element.find(".js-ads-slots"),this.$preview=this.$element.find(".js-livePreview"),this.$navtab=this.$element.find(".js-navtab"),this.$navtabCompo=this.$element.find(".js-tabs-livecompo"),this.$commentInfo=this.$element.find(".js-comment-infos"),this.$scoreboardInfo=this.$element.find(".js-scoreboard-infos"),this.$tabsLive=this.$element.find(".js-tabs-live"),this.$superlive=this.$element.find(".js-perform-player"),this.$lequipeplayerlive=this.$element.find(".js-lequipePlayerVideo"),this.$lequipeheaderplayerlive=this.$element.find(".js-lequipeHeaderPlayerVideo"),this.$styles=["min-width: 200px","background: linear-gradient(#FFCA29, #FFA60F)","border-right: 4px solid #039BE5","margin: 0","width: 100%","color: white","padding: 5px 1em","display: block","text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3)","box-shadow: 0 1px 0 rgba(255, 255, 255, 0.4) inset, 0 5px 3px -5px rgba(0, 0, 0, 0.5), 0 -13px 5px -10px rgba(255, 255, 255, 0.4) inset","text-align: center","font-family: Caviar Dreams Bold, Caviar Dreams, Trebuchet MS, Arial","font-weight: bold"].join(";"),this.$stylesrefresh=["min-width: 200px","background: #00AA33","border-right: 4px solid #008855","margin: 0","width: 100%","color: white","padding: 5px 1em","display: block","text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3)","box-shadow: 0 1px 0 rgba(255, 255, 255, 0.4) inset, 0 5px 3px -5px rgba(0, 0, 0, 0.5), 0 -13px 5px -10px rgba(255, 255, 255, 0.4) inset","text-align: center","font-family: Caviar Dreams Bold, Caviar Dreams, Trebuchet MS, Arial","font-weight: bold"].join(";"),(navigator.userAgent.indexOf("Trident")>=0||navigator.userAgent.indexOf("MSIE")>=0)&&$(".js-scoreboard__inside").css("margin-top","100px")},setVars:function(){this.refreshPubInterval=null,this.refreshLiveInterval=null,this.commentsNb=10,this.timeInterval=null,this.timeGame,this.timeGameLib=null,this.statusGame=""},setEvents:function(){var that=this;this.$element.on("click",".js-refreshLive",$.proxy(function(e){refreshPub("byclick"),that.$nbTotalRefreshes++,that.$nbRefreshes=0,this.$templatings.each(function(){$(this).templating().data("plugin_templating")&&$(this).templating().data("plugin_templating").clearTemplating()}),this.animateRefresh(),e.preventDefault()},this)),this.$tabsLive.navtabing().off("tabing-ready").on("tabing-ready",$.proxy(function(){this.setTemplates(),refreshPub("byclick"),that.$nbTotalRefreshes++,that.$nbRefreshes=0},this)),$(".js-tabs-livecompo").navtabing(),this.$element.on("click",".js-newcomms",$.proxy(function(e){that.firebaseCommentShowNew()},this)),this.$element.on("click",".starRating__label",$.proxy(function(e){this.getUserVote(e.target)},this)),this.$element.on("mouseover",".starRating__label",$.proxy(function(e){this.setTempNote(e.target)},this)),this.$element.on("mouseout",".starRating__label",$.proxy(function(e){this.resetNote(e.target)},this)),this.$element.on("click",".js-openComment",$.proxy(function(e){this.showPhotoComment(e.target)},this)),this.$element.on("click",".js-closeComment",$.proxy(function(e){this.hidePhotoComment(e.target)},this)),this.$element.on("click",".js-poll-form-item",$.proxy(function(e){this.$element.find(".js-poll").polling($(e.currentTarget))},this)),this.$element.on("click",".js-tabs-item",$.proxy(function(e){$(".js-outLazyload").show(),$(".js-tabs-highlights").removeClass("is-active")},this)),this.$element.on("click",".js-tabs-prelive",$.proxy(function(e){var jsLiveCommentsTemplating=$(".js-livecomments-templating").data("plugin_lazyload");$(".js-livecomments-templating").data("plugin_lazyload")&&(jsLiveCommentsTemplating.status="pause"),this.initPrelive()},this)),this.$element.on("click",".js-tabs-highlights",$.proxy(function(e){var jsLiveCommentsTemplating=$(".js-livecomments-templating").data("plugin_lazyload");$(".js-livecomments-templating").data("plugin_lazyload")&&(jsLiveCommentsTemplating.status="play"),$(".js-tabs-allcomments").click(),$(".js-tabs-live .js-tabs-item").removeClass("is-active"),$(".js-tabs-highlights").addClass("is-active"),$(".js-livecomments-templating").addClass("is-highlights"),1!=that.$highlightWatcher&&$(".js-livecomments-templating").data("plugin_lazyload")&&(jsLiveCommentsTemplating.listTemplating(200),$(".js-livecomments-templating").data("itemnb",200)),that.$highlightWatcher=1},this)),this.$element.on("click",".js-tabs-allcomments",$.proxy(function(e){var jsLiveCommentsTemplating=$(".js-livecomments-templating").data("plugin_lazyload");$(".js-livecomments-templating").data("plugin_lazyload")&&(jsLiveCommentsTemplating.status="play"),$(".js-livecomments-templating").removeClass("is-highlights")},this)),this.$element.on("click",".js-tabs-item-bench",$.proxy(function(e){$(".js-bench-templating").templating()},this)),this.$element.on("click",".js-tabs-item-stats",$.proxy(function(e){that.playerStatPlugin||$(".js-playerButton:first-child").click()},this)),this.$element.on("click",".js-playerButton",$.proxy(function(e){var playerId=$(e.currentTarget).data("id");that.playerStatPlugin=$(".js-playersStats-templating").data("plugin_templating"),that.playerStatPlugin?($(".js-playerStat").removeClass("active"),$(".js-tabs-item-stats").click(),that.showStat(playerId)):$(".js-playersStats-templating").templating({callback:function(){that.initPager(),$(".js-playerStat").removeClass("active"),$(".js-tabs-item-stats").click(),that.showStat(playerId)}})},this)),this.$element.on("mouseover",".js-playerStatPrev,.js-playerStatNext",$.proxy(function(e){var b=$(this).css("background-color");$(this).data("prev-bg",b);var bcolor=b.replace("rgb","").replace("(","").replace(")","").split(","),bcolorHexa="#"+that.componentToHex(parseInt(bcolor[0]))+that.componentToHex(parseInt(bcolor[1]))+that.componentToHex(parseInt(bcolor[2]));if(3==bcolor.length){var hcolor,isdark=(299*bcolor[0]+587*bcolor[1]+114*bcolor[2])/1e3;hcolor=isdark<23?that.colorLuminance(bcolorHexa,-.3):that.colorLuminance(bcolorHexa,.3),$(this).css("background-color",hcolor)}})),this.$element.on("mouseout",".js-playerStatPrev,.js-playerStatNext",$.proxy(function(e){$(this).css("background-color",$(this).data("prev-bg"))}))},initPager:function(){$("li.js-playerStat").each(function(){var jsPrev=$(this).prev().length>0?$(this).prev():$(this).parent().find("li:last-child"),jsNext=$(this).next().length>0?$(this).next():$(this).parent().find("li:first-child"),jsplayerStatPrev=$(this).find(".js-playerStatPrev"),jsplayerStatNext=$(this).find(".js-playerStatNext");jsplayerStatPrev.css("color",jsPrev.css("color")).css("background-color",jsPrev.css("background-color")),jsplayerStatNext.css("color",jsNext.css("color")).css("background-color",jsNext.css("background-color")),jsplayerStatPrev.find(".js-playerStatName").html(jsPrev.find(".js-playerStatName").data("name")),jsplayerStatNext.find(".js-playerStatName").html(jsNext.find(".js-playerStatName").data("name")),jsplayerStatPrev.attr("data-id",jsPrev.data("id")).addClass("js-playerButton"),jsplayerStatNext.attr("data-id",jsNext.data("id")).addClass("js-playerButton")})},initPrelive:function(){$(".js-prelive-templating").templating({callback:function(){$(".js-prelive-templating").preLive(),$(".js-tabs").tabs()}}),$(".js-navtab").removeClass("navtab--hidden")},setPlayers:function(){var that=this,resetPlayers=this.lequipePlayerHash!=$(".js-match-infos").data("lequipeplayerlive"),resetHeaderPlayers=this.lequipeHeaderPlayerHash!=$(".js-match-infos").data("lequipeheaderplayerlive");if((!this.playersHeaderSet||resetHeaderPlayers)&&(this.playersHeaderSet=!0,this.lequipeHeaderPlayerHash=$(".js-match-infos").data("lequipeheaderplayerlive"),this.$lequipeheaderplayerlive))if($(".js-headervideo").data("id",this.lequipeHeaderPlayerHash).attr("data-id",this.lequipeHeaderPlayerHash),this.lequipeHeaderPlayerHash){this.$lequipeheaderplayerlive.data("id",this.lequipeHeaderPlayerHash);var pluginHeaderDM=$(".js-headervideo").dailymotionAPI().data("plugin_dailymotionAPI");that.$lequipeheaderplayerlive.show()}else pluginHeaderDM&&(pluginHeaderDM.player.stop(),that.$lequipeheaderplayerlive.hide());this.playersSet&&!resetPlayers||(this.playersSet=!0,this.performSuperlive=$(".js-scoreboard-infos").data("superlive"),this.lequipePlayerHash=$(".js-match-infos").data("lequipeplayerlive"),this.performSuperlive&&(this.$superlive.playerToggle(),this.$superlive.show()),this.lequipePlayerHash?(that.$superlive.data("plugin_playerToggle")&&that.$superlive.data("plugin_playerToggle").close(),$(".js-lequipePlayerVideo").templating({callback:function(){var pluginDM=$(".js-video").dailymotionAPI().data("plugin_dailymotionAPI");that.$lequipeplayerlive.playerToggle({onOpen:function(){pluginDM.player.play(),that.$superlive.data("plugin_playerToggle")&&that.$superlive.data("plugin_playerToggle").close()},onClose:function(){pluginDM.player.pause()}}),that.$lequipeplayerlive.show()}})):this.$lequipeplayerlive.data("plugin_templating")&&(this.$lequipeplayerlive.html(""),this.$lequipeplayerlive.data("plugin_templating",null)))},setTemplates:function(){var that=this;$("body").data("background");$(".js-scoreboard-templating").templating({callback:function(){$(".js-stadium-fore").css("background-image",$(".js-stadium").css("background-image")),$(".js-scoreboard__inside").addClass("is-scored"),$(".js-scoreboard-infos").data("commented")?that.$isAutoCommented=!1:(that.$isAutoCommented=!0,$(".js-livecomments-templating").data("templating","#tpl-live-autocomments").attr("data-templating","#tpl-live-autocomments")),$(".js-match-infos").data("stats")&&that.$tabCommentsStats.removeClass("is-hidden"),that.setPlayers(),that.checkFirebaseConnexion(),that.setTemplatingByFeed()}}),$(".js-lineup-templating").templating({callback:function(){$(".js-tactics").length>0&&that.$navtabCompo.removeClass("navtab--hidden")}})},checkFirebaseConnexion:function(){var that=this,rtdb=$(".js-match-infos").data("rtdb");if(document.location.search.indexOf("nofirebase")>-1&&(rtdb=null),rtdb&&!1===that.$firebaseConnexion&&(rtdb=Object.keys(rtdb).filter(function(key){return rtdb[key].filter.platform.name_filter.values.indexOf("desktop")>-1}).reduce(function(obj,key){return obj[obj.length]=rtdb[key],obj},[])),rtdb&&rtdb.length>0){if(!1===that.$firebaseConnexion){that.$firebasePlugin=$("body").firebaseConnexion();var firebaseObj=that.$firebasePlugin.data("plugin_firebaseConnexion").getConnexionInfos(rtdb),isTemplatingByFeed=2;!1!==firebaseObj&&(that.liveFirebase(firebaseObj),isTemplatingByFeed=!1!==that.$firebaseConnexion?0:1),isTemplatingByFeed>=1&&setTimeout(function(){console.log("%c FIREBASE CONNEXION IS ",that.$styles,that.$firebaseConnexion+" "+that.$firebaseTimeConnexion+"ms"),!1===that.$firebaseConnexion&&that.setTemplatingByFeed()},5e3)}}else that.$firebasePlugin&&that.$firebasePlugin.data("plugin_firebaseConnexion")&&that.$firebasePlugin.data("plugin_firebaseConnexion").disconnect()},setTemplatingByFeed:function(){var that=this;$(".js-match-infos").data("commentsurl")&&0===that.$nbTotalRefreshes?($(".js-livecomments-templating").lazyload({templatingCallback:function(){that.$feedComments=$(".js-livecomments-templating").data("plugin_lazyload").listJSON,that.reIndexFeed(),$(".js-livecomments-templating").data("plugin_lazyload").listJSON=that.$feedComments,that.callbackFeed()}}),$("[data-firebase]").data("firebase","false"),$("[data-firebase]").templating(),that.$element.find(".js-live-templating").templating({callback:function(){$(".js-tplhnavscroll").navpagescrolling({scrollDirection:"horizontal",anchor:"end",transition:"ease 0.5s"}),that.onRefreshTemplate()}})):"Football"==that.$sport&&0===$(".js-navtab .js-tabs-item.is-active").length&&($(".js-tabs-prelive").addClass("is-active"),$(".js-tabs-content-comments").hide(),$(".js-tabs-content-prelive").show(),that.initPrelive())},callbackFeed:function(){var that=this;$(".js-live-item[data-templating]").templating({callback:function(e){setTimeout(function(){var k=e.data("id-comment");$(".js-livecomments-templating").height()>parseInt($(".js-livecomments-templating").css("min-height"))&&$(".js-livecomments-templating").css("min-height",$(".js-livecomments-templating").height()),k&&that.injectStyles('.js-live-item[data-id-comment="'+k+'"]{ min-height: '+e.height()+"px; }")},1500)}}),$(".js-comment-infos").each(function(){"note"!==$(this).data("comment-type")||$(this).hasClass(".is-templated")||that.getInfosVote($(this).data("id-comment"))}),$(".js-playerBanner-templating").templating(),0===that.$nbTotalRefreshes&&($(".js-live-itemAutoCommented, .js-live-itemCommented").length>0||$(".js-newcomms.is-active").length>0?($(".js-tabs-allcomments").removeClass("is-hidden"),$(".js-tabs-allcomments").css("display","inline-block"),$(".js-live-highlight").length>0&&$(".js-tabs-highlights").removeClass("is-hidden")):($(".js-tabs-allcomments,.js-tabs-highlights").addClass("is-hidden"),$(".js-tabs-prelive").addClass("is-active"),$(".js-tabs-content-comments").hide(),$(".js-tabs-content-prelive").show(),that.initPrelive())),this.onRefreshTemplate()},refreshDatas:function(){var that=this;this.$templatings.each(function(){if(!1===that.$firebaseConnexion||!$(this).data("firebase"))try{$(this).data("templating-json")&&$(this).data("plugin_templating").loadContent($(this).data("templating-json"))}catch(e){console.log("Plugin templating "+e,$(this))}}),that.checkFirebaseConnexion()},refreshStatus:function(){var that=this;that.status=this.$scoreboard.data("tracking-status"),that.refreshPubInterval=setInterval($.proxy(function(){that.$nbRefreshes++,refreshPub("auto")},that),1e3*that.settings.intervalPub)},refreshTweets:function(){this.$tweets.each(function(){$(this).data("loaded")||(twttr.widgets.createTweet($(this).data("tweetid"),document.getElementById($(this).attr("id"))),$(this).data("loaded",!0))})},refreshAdSlots:function(){this.$adSlots.each(function(){var position=$(this).data("position").toLowerCase();$(this).data("google-query-id")||googletag.cmd.push(function(){googletag.display("dfp_"+position)})})},refreshBackground:function(){$(".js-stadium-fore").fadeOut(600,function(){$(".js-stadium-fore").css("background-image",$(".js-stadium").css("background-image")),setTimeout(function(){$(".js-stadium-fore").fadeIn(600)},2e3)})},animateRefresh:function(){$(".js-scoreboard__score").addClass("is-refreshing"),setTimeout(function(){$(".js-scoreboard__score").removeClass("is-refreshing")},5e3)},onRefreshTemplate:function(){this.$nbTotalRefreshes++,$(".js-switch").switch(),this.setElements(),this.refreshTweets(),this.refreshAdSlots(),this.$element.find(".js-poll").polling(),this.$element.find(".js-charts-container").halfDonutChart(),!this.$isAutoCommented&&$(".js-live-itemCommented").length>0?this.$preview.hide():$(".js-outLazyload").show(),this.showMinute()},showMinute:function(){setTimeout(function(){$(".js-scoreboard__status [data-status='encours']").css("font-size","18px")},1500)},injectStyles:function(rule){$("<style />",{html:rule}).appendTo("body")},setTempNote:function(e){var note=($(e).data("max-value"),
Math.abs($(e).data("value")-$(e).data("max-value"))),idComment=$(e).data("id-comment");$(".rateUser-"+idComment).html(note)},resetNote:function(e){this.setElements();var idMatch=this.$idMatch,idComment=$(e).data("id-comment"),maxNote=$(e).data("max-value");if(readCookie("NOTE_"+idMatch+"_"+idComment)){var cookieValue=readCookie("NOTE_"+idMatch+"_"+idComment);Math.abs(cookieValue-maxNote);$(".rateUser-"+idComment).html(cookieValue)}else $(".rateUser-"+idComment).html("1")},getUserVote:function(e){this.setElements();var idComment=$(e).data("id-comment"),note=Math.abs($(e).data("value")-$(e).data("max-value"));this.setVote(idComment,note)},getInfosVote:function(idComm){this.setElements();var idMatch=this.$idMatch,maxNote=$("[data-id-comment="+idComm+"]").data("max-value");if(localStorage.getItem("NOTE_"+idComm)&&$.ajax({type:"GET",dataType:"json",url:"/v6/php/callRichComms_NOTE_RES.php",data:{MATCH:idMatch,COMM:idComm},success:function(data){var res=data.MSG;$(".averageNote-"+idComm).html("note des participants : "+res.moyenne),$(".nbvotes-"+idComm).html(res.votants>0?res.votants+" votes":res.votants+" vote")},error:function(){var res=JSON.parse(localStorage.getItem("NOTE_"+idComm));res.votants&&res.moyenne&&($(".nbvotes-"+idComm).html(res.votants>1?res.votants+" votes":res.votants+" vote"),$(".averageNote-"+idComm).html(res.moyenne?"note des participants : "+res.moyenne:""))}}),readCookie("NOTE_"+idMatch+"_"+idComm)){var cookieValue=readCookie("NOTE_"+idMatch+"_"+idComm),noteCookie=Math.abs(cookieValue-maxNote);$(".rateUser-"+idComm).html(cookieValue),$($(".star-"+noteCookie)).each(function(){$(this).data("id-comment")===idComm&&$(this).attr("checked",!0)})}},setVote:function(idComm,note){var idMatch=this.$scoreboardInfo.data("id-match");$(".rateUser-"+idComm).html(note),readCookie("NOTE_"+idMatch+"_"+idComm)?createCookie("NOTE_"+idMatch+"_"+idComm,note):$.ajax({type:"POST",dataType:"json",url:"/v6/php/callRichComms_NOTE.php",data:{NOTE:note,MATCH:idMatch,COMM:idComm},success:function(data){var res=data.MSG;$(".averageNote-"+idComm).html("note des participants : "+res.moyenne),$(".nbvotes-"+idComm).html(res.votants>0?res.votants+" votes":res.votants+" vote"),createCookie("NOTE_"+idMatch+"_"+idComm,note)}})},showPhotoComment:function(e){var idComment=$(e).data("id-comment");$(".livecomments__media--commentaire").each(function(){$(this).data("id-comment")===idComment&&($(this).children("table").removeClass("is-disable"),$(e).parent(".js-openComment").addClass("is-disable"))})},hidePhotoComment:function(e){var idComment=$(e).data("id-comment");$(".livecomments__media--commentaire").each(function(){$(this).data("id-comment")===idComment&&($(this).children("table").addClass("is-disable"),$(this).children(".js-openComment").removeClass("is-disable"))})},showStat:function(playerId){var posStats=$(".js-tabs-item-stats").offset().top,windowMin=$(window).scrollTop()-60;(posStats>$(window).scrollTop()+$(window).height()||posStats<windowMin)&&$("html, body").animate({scrollTop:posStats-60},150),setTimeout(function(){$(".js-playerStat").removeClass("active"),$(".js-playerStat-"+playerId).addClass("active")},150)},setChartTitleColor:function(){$(".pie__header").each(function(){$(this).css("background-color",$(this).data("color"))})},showTabFeed:function(){$(".js-tabs-allcomments").removeClass("is-hidden"),$(".js-tabs-allcomments").click()},componentToHex:function(c){var hex=c.toString(16);return 1==hex.length?"0"+hex:hex},colorLuminance:function(hex,lum){hex=String(hex).replace(/[^0-9a-f]/gi,""),hex.length<6&&(hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]),lum=lum||0;var c,i,rgb="#";for(i=0;i<3;i++)c=parseInt(hex.substr(2*i,2),16),c=Math.round(Math.min(Math.max(0,c+c*lum),255)).toString(16),rgb+=("00"+c).substr(c.length);return rgb},formatText:function(e){var ee;try{return ee=JSON.stringify(e),ee=ee.toLowerCase().replace(/ /g,"-").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^0-9a-z]/g,"-")}catch(error){console.log(error)}},removeEmptyAdd:function(){},firebaseNotificationGestion:function(){var that=this,numNewComments=that.$feedNewComments.number,msg=(numNewComments>1?"voir les nouveaux commentaires":"voir le nouveau commentaire")+" ("+numNewComments+")";numNewComments>0?(that.showTabFeed(),that.$newCommentsButton.addClass("is-active").find("span[data-new]").html(msg)):that.$newCommentsButton.removeClass("is-active").find("span[data-new]").html(msg),setTimeout(function(){that.$newCommentsButton.sticking({offset:12+$(".js-perform-player").height()})},1e3)},firebaseCommentShowNew:function(){var that=this;that.$isAutoCommented&&$(".js-tabs-allcomments").click(),that.$newCommentsButton.removeClass("is-active"),that.$feedComments.length<10&&that.$feedComments.length+that.$feedNewComments.length>=10&&$(".js-livecomments-templating").data("itemnb",that.$feedComments.length+that.$feedNewComments.length),that.$feedComments=that.$feedNewComments.concat(that.$feedComments),that.$feedNewComments=[],that.reIndexFeed(),that.firebaseFeedUpdate(),setTimeout(function(){var pos=$(window).scrollTop();that.$newCommentsButton.hasClass("is-sticky")&&(pos=$(".js-livecomments-templating").position().top-50),$("html, body").animate({scrollTop:pos},300,function(){that.firebaseFeedTemplatize(that.$feedComments),$(".js-live-item:nth-child(-n+"+that.$feedNewComments.length+")").addClass("livecomments__item--new"),setTimeout(function(){$(".js-live-item").removeClass("livecomments__item--new")},350)})},50)},firebaseFeedUpdate:function(){$(".js-livecomments-templating").data("waitUpdate",!0)},firebaseFeedTemplatize:function(data){var that=this;if($(".js-livecomments-templating").data("waitUpdate")){$(".js-livecomments-templating").data("waitUpdate",!1),$(".js-livecomments-templating").data("lazyload-refresh",null).removeAttr("data-lazyload-refresh");var jsLiveCommentsTemplating=$(".js-livecomments-templating").data("plugin_lazyload");$(".js-livecomments-templating").data("plugin_lazyload")&&(jsLiveCommentsTemplating.commentsJSONUrl=data,jsLiveCommentsTemplating.clearTemplating(),$(".js-livecomments-templating").data("itemnb")&&(jsLiveCommentsTemplating.itemsNb=$(".js-livecomments-templating").data("itemnb")),jsLiveCommentsTemplating.getFirstData(),jsLiveCommentsTemplating.setEvents(),setTimeout(function(){that.onRefreshTemplate()},200)),$(".js-livecomments-templating").data("plugin_templating")&&$(".js-livecomments-templating").data("plugin_templating").clearTemplating()}},firebaseCommentUpdate:function(val){var el=$('[data-key="'+val.objet.index+'"]');el.attr("data-templating",val.template);try{el.data("plugin_templating")&&(el.data("plugin_templating").tplId=val.template)}catch(e){console.log("firebaseCommentUpdate Error",e)}setTimeout(function(){$('[data-templating="#tpl-commentTypePub"]').each(function(){$(this).height()<30&&$(this).hide().appendTo(".livecomments")})},1e3)},commentCheckIndex:function(index){var that=this,ret=!1;return $.map(that.$feedNewComments,function(e,k){e.objet.index===index&&(ret=!0)}),$.map(that.$feedComments,function(e,k){e.objet.index===index&&(ret=!0)}),ret},infoComment:function(val){if(!val.objet.id)switch(val.layout){case"web_internal":val.objet.id="PRELIVE",val.objet.type="prelive";break;case"layout_DFP":val.objet.id=val.objet.position,val.objet.type="pub",val.template="#tpl-commentTypePub";break;case"outbrain":val.objet.id=val.objet.widget_id_desktop,val.objet.type="outbrain",val.template="#tpl-commentTypePub"}return val},setNewComment:function(val){var that=this;if(0==$.map(that.$feedNewComments,function(e,k){if(e.objet.index===val.objet.index)return[1]}).length){switch(that.$feedNewComments.unshift(val),val.layout){case"web_internal":case"layout_DFP":case"outbrain":that.$feedNewComments.number--}that.$feedNewComments.number=that.$feedNewComments.length,that.firebaseNotificationGestion()}},updateComment:function(val){var that=this;$.map(that.$feedComments,function(e,k){e.objet.index===val.objet.index&&(that.$feedComments[k]=val)}),$.map(that.$feedNewComments,function(e,k){e.objet.index===val.objet.index&&(that.$feedNewComments[k]=val)}),that.firebaseFeedTemplatize(that.$feedComments)},setChrono:function(){var that=this,timeChrono=[],timeChronoAdd=[];that.timeGame+=1e3;var chrono=new Date(that.timeGame);switch(timeChrono.h=chrono.getHours()-1,timeChrono.min=chrono.getMinutes()+60*timeChrono.h,timeChrono.sec=chrono.getSeconds(),timeChrono.min>=45?(timeChronoAdd.min=timeChrono.min-45,timeChrono.min=45,timeChronoAdd.sec=("0"+timeChrono.sec).slice(-2),timeChrono.sec="' +"+timeChronoAdd.min+":"+timeChronoAdd.sec):timeChrono.sec=":"+("0"+timeChrono.sec).slice(-2),that.statusGame){case"DM":break;case"RM":timeChrono.min+=45;break;case"DP":timeChrono.min+=90;break;case"RP":timeChrono.min+=105;break;case"M":that.timeGameLib="mi-temps";break;case"FP":that.timeGameLib="fin du temps règlementaire";break;case"MP":that.timeGameLib="mi-temps de la prolongation";break;case"TAB":return!1;default:timeChrono=null,that.timeGameLib=""}that.$isChrono&&(that.timeGameLib=timeChrono&&null!=timeChrono?timeChrono.min+timeChrono.sec:null,$(".scoreboard__status").html(that.timeGameLib))},reIndexFeed:function(){var that=this;if(that.$feedComments&&that.$feedComments.length>0){if(that.$feedComments.forEach(function(el,key){switch(!that.$isAutoCommented&&el.objet.id||(el.objet.id=that.formatText(el.objet.libelle_info+el.objet.texte),"transfert"==el.objet.picto_web&&(el.objet.id=that.formatText(el.objet.libelle_info+el.objet.texte+"-"+el.objet.attachment.remplacement.entrant.nom))),el.layout){case"web_internal":el.objet.id="PRELIVE",el.objet.type="prelive";break;case"layout_DFP":el.objet.id=el.objet.position,el.objet.type="pub",el.template="#tpl-commentTypePub";break;case"outbrain":el.objet.id=el.objet.widget_id_desktop,el.objet.type="outbrain"}void 0===el.objet.index&&(el.objet.index=that.$feedComments.length-parseInt(key)),el.objet.order=that.$feedComments.length-el.objet.index,el.template||(el.template="#tpl-commentTypeClassic")}),that.$isAutoCommented)return!1;that.$feedComments=that.$feedComments.sort(function(a,b){var a1=a.objet.order,b1=b.objet.order;return a1==b1?0:a1>b1?1:-1})}},liveFirebase:function(configObj){var that=this,firebasePlugin=that.$firebasePlugin.data("plugin_firebaseConnexion"),pathFirebaseData=configObj.path,livesFeedStatus=firebasePlugin.$firebaseDatabaseRef.child(pathFirebaseData+"match/statut/");$(".js-scoreboard__match").data("plugin_templating")||$(".js-scoreboard__match").templating();var timeConnexion=new Date;that.$firebaseTimeConnexion=timeConnexion.getTime(),livesFeedStatus.on("value",function(data){var val={};val[data.key]=data.val(),console.log("%cFIREBASE STATUS",that.$styles,data.val());var newtimeConnexion=new Date;if(that.$firebaseTimeConnexion=newtimeConnexion.getTime()-that.$firebaseTimeConnexion,null!==data.val()){if(that.statusGame=val.statut.periode,"DP"!=val.statut.periode&&"MP"!=val.statut.periode&&"RP"!=val.statut.periode&&"FP"!=val.statut.periode&&"TB"!=val.statut.periode||(val.specifics={prolongation:"prolongation"},"S"==val.statut.periode&&(val.statut.libelle="arrêté"),"FP"==val.statut.periode&&(val.statut.libelle="Fin du temps règlementaire"),"TB"==val.statut.periode&&(val.specifics={score_tirs_au_but:[]})),"T"==val.statut.periode&&val.statut.libelle&&"t.a.b"==val.statut.libelle.substr(0,5)){var tab=val.statut.libelle.replace("t.a.b ",""),tab=tab.split("-");val.specifics={score_tirs_au_but:{domicile:tab[0],exterieur:tab[1]}}}if("T"==val.statut.periode){var sco1=parseInt($(".js-score-home").html()),sco2=parseInt($(".js-score-away").html());$(".js-score-home,.js-score-away").removeClass("is-winnerGame"),sco1>sco2&&$(".js-score-home").addClass("is-winnerGame"),sco1<sco2&&$(".js-score-away").addClass("is-winnerGame")}if(val.statut.period_start_time&&!that.timeGameLib){var serverTimestamp=Date.parse(features.timeIso);val.statut.period_start_time=1e3*parseInt(val.statut.period_start_time),that.timeGame=serverTimestamp-val.statut.period_start_time,that.timeGame<0&&(that.timeGame=0),that.$isChrono&&(that.timeInterval=setInterval(function(){that.setChrono()},1e3))}console.log("%cFIREBASE STATUS TEMPLATING",that.$styles,val),$("[data-tracking-status]").data("tracking-status",val.statut.type).attr("data-tracking-status",val.statut.type),that.timeGameLib&&(val.statut.libelle=that.timeGameLib),that.$isChrono&&$("[data-statut]").data("statut")==val.statut.type&&-1==["V","M","FP","MP","TAB","T"].indexOf(val.statut.type)?($(".scoreboard__status").css("backgroundColor","#FFF"),setTimeout(function(){$(".scoreboard__status").css("backgroundColor","#F8F8F8")},3e3)):($("[data-statut]").data("statut",val.statut.type).attr("data-statut",val.statut.type),$(".js-scoreboard__status").templating().data("plugin_templating").killTemplating(val.statut)),$(".js-scoreboard__overtime").templating().data("plugin_templating").killTemplating(val),"T"!=val.statut.periode&&"TB"!=val.statut.periode&&(console.log("%cFIREBASE STATUS TEMPLATING NOT ENDED",that.$styles,val),$(".js-scoreboard__timeline").templating().data("plugin_templating").killTemplating(val)),!1===that.$firebaseConnexion&&(that.$firebaseConnexion=!0,$(".js-scoreboard-templating").templating().data("plugin_templating").clearTemplating(),that.listenersFirebase(configObj)),that.showMinute()}}),1==that.$firebaseConnexion&&that.listenersFirebase(configObj)},listenersFirebase:function(configObj){var that=this,firebasePlugin=that.$firebasePlugin.data("plugin_firebaseConnexion"),pathFirebaseData=configObj.path;firebasePlugin.$firebaseDatabaseRef.child(pathFirebaseData+"/commentaires/__type").on("value",function(data){data.val()?$(".js-backgroundStadium").data("plugin_templating")&&($(".js-backgroundStadium").data("plugin_templating").clearTemplating(),$(".js-backgroundStadium").data("templating-json",$(".js-scoreboard-templating").data("templating-json-stored")).attr("data-templating-json",$(".js-scoreboard-templating").data("templating-json-stored"))):(that.$firebaseConnexion=!1,that.$firebasePlugin.data("plugin_firebaseConnexion").disconnect(),$(".js-livecomments-templating").data("lazyload-refresh","60").attr("data-lazyload-refresh","60"))}),$('[data-firebase][data-firebase-path!="/"]').each(function(){var Elem=$(this);firebasePlugin.$firebaseDatabaseRef.child(pathFirebaseData+$(this).data("firebase-path")).on("value",function(data){Elem.templating().data("plugin_templating").clearTemplating();var dataPath=Elem.data("firebase-path"),val=data.val();dataPath=dataPath.replace(pathFirebaseData,""),Elem.each(function(){if(dataPath.indexOf("score")>0){val=parseInt("0"+val);var h="0"+$(this).html().trim()}if(dataPath.indexOf("score")<0?($(this).templating().data("plugin_templating").clearTemplating(),$(this).data("templating-json",JSON.stringify(val)),$(this).templating().data("plugin_templating").loadContent(val)):$(this).html(val),null===val&&$(this).html(""),$(this).data("firebase","true"),dataPath.indexOf("score")>=0&&("domicile"==data.key||"exterieur"==data.key)){var hh="0"+$(this).html().trim();parseInt(hh)!=parseInt(h)&&that.animateRefresh()}})})});var livesFeedComments=firebasePlugin.$firebaseDatabase.ref(pathFirebaseData+"/commentaires/items");livesFeedComments.limitToLast(3).on("child_added",function(data,prevChildKey){var val=data.val();if(val.objet.index=parseInt(data.key)+1,val=that.infoComment(val),that.commentCheckIndex(val.objet.index)){var o=val.objet;console.log("%cFIREBASE COMMENTS SET (CHANGED) ",that.$styles,o),that.firebaseFeedUpdate(),that.updateComment(val)}else{var o=val.objet;console.log("%cFIREBASE COMMENTS ADD ("+(that.$newCommentsButton.hasClass("is-sticky")?"is-sticky":"not-sticky")+') "'+val.objet.index+'"',that.$styles,o),that.firebaseFeedUpdate(),that.setNewComment(val),that.$newCommentsButton.hasClass("is-sticky")||(that.firebaseCommentShowNew(),$(".js-tabs-allcomments").removeClass("is-hidden"))}}),livesFeedComments.limitToLast(3).on("child_changed",function(data,prevChildKey){var val=data.val();val.objet.index=parseInt(data.key)+1;var o=val.objet;console.log("%cFIREBASE COMMENTS CHANGED ",that.$styles,o),val=that.infoComment(val),that.firebaseFeedUpdate(),that.updateComment(val)})}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="pageLivesList",defaults={hCalendar:".js-hCalendar",tplCompetition:".js-livesListCompetition-templating",tplResults:".js-livesListResults-templating",tplScores:".js-livesListScores-templating",tplStandings:".js-livesListStandings-templating"};$.extend(Plugin.prototype,{init:function(){this.nbRefresh=0,this.nbRefreshCalender=0,this.setElements(),this.setVars(),this.setDatas(window.location.hash.slice(1)),this.setCalendar(),this.setEvents()},setElements:function(){this.$element=$(this.element),this.$hCalendar=this.$element.find(this.settings.hCalendar),this.$refreshButton=this.$element.find(".js-refreshLive"),this.$refreshIcon=this.$refreshButton.find(".buttonRefresh"),this.$templatings=this.$element.find(".js-livesList-templating"),this.$flux=this.$templatings.data("templating-json"),this.$liveitems=this.$element.find(".js-live-item"),this.$filters=this.$element.find(".js-livesListFilters"),this.$filtersOptions=this.$filters.find(".js-filter__content"),this.$nowCheckbox=this.$filters.find(".js-filtersItem--direct")},setVars:function(){this.dateLivesList=this.$element.data("date"),this.refreshLiveInterval=null},setCalendar:function(){var that=this;this.$hCalendar.templating({callback:function(){that.$hCalendar.hCalendar({list:".js-hCalendarList",items:".js-hCalendarItem",onDateSelected:function(date){that.setDatas(date)}}),that.updateFilters()}})},setEvents:function(){this.setRefresh()},updateFilters:function(){this.checkToday()?(this.$refreshButton.show(),this.$nowCheckbox.show()):(this.$nowCheckbox.hide(),this.$refreshButton.hide(),this.$nowCheckbox.removeClass("is-selected"));var $nowCheckbox=this.$nowCheckbox;this.$nowCheckbox.hasClass("is-selected")&&$(".js-filtersItems").each(function(key,item){"encours"!==item.dataset.status&&"mi-temps"!==item.dataset.status&&$(item).toggle(!$nowCheckbox.hasClass("is-selected"))})},handleNoResult:function(){var msgDisplay=0==$(".livesList__sport:visible").length?"block":"none";$(".livesList__noEvent").css("display",msgDisplay)},initFilters:function(jsonFile){var that=this;this.nbRefreshCalender>0&&(this.$filters.filtersSchedule().data("plugin_filtersSchedule")&&this.$filters.filtersSchedule().data("plugin_filtersSchedule",null),jsonFile&&this.$filtersOptions.templating().data("plugin_templating")&&this.$filtersOptions.templating().data("plugin_templating").loadContent(jsonFile)),this.filterTemplatingPlugin=this.$filtersOptions.templating({callback:function(){that.$filters.filtersSchedule({onLiveFilter:that.handleNoResult})}}).data("plugin_templating")},loadDatasLive:function(){var that=this;this.initFilters(),this.filtersDataPath=this.$filtersOptions.data("templating-json"),this.templatingGlobalPlugin=this.$templatings.templating({callback:function(){var $removeTpl=$(".js-removeTpl");$(".js-livesListCompetition-templating").each(function(){$(this).templating({callback:function(){$(".js-livesListResults-templating").each(function(){$(this).templating({callback:function(){$(".js-livesListScores-templating").each(function(){$(this).templating().data("plugin_templating")}).removeAttr("data-templating-json").removeAttr("data-templating"),$(".js-livesListScoresStatus-templating").each(function(){$(this).templating().data("plugin_templating")}),$(".js-livesListScoresTab-templating").each(function(){$(this).templating().data("plugin_templating")}),$(".js-livesListButeursCollectif-templating").each(function(){$(this).templating().data("plugin_templating")}),$(".js-livesListCartonsCollectif-templating").each(function(){$(this).templating().data("plugin_templating")})}}).data("plugin_templating")}).removeAttr("data-templating-json").removeAttr("data-templating")}}).data("plugin_templating"),$(".js-livesListStandings-templating").templating().data("plugin_templating")}).removeAttr("data-templating-json").removeAttr("data-templating"),that.verifyRanking(),that.checkToday(),that.setRanking(),that.updateFilters(),that.$element.find(".js-gameLink").on("click",that.gameLinkHandler),$removeTpl.empty(),$removeTpl.remove(),$(document.body).removeClass("is-loading"),that.nbRefresh>=1&&refreshPub("byclick"),that.nbRefresh++,that.$refreshIcon.removeClass("is-reloading"),0==$removeTpl.length&&$(document.body).addClass("is-ready"),that.handleNoResult()}}).data("plugin_templating")},gameLinkHandler:function(e){var gameLink=e.currentTarget;window.open(gameLink.dataset.url,gameLink.dataset.target).opener=null},checkToday:function(){return!!$(".js-hCalendarItemToday").hasClass("is-selected")||(this.clearRefresh(),!1)},setDatas:function(date,force){if($(".js-removeTpl").length>0)return!1;if(date){date=date.toString().replace(/-/g,"");var flux=this.$flux.replace(/([0-9]{8})/g,date)}else var flux=this.$flux;if(this.$flux!=flux||1==force){this.nbRefreshCalender=this.nbRefresh;if(this.$flux=flux,date){this.filtersDataPath=this.$filtersOptions.data("templating-json"),this.$filtersOptions.data("templating-json",this.filtersDataPath.replace(/[0-9]{8}/,date));var jsonFile=this.filtersDataPath.replace(/[0-9]{8}/,date);this.initFilters(jsonFile),this.setRefresh()}this.$templatings.addClass("js-removeTpl").addClass("livesList__updating");var $footer=$("footer");0!==$footer.length&&$(window).scrollTop()+$(window).height()>$footer.offset().top||$(document.body).addClass("is-loading"),this.$templatings.replaceWith('<div class="js-livesList-templating livesList__container"  data-templating="#tpl-livesList-global"  data-templating-refresh="180" data-templating-json="'+flux+'"></div>'),this.onRefreshTemplate()}else this.loadDatasLive()},setRanking:function(){$(".js-ranking").on("click",function(){var competition=$(this).parent();competition.addClass("is-rankingAnimate").toggleClass("is-ranking");var arrRefreshed=$("body").data("rankrefresh"),level=$(this).data("level").replace(/(.*)V[0-9\/]\/(.*).json/g,"$2"),p=arrRefreshed.indexOf(level);competition.hasClass("is-ranking")&&-1==p?(arrRefreshed.push(level),$("body").data("rankrefresh",arrRefreshed)):competition.hasClass("is-ranking")||(delete arrRefreshed[p],$("body").data("rankrefresh",arrRefreshed)),setTimeout(function(){$(".is-rankingAnimate").removeClass("is-rankingAnimate")},300)})},verifyRanking:function(){$("body").data("rankrefresh").forEach(function(e){$("[data-level]").each(function(){$(this).data("level").indexOf(e)>0&&$(this).parent().addClass("is-ranking")})})},setRefresh:function(){var that=this;$(".js-refreshLive").on("click",function(){that.clearRefresh(),that.setDatas(null,1),that.$refreshIcon.addClass("is-reloading")})},clearRefresh:function(){this.templatingGlobalPlugin.clearTemplating()},onRefreshTemplate:function(){this.setElements(),this.setVars(),this.loadDatasLive(),this.checkToday(),this.updateFilters()}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="playerToggle",defaults={onOpen:function(e){},onClose:function(e){}};Plugin.prototype={init:function(){this.setElements(),this.setEvents()},setElements:function(){this.$element=$(this.element),this.$arrow=this.$element.find(".js-arrow")},setEvents:function(){this.$arrow.bind("click",$.proxy(function(){this.$element.toggleClass("is-closed"),this.$element.hasClass("is-closed")?this.settings.onClose(this.$element):this.settings.onOpen(this.$element)},this))},close:function(){if(this.$element.hasClass("is-closed"))return!1;this.$element.addClass("is-closed"),this.settings.onClose(this.$element)}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="polling",defaults={urls:{results:"/v6/php/Sondage_getResultats.php",save:"/v6/php/Sondage_enregReponse.php"},elements:{form:".js-poll-form",formItems:".js-poll-form-item",response:".js-poll-response",responseItems:".js-poll-response-item",responseValues:".js-poll-reponse-value",responseBars:".js-poll-reponse-bar"}};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.setVars(),this.setEvents(),localStorage.getItem("poll_"+this.pollId)&&this.getResult()},setElements:function(){this.$element=$(this.element),this.$form=this.$element.find(this.settings.elements.form),this.$formItems=this.$element.find(this.settings.elements.formItems),this.$response=this.$element.find(this.settings.elements.response),this.$responseItems=this.$element.find(this.settings.elements.responseItems),this.$responseValues=this.$element.find(this.settings.elements.responseValues),this.$responseBars=this.$element.find(this.settings.elements.responseBars)},setVars:function(){this.pollId=this.$element.data("poll-id"),this.pollType=this.$element.data("poll-type"),this.isMultiple=this.$element.data("poll-is-multiple"),this.nbReponse=this.$element.data("poll-nb-response")?this.$element.data("poll-nb-response"):2,this.displayResult=this.$element.data("poll-display-result"),this.arrayRepp=[]},setEvents:function(){this.$formItems.off("click").on("click",$.proxy(function(e){this.$form.hasClass("is-disabled")||this.$formItems.hasClass("is-userChoice")||("sondage"===this.pollType?this.savePoll(e.currentTarget):this.save($(e.currentTarget))),e.preventDefault()},this))},savePoll:function(item){var data={};data={base:"sondage",answers_ids:[$(item).attr("data-poll-form-id")],question_id:this.pollId.toString(),__type:"poll_participation_request"},$(item).addClass("is-userChoice"),$.ajax({url:"/elements/php/poll/createPollParticipation.php",type:"POST",dataType:"json",data:JSON.stringify(data)}).done($.proxy(function(ret){ret.poll&&(localStorage.setItem("poll_"+this.pollId,JSON.stringify({id:[$(item).attr("data-poll-form-id")]})),this.showResultSondage(ret.poll))},this))},save:function($item){var endpoint,data={};if("sondage"===this.pollType?(endpoint="/elements/php/poll/createPollParticipation.php",data.idsondage=this.pollId.toString()):(endpoint="/v6/php/Quiz_enregReponse.php",data.idquestion=this.pollId),data.type=this.isMultiple?"multiple":"unique",this.isMultiple){if(this.$element.find(".tempChoice").length<this.nbReponse&&!$item.hasClass(".tempChoice"))$item.addClass("tempChoice"),this.arrayRepp.push($item.data("poll-form-id"));else{var index=this.arrayRepp.indexOf($item.data("poll-form-id"));index>=0&&this.arrayRepp.splice(index,1),$item.removeClass("tempChoice")}this.$element.find(".tempChoice").length===this.nbReponse&&this.$element.on("click",".poll__multiple--button",$.proxy(function(e){this.$element.find(".tempChoice").removeClass("tempChoice").addClass("is-userChoice"),data.numrep=this.arrayRepp,$.ajax({url:endpoint,type:"POST",dataType:"json",data:"sondage"===this.pollType?JSON.stringify(data):data}).done($.proxy(function(ret){"sondage"===this.pollType?this.displayResult?(this.getResult(),localStorage.setItem("poll_"+this.pollId,JSON.stringify({id:[data.numrep]}))):alert("Merci pour votre vote."):(this.getResult(),localStorage.setItem("poll_"+this.pollId,JSON.stringify({id:[data.numrep]})))},this))},this))}else $item.addClass("is-userChoice"),data.numrep=$item.data("poll-form-id"),$.ajax({url:endpoint,type:"POST",dataType:"json",data:"sondage"===this.pollType?JSON.stringify(data):data}).done($.proxy(function(ret){"sondage"===this.pollType?this.displayResult?(this.getResult(),localStorage.setItem("poll_"+this.pollId,JSON.stringify({id:[data.numrep]}))):alert("Merci pour votre vote."):(this.getResult(),localStorage.setItem("poll_"+this.pollId,JSON.stringify({id:[data.numrep]})))},this))},getResult:function(){var endpoint,data={};"sondage"===this.pollType?(endpoint="/elements/php/poll/createPollParticipation.php",data.question_id=this.pollId,data.base="sondage"):(endpoint="/v6/php/Quiz_getResultats.php",data.idquestion=this.pollId,data.type=this.isMultiple?"multiple":"unique"),$.ajax({url:endpoint,type:"GET",dataType:"json",data:data}).done($.proxy(function(datas){if(datas)"sondage"===this.pollType?"multiple"===data.type?this.showResultSondage(datas.poll,this.nbReponse):this.showResultSondage(datas.poll):this.showResultQuizz(datas);else if(localStorage.getItem("poll_"+this.pollId)){var storage=JSON.parse(localStorage.getItem("poll_"+this.pollId));for(i=0;i<storage.id.length;i++)this.selectItem(storage.id[i])}},this))},showResultSondage:function(datas,nbResponse){var responseStored=JSON.parse(localStorage.getItem("poll_"+this.pollId));if(responseStored)for(i=0;i<responseStored.id.length;i++)this.$formItems.filter('[data-poll-form-id="'+responseStored.id[i]+'"]').addClass("is-userChoice");this.$formItems.filter('.poll__multiple[data-poll-id="'+this.pollId+'"]').remove();var best_vote,votesCount=datas.participants,nb_vote=0;$(".nbvotes-"+this.pollId).html(votesCount+" votes").parents(".starRating__users-note").show(),$('.poll__multiple[data-poll-id="'+this.pollId+'"]').remove();var rsps=[];if(nbResponse){for(var i=0;i<datas.length;i++){var proportion=Math.round(100*datas[i].nb_votes/votesCount);this.$responseValues.eq(i).text(proportion+"%"),rsps.push({index:i,value:datas[i].nb_votes}),rsps.sort(function(a,b){return b.distance-a.distance}),this.$formItems.eq(i).addClass("isnot-best_vote")}for(j=0;j<nbResponse;j++)this.$formItems.eq(rsps[j].index).removeClass("isnot-best_vote").addClass("is-best_vote")}else{for(var i=0;i<datas.answers.length;i++){var proportion=datas.answers[i].percentage;this.$responseValues.eq(i).text(parseInt(proportion)+"%"),nb_vote<parseInt(datas.answers[i].hits)&&(nb_vote=parseInt(datas.answers[i].hits),best_vote=i),this.$formItems.eq(i).addClass("isnot-best_vote")}this.$formItems.eq(best_vote).removeClass("isnot-best_vote").addClass("is-best_vote")}},showResultQuizz:function(datas){var storage=JSON.parse(localStorage.getItem("poll_"+this.pollId));this.$formItems.filter('[data-poll-form-id="'+storage.id+'"]').addClass("is-userChoice");for(var votesCount=0,i=0;i<datas.length;i++)votesCount+=parseInt(datas[i].NB_REPONSES);$(".nbvotes-"+this.pollId).html(votesCount+" votes");for(var i=0;i<datas.length;i++){var proportion=Math.round(100*datas[i].NB_REPONSES/votesCount);this.$responseValues.eq(i).text(proportion+"%"),parseInt(datas[i].IS_BONNE_REPONSE)?this.$formItems.eq(i).addClass("is-valid"):this.$formItems.eq(i).addClass("isnot-valid")}},selectItem:function(id){this.$formItems.filter('[data-poll-form-id="'+id+'"]').addClass("is-active"),this.$form.addClass("is-disabled")}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.listPopin={},this.init()}var pluginName="popin",defaults={site:"EFR",prefix_freq:"dernierePopup_",prefix_pv:"popinVues_",expires:365,height:388,width:713};Plugin.prototype={init:function(){this.setElements();var hasList=this.getParamsPopin()
;this.setEvents(),hasList&&this.checkAllPopin()},setElements:function(){this.$element=$(this.element)},setEvents:function(){},getParamsPopin:function(){return"undefined"!=typeof popin&&null!=popin&&0!=popin&&""!=popin&&(this.listPopin=popin,!0)},checkAllPopin:function(){var that=this;$.each(this.listPopin,function(i,popin){if(that.checkOne(popin))return void that.show(popin)})},show:function(popin){var that=this;conxpopup({width:this.settings.width,height:this.settings.height,html:"<iframe src='"+popin.fichier+"' width='"+(this.settings.width+2)+"' height='"+(this.settings.height+2)+"' style='' >"}),that.setCookieFreq(popin),that.setCookieVue(popin,0)},checkFrequence:function(popin){var cookieFrequence=this.settings.prefix_freq+popin.id,last_timestamp=$.cookie(cookieFrequence),timestamp=this.getTimestamp();return console.log("last_timestamp: ",last_timestamp),timestamp-last_timestamp>=popin.freq_exp},setCookieVue:function(popin,nb_vue){var cookiePageVue=this.settings.prefix_pv+popin.id,nbPageVue=$.cookie(cookiePageVue);this.isInt(nbPageVue)||(nbPageVue=0);var newPv=0;newPv=this.isInt(nb_vue)?parseInt(nb_vue):parseInt(nbPageVue)+1,$.cookie(cookiePageVue,newPv,{expires:this.settings.expires})},setCookieFreq:function(popin){var cookieFrequence=this.settings.prefix_freq+popin.id,timestamp=this.getTimestamp();$.cookie(cookieFrequence,timestamp,{expires:this.settings.expires})},getTimestamp:function(){return Math.floor((new Date).getTime()/1e3)},checkPageVue:function(popin){var cookiePageVue=this.settings.prefix_pv+popin.id,nbPageVue=$.cookie(cookiePageVue);return popin.nb_avt_aff<=nbPageVue},checkOne:function(popin){if(popin.site!=this.settings.site)return!1;if(!this.checkAbonne(popin))return!1;var date_debt=popin.d_deb+"T00:00:00",date_fin=popin.d_fin+"T23:59:59";return!!this.isBetweenDate(date_debt,date_fin,"now")&&(!!this.isBetweenTime(popin.h_deb,popin.h_fin)&&!(!this.checkWhiteList(popin)||this.checkBlackList(popin)||!this.checkFrequence(popin)||(this.setCookieVue(popin),!this.checkPageVue(popin))))},isBetweenDate:function(from,to,dateCheck){var oDateCheck,oFrom,oTo;return void 0!==from&&void 0!==to&&(oDateCheck=void 0===dateCheck||"now"==dateCheck?new Date:new Date(dateCheck),oFrom=new Date(from),oTo=new Date(to),oDateCheck>oFrom&&oDateCheck<oTo)},isBetweenTime:function(timeFrom,timeTo){var now=(new Date).toISOString().slice(0,19).replace("T"," ");now=now.split(" ");var date=now[0],date_debt=date+"T"+timeFrom,date_fin=date+"T"+timeTo;return!!this.isBetweenDate(date_debt,date_fin,"now")},checkWhiteList:function(popin){return 0==popin.pages.length||this.testListRegex(popin.pages,document.location.pathname)},checkBlackList:function(popin){return 0!=popin.pages_exclues.length&&this.testListRegex(popin.pages_exclues,document.location.pathname)},checkAbonne:function(popin){var isModeAbo=document.location.host.indexOf("abonnes.")>-1?1:0;return!(void 0===popin.mode_abo||"GRA"==popin.mode_abo&&isModeAbo||"ABO"==popin.mode_abo&&!isModeAbo)},testListRegex:function(listRegex,string){var retour;return $.each(listRegex,function(i,regex){var regExp=new RegExp(regex,"gi");if(null!==string.match(regExp))return void(retour=!0)}),!!retour},isInt:function(value){return!isNaN(value)&&function(x){return(0|x)===x}(parseFloat(value))}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="preLive",defaults={};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.setEvents(),this.setVars(),this.setTemplates(),this.setDonutDatas(),this.limitHistoryMatches()},setElements:function(){this.$element=$(this.element),this.historyMatches=""},setEvents:function(){this.$element.on("click",".js-prelive-confrontation-tabs",$.proxy(function(e){this.showElements(".js-history-toggle","js-history-matches"),this.selectCompetition(e.target)},this)),this.$element.on("click",".js-history-toggle .js-arrowPrelive",$.proxy(function(e){this.toggleElements(".js-history-toggle","js-history-matches"),$(".js-history-toggle").hasClass("isClosed")?($("html, body").animate({scrollTop:$(".prelive__confrontations").position().top},500),$(".js-history-toggle .livePlayer__texte").html("voir tous les matches")):$(".js-history-toggle .livePlayer__texte").html("réduire aux 3 derniers matches")},this)),this.$element.on("click",".js-serie-toggle .js-arrowPrelive",$.proxy(function(e){this.toggleElements(".js-serie-toggle","js-serie-items"),$(".js-serie-toggle").hasClass("isClosed")?$(".js-serie-toggle .livePlayer__texte").html("voir le détail"):$(".js-serie-toggle .livePlayer__texte").html("cacher le détail")},this))},setVars:function(){},setTemplates:function(){$(".js-prelive-template").templating()},selectCompetition:function(e){var that=this,datas=$(e).data("compet"),competition="all";datas.competition&&datas.competition.code&&(competition=datas.competition.code),$(e).hasClass("is-active")||($(".js-prelive-confrontation-tabs").removeClass("is-active"),$(e).addClass("is-active")),"all"!==competition?(that.historyMatches=$(".prelive__matches").html(),$(".js-history-matches").each(function(){$(this).data("competition")!==competition&&$(this).remove()}),$(".js-history-toggle").hide()):($(".prelive__matches").html(that.historyMatches),this.limitHistoryMatches(),$(".js-history-matches").length>3&&($(".js-history-toggle").addClass("isClosed"),$(".js-history-toggle").show(),$(".js-history-toggle .livePlayer__texte").html("voir tous les matches"))),this.setDonutDatas(datas.home_victory,datas.draw,datas.away_victory)},setDonutDatas:function(home,nul,away){var colorDom=$(".scoreboard__team--home").css("background-color"),colorExt=$(".scoreboard__team--away").css("background-color");if(!(home&&nul&&away)&&$(".js-prelive-confrontation-tabs-all").hasClass("is-active")){var datas=$(".js-prelive-confrontation-tabs-all").data("compet");home=datas.home_victory,away=datas.away_victory,nul=datas.draw}var totalValues=home+nul+away,degreesHome=home/totalValues*180,degreesNul=degreesHome+nul/totalValues*180,degreesAway=degreesNul+away/totalValues*180,styles={home:{background:"linear-gradient("+degreesHome+"deg, "+colorDom+"  50%, transparent 50%)","z-index":3},nul:{background:"linear-gradient("+degreesNul+"deg, #909090 50%, transparent 50%)","z-index":2},away:{background:"linear-gradient("+degreesAway+"deg, "+colorExt+" 50%, transparent 50%)","z-index":1}};$(".js-donut-home").css(styles.home),$(".js-donut-away").css(styles.away),$(".js-donut-nul").css(styles.nul),$(".js-donutHome").text(home),$(".js-donutNul").text(nul),$(".js-donutAway").text(away)},limitHistoryMatches:function(){$(".js-history-matches").each(function(){$(this).data("index-match")>2&&$(this).hide()})},toggleElements:function(element,items){var that=this;$(element).hasClass("isClosed")?($("."+items).each(function(){$(this).show()}),$(element).removeClass("isClosed")):("js-history-matches"===items?that.limitHistoryMatches():$("."+items).each(function(){$(this).hide()}),$(element).addClass("isClosed"))},showElements:function(element,items){$("."+items).each(function(){$(this).show(),$(element).removeClass("isClosed")})}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="racingGeneralRanking",defaults={};Plugin.prototype={init:function(){this.setElements(),this.setVars(),this.setEvents()},setElements:function(){this.$element=$(this.element),this.$tableGalop=this.$element.find(".js-racing-table-Galop"),this.$tableTrot=this.$element.find(".js-racing-table-Trot"),this.$switchButtons=this.$element.find(".js-switchDiscipline__item")},setVars:function(){this.activeStepId=this.element.dataset.activeStep},setEvents:function(){var that=this;this.$switchButtons.each(function(i){that.$switchButtons[i].onclick=$.proxy(that.handleClick,that)})},handleClick:function(e){"Galop"===e.currentTarget.text&&(this.toggleTable(this.$tableGalop,this.$tableTrot),this.toggleSwitch(e.currentTarget)),"Trot"===e.currentTarget.text&&(this.toggleTable(this.$tableTrot,this.$tableGalop),this.toggleSwitch(e.currentTarget))},toggleTable:function($activeItem,$inactiveItem){$activeItem.css("display","block"),"block"===$inactiveItem.css("display")&&$inactiveItem.css("display","none")},toggleSwitch:function(clickedButton){this.$switchButtons.each(function(i){this.classList.remove("switchDiscipline__item--active"),this.text===clickedButton.text&&clickedButton.classList.add("switchDiscipline__item--active")})}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="racingTimeline",defaults={};Plugin.prototype={init:function(){this.setElements(),this.setVars(),this.setStyle(),this.setEvents()},setElements:function(){this.$element=$(this.element),this.$steps=this.$element.find(".racingTimeline__step")},setVars:function(){this.activeStepId=this.element.dataset.activeStep},setStyle:function(){var that=this;this.activeStepId&&this.$steps.each(function(i){this.dataset.id===that.activeStepId&&this.classList.add("racingTimeline__step--active")})},setEvents:function(){var that=this;this.$steps.each(function(i){that.$steps[i].onclick=$.proxy(that.handleClick,that)})},handleClick:function(e){this.$element.find(".racingTimeline__step--active").removeClass("racingTimeline__step--active"),e.currentTarget.classList.add("racingTimeline__step--active")}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="remoteConfig",defaults={};$.extend(Plugin.prototype,{init:function(){features.remote={};var getInfAppUrl="https://iphdata.lequipe.fr/v6/php/getInfapp.php";window.location.href.indexOf("qlf-")>-1&&(getInfAppUrl="https://qlf-iphdata.lequipe.fr/v6/php/getInfapp.php"),$.ajax(getInfAppUrl,{success:function(datas){datas.feature_switches.forEach(function(item){features.remote[item.name]=item.is_activated})},error:function(data){return!1},complete:function(data){features.remote.purchase_tunnel||($("body").addClass("is-switchedGb"),$(".js-ctaLanding").hide()),init_premium()}})}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="scheduledVisibility",defaults={callback:function(){}};Plugin.prototype={init:function(){this.setElements(),this.setVars(),this.setVisibility(this.slots)},setElements:function(){this.$element=$(this.element)},setVars:function(){this.src=this.$element.data("src")||"/datas/remoteConfig.json",this.serverTime=new Date(this.$element.data("server-time")),this.homeId=this.$element.data("home-id"),this.slots=this.fetchData(this.src)},fetchData:function(src){var that=this;return $.getJSON(src,function(data){var slots=data.visibilitySchedule||data;slots&&slots.forEach(function(slot){slot.startDate=new Date(slot.startDate);var endDate=new Date(slot.endDate);endDate.setDate(endDate.getDate()+1),slot.endDate=endDate,slot.startTime=new Date(that.serverTime.getFullYear(),that.serverTime.getMonth(),that.serverTime.getDate(),slot.startTime.split(":")[0],slot.startTime.split(":")[1],slot.startTime.split(":")[2]),slot.endTime=new Date(that.serverTime.getFullYear(),that.serverTime.getMonth(),that.serverTime.getDate(),slot.endTime.split(":")[0],slot.endTime.split(":")[1],slot.endTime.split(":")[2])})})},setVisibility:function(slots){var that=this;slots.done(function(result){schedule=result.visibilitySchedule||result,schedule.some(function(slot){if((window.location.pathname===slot.pageUrl||that.homeId===parseInt(slot.homeId))&&(that.serverTime.getDay()===slot.weekDay||that.serverTime>=slot.startDate&&that.serverTime<=slot.endDate)&&that.serverTime>=slot.startTime&&that.serverTime<=slot.endTime)return that.settings.callback(that.$element,slot),that.$element.show()})})}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="selectList",defaults={callback:function(){}};Plugin.prototype={init:function(){this.setElements(),this.setVars(),this.setSelectedOption(),this.setEvents()},setElements:function(){this.$element=$(this.element),this.$options=this.$element.find("option")},setVars:function(){this.selectedValue=this.element.dataset.selectedValue},setSelectedOption:function(){this.$options.each($.proxy(function(i){this.$options[i].value===this.selectedValue&&(this.$options[i].selected="selected")},this))},setEvents:function(){this.$element.change($.proxy(this.handleChange,this))},handleChange:function(e){this.settings.callback(e)}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="selectcontroller",defaults={};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.setEvents(),this.setControllers()},setElements:function(){this.$element=$(this.element),this.$element.attr("data-selectcontroller-before")&&(this.$controllerBefore=$(this.$element.attr("data-selectcontroller-before"))),this.$element.attr("data-selectcontroller-after")&&(this.$controllerAfter=$(this.$element.attr("data-selectcontroller-after")))},setEvents:function(){this.$element.on("change",$.proxy(function(){this.setControllers()},this)),this.$controllerBefore.on("click",$.proxy(function(e){var currentIndex=this.$element.prop("selectedIndex"),$prevOption=this.$element.children("option").eq(currentIndex-1);$prevOption.prop("selected",!0),$prevOption.trigger("click"),this.$element.trigger("change"),e.preventDefault()},this)),this.$controllerAfter.on("click",$.proxy(function(e){var currentIndex=this.$element.prop("selectedIndex"),$nextOption=this.$element.children("option").eq(currentIndex+1);$nextOption.prop("selected",!0),$nextOption.trigger("click"),this.$element.trigger("change"),e.preventDefault()},this))},setControllers:function(){var currentIndex=this.$element.prop("selectedIndex");0===currentIndex?this.$controllerBefore.hide():this.$controllerBefore.show(),currentIndex==this.$element.children("option").length-1?this.$controllerAfter.hide():this.$controllerAfter.show()}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="sticking",defaults={stickyClass:"is-sticky",parent:{element:"body",stickyClass:"",offset:0},start:"top",length:!1,offset:0,onSticky:function(){},offSticky:function(){},actionOnScroll:function(){},callback:function(){}};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.setVars(),this.setEvents()},setElements:function(){this.$element=$(this.element),this.settings.parent.element&&(this.$parentElement=$(this.settings.parent.element)),this.$window=$(window),this.$document=$(document)},setVars:function(){this.isSticky=!1,this.elementTop=this.$element.offset().top,this.elementHeight=this.$element.height(),this.elementStart="bottom"==this.settings.start?this.elementTop+this.elementHeight+this.settings.offset:this.elementTop+this.settings.offset,this.settings.length?this.elementEnd=this.elementStart+this.settings.length:this.elementEnd=this.$document.height()*this.$window.height(),this.$parentElement.length&&(this.parentInitialMarginTop=this.$parentElement.css("marginTop"))},setEvents:function(){this.$window.on("scroll",$.proxy(function(){var scrollTop=this.$window.scrollTop();scrollTop>=this.elementStart&&scrollTop<=this.elementEnd&&!this.isSticky?(this.isSticky=!0,this.$element.addClass(this.settings.stickyClass),this.settings.parent.stickyClass&&this.$parentElement.addClass(this.settings.parent.stickyClass),this.settings.parent.offset&&this.$parentElement.css("marginTop",this.settings.parent.offset+"px"),this.settings.actionOnScroll(),this.settings.onSticky()):(scrollTop<this.elementStart||scrollTop>this.elementEnd)&&this.isSticky&&(this.isSticky=!1,this.$element.removeClass(this.settings.stickyClass),this.settings.parent.stickyClass&&this.$parentElement.removeClass(this.settings.parent.stickyClass),this.settings.length&&scrollTop>this.elementEnd?this.$parentElement.css("marginTop",this.settings.length):this.settings.parent.offset&&this.$parentElement.css("marginTop",this.parentInitialMarginTop),this.settings.actionOnScroll(),this.settings.offSticky())},this)),this.settings.callback()}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="stories",defaults={bandeauClass:".js-stories-bandeau",container:".js-stories-container",items:".js-stories-items",controls:".js-stories-controls",pagination:".js-stories-pagination",classItem:"colead stories__galleryItem",classColeadImage:"colead__image",classColeadTitle:"colead__title",datas:{image_url:"",title:"",libelle:"article issu du dossier",items:[]},styles:{widthItem:230,marginRightItem:32}};$.extend(Plugin.prototype,{init:function(){var self=this;this.setElements(),this.setVars(),this.getDatas(function(){self.setBandeau(),self.setFolderGallery(),self.setControllers()}),this.setEvents()},setElements:function(){this.$element=$(this.element),this.$bandeaux=$(this.settings.bandeauClass),this.$container=this.$element.find(this.settings.container),this.$items=this.$element.find(this.settings.items),this.$controls=this.$element.find(this.settings.controls),this.$pagination=this.$element.find(this.settings.pagination)},setVars:function(){this.completeWidthItem=this.settings.styles.widthItem+this.settings.styles.marginRightItem},getDatas:function(callback){var self=this,url=this.$element.data("feed-url");self.datas=self.settings.datas,$.getJSON(url,function(fluxJSON){self.datas.image_url=fluxJSON.objet.items[0].objet.image_url,self.datas.title=fluxJSON.objet.items[0].objet.title,self.datas.libelle=fluxJSON.objet.items[0].options[0].objet.libelle,self.datas.items=fluxJSON.objet.items.filter(function(item){return"bloc_header_small"!==item.layout}),self.moveCurrentNewsToEnd(),callback()})},moveCurrentNewsToEnd:function(){var idNews=$("body").attr("idnews"),indexNewsInArray=this.datas.items.map(function(e){return e.objet.id}).indexOf(idNews);-1!==indexNewsInArray&&this.datas.items.splice(this.datas.items.length-1,0,this.datas.items.splice(indexNewsInArray,1)[0])},setStyles:function(){this.$items.css({width:this.completeWidthItem*this.datas.items.length+"px"}),$("article").hasClass("patrimonial")||(this.$element.addClass("stories--small"),this.setPagination())},setPagination:function(addValue){var page=parseInt(this.$element.data("pagination")),pageWidth=this.$container.width()-this.$container.width()%this.completeWidthItem,max=Math.ceil(this.$items.width()/pageWidth);void 0!==addValue&&(page+=addValue,page<1&&(page=1),page>max&&(page=max)),this.$element.data("pagination",page);var html="<span>"+page+"</span> / "+max;this.$pagination.html(html)},setBandeau:function(){this.$bandeaux.append("<span>"+this.datas.libelle+"</span>"),this.datas.image_url&&this.$bandeaux.append("<img src='"+this.datas.image_url+"' />"),this.datas.title&&!this.datas.image_url&&this.$bandeaux.append('<span class="stories__folderName">'+this.datas.title+"</span>")},setFolderGallery:function(){var self=this;this.setStyles(),this.datas.items.forEach(function(item){var surtitre=item.objet.surtitre.elements,titre=item.objet.titre,image=item.objet.image,url_article=item.lien_web;void 0===image&&(image={url:"/v6/img/png_285-210.min.png"});var nodeItem=document.createElement("a");nodeItem.className=self.settings.classItem,nodeItem.setAttribute("href",url_article);var nodeColeadImage=document.createElement("div");nodeColeadImage.className=self.settings.classColeadImage;var nodeSurtitre=document.createElement("div");nodeSurtitre.className="tags",surtitre=surtitre.splice(0,2),surtitre.forEach(function(s){var nodeSurtitreItem=document.createElement("div"),className="tags__element skew";s.biseau_droite&&s.biseau_gauche||(className+=s.biseau_droite?" skew--right":"",className+=s.biseau_gauche?" skew--left":""),nodeSurtitreItem.className=className;var style="";style+=s.couleur_fond?"background-color:"+s.couleur_fond+";":"",style+=s.couleur_texte?"color:"+s.couleur_texte+";":"",nodeSurtitreItem.setAttribute("style",style);var textNodeSurtitre=document.createTextNode(s.libelle);nodeSurtitreItem.append(textNodeSurtitre),nodeSurtitre.append(nodeSurtitreItem)});var nodeImage=document.createElement("img");nodeImage.setAttribute("src",resizeImage(image.url,image.width||640,image.ratio));var nodeTitle=document.createElement("h2");nodeTitle.className=self.settings.classColeadTitle,nodeTitle.append(document.createTextNode(titre)),nodeColeadImage.append(nodeSurtitre),nodeColeadImage.append(nodeImage),nodeItem.append(nodeColeadImage),nodeItem.append(nodeTitle),self.$items.append(nodeItem)})},setControllers:function(){if(this.$container.width()>=this.$items.width())return void this.$controls.hide()},setEvents:function(){var self=this;$(this.$controls).on("click",function(e){var widthContainer=self.$container.width(),lengthToSlide=widthContainer-widthContainer%self.completeWidthItem,position=parseFloat(self.$items.css("left")),max=widthContainer-self.$items.width();"left"===$(this).data("direction")?(position+=lengthToSlide,position>=0&&(position=0),self.setPagination(-1)):(position-=lengthToSlide,position<max&&(position=max),self.setPagination(1)),self.slideTo(position)})},slideTo:function(position){this.$items.css({left:position+"px"})}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="switch",defaults={button:".js-switch-button",class:"is-switched"};Plugin.prototype={init:function(){this.setElements(),this.setEvents()},setElements:function(){this.$element=$(this.element),this.$button=$(this.element).find(this.settings.button)},setEvents:function(){var that=this;this.$button.bind("click",function(){that.$element.toggleClass(that.settings.class)})}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="tabs",defaults={tabsItem:".js-tabsItem",tabsContent:".js-tabsContent"};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.setEvents()},setElements:function(){this.$element=$(this.element),this.$tabsItem=$(this.element).find(this.settings.tabsItem),this.$tabsContent=$(this.element).find(this.settings.tabsContent)},setEvents:function(){this.$tabsItem.on("click",$.proxy(this.toggle,this))},toggle:function(e){var tabs=$(e.currentTarget),tabsContent=".tabs--"+$(e.currentTarget).attr("data-tab-id");tabs.hasClass("is-selected")||(this.$tabsItem.removeClass("is-selected"),this.$tabsContent.removeClass("is-open"),this.$tabsContent.addClass("is-closed"),$(tabsContent).removeClass("is-closed"),$(tabsContent).addClass("is-open"),tabs.addClass("is-selected"))}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="templating",defaults={pagesLimit:-1,callback:function(e){}};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.setVars();var that=this;$("[data-templating]").hasClass("js-landing-page")&&$(".js-landing-page").data("offer-id")&&$.getJSON("/vel/offres/s"+$(".js-landing-page").data("offer-id")+".json",$.proxy(function(response){response.offre.accessRule?"object"==("undefined"==typeof _userInfos?"undefined":_typeof(_userInfos))&&null!=_userInfos&&1==_userInfos.quotiAbonne?$.getJSON("/elements/php/offer-landing-page/landingPageInfos.php?idOffer="+$(".js-landing-page").data("offer-id"),$.proxy(function(userAccess){200===userAccess.status?that.loadContent(response):document.location.href="/mon-compte/abonnement"},this)).fail(function(){document.location.href="/mon-compte/abonnement"}):loginPopin():that.loadContent(response)},this)).fail(function(){document.location.href="/mon-compte/abonnement"}),(this.jsonData||0===this.jsonData)&&("string"==typeof this.jsonData&&-1!==this.jsonData.indexOf("[n]")?(this.loadPage(),this.setEvents()):(this.loadContent(),this.$element.attr("data-templating-refresh")&&(this.clearTemplating(),this.setRefresh(1e3*this.$element.data("templating-refresh")))))},setElements:function(){this.$element=$(this.element),this.$window=$(window)},setVars:function(){this.tplId=this.$element.data("templating"),this.tpl=$(this.tplId).html(),this.jsonUrl=this.$element.data("templating-json"),this.jsonData=this.$element.data("templating-json"),this.jsonHeritage=this.$element.data("templating-json-heritage"),this.pagesLimit=this.settings.pagesLimit,this.page=0,this.contentTop=0,this.contentHeight=0,this.nbLoadedElements=0,this.nbTotalElements=0},loadContent:function(objData){if(this.$element.addClass("is-loading"),this.$element.removeClass("is-templated"),!this.tplId)return console.log("objData Handlebars template called is undefined (source URL) ",this.jsonUrl),console.log("objData Handlebars template called is undefined (source DATA) ",this.jsonData),!1;if(void 0===objData){var objData;try{objData="number"==typeof this.jsonData?{data:this.jsonData}:$.parseJSON(this.jsonData)}catch(e){objData=this.jsonData}}else"number"==typeof objData&&(objData={data:objData});"?debug"==document.location.search&&(console.log("TEMPLATING HANDLEBARS loadContent class ",this.$element.attr("class")),console.log("TEMPLATING HANDLEBARS loadContent objData ",objData),console.log("TEMPLATING HANDLEBARS loadContent tpl ",this.tplId));var template=Handlebars.compile(this.tpl);if(void 0===objData)return!1;if("string"==typeof objData){if("***"===objData||"undefined"===objData)return!1;$.getJSON(objData,$.proxy(function(json){function findNode(needleValue,needleKey,obj){a=$.map(obj,function(value,key){return value==needleValue&&key==needleKey?obj:"array"!=typeof value&&"object"!==(void 0===value?"undefined":_typeof(value))?null:void findNode(needleValue,needleKey,value)}),a&&a.length>0&&(json=a[0])}if(this.$element.attr("data-templating-key")&&2==this.$element.attr("data-templating-key").split(":").length){var needle=(this.$element.attr("data-templating-key")+"::").split(":");findNode(needle[1],needle[0],json)}var html=template(json);if(this.$element.html(html),this.$element.removeClass("is-loading"),this.$element.addClass("is-templated"),$('[data-templating-jsonsource="'+this.tplId+'"]').length>0){var jsonClone=json;$('[data-templating-jsonsource="'+this.tplId+'"]').each(function(){var j=jsonClone;if($(this).attr("data-templating-key")&&2==$(this).attr("data-templating-key").split(":").length){var needle=($(this).attr("data-templating-key")+"::").split(":");!function findNodeClone(needleValue,needleKey,cloneObj){a=$.map(cloneObj,function(value,key){return value==needleValue&&key==needleKey?cloneObj:"array"!=typeof value&&"object"!==(void 0===value?"undefined":_typeof(value))?null:void findNodeClone(needleValue,needleKey,value)}),a&&a.length>0&&(j=a[0])}(needle[1],needle[0],jsonClone)}var t=Handlebars.compile($($(this).data("templating")).html()),h=t(j);$(this).html(h)})}this.jsonHeritage&&this.setHeritage(),this.settings.callback(this.$element)},this))}if("object"==(void 0===objData?"undefined":_typeof(objData))){var html=template(objData);this.$element.html(html),this.$element.removeClass("is-loading"),this.$element.addClass("is-templated"),this.jsonHeritage&&this.setHeritage(),this.settings.callback(this.$element)}this.$element.attr("data-templating-json","***")},loadPage:function(){this.$element.addClass("is-loading");var pageurl=this.jsonData.replace("[n]",this.page+1);$.getJSON(pageurl,$.proxy(function(json){this.nbTotalElements=json.total_items,Mustache.parse(this.tpl);var html=Mustache.render(this.tpl,json.items);this.$element.append(html),this.contentTop=this.$element.offset().top,this.nbLoadedElements=this.$element.children().length,this.$element.removeClass("is-loading"),this.settings.callback(this.$element),this.page++},this))},setEvents:function(){this.$window.on("scroll",$.proxy(function(){if(this.nbLoadedElements<this.nbTotalElements&&!this.$element.hasClass("is-loading")&&(this.page<this.pagesLimit||-1==this.pagesLimit)){var scrollTop=this.$window.scrollTop(),windowHeight=this.$window.height();this.contentHeight=this.$element.height(),scrollTop+windowHeight>=this.contentTop+this.contentHeight&&this.loadPage()}},this))},setHeritage:function(){var jsonChild=JSON.parse("{"+this.jsonHeritage+"}");for(var key in jsonChild)$(key).length>0&&($(key).data("templating-json",JSON.stringify(jsonChild[key])),$(key).templating(),$(key).data("templating-json",""))
;this.$element.attr("data-templating-json-heritage","")},setRefresh:function(interval){this.autoTimer=setInterval($.proxy(function(){this.loadContent()},this),interval)},clearTemplating:function(){clearInterval(this.autoTimer)},killTemplating:function(json){this.clearTemplating(),this.jsonData=this.jsonUrl=json,this.loadContent(json)}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="transfersTable",defaults={callback:function(){}};Plugin.prototype={init:function(){this.setElements(),this.setVars(),this.setEvents(),this.initDatas()},setElements:function(){this.$element=$(this.element)},setVars:function(){},setEvents:function(){var that=this;this.$element.on("click",".js-dateSelector",$.proxy(function(e){e.stopPropagation(),$(".js-listDate").toggle()})),this.$element.on("click",".js-dateToSelect",$.proxy(function(e){that.updateDatas(e.target)})),this.$element.on("click",".js-navscroll-next",$.proxy(function(e){var nextElementKey=$(".is-selected").data("key")+1>$(".js-dateToSelect").length-1?0:$(".is-selected").data("key")+1;that.updateDatas($("[data-key="+nextElementKey+"]")[0])})),this.$element.on("click",".js-navscroll-prev",$.proxy(function(e){var prevElementKey=$(".is-selected").data("key")-1<0?$(".js-dateToSelect").length-1:$(".is-selected").data("key")-1;that.updateDatas($("[data-key="+prevElementKey+"]")[0])})),this.$element.on("click",document,$.proxy(function(e){$(".js-listDate").hide()}))},initDatas:function(){$(window).on("load",function(){var currentJson=$(".js-selected-date").data("url-json");$(".js-transfer-feed").templating().data("plugin_templating").killTemplating(currentJson);var selectedDate=$(".js-selected-date").data("date");$(".js-dateToSelect").each(function(){$(this).data("date")===selectedDate&&$(this).addClass("is-selected")})})},updateDatas:function(target){var date=$(target).data("date"),title=$(target).data("title"),jsonUrl=($(target).data("key"),$(target).data("json"));$(".js-dateToSelect").removeClass("is-selected"),$(target).addClass("is-selected"),$(".selected").html(title),$(".js-transfer-feed").templating().data("plugin_templating").killTemplating(jsonUrl),this.changeSeason(date),$(".js-listDate").hide()},changeSeason:function(date){var dateArray=date.split("-"),season="summer"===dateArray[0]?"ete":"hiver",year=-1!==date.indexOf("current")?(new Date).getFullYear().toString():dateArray[1]+"-"+dateArray[2],compet=$(".js-transfers").attr("competition"),targetUrl="/Football/transferts-mercato-"+season+(-1===year.indexOf("-")?"/":"/"+year+"/")+compet+".html";$("body").data("season",season),$("body").data("year",year),window.history.pushState({url:""+targetUrl},"",targetUrl),refreshPub("transfers")}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){"use strict";function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="tvSchedule",defaults={hCalendar:".js-hCalendar",items:".js-hCalendarItem"};$.extend(Plugin.prototype,{init:function(){this.setElements(),this.setCalendar(),this.setEvents()},setElements:function(){this.$element=$(this.element),this.$hCalendar=this.$element.find(this.settings.hCalendar),this.$items=$(this.element).find(this.settings.items),this.$filters=$(".js-filters")},setCalendar:function(){var that=this;this.$hCalendar.hCalendar({onDateSelected:function(date){that.setDatas(date)}})},setEvents:function(){$(window).on("popstate",$.proxy(function(){window.history.state&&this.setDatas(window.history.state.date)},this))},setDatas:function(date){var IncRoot=($("body").attr("data-data-root"),$("body").attr("data-inc-root")),$calendarItem=this.$items.filter("[data-date='"+date+"']"),infos=$calendarItem.data("infos"),day=infos.date_day,month=(infos.status,infos.month_str),$filterArticleSelection=$(".js-filtersItemSelection"),$articleSelection=$(".js-articleSelection");this.setHeadingH1(day,month),setTimeout($.proxy(function(){this.setFilters(infos)},this),100),this.setStatusDisplay(infos),$articleSelection.load(IncRoot+date+"/selection.html",function(response,status){"error"===status?($filterArticleSelection.removeClass("is-active"),$articleSelection.addClass("is-off")):($filterArticleSelection.addClass("is-active"),$articleSelection.removeClass("is-off"),init_lazyloads())}),$(".js-hCalendar-templating").replaceWith('<div class="js-hCalendar-templating" data-templating="#tpl-tvGrid" data-templating-json="https://dwh.lequipe.fr/api/efr/tvschedule/grid/'+date.replace("-","").replace("-","")+'"></div>'),$(".js-hCalendar-templating").templating({callback:function(){var container=$(".js-scheduleItems");if(container.attr("data-sportid")){var filterSportId=container.attr("data-sportid");$(".js-scheduleItem:not(.js-scheduleItemError):not(.is-live):not([data-sportid="+filterSportId+"])").addClass("is-off")}else if(container.attr("data-channelids")){var filterChannelIds="["+container.attr("data-channelids")+"]";$(".js-scheduleItem[data-channelid]").each(function(){var scheduleItemChannelId=$(this).attr("data-channelid");-1===JSON.parse(filterChannelIds).indexOf(JSON.parse(scheduleItemChannelId))&&$(this).addClass("is-off")})}var now=new Date,heure=("0"+now.getHours()).slice(-2),minute=("0"+now.getMinutes()).slice(-2),mathNow=parseInt(heure+minute),periods=$(".js-schedule_item_datas").data("periods"),dataPeriodStart=parseInt(periods.start_date.substring(11,16).replace(":","")),dayNow=parseInt($(".js-hCalendarItemToday").data("date").replace(/-/g,"")),daySelected=parseInt($(".js-hCalendarItem.is-selected").data("date").replace(/-/g,""));$(".js-scheduleItems").attr("data-now-2017",mathNow+100),$(".js-scheduleItem").each(function(){var mathItemHour=parseInt($(this).attr("data-mathhour")),mathItemDay=parseInt($(this).attr("data-day").replace(/-/g,"")),mathItemLength=Math.round($(this).attr("data-duration")/36),mathItemEnd=mathItemHour+mathItemLength;$(this).attr("is-now",mathItemEnd>=mathNow),mathItemEnd>=mathNow?($(this).attr("is-now",!0),mathItemHour>=mathNow+100?$(this).attr("is-now",!1):mathItemHour<=mathNow&&($(this).find(".js-schedule__progressBar").css("width",100-(mathItemEnd-mathNow)/mathItemLength*100+"%"),"158"==$(this).attr("data-channelid")&&$(this).addClass("is-onair"))):$(".js-hCalendarItemToday.is-selected").length>0&&mathItemDay===dayNow&&$(this).find(".js-schedule__progressBar").css("width","100%"),$(this).attr("is-tonight",mathItemHour>=dataPeriodStart&&mathItemHour<=2400),mathNow>mathItemLength+mathItemHour&&$(".js-hCalendarItem.is-selected.hCalendar__item--today").hasClass("hCalendar__item--today")&&mathItemDay===dayNow&&$(this).addClass("schedule__item--off")}),dayNow>daySelected&&$(".js-schedule__progressBar").css("width","100%"),0===$(".js-scheduleItem:visible:not(.js-scheduleItemError):not(.js-schedule_item_datas):not(.is-off)").length?$(".js-scheduleItemError").addClass("is-show"):$(".js-scheduleItemError").removeClass("is-show"),$(".schedule__item:visible:odd").removeClass("is-even").addClass("is-odd"),$(".schedule__item:visible:even").removeClass("is-odd").addClass("is-even"),init_lazyloads()}}),void 0===window.firstRead?window.firstRead=!0:(window.firstRead=!1,this.setTriggerClick())},setHeadingH1:function(day,month){var heading=this.$element.data("heading");$("body.tpl-tvschedule .headings .title").html(heading+day+" "+month)},setTriggerClick:function(){atname="agenda_tv",refreshPub()},setFilters:function(infos){$(".js-filterItem[data-filtertype=channels]").each(function(){for(var filterChannelIds=JSON.parse("["+$(this).attr("data-filterchannelids")+"]"),i=0;i<filterChannelIds.length;i++){if(-1!==JSON.parse("["+infos.channel_ids+"]").indexOf(filterChannelIds[i])){$(this).show();break}$(this).hide()}}),$(".js-filterItem[data-filtertype=sports]").each(function(){for(var filterSportIds=JSON.parse("["+$(this).attr("data-filtersportid")+"]"),i=0;i<filterSportIds.length;i++)-1!==JSON.parse("["+infos.sport_ids+"]").indexOf(filterSportIds[i])?$(this).show():$(this).hide()})},setStatusDisplay:function(infos){"E"!==infos.status?($(".js-hCalendar-status-e").hide(),$(".js-hCalendar-status-not-e").show(),$(".js-scheduleItems").removeClass("is-now")):($(".js-hCalendar-status-not-e").hide(),$(".js-hCalendar-status-e").show());var scheduleItems=$(".js-scheduleItems");$(".js-tabs-item").removeClass("is-active"),scheduleItems.hasClass("is-tonight")?$(".js-tabs-item#grid-tonight").addClass("is-active"):scheduleItems.hasClass("is-channel")?$(".js-tabs-item#grid-lachaine").addClass("is-active"):scheduleItems.hasClass("is-all")?$(".js-tabs-item#grid-all").addClass("is-active"):($(".js-tabs-item:visible").eq(0).addClass("is-active"),$(".js-tabs-item#grid-now").hasClass("is-active")&&$(".js-scheduleItems").addClass("is-now")),0===$(".js-scheduleItem:visible:not(.js-scheduleItemError):not(.js-schedule_item_datas):not(.is-off)").length?$(".js-scheduleItemError").addClass("is-show"):$(".js-scheduleItemError").removeClass("is-show"),init_lazyloads()}}),$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))}),this}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="witness",defaults={maxCharact:1500};Plugin.prototype={init:function(){this.setElements(),this.checkUser(),this.setEvents()},setElements:function(){this.$element=$(this.element),this.$button=$(this.element).find(".witness__button"),this.$title=$(this.element).find(".witness__title"),this.$text=$(this.element).find("textarea"),this.$charactLeft=$(this.element).find(".witness__container__left"),this.$idArticle=$(this.element).find("#idArticle"),this.$checkboxes=$(this.element).find(".witness__checkbox"),this.$anonymous=$(this.element).find("#anonymat"),this.$user=$(this.element).find(".witness__user__name"),this.$error=$(this.element).find(".witness__error")},checkUser:function(){this.user=setUserInfos(),this.user&&this.$user.html(this.user.nickname)},setEvents:function(){this.$button.on("click",$.proxy(this.submit,this)),this.$text.on("keyup",$.proxy(this.checkText,this)),this.$user.on("click",$.proxy(this.connect,this)),this.$anonymous.on("click",$.proxy(this.anonymous,this)),this.user||(this.$title.on("click",$.proxy(this.connect,this)),this.$text.on("click",$.proxy(this.connect,this)))},connect:function(e){e.preventDefault(),this.user||(this.$text.blur(),this.$title.blur(),loginPopin())},checkText:function(e){var text=this.settings.maxCharact-e.currentTarget.value.length+" caractères restants";this.$charactLeft.html(text),this.$text.height(e.currentTarget.scrollHeight),this.settings.maxCharact-e.currentTarget.value.length<0?(this.$charactLeft.css("color","#d61e00"),this.$button.css("background","#909090").addClass("js-disabled")):(this.$button.css("background","#202020").removeClass("js-disabled"),this.$charactLeft.css("color","#202020"))},anonymous:function(e){if(!this.user)return!1;$(e.currentTarget).is(":checked")?this.$user.html("Anonyme"):this.$user.html(this.user.nickname)},submit:function(e){if(e.preventDefault(),this.$error.hide(),this.$button.hasClass("js-disabled"))return!1;if(!this.user)return loginPopin(),!1;var data={id_compte:this.user.id,id_breve:this.$idArticle.val(),titre:this.$title.val(),texte:this.$text.val()};return this.$checkboxes.each(function(){data[$(this).attr("name")]=$(this).is(":checked")?1:0}),1!=data.certified?(this.message("Vous devez accepter les conditions générales"),!1):data.titre.length<5?(this.message("Votre titre est trop court (5 caractères minimum)"),!1):data.texte.length<40?(this.message("Votre témoignage est trop court (40 caractères minimum)"),!1):void $.ajax({type:"POST",url:"/elements/php/news/saveAppelTemoins.php",data:data,dataType:"json",error:$.proxy(this.error,this),success:$.proxy(this.success,this)})},success:function(response){"200"==response.code?(this.$element.find(".js-witness-title").html("Votre témoignage à bien été envoyé à notre rédaction"),this.$element.find(".js-witness-remove").remove(),$("html, body").animate({scrollTop:this.$element.find(".witness__header").position().top},500)):this.message(response.message)},error:function(jqXHR,textStatus,errorThrown){this.message()},message:function(_message){_message=_message||"Une erreur est survenue, veuillez réessayer dans quelques instants",this.$error.html(_message).show()}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},conxpopup=function(options){var settings=$.extend({width:400,height:100,html:"",load:!1,onload:!1},options);$("body #connexbackground").length&&$("body #connexbackground").remove(),$("body #connexpopup").length&&$("body #connexpopup").remove();var specialClass="";$("body").hasClass("isPopinSpecial")&&(specialClass="specialPopinLogin"),$("body").append('<div id="connexbackground" class="popin-background"></div><div id="connexpopup" class="popin-lequipe '+specialClass+'"><div class="head"><a href="#" class="close">fermer</a></div><div class="body"></div></div>'),$("body").hasClass("isPopinSpecial")||$("#connexpopup").css({width:settings.width,height:settings.height,marginLeft:-settings.width/2,marginTop:-settings.height/2}),$("#connexbackground").fadeIn("fast",function(){$("#connexpopup").fadeIn("fast")}),$("body").hasClass("isPopinSpecial")?$("#connexpopup a.close").on("click",function(){return $("body").removeClass("no-scroll isPopinSpecialActive"),$("#connexpopup").fadeOut("fast",function(){$("#connexpopup").remove(),$("#connexbackground").fadeOut("fast",function(){$("#connexbackground").remove(),$("body").trigger("connexClosed")})}),setTimeout(function(){$("body").removeClass("isPopinSpecial")},500),!1}):$("#connexpopup a.close, #connexbackground").on("click",function(){return $("body").removeClass("no-scroll isPopinSpecialActive"),$("#connexpopup").fadeOut("fast",function(){$("#connexpopup").remove(),$("#connexbackground").fadeOut("fast",function(){$("#connexbackground").remove(),$("body").trigger("connexClosed")})}),!1}),settings.html?$("#connexpopup .body").html(settings.html):"string"==typeof settings.load?$.ajax({url:settings.load,type:"GET",dataType:"html",success:function(data){$("#connexpopup .body").html(data),settings.onload&&settings.onload()}}):"object"===_typeof(settings.load)&&($("#connexpopup .body").html(settings.load),settings.onload&&settings.onload()),$(window).on("keydown",function(e){27==e.keyCode&&$("#popin-box-close-btn").trigger("click")})};$(document).ready(function(){user=setUserInfos(),$(".js-unsubscribeConfirm").length>0&&(user||loginPopin("Vous devez être connecté(e) pour répondre au formulaire")),$(".js-unsubscribeConfirm").on("click",function(){try{var checked=$(".js-unsubscribeForm input[type=radio]:checked"),unsubscribeMsg=$(".js-unsubscribeForm textarea").val();if(1==checked.length){var reason=checked.val(),reason_id=checked.attr("motive-id");if(!user)return loginPopin("Vous devez être connecté(e) pour répondre au formulaire"),!1;$.ajax({url:"/compte/php/profil.php",type:"POST",data:{action:"saveMotiveCancellation",motive_id:reason_id,motive:reason,comment:unsubscribeMsg},error:function(data){$(".js-unsubscribeError").html(data)},success:function(data){200!=data.code?$(".js-unsubscribeError").html(data.msg):($(".js-unsubscribeError").html(""),$(".js-unsubscribeMotivation").hide(),$(".js-unsubscribeValidation").show(),atname="popin_confirmer_desabonnement_numerique",refreshPub("byclick"))}})}else error="Veuillez choisir la raison de votre désabonnement",$(".js-unsubscribeError").html(error)}catch(e){return $(".js-unsubscribeError").html(e).css("opacity","0.2"),!1}}),$(".js-unsubscribeEnd").on("click",function(){try{if(!user)return error="Vous n'êtes pas connecté",$(".js-unsubscribeError").html(error),!1;$.ajax({url:"/compte/php/profil.php",type:"POST",data:{action:"sendMailCancellation"},error:function(data){$(".js-unsubscribeError").html(data)},success:function(data){200!=data.code?$(".js-unsubscribeError").html(data.msg):($(".js-unsubscribeError").html(""),$(".js-unsubscribeValidation").hide(),$(".js-unsubscribeFinal").show(),atname="desabonnement",refreshPub("byclick"))}})}catch(e){return $(".js-unsubscribeError").html(e).css("opacity","0.2"),!1}})}),"undefined"==typeof console&&(window.console={log:function(){},error:function(){}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};cookieLequipeName="lequipe-connected-infos";var urlcourante=document.location.href;-1!=urlcourante.indexOf("qlf")&&(cookieLequipeName+="-qlf"),$(document).ready(function(){_userInfos=$.parseJSON(decodeURIComponent(readCookie(cookieLequipeName))),"object"==("undefined"==typeof _userInfos?"undefined":_typeof(_userInfos))&&null!=_userInfos&&(xt_an=_userInfos.id,xt_ac=2*(_userInfos.gender&&_userInfos.gender.length>=2?1:0)+(_userInfos.quotiAbonne&&1==_userInfos.quotiAbonne?1:2),an=xt_an,ac=xt_ac,$("body").attr("an",an),$("body").attr("ac",ac))}),jQuery.cookie=function(name,value,options){if(void 0===value){var cookieValue=null;if(document.cookie&&""!=document.cookie)for(var cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}return cookieValue}options=options||{},null===value&&(value="",options=$.extend({},options),options.expires=-1);var expires="";if(options.expires&&("number"==typeof options.expires||options.expires.toUTCString)){var date;"number"==typeof options.expires?(date=new Date,date.setTime(date.getTime()+24*options.expires*60*60*1e3)):date=options.expires,expires="; expires="+date.toUTCString()}var path=options.path?"; path="+options.path:"",domain=options.domain?"; domain="+options.domain:"",secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("")};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function($){function Countdown(){function timerCallBack(a){var b=a<1e12?d?performance.now()+performance.timing.navigationStart:c():a||c();b-f>=1e3&&(x._updateTargets(),f=b),e(timerCallBack)}this.regional=[],this.regional[""]={labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:!1},this._defaults={until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:!1,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:!1,onExpiry:null,onTick:null,tickInterval:1},$.extend(this._defaults,this.regional[""]),this._serverSyncs=[];var c="function"==typeof Date.now?Date.now:function(){return(new Date).getTime()},d=window.performance&&"function"==typeof window.performance.now,e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null,f=0;!e||$.noRequestAnimationFrame?($.noRequestAnimationFrame=null,setInterval(function(){x._updateTargets()},980)):(f=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||c(),e(timerCallBack))}function isNotChained(a,b){return"option"==a&&(0==b.length||1==b.length&&"string"==typeof b[0])||$.inArray(a,w)>-1}$.extend(Countdown.prototype,{markerClassName:"hasCountdown",propertyName:"countdown",_rtlClass:"countdown_rtl",_sectionClass:"countdown_section",_amountClass:"countdown_amount",_rowClass:"countdown_row",_holdingClass:"countdown_holding",_showClass:"countdown_show",_descrClass:"countdown_descr",_timerTargets:[],setDefaults:function(a){this._resetExtraLabels(this._defaults,a),$.extend(this._defaults,a||{})},UTCDate:function(a,b,c,e,f,g,h,i){"object"==(void 0===b?"undefined":_typeof(b))&&b.constructor==Date&&(i=b.getMilliseconds(),h=b.getSeconds(),g=b.getMinutes(),f=b.getHours(),e=b.getDate(),c=b.getMonth(),b=b.getFullYear());var d=new Date;return d.setUTCFullYear(b),d.setUTCDate(1),d.setUTCMonth(c||0),d.setUTCDate(e||1),d.setUTCHours(f||0),d.setUTCMinutes((g||0)-(Math.abs(a)<30?60*a:a)),d.setUTCSeconds(h||0),d.setUTCMilliseconds(i||0),d},periodsToSeconds:function(a){return 31557600*a[0]+2629800*a[1]+604800*a[2]+86400*a[3]+3600*a[4]+60*a[5]+a[6]},_attachPlugin:function(a,b){if(a=$(a),!a.hasClass(this.markerClassName)){var c={options:$.extend({},this._defaults),_periods:[0,0,0,0,0,0,0]};a.addClass(this.markerClassName).data(this.propertyName,c),this._optionPlugin(a,b)}},_addTarget:function(a){this._hasTarget(a)||this._timerTargets.push(a)},_hasTarget:function(a){return $.inArray(a,this._timerTargets)>-1},_removeTarget:function(b){this._timerTargets=$.map(this._timerTargets,function(a){return a==b?null:a})},_updateTargets:function(){for(var i=this._timerTargets.length-1;i>=0;i--)this._updateCountdown(this._timerTargets[i])},_optionPlugin:function(a,b,c){a=$(a);var d=a.data(this.propertyName);if(!b||"string"==typeof b&&null==c){var e=b;return b=(d||{}).options,b&&e?b[e]:b}if(a.hasClass(this.markerClassName)){if("string"==typeof(b=b||{})){var e=b;b={},b[e]=c}b.layout&&(b.layout=b.layout.replace(/&lt;/g,"<").replace(/&gt;/g,">")),this._resetExtraLabels(d.options,b);var f=d.options.timezone!=b.timezone;$.extend(d.options,b),this._adjustSettings(a,d,null!=b.until||null!=b.since||f);var g=new Date;(d._since&&d._since<g||d._until&&d._until>g)&&this._addTarget(a[0]),this._updateCountdown(a,d)}},_updateCountdown:function(a,b){var c=$(a);if(b=b||c.data(this.propertyName)){if(c.html(this._generateHTML(b)).toggleClass(this._rtlClass,b.options.isRTL),$.isFunction(b.options.onTick)){var d="lap"!=b._hold?b._periods:this._calculatePeriods(b,b._show,b.options.significant,new Date);1!=b.options.tickInterval&&this.periodsToSeconds(d)%b.options.tickInterval!=0||b.options.onTick.apply(a,[d])}if("pause"!=b._hold&&(b._since?b._now.getTime()<b._since.getTime():b._now.getTime()>=b._until.getTime())&&!b._expiring){if(b._expiring=!0,this._hasTarget(a)||b.options.alwaysExpire){if(this._removeTarget(a),$.isFunction(b.options.onExpiry)&&b.options.onExpiry.apply(a,[]),b.options.expiryText){var f=b.options.layout;b.options.layout=b.options.expiryText,this._updateCountdown(a,b),b.options.layout=f}b.options.expiryUrl&&(window.location=b.options.expiryUrl)}b._expiring=!1}else"pause"==b._hold&&this._removeTarget(a);c.data(this.propertyName,b)}},_resetExtraLabels:function(a,b){var c=!1;for(var n in b)if("whichLabels"!=n&&n.match(/[Ll]abels/)){c=!0;break}if(c)for(var n in a)n.match(/[Ll]abels[02-9]|compactLabels1/)&&(a[n]=null)},_adjustSettings:function(a,b,c){for(var d,e=0,f=null,i=0;i<this._serverSyncs.length;i++)if(this._serverSyncs[i][0]==b.options.serverSync){f=this._serverSyncs[i][1];break}if(null!=f)e=b.options.serverSync?f:0,d=new Date;else{var g=$.isFunction(b.options.serverSync)?b.options.serverSync.apply(a,[]):null;d=new Date,e=g?d.getTime()-g.getTime():0,this._serverSyncs.push([b.options.serverSync,e])}var h=b.options.timezone;h=null==h?-d.getTimezoneOffset():h,(c||!c&&null==b._until&&null==b._since)&&(b._since=b.options.since,null!=b._since&&(b._since=this.UTCDate(h,this._determineTime(b._since,null)),b._since&&e&&b._since.setMilliseconds(b._since.getMilliseconds()+e)),b._until=this.UTCDate(h,this._determineTime(b.options.until,d)),e&&b._until.setMilliseconds(b._until.getMilliseconds()+e)),b._show=this._determineShow(b)},_destroyPlugin:function(a){a=$(a),a.hasClass(this.markerClassName)&&(this._removeTarget(a[0]),a.removeClass(this.markerClassName).empty().removeData(this.propertyName))},_pausePlugin:function(a){this._hold(a,"pause")},_lapPlugin:function(a){this._hold(a,"lap")},_resumePlugin:function(a){this._hold(a,null)},_hold:function(a,b){var c=$.data(a,this.propertyName);if(c){if("pause"==c._hold&&!b){c._periods=c._savePeriods;var d=c._since?"-":"+";c[c._since?"_since":"_until"]=this._determineTime(d+c._periods[0]+"y"+d+c._periods[1]+"o"+d+c._periods[2]+"w"+d+c._periods[3]+"d"+d+c._periods[4]+"h"+d+c._periods[5]+"m"+d+c._periods[6]+"s"),this._addTarget(a)}c._hold=b,c._savePeriods="pause"==b?c._periods:null,$.data(a,this.propertyName,c),this._updateCountdown(a,c)}},_getTimesPlugin:function(a){var b=$.data(a,this.propertyName);return b?"pause"==b._hold?b._savePeriods:b._hold?this._calculatePeriods(b,b._show,b.options.significant,new Date):b._periods:null},_determineTime:function(k,l){var o=null==k?l:"string"==typeof k?function(a){a=a.toLowerCase();for(var b=new Date,c=b.getFullYear(),d=b.getMonth(),e=b.getDate(),f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g,j=i.exec(a);j;){switch(j[2]||"s"){case"s":h+=parseInt(j[1],10);break;case"m":g+=parseInt(j[1],10);break;case"h":f+=parseInt(j[1],10);break;case"d":e+=parseInt(j[1],10);break;case"w":e+=7*parseInt(j[1],10);break;case"o":d+=parseInt(j[1],10),e=Math.min(e,x._getDaysInMonth(c,d));break;case"y":c+=parseInt(j[1],10),e=Math.min(e,x._getDaysInMonth(c,d))}j=i.exec(a)}return new Date(c,d,e,f,g,h,0)}(k):"number"==typeof k?function(a){var b=new Date;return b.setTime(b.getTime()+1e3*a),b}(k):k;return o&&o.setMilliseconds(0),o},_getDaysInMonth:function(a,b){return 32-new Date(a,b,32).getDate()},_normalLabels:function(a){return a},_generateHTML:function(c){var d=this;c._periods=c._hold?c._periods:this._calculatePeriods(c,c._show,c.options.significant,new Date);for(var e=!1,f=0,g=c.options.significant,h=$.extend({},c._show),i=0;i<=6;i++)e|="?"==c._show[i]&&c._periods[i]>0,h[i]="?"!=c._show[i]||e?c._show[i]:null,f+=h[i]?1:0,g-=c._periods[i]>0?1:0;for(var j=[!1,!1,!1,!1,!1,!1,!1],i=6;i>=0;i--)c._show[i]&&(c._periods[i]?j[i]=!0:(j[i]=g>0,g--));var k=c.options.compact?c.options.compactLabels:c.options.labels,l=c.options.whichLabels||this._normalLabels,m=function(a){var b=c.options["compactLabels"+l(c._periods[a])];return h[a]?d._translateDigits(c,c._periods[a])+(b?b[a]:k[a])+" ":""},n=function(a){var b=c.options["labels"+l(c._periods[a])];return!c.options.significant&&h[a]||c.options.significant&&j[a]?'<span class="'+x._sectionClass+'"><span class="'+x._amountClass+'">'+d._translateDigits(c,c._periods[a])+"</span><br/>"+(b?b[a]:k[a])+"</span>":""};return c.options.layout?this._buildLayout(c,h,c.options.layout,c.options.compact,c.options.significant,j):(c.options.compact?'<span class="'+this._rowClass+" "+this._amountClass+(c._hold?" "+this._holdingClass:"")+'">'+m(0)+m(1)+m(2)+m(3)+(h[4]?this._minDigits(c,c._periods[4],2):"")+(h[5]?(h[4]?c.options.timeSeparator:"")+this._minDigits(c,c._periods[5],2):"")+(h[6]?(h[4]||h[5]?c.options.timeSeparator:"")+this._minDigits(c,c._periods[6],2):""):'<span class="'+this._rowClass+" "+this._showClass+(c.options.significant||f)+(c._hold?" "+this._holdingClass:"")+'">'+n(0)+n(1)+n(2)+n(3)+n(4)+n(5)+n(6))+"</span>"+(c.options.description?'<span class="'+this._rowClass+" "+this._descrClass+'">'+c.options.description+"</span>":"")},_buildLayout:function(c,d,e,f,g,h){for(var j=c.options[f?"compactLabels":"labels"],k=c.options.whichLabels||this._normalLabels,l=function(a){return(c.options[(f?"compactLabels":"labels")+k(c._periods[a])]||j)[a]},m=function(a,b){return c.options.digits[Math.floor(a/b)%10]},o={desc:c.options.description,sep:c.options.timeSeparator,yl:l(0),yn:this._minDigits(c,c._periods[0],1),ynn:this._minDigits(c,c._periods[0],2),ynnn:this._minDigits(c,c._periods[0],3),y1:m(c._periods[0],1),y10:m(c._periods[0],10),y100:m(c._periods[0],100),y1000:m(c._periods[0],1e3),ol:l(1),on:this._minDigits(c,c._periods[1],1),onn:this._minDigits(c,c._periods[1],2),onnn:this._minDigits(c,c._periods[1],3),o1:m(c._periods[1],1),o10:m(c._periods[1],10),o100:m(c._periods[1],100),o1000:m(c._periods[1],1e3),wl:l(2),wn:this._minDigits(c,c._periods[2],1),wnn:this._minDigits(c,c._periods[2],2),wnnn:this._minDigits(c,c._periods[2],3),w1:m(c._periods[2],1),w10:m(c._periods[2],10),w100:m(c._periods[2],100),w1000:m(c._periods[2],1e3),dl:l(3),dn:this._minDigits(c,c._periods[3],1),dnn:this._minDigits(c,c._periods[3],2),dnnn:this._minDigits(c,c._periods[3],3),d1:m(c._periods[3],1),d10:m(c._periods[3],10),d100:m(c._periods[3],100),d1000:m(c._periods[3],1e3),hl:l(4),hn:this._minDigits(c,c._periods[4],1),hnn:this._minDigits(c,c._periods[4],2),hnnn:this._minDigits(c,c._periods[4],3),h1:m(c._periods[4],1),h10:m(c._periods[4],10),h100:m(c._periods[4],100),h1000:m(c._periods[4],1e3),ml:l(5),mn:this._minDigits(c,c._periods[5],1),mnn:this._minDigits(c,c._periods[5],2),mnnn:this._minDigits(c,c._periods[5],3),m1:m(c._periods[5],1),m10:m(c._periods[5],10),m100:m(c._periods[5],100),m1000:m(c._periods[5],1e3),sl:l(6),sn:this._minDigits(c,c._periods[6],1),snn:this._minDigits(c,c._periods[6],2),snnn:this._minDigits(c,c._periods[6],3),s1:m(c._periods[6],1),s10:m(c._periods[6],10),s100:m(c._periods[6],100),s1000:m(c._periods[6],1e3)},p=e,i=0;i<=6;i++){var q="yowdhms".charAt(i),r=new RegExp("\\{"+q+"<\\}([\\s\\S]*)\\{"+q+">\\}","g");p=p.replace(r,!g&&d[i]||g&&h[i]?"$1":"")}return $.each(o,function(n,v){var a=new RegExp("\\{"+n+"\\}","g");p=p.replace(a,v)}),p},_minDigits:function(a,b,c){return b=""+b,b.length>=c?this._translateDigits(a,b):(b="0000000000"+b,this._translateDigits(a,b.substr(b.length-c)))},_translateDigits:function(b,c){return(""+c).replace(/[0-9]/g,function(a){return b.options.digits[a]})},_determineShow:function(a){var b=a.options.format,c=[];return c[0]=b.match("y")?"?":b.match("Y")?"!":null,c[1]=b.match("o")?"?":b.match("O")?"!":null,c[2]=b.match("w")?"?":b.match("W")?"!":null,c[3]=b.match("d")?"?":b.match("D")?"!":null,c[4]=b.match("h")?"?":b.match("H")?"!":null,c[5]=b.match("m")?"?":b.match("M")?"!":null,c[6]=b.match("s")?"?":b.match("S")?"!":null,c},_calculatePeriods:function(c,d,e,f){c._now=f,c._now.setMilliseconds(0);var g=new Date(c._now.getTime());c._since?f.getTime()<c._since.getTime()?c._now=f=g:f=c._since:(g.setTime(c._until.getTime()),f.getTime()>c._until.getTime()&&(c._now=f=g));var h=[0,0,0,0,0,0,0];if(d[0]||d[1]){var i=x._getDaysInMonth(f.getFullYear(),f.getMonth()),j=x._getDaysInMonth(g.getFullYear(),g.getMonth()),k=g.getDate()==f.getDate()||g.getDate()>=Math.min(i,j)&&f.getDate()>=Math.min(i,j),l=function(a){
return 60*(60*a.getHours()+a.getMinutes())+a.getSeconds()},m=Math.max(0,12*(g.getFullYear()-f.getFullYear())+g.getMonth()-f.getMonth()+(g.getDate()<f.getDate()&&!k||k&&l(g)<l(f)?-1:0));h[0]=d[0]?Math.floor(m/12):0,h[1]=d[1]?m-12*h[0]:0,f=new Date(f.getTime());var n=f.getDate()==i,o=x._getDaysInMonth(f.getFullYear()+h[0],f.getMonth()+h[1]);f.getDate()>o&&f.setDate(o),f.setFullYear(f.getFullYear()+h[0]),f.setMonth(f.getMonth()+h[1]),n&&f.setDate(o)}var p=Math.floor((g.getTime()-f.getTime())/1e3),q=function(a,b){h[a]=d[a]?Math.floor(p/b):0,p-=h[a]*b};if(q(2,604800),q(3,86400),q(4,3600),q(5,60),q(6,1),p>0&&!c._since)for(var r=[1,12,4.3482,7,24,60,60],s=6,t=1,u=6;u>=0;u--)d[u]&&(h[s]>=t&&(h[s]=0,p=1),p>0&&(h[u]++,p=0,s=u,t=1)),t*=r[u];if(e)for(var u=0;u<=6;u++)e&&h[u]?e--:e||(h[u]=0);return h}});var w=["getTimes"];$.fn.countdown=function(a){var b=Array.prototype.slice.call(arguments,1);return isNotChained(a,b)?x["_"+a+"Plugin"].apply(x,[this[0]].concat(b)):this.each(function(){if("string"==typeof a){if(!x["_"+a+"Plugin"])throw"Unknown command: "+a;x["_"+a+"Plugin"].apply(x,[this].concat(b))}else x._attachPlugin(this,a||{})})};var x=$.countdown=new Countdown}(jQuery);var dateFormat=function(){var token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,pad=function(val,len){for(val=String(val),len=len||2;val.length<len;)val="0"+val;return val};return function(date,mask,utc){var dF=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(date)||/\d/.test(date)||(mask=date,date=void 0),date=date?new Date(date):new Date,isNaN(date))throw SyntaxError("invalid date");mask=String(dF.masks[mask]||mask||dF.masks.default),"UTC:"==mask.slice(0,4)&&(mask=mask.slice(4),utc=!0);var _=utc?"getUTC":"get",d=date[_+"Date"](),D=date[_+"Day"](),m=date[_+"Month"](),y=date[_+"FullYear"](),H=date[_+"Hours"](),M=date[_+"Minutes"](),s=date[_+"Seconds"](),L=date[_+"Milliseconds"](),o=utc?0:date.getTimezoneOffset(),flags={d:d,dd:pad(d),ddd:dF.i18n.dayNames[D],dddd:dF.i18n.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:dF.i18n.monthNames[m],mmmm:dF.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(L>99?Math.round(L/10):L),t:H<12?"a":"p",tt:H<12?"am":"pm",T:H<12?"A":"P",TT:H<12?"AM":"PM",Z:utc?"UTC":(String(date).match(timezone)||[""]).pop().replace(timezoneClip,""),o:(o>0?"-":"+")+pad(100*Math.floor(Math.abs(o)/60)+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]};return mask.replace(token,function($0){return $0 in flags?flags[$0]:$0.slice(1,$0.length-1)})}}();dateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(mask,utc){return dateFormat(this,mask,utc)},$(document).ready(function(){vIE=versionIE(),(!vIE||vIE>=9)&&$(".js-directs-resultats").fadeIn(vitesseFade).css("display","inherit")}),$(window).load(function(){$(".js-directs-resultats").fadeIn(vitesseFade).css("display","inherit"),vIE=versionIE(),vIE&&vIE<=11&&($(".navigation__menu__directs-resultats__directs span").css("border-bottom","1px solid #fff"),setTimeout(function(){$(".navigation__menu__directs-resultats__directs").css("-ms-backface-visibility","hidden")},1e3))});var duel={radius:55,initialize:function(){var duels=$(".home__colead__graph__canvas");if(0===duels.length)return!1;for(var i=0;i<duels.length;i++)this.draw(duels.get(i),duels.get(i).getContext("2d"))},draw:function(canvas,context){var scores=this.getScores(canvas),x=canvas.width/2,y=canvas.height/2;if(context.fillStyle="#202020",context.textAlign="center",context.font="32px DIN-EQP-Bold",context.fillText("VS",x,y+12),1.5===scores.angle)return context.beginPath(),context.arc(x,y,this.radius,0,2*Math.PI,!1),context.lineWidth=20,context.strokeStyle=0!==scores.A?"#202020":"#bbb",void context.stroke();context.beginPath(),context.arc(x,y,this.radius,1.5*Math.PI,scores.angle*Math.PI,!0),context.lineWidth=20,context.strokeStyle="#202020",context.stroke(),context.beginPath(),context.arc(x,y,this.radius,1.5*Math.PI,scores.angle*Math.PI,!1),context.lineWidth=20,context.strokeStyle="#bbb",context.stroke()},getScores:function(canvas){var container=$(canvas).parent().parent(),A=parseInt(container.find(".home__colead__player__score").get(0).innerText),B=parseInt(container.find(".home__colead__player__score").get(1).innerText);return{A:A,B:B,angle:1.5+2*(A+B>0?B/(A+B):.5)}}},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};$(document).ready(function(){$(".js-autosize").css("overflow","hidden").autogrow()}),$(document).ready(function(){if($("#witness").witness(),$(".js-prevArticle").length>0&&$(".js-nextArticle").length>0){objPrev=$(".js-prevArticle"),objNext=$(".js-nextArticle");url="/edition-speciale/json/"+getParameter("id_ed")+".json",$.ajax({dataType:"json",url:url,success:function(data){var articles=new Array;for(var k in data.pages)page=data.pages[k],page.lien&&(page.lien.indexOf("/Article")>0||page.lien.indexOf("/Infos")>0)&&articles.push(page);page_en_cours=-1;for(var k in articles)page=articles[k],-1!=page.lien.indexOf(document.location.pathname)&&(page_en_cours=k);page_en_cours=parseInt(page_en_cours),-1!=page_en_cours&&(idprev=page_en_cours-1,idnext=page_en_cours+1),0==page_en_cours&&(idprev=articles.length-1),page_en_cours>=articles.length-1&&(idnext=0),-1!=page_en_cours&&(articles[idprev].lien?(objPrev.attr("href",articles[idprev].lien),objPrev.find("p").html(articles[idprev].titre),objPrev.show()):objPrev.hide(),articles[idnext].lien?(objNext.attr("href",articles[idnext].lien),objNext.find("p").html(articles[idnext].titre),objNext.show()):objNext.hide())}})}if($(".js-prevGuideArticle").length>0&&$(".js-nextGuideArticle").length>0){objPrev=$(".js-prevGuideArticle"),objNext=$(".js-nextGuideArticle");window.location.search.indexOf("guide=")>0&&(a=window.location.search.split("&"),g=a[0].split("=")[1],url="//www.lequipe.fr/guide/datas/"+g+"/teams.json?"+parseInt((new Date).getTime()/36e3)),$.ajax({dataType:"json",url:url,success:function(data){var articles=new Array;for(var k in data.teams)page=data.teams[k],page.url&&articles.push(page);page_en_cours=-1;for(var k in articles)page=articles[k],-1!=page.url.indexOf(document.location.pathname)&&(page_en_cours=k);console.log(articles),page_en_cours=parseInt(page_en_cours),-1!=page_en_cours&&(idprev=page_en_cours-1,idnext=page_en_cours+1),0==page_en_cours&&(objPrev.hide(),idprev=page_en_cours),page_en_cours>=articles.length-1&&(idnext=0),-1!=page_en_cours&&(articles[idprev].url?(objPrev.attr("href",articles[idprev].url+window.location.search),objPrev.find("p").html(articles[idprev].shortname),objPrev.show()):objPrev.hide(),articles[idnext].url?(objNext.attr("href",articles[idnext].url+window.location.search),objNext.find("p").html(articles[idnext].shortname),objNext.show()):objNext.hide())}})}});var menu_on=0,sportMenu="";$(document).ready(function(){nameSport(),menuBeforeContent(),threedotsMenu(),navTabsMenu(),setTimeout(insertSousMenu,2e3),setTimeout(is_habillage,500),setTimeout(is_habillage,1e3),setTimeout(threedotsMenu,1e3),setTimeout(threedotsMenu,5e3),setTimeout(threedotsMenu,15e3),setTimeout(is_habillage,1500),setTimeout(is_habillage,2e3),setTimeout(is_habillage,2500),setTimeout(is_habillage,5e3),setTimeout(is_habillage,1e4),-1!=window.location.href.split("/")[2].indexOf("abonne")&&$("body").addClass("premium"),0!==$(".navigation__sousmenu__plus__bloc").length&&0!==$("#before-edito-content").length&&$(".navigation__sousmenu__plus__bloc").addClass("js-sousmenuplus-dest").prependTo("#before-edito-content")}),$(window).resize(function(){threedotsMenu(),insertSousMenu()}),$(".formulaire_inscription input[type=submit]").length&&(initExt(),$(document).bind("connection-login-ext",function(e,data){loginSocialNetwork(data,SigninOk)}),$(".formulaire_inscription").submit(function(e){return!0===checkPassword()&&createAccount(getFormData(),SignupOk,showError),!1})),isHandlerUrlV2=!1,$(document).ready(function(){function retrieveLink($elem,event){if(!$elem.data("treated")){var newLink=linkFactory($elem);console.log(newLink),"string"==typeof newLink&&newLink.length?(console.log($elem),console.log("remplace "+$elem.attr("href")+" par "+newLink),isHandlerUrlV2?$elem.attr("href",newLink).data("treated",!0):(event.preventDefault(),window.location.href=newLink)):(event.preventDefault(),console.log("URL "+$elem.attr("href")+" ne peut être remplacée"))}}function linkFactory(el){if("ANDROID"!=platformApp&&"IOS"!=platformApp)return!1;var str=void 0!==el.attr("href")?el.attr("href").replace("#POUSSE",""):"";if(""!=str&&!/\.lequipe\.fr|^(\/|#|abonnement-\d+:\/\/|video:\/\/[a-z0-9]+|alloquestion:\/\/addChatAlloQuestion\/[0-9]+\/[a-z0-9-_]+|direct:\/\/)/i.test(str)&&void 0!==str)return str;if(/^(abonnement-\d+:\/\/|video:\/\/[a-z0-9]+|alloquestion:\/\/addChatAlloQuestion\/[0-9]+\/[a-z0-9-_]+)$/i.test(str)&&!isHandlerUrlV2)return str;if("coms-react-button"==el.attr("id")){var patternIndexOfNewsFree=getPatternIndexByName(regParams.regex,"news_free"),articleId=getInfosNews(regParams.regex[patternIndexOfNewsFree].reg,newsID,"id");if(isHandlerUrlV2)var newlink="lequipefr://action/news/commenter/"+articleId;else var newlink="reagir://Article/"+articleId;return newlink}if("coms-load-more-button"==el.attr("id")){var patternIndexOfNewsFree=getPatternIndexByName(regParams.regex,"news_free"),infosNews=getInfosNews(regParams.regex[patternIndexOfNewsFree].reg,newsID,"all"),newlink="comms://"+infosNews[1]+"/"+infosNews[2]+"/"+infosNews[3];return newlink}var resultCheckClassItem=checkClassItem(class_list,el,newsID,regParams);if(el.parents().hasClass("menu-principal")||el.parents().hasClass("nav-resultats")&&""!=str)return str;if("string"==typeof resultCheckClassItem)return el.removeAttr("href"),console.log(resultCheckClassItem),resultCheckClassItem;if(!resultCheckClassItem){var matchregex=matchRegex(el,regParams,str);if(matchregex)return matchregex;var testLinkAbs=/(www|m).lequipe.fr/i.exec(str);if(testLinkAbs&&testLinkAbs.length>0)return(str=str.replace(testLinkAbs[1],"webview"))+"#POUSSE";if(/^\//i.test(str))return str+"#POUSSE";if(/(store|adrenaline).lequipe.fr/i.test(str))return str+"#POUSSE";if(/^#/i.test(str))return}}var newsID=null,userAgent=navigator.userAgent||navigator.vendor||window.opera,regExpUserAgent=/MOBILE-LEQUIPE\/(ANDROID|IOS)\/(?:PHONE|TABLETTE)\/([0-9]+)(?:\.[0-9]+)*\/?/,versionApp=0,platformApp="";if("string"==typeof userAgent){var matching=userAgent.match(regExpUserAgent);null!==matching&&(platformApp=matching[1],versionApp=matching[2])}if("ANDROID"===platformApp&&versionApp>=5||"IOS"===platformApp&&versionApp>=7){isHandlerUrlV2=!0;var regParams={regex:[{reg:"^(/[a-z0-9-_]+/Actualites/Video-360-[a-z0-9-_]+/[0-9]+)$",index:"6"},{reg:"/([a-z0-9-_]+)/Actualites/([a-z-_0-9]+)/([0-9]+)",index:"0",name:"news_free"},{reg:"/([a-z0-9-_]+)/Article/([a-z-_0-9]+)/([0-9]+)",index:"2"},{reg:"/([a-z0-9-_]+)/Infos/([a-z-_0-9]+)/([0-9]+)",index:"0"},{reg:"/(Football|Rugby|Tennis)/[a-z0-9-_]+FicheMatch([0-9]+)",index:"1"},{reg:"/(Football|Rugby|Tennis)/(?:m|M)atch/([0-9]+)",index:"1"},{reg:"^abonnement-([0-9]+)://$",index:"3"},{reg:"^video://([a-z0-9]+)$",index:"4"},{reg:"^alloquestion://addChatAlloQuestion/([0-9]+)/([a-z0-9-_]+)$",index:"5"},{reg:"^(/Football/Guide-stades-Euro-2016/)$",index:"7"},{reg:"^direct://$",index:"8"}],replacement:["lequipefr://news/$$$1/$$$2/$$$3?premium=0","lequipefr://match/$$$1/$$$2","lequipefr://news/$$$1/$$$2/$$$3?premium=1","lequipefr://action/achat/abonnement-$$$1","lequipefr://video/$$$1","lequipefr://action/news/alloquestion?function=addChatAlloQuestion&id_sport=$$$1&allo_code=$$$2","lequipefr://browser/?url=http://m.lequipe.fr$$$1&out=1","lequipefr://browser/?url=http://www.lequipe.fr$$$1&out=1","lequipefr://action/direct-e21"]}}else var regParams={regex:[{reg:"^(/[a-z0-9-_]+/Actualites/Video-360-[a-z0-9-_]+/[0-9]+)$",index:"5"},{reg:"/([a-z0-9-_]+)/Actualites/([a-z-_0-9]+)/([0-9]+)",index:"0",name:"news_free"},{reg:"/([a-z0-9-_]+)/Article/([a-z-_0-9]+)/([0-9]+)",index:"4"},{reg:"/([a-z0-9-_]+)/Infos/([a-z-_0-9]+)/([0-9]+)",index:"0"},{reg:"/([a-z0-9-_]+)/TFJ(?:M|F)_?([0-9]+)",index:"1"},{reg:"/([a-z0-9-_]+)/[a-z0-9-_]+Fiche(?:Joueur|Athlete|Pilote|Coureur|Skieur)(_?[0-9]+)",index:"1"},{reg:"/([a-z0-9-_]+)/[a-z0-9-_]+Fiche(?:Club|Equipe|Selection|Ecurie)(?:1_|_)?([0-9]+)",index:"2"},{reg:"/(Football|Rugby|Tennis)/[a-z0-9-_]+FicheMatch([0-9]+)",index:"3"},{reg:"/(Football|Rugby|Tennis)/(?:m|M)atch/([0-9]+)",index:"3"},{reg:"^(/Football/Guide-stades-Euro-2016/)$",index:"6"}],replacement:["news://$$$1/$$$2/$$$3","base://$$$1/joueur/$$$2","base://$$$1/club/$$$2","live://$$$1/$$$2","news://$$$1/$$$2/$$$3#PREMIUM","browser://open?url=http://m.lequipe.fr$$$1","browser://open?url=http://www.lequipe.fr$$$1"]};var class_list=["texte-plus","texte-moins","voteplus","votemoins","alerter","reagir","coms-react-button"];"ANDROID"!=platformApp&&"IOS"!=platformApp||$("#container, #wrapper").on("click","a",function(event){retrieveLink($(this),event)})});var hex_chr="0123456789abcdef";$(document).ready(function(){filterPremium()}),$(window).resize(function(){filterPremium()});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},lxiti=0,PopInArticle={gbType:null,ieVersion:null,bodyScrollTop:null,popinScrollTop:null,popinHeadHeight:null,navPosTop:null,homeTitle:null,urlNews:null,init:function(articleId){this.initHtml(articleId)},initHtml:function(articleId){var that=this;if($("#popinArticle .article").data("aboonly")&&$("#popinArticle .js-blocAchat-premium a.pay_act").parents("div[class*=js-bloc-achat]").remove(),_userInfos||$("#popinArticle .signin").addClass("view"),$("#popinArticle .article.patrimonial").length&&$("#popinArticle .article.patrimonial").hasClass("previewed")&&(xtpage=$("article").data("xtpage").replace("::breve::","::breve_premium::preview::"),$("article").data("xtn2")&&(xtn2=$("article").data("xtn2")),"undefined"!=typeof edition_RIO&&1==edition_RIO&&(xtn2=44),0==lxiti&&that.loadXiti(),$("article").find(".js-stories").length)){var storiesFeedUrl=$("article").find(".js-stories").data("feed-url");$("article").data("feed-url",storiesFeedUrl)}$("#popinArticle .article.previewed").length?that.gb_check_mpp(articleId):$("#popinArticle .article").each(function(i){$(this).html(that.parseContent($(this).html())),that.gb_init_article($(this).data("content-id"))}),$(".article").find("div[data-diapo]").length&&$(".article").find("div[data-diapo]").each(function(){$(this).load($(this).attr("data-diapo"),function(){console.log("OWL DIAPO"),$(".owl-demo").owlCarousel({center:!0,items:1,navigation:!0,loop:!0,pagination:!0,paginationNumbers:!0});var owl=$(".owl-demo");owl.owlCarousel(),owl.on("changed.owl.carousel",function(event){$(".bas-pagination span").html($(".owl-item.active").next().find(".item").data("number"))}),$(".owl-item.active").bind("click",function(){owl.trigger("next.owl.carousel"),$(".bas-pagination span").html($(".owl-item.active").next().find(".item").data("number"))}),$(".owl-next").bind("click",function(){refreshPub(),$(".bas-pagination span").html($(".owl-item.active").next().find(".item").data("number"))}),$(".owl-prev").bind("click",function(){refreshPub(),$(".bas-pagination span").html($(".owl-item.active").prev().find(".item").data("number"))})})})},gb_check_mpp:function(articleId){console.log("gb_check_mpp");var that=this,article=$('#popinArticle .article[data-content-id="'+articleId+'"]'),datas={};$(article).data("content-type")&&$(article).data("content-id")&&(!features.remote.purchase_tunnel||this.checkEdSpeciale()||this.checkNumerique()||1==readCookie("pompp")||_userInfos&&"object"===_typeof(_userInfos.mpp))?(console.log("1st cond"),datas=$(article).data("content-parentid")?{contenttype:$(article).data("content-type"),contentid:$(article).data("content-parentid"),contentidchild:$(article).data("content-id")}:{contenttype:$(article).data("content-type"),contentid:$(article).data("content-id")},datas.querystring=queryString,sessionStorage.getItem("id_numerique")&&(datas.idNumerique=sessionStorage.getItem("id_numerique"),datas.contentId=$(article).data("content-id"),sessionStorage.getItem("id_numerique_s")&&(datas.NumOffert=sessionStorage.getItem("id_numerique_s"))),$.ajax({url:"/vel/gb.php",type:"POST",async:!0,dataType:"json",data:datas,beforeSend:function(){$(article).addClass("loading"),$(article).find(".col.content").hide(),$(article).find(".connex-premium").hide()},success:function(r){return r.exception?(console.log("exception"),void console.log(r)):(console.log("TRIPT checkNumerique",datas.NumOffert),console.log("TRIPT TEST",datas.NumOffert&&_userInfos),r.right?r.content.datas?($(article).hasClass("web")||$(".article").hasClass("web")?($(article).html(r.content.datas),$(article).find(".col.text *").removeAttr("style")):$(article).html(that.parseContent(r.content.datas)),void that.gb_init_article($(article).data("content-id"))):void console.log("content unavailable"):(_userInfos&&"object"===_typeof(_userInfos.mpp)&&(_userInfos.mpp.tokens_left=parseInt(_userInfos.mpp.tokens_left),_userInfos.mpp.tokens_left&&void 0===queryString.editionspeciale&&($(article).removeClass("loading"),$("#popinArticle .article").data("aboonly")||($("[class*=js-bloc-achat]").addClass("disabled"),$(".js-bloc-achat-jetons").removeClass("disabled").find("#numJet").html(_userInfos.mpp.tokens_left),_userInfos.mpp.tokens_left>1?$("#pluJet").html("s"):$("#pluJet").html("")))),void(void 0!==r.redirect&&""!=r.redirect&&(document.location=r.redirect))))},error:function(_error){xtpage=$(article).data("xtpage").replace("::breve::","::breve_premium::preview::"),$(article).data("xtn2")&&(xtn2=$(article).data("xtn2")),that.loadXiti()},complete:function(){$(article).find(".col.content").show(),$(article).find(".connex-premium").show()}})):$("#popinArticle .article.patrimonial").length||(void 0!==$(article).data("xtpage")&&null!=$(article).data("xtpage")&&(xtpage=$(article).data("xtpage").replace("::breve::","::breve_premium::preview::")),$(article).data("xtn2")&&(xtn2=$(article).data("xtn2")),0==lxiti&&that.loadXiti())},checkEdSpeciale:function(){if(void 0!==queryString&&void 0!==queryString.editionspeciale&&null!==queryString.editionspeciale.match(/^[a-z0-9]*$/i)&&void 0!==queryString.id_ed&&null!==queryString.id_ed.match(/^[0-9]*$/)){var option_achat="payant";return $.ajax({url:"/v7-lequipe/shared/generated/includes/subscriber-edition/"+queryString.id_ed.substr(-3)+"/"+queryString.id_ed+"/sommaire.json",async:!1,dataType:"json",success:function(data){console.log(data),option_achat=data.option_achat}}),console.log(option_achat),"gratuit"==option_achat}return!1},checkNumerique:function(){if(console.log("checkNum sessionStorage",sessionStorage.getItem("id_numerique")),sessionStorage.getItem("id_numerique")){var option_achat="payant";return $.ajax({url:"/v7-lequipe/shared/generated/includes/subscriber-edition/"+sessionStorage.getItem("id_numerique")+"/"+sessionStorage.getItem("id_numerique")+"/sommaire.json",async:!1,dataType:"json",success:function(data){return console.log(data),option_achat=data.option_achat,console.log("option_achat",option_achat),"gratuit"==option_achat?(sessionStorage.setItem("id_numerique_s","g"),!0):"offert"==option_achat&&(sessionStorage.setItem("id_numerique_s","o"),console.log("_uI",_userInfos),!!_userInfos)},error:function(data){return!1}}),console.log("RE : option_achat",option_achat),"gratuit"==option_achat?(sessionStorage.setItem("id_numerique_s","g"),!0):"offert"==option_achat&&(sessionStorage.setItem("id_numerique_s","o"),console.log("_uI",_userInfos),!!_userInfos)}return!1},gb_init_article:function(articleId){console.log("gb_init_article");var that=this;$(window).trigger("resize"),article=$('#popinArticle .article[data-content-id="'+articleId+'"]'),$(article).find(".col.content .col.exergue").length||$(article).find(".col.content .col.text").css({width:$(article).find(".col.content").width()-150}),$(article).hasClass("previewed")&&$(article).removeClass("previewed"),$(article).removeClass("loading").addClass("loaded"),$(article).find(".full .num").length&&$(article).find(".full .num").text($("#popinArticle .article.loaded").length),$(article).find("div.js-init-stories-gallery").length&&$.get("/v7-lequipe/dist/includes/static/stories/gallery-article.html",function(data){$(article).find("div.js-init-stories-gallery").replaceWith(data),$(article).find("div.js-init-stories-bandeau").length&&$.get("/v7-lequipe/dist/includes/static/stories/bandeau-article.html",function(data){$(article).find("div.js-init-stories-bandeau").replaceWith(data);var stories=$(article).find(".js-stories"),storiesFeedUrl=$("article").data("feed-url");stories.prepend(data),stories.data("feed-url",storiesFeedUrl),stories.stories()})}),$(".article").find("div[data-diapo]").length&&$(".article").find("div[data-diapo]").each(function(){$(this).load($(this).attr("data-diapo"),function(){console.log("OWL DIAPO"),$(".owl-demo").owlCarousel({center:!0,items:1,navigation:!0,loop:!0,pagination:!0,paginationNumbers:!0});var owl=$(".owl-demo");owl.owlCarousel(),owl.on("changed.owl.carousel",function(event){$(".bas-pagination span").html($(".owl-item.active").next().find(".item").data("number"))}),$(".owl-item.active").bind("click",function(){owl.trigger("next.owl.carousel"),$(".bas-pagination span").html($(".owl-item.active").next().find(".item").data("number"))}),$(".owl-next").bind("click",function(){refreshPub(),$(".bas-pagination span").html($(".owl-item.active").next().find(".item").data("number"))}),$(".owl-prev").bind("click",function(){refreshPub(),$(".bas-pagination span").html($(".owl-item.active").prev().find(".item").data("number"))})})}),$(article).find(".etoile").length&&$(article).find(".etoile").each(function(){var nbetoileTotale=$(".etoile").text().trim().length,nbetoile=$(".etoile span").text().trim().length;$(".etoile").addClass("nbetoile nbetoile_"+nbetoile);for(var i=1;i<=nbetoileTotale;i++)i<=nbetoileTotale-nbetoile?$(".etoile").append('<span class="stars"><img src="/v6/img/etoile-premium-20.png" /></span>'):$(".etoile").append('<span class="stars"><img src="/v6/img/etoile-premium-20-off.png" /></span>')}),0!=$(".juxtapose").length&&($.getScript("//cdn.knightlab.com/libs/juxtapose/latest/js/juxtapose.js"),$("<link/>",{rel:"stylesheet",type:"text/css",href:"//cdn.knightlab.com/libs/juxtapose/latest/css/juxtapose.css"}).appendTo("head")),($(article).find(".diaporama").length||$(".article").find(".diaporama").length)&&$(article).find("div[data-diapo]").each(function(){$(this).load($(this).attr("data-diapo"),function(){console.log("OWL DIAPO"),$(".owl-demo").owlCarousel({center:!0,items:1,navigation:!0,loop:!0,pagination:!0,paginationNumbers:!0});var owl=$(".owl-demo");owl.owlCarousel(),owl.on("changed.owl.carousel",function(event){$(".bas-pagination span").html($(".owl-item.active").next().find(".item").data("number"))}),$(".owl-item.active").bind("click",function(){owl.trigger("next.owl.carousel"),$(".bas-pagination span").html($(".owl-item.active").next().find(".item").data("number"))}),$(".owl-next").bind("click",function(){refreshPub(),$(".bas-pagination span").html($(".owl-item.active").next().find(".item").data("number"))}),$(".owl-prev").bind("click",function(){refreshPub(),$(".bas-pagination span").html($(".owl-item.active").prev().find(".item").data("number"))})})}),$("#popinArticle .article.patrimonial").length||(xtpage=$(article).data("xtpage").replace("::breve::","::breve_premium::full::"),$(article).data("xtn2")&&(xtn2=$(article).data("xtn2")),0==lxiti&&that.loadXiti()),$("[data-templating]").templating()},parsePremiumUrl:function(url){if(-1==url.indexOf("/Article/"))return!1;var parser=document.createElement("a");parser.href=url;var urlArr=parser.pathname.replace(/^\//g,"").split("/"),urlObj={};return urlObj.domain=parser.hostname,urlObj.sport=urlArr[0],urlObj.id=urlArr[3],urlObj.url=parser.href,this.urlNews="premiun",urlObj},parseContent:function(content){var datas="",mainText="",exergue="";if(!content)return"";var html=$.parseHTML(content);if($(content).find(".chapo").length&&$.trim($(content).find(".chapo").text()).length&&(datas+='<p class="chapo">'+$(content).find(".chapo").html()+"</p>"),$(content).find("div.texte").length)if($(content).find(".titregristop,.titregrisflop").length){var top="",flop="";$(content).find("p").each(function(){var className=$(this).attr("class")?' class="'+$(this).attr("class")+'"':"";$(this).find(".titregrisflop").length||flop.length?flop+="<p"+className+">"+$(this).html()+"</p>":top+="<p"+className+">"+$(this).html()+"</p>"}),datas+='<div class="topflop"><div class="top">'+top+'</div><div class="flop">'+flop+"</div></div>"}else{var loop=0;if($(content).find(".col.text .signature, .col.text .signatureligne").length){var parents=$(content).find(".col.text .signature, .col.text .signatureligne").last().parents(),parentSignature=null;$(parents).each(function(i){if("col text"==$(this).attr("class")&&i>0)return void(parentSignature=$(parents).eq(i-1))})}var divTexteIndex=parentSignature?$(parentSignature).index():$(content).find(".col.text").children().length;$(content).find(".col.text").children().each(function(i){if(!$(this).is(":empty")&&$.trim($(this).text()).length){if(loop<=divTexteIndex&&!$(this).hasClass("chiffre")&&!$(this).find(".rang").length)$(this).find("p").length?mainText+=$(this).html():$(this).attr("class")?mainText+='<p class="'+$(this).attr("class")+'">'+$(this).html()+"</p>":mainText+="<p>"+$(this).html()+"</p>";else{var exergueItem="";$(this).find("p").length||$(this).is(":empty")||!$.trim($(this).text()).length?$(this).find("p").each(function(){if(!$(this).is(":empty")&&$.trim($(this).text()).length){var className=$(this).attr("class")?' class="'+$(this).attr("class")+'"':"";!isNaN(parseInt($(this).html().replace("N°","")))&&$.trim($(this).text()).length<10&&(className=' class="chiffre"'),exergueItem+="<p"+className+">"+$(this).html()+"</p>"}}):exergueItem+='<p class="titre">'+$(this).html()+"</p>",exergueItem&&(exergue+='<div class="item">'+exergueItem+"</div>")}loop++}})}else mainText='<div class="only-exergue">'+$(html).find(".col.content").html()+"</div>";datas+=mainText?'<div class="col text">'+mainText+"</div>":'<div class="col text"></div>',exergue&&(datas+='<div class="col side exergue">'+exergue+"</div>"),$(content).find(".diaporama").length&&(datas+='<div class="clear"></div><div class="diaporama">'+$(content).find(".diaporama").html()+"</div>"),$(content).find(".medias").length&&!$(content).find(".diaporama").length?datas+='<div class="clear"></div><div class="medias">'+$(content).find(".medias").html()+"</div>":datas+='<div class="clear"></div>';var parsedContent="";for(i in html)html[i].outerHTML&&($(html[i]).find(".col.content")&&$(html[i]).find(".col.content").html(datas),parsedContent+=html[i].outerHTML);return parsedContent},format169Full:function(){var screenWidth=$(window).width(),width=screenWidth>=1440?1440:screenWidth<=1024?1024:screenWidth;return{width:width,height:9*width/16}},loadXiti:function(){"no-xtpage"==xtpage.substring(0,9)&&(xtpage=$("article").data("xtpage"),$("#popinArticle .article.patrimonial").length||(xtpage=$("article").data("xtpage").replace("::breve::","::breve_premium::full::")),($("#popinArticle .article.patrimonial.free").length||$("#popinArticle .article.patrimonial").hasClass("previewed"))&&(xtpage=$("article").data("xtpage").replace("::breve::","::breve_premium::preview::"))),lxiti=1,"undefined"!=typeof edition_RIO&&1==edition_RIO&&(xtn2=44)}},PopInAboOnly={gbType:null,ieVersion:null,init:function(){var that=this;if($(document).on("submit","form.js-aboonly-connexion",function(e){if(!$('.js-aboonly-connexion input[type="submit"]').hasClass("disabled")){$('.js-aboonly-connexion input[type="submit"]').addClass("disabled");loginMail({login:$('form.js-aboonly-connexion [name="field4"]').val(),pass:$('form.js-aboonly-connexion [name="field5"]').val()},null,function(errorTxt){$("form.js-aboonly-connexion .error").text(errorTxt).fadeIn(),$('form.js-aboonly-connexion input[type="submit"]').removeClass("disabled")}),e.preventDefault()}}),$("body").bind("lequipe-login",function(e,data){window.location.reload()}),!that.gb_check_mpp()){$("body #popinArticle").length&&$("body #popinArticle").remove(),$("body").append('<div id="popinArticle"><div class="body"></div><div class="clear"></div></div>');void 0!==$("body").attr("data-aboOnlyType")&&null!=$("body").attr("data-aboOnlyType")&&$("body").attr("data-aboOnlyType");$.ajax({url:"/v7-lequipe/dist/includes/static/premium/popinAboOnly.html",type:"GET",dataType:"html",beforeSend:function(){$("#popinArticle").css({width:400,height:136,top:"50%",left:"50%",marginTop:-68,marginLeft:-200}),$("#popinArticle .body").html('<div class="loader"></div>')},success:function(data){$("html, body").css({overflow:"hidden"}),$("#popinArticle").addClass("aboOnly").css({width:"100%",height:"100%",top:0,left:0,marginLeft:0,marginTop:0,position:"fixed",zIndex:1e3}),$("#popinArticle .body").html(data),_userInfos||$("#popinArticle .signin").addClass("view")},error:function(_error2){$("#popinArticle").hide(),$(document).trigger("closePopinArticle")}}),that.ieVersion&&$("#popinArticle").addClass("ie"+that.ieVersion),setInterval(function(){$("body #popinArticle").length||that.init()},3e3)}},gb_check_mpp:function(){console.log("gb_check_mpp");var datas=($("article").attr("data-content-id"),$("article").attr("data-content-type"),{});if(1==readCookie("pompp")||_userInfos&&"object"===_typeof(_userInfos.mpp)&&$("article").data("content-type")&&$("article").data("content-id")){if(datas=$("article").data("content-parentid")?{contenttype:$("article").data("content-type"),contentid:$("article").data("content-parentid"),contentidchild:$("article").data("content-id")}:{contenttype:$("article").data("content-type"),contentid:$("article").data("content-id")},1==readCookie("pompp"))return!0;var ret=!1;$.ajax({url:"/vel/gb.php",type:"POST",async:!1,dataType:"json",data:datas,success:function(r){return r.exception?(console.log("exception"),console.log(r),!1):r.right?void(ret=!0):(console.log("unauthorized"),void 0!==r.redirect&&""!=r.redirect&&(document.location=r.redirect),void(ret=!1))},error:function(_error3){},complete:function(){}})}return ret}};$(document).ready(function(){$("#container").length>0&&$("#container img.lazy").show().lazyload({threshold:200}),$(".payPremium a[href*='eStore/Offres/']").each(function(){$(this).attr("href",$(this).attr("href")+window.location.search)})}),$("[type*='EDITO'] .les-blocs,[type*='UNE'] .les-blocs").each(function(){$(this).next().find("iframe").length>0&&$(this).css("width","auto").css("height","auto")}),$(document).on("click",".imageOnly",function(){var _largeur=$(window).width();_largeur=$(window).width()<1364?1024:1420,conxpopup({width:$(window).width(),height:$(window).height(),
html:"<style>.popin-lequipe {box-shadow:none !important}a.close { display:none!important}#connexpopup {width:100%!important}#connexpopup .body{height:100%;position:relative;display:flex}.popin-background{background:#f8f8f8!important}</style><div style='margin:auto;width:"+$(".imageOnly img").width()+"px;max-width:"+_largeur+"px'><img src='"+$(".imageOnly img").attr("src")+"' alt='"+$(".imageOnly .div-imageune-legende").text()+"' style='cursor:pointer;width:"+$(".imageOnly img").width()+"px;max-width:"+_largeur+"px;margin-bottom:0'><div class='div-imageune-legende' style='display: block;margin-top:0;width:80%'>"+$(".imageOnly .div-imageune-legende").text()+"</div></div>"}),$("#popin-box-close-btn").fadeIn("fast").css("z-index","100020200"),window.onscroll=function(){window.scrollTo(0,0)}}),$(document).on("click",".popin--image, #popin-box-close-btn",function(){return $("#connexpopup").fadeOut("fast",function(){$("#connexpopup").remove()}),$("#popin-box-close-btn").fadeOut("fast"),$("#connexbackground").fadeOut("fast",function(){$("#connexbackground").remove(),$("body").trigger("connexClosed")}),window.onscroll=function(){},!1}),$("body").bind("lequipe-checklogin",function(e,data){-1!=document.location.hostname.indexOf("abonnes")?($("body").unbind("lequipe-checklogin"),!1!==data&&1==data.quotiAbonne||("#decouverte"==document.location.hash?popinDecouverte():redirectSiteFree())):!1!==data&&1==data.quotiAbonne&&($("body").unbind("lequipe-checklogin"),redirectSiteAbonnes())}),$(document).ready(function(){$(".js-share").length>0&&"undefined"!=typeof FB&&(window.fbAsyncInit=function(){FB.init({appId:"261959740493169",status:!0,cookie:!0,xfbml:!0,version:"v2.3"})},window.fbAsyncInit(),"undefined"!=typeof twttr&&twttr.events.bind("tweet",function(event){var href=getCurrentUrl();u=href,$.get("/v6/php/socialCountUpdate.php?provider=google&href="+u),$.get("/v6/php/socialCountUpdate.php?provider=twitter&href="+u,function(data){parseInt(data)&&$(".shareCount b").html(parseInt(data)),checkShareCountColor()})}),getShareCount())}),ggLogin=function(authResult){if(!$("#ggloginBtn").hasClass("is-loading"))if($("#ggloginBtn").addClass("is-loading"),authResult.access_token){var extDatas={};extDatas.provider="google",extDatas.code=authResult.code,extDatas.token=authResult.access_token,$(document).trigger("connection-login-ext",[extDatas])}else authResult.error&&$("#ggloginBtn").removeClass("is-loading")},$(document).ready(function(){0!==$(".sondage[idsondage]").length&&createCookie("lequipe-sondage",1)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},site={};$(document).ready(function(){if($("body").hasClass("numeriquev2")){var getCookie=function(name){var value="; "+document.cookie,parts=value.split("; "+name+"=");if(2==parts.length)return parts.pop().split(";").shift()};if(document.location.href.indexOf("edition-speciale")<=0&&document.location.href.indexOf("previsu")<=0)return!1;site.activeSection=999999,site.carouselActiveItem=1,site.withAnimation=!1,site.withHistory=!1,site.provenance=null,site.goToSection=function(pId,noFade){return pId!=site.activeSection&&(site.activeSection=pId,site.pushHistory(),site.changeSection(),site.changeBackground(pId),pId&&site.updatePageTag(),!0)},site.changeSection=function(){var jSection=$("#section_"+site.activeSection),jBtSectionUne=$(".js-bt-section-une");0==site.activeSection?jBtSectionUne.hide():jBtSectionUne.show(),site.withAnimation?($(".js-section:visible").fadeOut(500),jSection.fadeIn(500)):($(".js-section:visible").hide(),jSection.show())},site.btSection=function(){$("body").on("click",".js-bt-section",function(e){e.preventDefault(),site.goToSection(parseInt($(this).data("section"))),site.changeCarouselItem()})},site.goToCarouselItem=function(pId){if(pId==site.carouselActiveItem)return site.changeBackground(pId),void site.changeCarouselItem();site.carouselActiveItem=pId,"offert"==$(".page.is-une").attr("data-edition-type")?site.changeBackground(pId+1):site.changeBackground(pId),site.changeCarouselItem(),site.withAnimation=!0,site.pushHistory()},site.changeBackground=function(pId){if(pId){pId--;var jContainer=$(".js-page-back");$("#page_"+pId).hasClass("is-article")||$("#page_"+pId).hasClass("is-media")||$("#page_"+pId).hasClass("is-interactif_link")?jContainer.css({"background-image":$("#page_"+pId+" .picture").css("background-image"),filter:"blur(8px)",opacity:.5}):jContainer.css({"background-image":"url(/elements/img/subscriberEdition/background-sample.png)",filter:"none",opacity:1})}},site.changeCarouselItem=function(){var jCarousel=$(".js-carousel"),jCarouselContent=jCarousel.find(".js-carousel-content").addClass("with-animation"),jItems=(jCarousel.find(".js-carousel-bt"),jCarousel.find(".js-carousel-item"));if(jItems.filter(".active").find("video")&&(jItems.filter(".active").find("video").trigger("pause"),jItems.filter(".active").find(".js-video").removeClass("is-played")),jItems.filter(".active").removeClass("active"),jItems.eq(site.carouselActiveItem).addClass("active"),jItems.eq(site.carouselActiveItem).hasClass("is-une")&&!jItems.eq(site.carouselActiveItem).hasClass("loaded")?jItems.eq(site.carouselActiveItem).addClass("loaded"):jItems.eq(site.carouselActiveItem).hasClass("is-une")&&jItems.eq(site.carouselActiveItem).hasClass("loaded")&&(jItems.eq(site.carouselActiveItem).removeClass("loaded"),setTimeout(function(){jItems.eq(site.carouselActiveItem).addClass("loaded")},500)),(jItems.eq(site.carouselActiveItem).hasClass("is-video_full")||jItems.eq(site.carouselActiveItem).hasClass("is-video_box"))&&(jItems.eq(site.carouselActiveItem).find("video").prop("muted",!1),jItems.eq(site.carouselActiveItem).find("video").trigger("play"),jItems.eq(site.carouselActiveItem).find(".js-video").removeClass("is-muted").addClass("is-played"),!jItems.eq(site.carouselActiveItem).find(".js-video").hasClass("is-visited"))){jItems.eq(site.carouselActiveItem).find("video")[0].currentTime=0,jItems.eq(site.carouselActiveItem).find(".js-video").addClass("is-visited")}site.withAnimation||jCarouselContent.removeClass("with-animation"),jCarouselContent.css("margin-left",-jItems.filter(":first").outerWidth(!0)*(site.carouselActiveItem-1)),site.checkBtnCarousel();var nameEd=$("body").attr("data-title-ed");if(jItems.eq(site.carouselActiveItem).hasClass("is-une"))sendTag("une",nameEd,s19);else if(!jItems.eq(site.carouselActiveItem).hasClass("is-partage")&&!jItems.eq(site.carouselActiveItem).hasClass("is-sondage")){var typeCard=jItems.eq(site.carouselActiveItem).attr("data-type");"interactif_link"==typeCard?typeCard="interactif":"survey"==typeCard?typeCard="sondage":"question_du_jour"==typeCard&&(typeCard="qdj");var type="carte_"+typeCard;sendTag(type,nameEd,s19,site.carouselActiveItem-1)}},site.checkBtnCarousel=function(){var jBtns=$(".js-carousel-bt");return site.carouselActiveItem<=1?void jBtns.filter(".previous").prop("disabled",!0):site.carouselActiveItem>=$(".js-carousel-item").length-2?void jBtns.filter(".next").prop("disabled",!0):void jBtns.prop("disabled",!1)},site.itemCarousel=function(){$(".js-carousel").on("click",".js-carousel-item",function(e){var jItem=$(this);jItem.hasClass("active")||jItem.hasClass("js-carousel-item-ghost")||(e.preventDefault(),site.goToCarouselItem(jItem.index()))})},site.carouselTarget=function(){$("body").on("click",".js-carousel-target",function(e){site.goToCarouselItem(parseInt($(this).data("target")))})},site.previousCarouselItem=function(){site.goToCarouselItem(site.carouselActiveItem-1)},site.nextCarouselItem=function(){site.goToCarouselItem(site.carouselActiveItem+1)},site.btCarousel=function(){$(".js-carousel").on("click",".js-carousel-bt",function(e){e.preventDefault(),$(this).hasClass("previous")?site.previousCarouselItem():site.nextCarouselItem()})},site.readHash=function(){var nPageId=window.location.hash?window.location.hash.substring(1):0;switch(nPageId){case"sommaire":site.goToSection(2);break;case 0:site.goToCarouselItem(1);break;default:site.goToCarouselItem(parseInt(nPageId))}},site.detectPopState=function(){window.onpopstate=function(event){site.withHistory=!1,site.readHash(!0),site.withHistory=!0}},site.pushHistory=function(){site.withHistory&&(url=window.location.pathname,null!==site.provenance&&(url=addQueryStringToUrl(url,"prov="+site.provenance)),site.carouselActiveItem>1?history.pushState("",document.title,url+"#"+site.carouselActiveItem):history.pushState("",document.title,url))},site.socialShare=function(type){var sShareUrl="",nWindowTop=screen.height/2-218,nWindowLeft=screen.width/2-320;switch(type){case"facebook":sShareUrl="http://www.facebook.com/sharer.php?u="+encodeURIComponent($("meta[property='og\\:url']").prop("content"))+"&t="+encodeURIComponent($("meta[property='og\\:title']").prop("content"));break;case"twitter":sShareUrl="https://twitter.com/intent/tweet?text="+encodeURIComponent($("meta[name='twitter\\:description']").prop("content"))+"&url="+encodeURIComponent($("meta[name='twitter\\:url']").prop("content"))+"&via="+encodeURIComponent("lequipe")}window.open(sShareUrl,"sharer","toolbar=0,status=0,width=640,height=436,top="+nWindowTop+",left="+nWindowLeft)},site.btSocialShare=function(){$("body").on("click",".js-social-share",function(e){e.preventDefault(),site.socialShare($(this).data("type"))})},site.checkCarouselAfterResize=function(){$(window).on("resize",function(){site.withAnimation=!1,site.changeCarouselItem(),site.withAnimation=!0})},site.updatePageTag=function(){document.getElementsByTagName("head")[0];switch(script=document.createElement("script"),jActiveSection=$("#section_"+site.activeSection),jTargetItem=!1,site.activeSection){case 0:case 2:jTargetItem=jActiveSection;break;case 1:jTargetItem=$("#page_"+site.carouselActiveItem)}jTargetItem&&(s28=jTargetItem.data("s28"),carteId=jTargetItem.data("card-id"),carteType=jTargetItem.data("type"),at_typePage=carteType,at_typePage=at_typePage?"carte_"+carteType+"::"+carteId:"menu",atchapter3=slugEdition,s28="edition_abonne",p1=jTargetItem.data("p1"),weboCat=jTargetItem.data("atname"),"sommaire"!=carteType&&"article"!=carteType&&"partage"!=carteType&&"media"!=carteType||!(window.location.href.indexOf("lequipe.fr")>0||window.location.href.indexOf("lequipe.local")>0)||(notag=!1,refreshPub("byclick")))},site.keepProvForArticle=function(){null!==site.provenance&&$(".js-cardContent[href]").each(function(){var new_url=addQueryStringToUrl($(this).attr("href").trim(),"prov="+site.provenance);$(this).attr("href",new_url)})},site.getProvenance=function(){var queryString=convertQueryStringToJson();void 0!==queryString.prov&&(site.provenance=queryString.prov)},site.init=function(){site.carouselTarget(),site.btCarousel(),site.itemCarousel(),site.detectPopState(),site.btSocialShare(),site.readHash(),site.checkBtnCarousel(),site.checkCarouselAfterResize(),site.getProvenance(),site.keepProvForArticle(),site.withAnimation=!0,site.withHistory=!0;var id_numerique=jQuery("#page_0").attr("data-edition-id");sessionStorage.setItem("id_numerique",id_numerique),"offert"==$(".page.is-une").attr("data-edition-type")&&(getCookie("lequipe-connected-infos")||setTimeout(function(){loginPopinSpecial("numerique")},3e3))},site.init()}else{if(document.location.href.indexOf("edition-speciale")<=0&&document.location.href.indexOf("previsu")<=0)return!1;site.activeSection=999999,site.carouselActiveItem=1,site.withAnimation=!1,site.withHistory=!1,site.provenance=null,site.goToSection=function(pId,noFade){return pId!=site.activeSection&&(site.activeSection=pId,site.pushHistory(),site.changeSection(),site.changeBackground(pId),pId&&site.updatePageTag(),!0)},site.changeSection=function(){var jSection=$("#section_"+site.activeSection),jBtSectionUne=$(".js-bt-section-une");0==site.activeSection?jBtSectionUne.hide():jBtSectionUne.show(),site.withAnimation?($(".js-section:visible").fadeOut(500),jSection.fadeIn(500)):($(".js-section:visible").hide(),jSection.show())},site.btSection=function(){$("body").on("click",".js-bt-section",function(e){e.preventDefault(),site.goToSection(parseInt($(this).data("section")))})},site.goToCarouselItem=function(pId){if(pId==site.carouselActiveItem)return site.goToSection(1),void site.changeBackground(pId);site.carouselActiveItem=pId,site.goToSection(1)?site.withAnimation=!1:(site.pushHistory(),site.updatePageTag()),site.changeBackground(pId),site.changeCarouselItem(),site.withAnimation=!0},site.changeBackground=function(pId){if(pId){var jContainer=$(".js-page-back");$("#page_"+pId).hasClass("is-article")||$("#page_"+pId).hasClass("is-media")?jContainer.css("background-image",$("#page_"+pId+" .picture").css("background-image")):jContainer.css("background-image","url(/img/subscriberEdition/background-sample.png)")}},site.changeCarouselItem=function(){var jCarousel=$(".js-carousel"),jCarouselContent=jCarousel.find(".js-carousel-content").addClass("with-animation"),jItems=(jCarousel.find(".js-carousel-bt"),jCarousel.find(".js-carousel-item"));jItems.filter(".active").removeClass("active"),jItems.eq(site.carouselActiveItem).addClass("active"),site.withAnimation||jCarouselContent.removeClass("with-animation"),jCarouselContent.css("margin-left",-jItems.filter(":first").outerWidth(!0)*(site.carouselActiveItem-1)),site.checkBtnCarousel()},site.checkBtnCarousel=function(){var jBtns=$(".js-carousel-bt");return site.carouselActiveItem<=1?void jBtns.filter(".previous").prop("disabled",!0):site.carouselActiveItem>=$(".js-carousel-item").length-2?void jBtns.filter(".next").prop("disabled",!0):void jBtns.prop("disabled",!1)},site.itemCarousel=function(){$(".js-carousel").on("click",".js-carousel-item",function(e){var jItem=$(this);jItem.hasClass("active")||jItem.hasClass("js-carousel-item-ghost")||(e.preventDefault(),site.goToCarouselItem(jItem.index()))})},site.carouselTarget=function(){$("body").on("click",".js-carousel-target",function(e){site.goToCarouselItem(parseInt($(this).data("target")))})},site.previousCarouselItem=function(){site.goToCarouselItem(site.carouselActiveItem-1)},site.nextCarouselItem=function(){site.goToCarouselItem(site.carouselActiveItem+1)},site.btCarousel=function(){$(".js-carousel").on("click",".js-carousel-bt",function(e){e.preventDefault(),$(this).hasClass("previous")?site.previousCarouselItem():site.nextCarouselItem()})},site.readHash=function(){var nPageId=window.location.hash?window.location.hash.substring(1):0;switch(nPageId){case"sommaire":site.goToSection(2);break;case 0:site.goToSection(0);break;default:site.goToCarouselItem(parseInt(nPageId))}},site.detectPopState=function(){window.onpopstate=function(event){site.withHistory=!1,site.readHash(!0),site.withHistory=!0}},site.pushHistory=function(){if(site.withHistory)switch(url=window.location.pathname,null!==site.provenance&&(url=addQueryStringToUrl(url,"prov="+site.provenance)),site.activeSection){case 0:history.pushState("",document.title,url);break;case 1:history.pushState("",document.title,url+"#"+site.carouselActiveItem);break;case 2:history.pushState("",document.title,url+"#sommaire")}},site.socialShare=function(type){var sShareUrl="",nWindowTop=screen.height/2-218,nWindowLeft=screen.width/2-320;switch(type){case"facebook":sShareUrl="http://www.facebook.com/sharer.php?u="+encodeURIComponent($("meta[property='og\\:url']").prop("content"))+"&t="+encodeURIComponent($("meta[property='og\\:title']").prop("content"));break;case"twitter":sShareUrl="https://twitter.com/intent/tweet?text="+encodeURIComponent($("meta[name='twitter\\:description']").prop("content"))+"&url="+encodeURIComponent($("meta[name='twitter\\:url']").prop("content"))+"&via="+encodeURIComponent("lequipe")}window.open(sShareUrl,"sharer","toolbar=0,status=0,width=640,height=436,top="+nWindowTop+",left="+nWindowLeft)},site.btSocialShare=function(){$("body").on("click",".js-social-share",function(e){e.preventDefault(),site.socialShare($(this).data("type"))})},site.checkCarouselAfterResize=function(){$(window).on("resize",function(){site.withAnimation=!1,site.changeCarouselItem(),site.withAnimation=!0})},site.updatePageTag=function(){document.getElementsByTagName("head")[0];switch(script=document.createElement("script"),jActiveSection=$("#section_"+site.activeSection),jTargetItem=!1,site.activeSection){case 0:case 2:jTargetItem=jActiveSection;break;case 1:jTargetItem=$("#page_"+site.carouselActiveItem)}jTargetItem&&(s28=jTargetItem.data("s28"),carteId=jTargetItem.data("card-id"),carteType=jTargetItem.data("type"),at_typePage=carteType,at_typePage=at_typePage?"carte_"+carteType+"::"+carteId:"menu",atchapter3=slugEdition,s28="edition_abonne",p1=jTargetItem.data("p1"),weboCat=jTargetItem.data("atname"),"sommaire"!=carteType&&"article"!=carteType&&"partage"!=carteType&&"media"!=carteType||!(window.location.href.indexOf("lequipe.fr")>0||window.location.href.indexOf("lequipe.local")>0)||(notag=!1,refreshPub("byclick")))},site.keepProvForArticle=function(){null!==site.provenance&&$(".js-cardContent[href]").each(function(){var new_url=addQueryStringToUrl($(this).attr("href").trim(),"prov="+site.provenance);$(this).attr("href",new_url)})},site.getProvenance=function(){var queryString=convertQueryStringToJson();void 0!==queryString.prov&&(site.provenance=queryString.prov)},site.init=function(){site.btSection(),site.carouselTarget(),site.btCarousel(),site.itemCarousel(),site.detectPopState(),site.btSocialShare(),site.readHash(),site.checkBtnCarousel(),site.checkCarouselAfterResize(),site.getProvenance(),site.keepProvForArticle(),site.withAnimation=!0,site.withHistory=!0},site.init()}}),jQuery(".choice").click(function(){var choice=jQuery(this).attr("data-choice"),container=jQuery(this).parents(".editionAbonne__card__content__survey"),base=container.attr("data-type"),questionId=container.find(".question").attr("data-question-id");container.addClass("load");var request={};request.base=base,request.answers_ids=[choice],request.question_id=questionId,request.__type="poll_participation_request";var requestJson=JSON.stringify(request);$.ajax({method:"POST",url:"/elements/php/poll/createPollParticipation.php",data:requestJson,contentType:"application/json"}).done(function(response){var number=[],$i=1;$.each(response.poll.answers,function(key,value){container.find(".results").append('<div class="result"><div class="progress-bar"><span class="percent"></span><span class="count"></span></div><div class="text" >'+value.text+"</div></div>"),number[$i]=Math.round(value.percentage||0),$i++}),container.removeClass("load").addClass("show-results");var $i2=1;container.find(".count").each(function(){jQuery(this).text(number[$i2]+"%"),jQuery(this).parents(".progress-bar").find(".percent").css("width",jQuery(this).text()),jQuery(this).prop("Counter",0).animate({Counter:jQuery(this).text()},{duration:500,step:function(now){jQuery(this).text(Math.round(now)+"%")}}),$i2++})})}),jQuery(".play").click(function(){var container=jQuery(this).parents(".editionAbonne__card").find(".js-video"),player=container.find("video");container.hasClass("is-played")?player.trigger("pause"):player.trigger("play"),container.toggleClass("is-played")}),jQuery(".mute").click(function(){var container=jQuery(this).parents(".editionAbonne__card").find(".js-video"),player=container.find("video");container.hasClass("is-muted")?player.prop("muted",!1):player.prop("muted",!0),container.toggleClass("is-muted")});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};if(xtnv=document,xtsd="http://logc215",xtsite="492987",window.screen.availHeight<=780&&document.body.attributes.class.textContent.indexOf("page-responsive")>0&&(xtsite="539121"),"undefined"==typeof xt_multc&&(xt_multc=""),void 0===xtn2&&(xtn2=""),xtdi="",$("body").attr("an")?an=$("body").attr("an").replace("undefined",""):an="",$("body").attr("an")?ac=$("body").attr("ac").replace("undefined",""):ac="",xt_an=an,xt_ac=ac,_userInfos=$.parseJSON(decodeURIComponent(readCookie("lequipe-connected-infos"))),"object"==("undefined"==typeof _userInfos?"undefined":_typeof(_userInfos))&&null!=_userInfos&&(xt_an=_userInfos.id,xt_ac=2*(_userInfos.gender&&_userInfos.gender.length>=2?1:0)+(_userInfos.quotiAbonne&&1==_userInfos.quotiAbonne?1:2),an=xt_an,ac=xt_ac),void 0===sas_tmstp)var sas_tmstp="";var xtpage;if(void 0===xtpage||"::"==xtpage||"(none)"==xtpage)var xtpage="no-xtpage::"+window.location.href.replace("http://www.lequipe.fr","");var svt_page=xtpage;if(xtpage.indexOf("home")>=0){var ss=document.location.href.split("/");"undefined"==typeof sas_target&&(sas_target="@"),ss.length>=3&&(sas_target=sas_target+";"+ss[ss.length-2].replace("-","_").toUpperCase()+";",sas_target=sas_target+ss[ss.length-3].replace("-","_").toUpperCase()+";",sas_target=sas_target.replace("@;",""))}var at_url=document.location.href.toLowerCase(),at_repUrl=at_url.toLowerCase().split("/")[3];if(void 0===pageTypeIndicators)var pageTypeIndicators="";if(void 0===at_typePage)var at_typePage="";if(void 0===atname)var atname="";if(void 0===atchapter0)var atchapter0="";if(void 0===atchapter1)var atchapter1="";if(void 0===atchapter2)var atchapter2="";if(void 0===atchapter3)var atchapter3="";var keyword="",resultPageNumber="";if(void 0===s13)var s13="";if(void 0===s14)var s14="";if(void 0===s16)var s16="";if(void 0===s17)var s17="";if(void 0===s18)var s18="";if(void 0===s19)var s19="";if(void 0===s20)var s20="";if(void 0===s21)var s21="";if(void 0===s22)var s22="";if(void 0===s23)var s23="";if(void 0===s26)var s26="";if(void 0===s27)var s27="";if(void 0===s28)var s28="";if(void 0===s29)var s29="";if(void 0===s30)var s30="";if(void 0===s31)var s31="";if(void 0===at_typePage)var at_typePage="";if(void 0===special)var special="";if(void 0===patrim)var patrim="";if(void 0===at_visitor)var at_visitor="";if(void 0===_recherche)var _recherche="";if(void 0===at_visitor_cat)var at_visitor_cat="";if(void 0!==xtn2)var xtn2=xtn2;else xtn2="";s13=-1!=document.location.href.indexOf("abonnes.lequipe")?"abonnee":"nonabonnee";var s24=window.location.protocol.replace(/:/g,"");if(s23="undefined"==typeof DFPFULL?"0":"1","object"==("undefined"==typeof _userInfos?"undefined":_typeof(_userInfos))&&null!=_userInfos?(s22="1",at_visitor=_userInfos.id,at_visitor_cat="M"==_userInfos.gender?1==_userInfos.quotiAbonne?1:2:"Mme"==_userInfos.gender?1==_userInfos.quotiAbonne?3:4:1==_userInfos.quotiAbonne?5:6):s22="2",void 0!==xtpage&&"home"==at_typePage&&(s28="home",void 0!==xtpage&&-1==xtpage.indexOf("no-xtpage")?(AtTableau=xtpage.toLowerCase().split("::"),3==AtTableau.length?(atchapter1=AtTableau[1],atchapter2="","wtf"!=atchapter1&&"medias"!=atchapter1||(atchapter1=""),atname="home_"+AtTableau[0],-1!=at_url.indexOf("ski-glace")&&(atchapter1="")):2==AtTableau.length?(atname="home_"+AtTableau[0],atchapter1=""):atname="home_"+AtTableau[0],"tous_sports"==(s18=AtTableau[0].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_"))&&(s18=AtTableau[1])):(AtTableau=at_url.toLowerCase().split("/"),7==AtTableau.length||8==AtTableau.length?(""!==atchapter1&&atchapter1==AtTableau[5]||(atchapter1=AtTableau[5]),atname="home_"+AtTableau[3]):6==AtTableau.length?(atname="home_"+AtTableau[3],atchapter1=AtTableau[4],-1!=at_url.indexOf("ski-glace")&&(atchapter1="")):5==AtTableau.length?(atname="home_"+AtTableau[3],atchapter1=""):(atname="home_general",atchapter1=""),-1!=at_url.indexOf("ski-glace")&&(atname="home_ski-glace"),s18=at_url.toLowerCase().split("/").slice(3)[0].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_")),s17=atchapter1=atchapter1.toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_").replace("_2016","").replace("_football","").replace("_rugby",""),atname=atname.toLowerCase().replace(/\-/g,"_").replace("aussi","tous_sports").replace("aussi","tous_sports").replace("tssports","tous_sports").replace("formule_1","formule1"),(-1!=at_url.indexOf("ski")||$("body").attr("sport")&&"ski"==$("body").attr("sport").toLowerCase())&&(atname=atname.replace("tous-sports","ski_glace").replace("tous_sports","ski_glace")),-1!=at_url.indexOf("wtf/")&&(xtn2="31",atname="home_wtf",s18="wtf"),-1!=at_url.indexOf("explore/")&&(xtn2="35",atname="home_explore"),-1==at_url.indexOf("snowboard")&&-1==at_url.indexOf("curling")&&-1==at_url.indexOf("short-track")&&-1==at_url.indexOf("patinage-de-vitesse")&&-1==at_url.indexOf("patinage-artistique")&&-1==at_url.indexOf("biathlon")&&-1==at_url.indexOf("combine-nordique")&&-1==at_url.indexOf("bobsleigh")&&-1==at_url.indexOf("luge")&&-1==at_url.indexOf("hockey-sur-glace")&&-1==at_url.indexOf("skeleton")&&-1==at_url.indexOf("saut-a-skis")||(atname="home_ski_glace"),-1!=at_url.indexOf("voile")&&(xtn2="16"),"home_football"==atname&&"france"==atchapter1&&(atchapter1="equipe_de_france"),"home_rugby"==atname&&"france_fra"==atchapter1&&(atchapter1="XV_de_france"),"home_tous_sports"==atname&&""!==atchapter1&&(atname="home_"+atchapter1),"home_ski_glace"==atname&&""!==atchapter1&&(atname="home_"+atchapter1,xtn2="19",s18="ski_glace"),-1!=at_url.indexOf("cyclisme-sur-route/")&&"cyclisme_sur_route"==atchapter1&&(xtn2="14",atchapter1=at_url.split("/").slice(-2)[0].replace(/\-/g,"_").replace(/\ /g,"_")),""===atchapter1&&$(".h1auto h1").length>0&&(s17=atchapter1=$(".h1auto h1").text().toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_")),$("body").attr("sport")?atsport=$("body").attr("sport").toLowerCase():atsport="Aussi",-1==at_url.indexOf("ski")&&"ski"!=atsport||-1!=at_url.indexOf("adrenaline")||(xtn2=19,s18=s17,s17="divers"),-1==at_url.indexOf("golf")&&"golf"!=atsport||(xtn2=13),-1==at_url.indexOf("cyclisme")&&"cyclisme"!=atsport||(xtn2=14),-1==at_url.indexOf("rugby")&&"rugby"!=atsport||(xtn2=8),-1==at_url.indexOf("natation")&&"natation"!=atsport||(xtn2=15),-1!=at_url.indexOf("/resultats/")&&(atname="resultats_general",atchapter1="divers"),-1!=at_url.indexOf("handball")&&(xtn2=12),-1!=at_url.indexOf("/medias")&&(xtn2="23",atname="home_medias",s17="divers",s18="medias",atchapter1="general"),-1!=at_url.indexOf("/facebook")&&(xtn2="23",atname="home_facebook",s17="divers",s18="facebook",atchapter1="general"),-1!=at_url.indexOf("/twitter")&&(xtn2="23",atname="home_twitter",s17="divers",s18="twitter",atchapter1="general"),-1!=at_url.indexOf("/general")&&at_url.split("/").length>=5&&(atname="home_"+at_url.split("/").slice(4)[0].replace(/\-/g,"_"),s17="divers",s18=at_url.split("/").slice(4)[0],atchapter1="general"),-1==at_url.indexOf("/videos360")&&-1==at_url.indexOf("/experience-sport-360")||(xtn2="43",atname="home_video360",s17="divers",s18="video360",atchapter1=""),-1!=at_url.indexOf("/sport-et-style")&&(xtn2="45",atname="home_sport_et_style"),-1!=at_url.indexOf("/velo-mag")&&(xtn2="46",atname="home_velo_mag"),""!==s17&&s17.replace(/\-/g,"_")!=s18.replace(/\-/g,"_")||(s17="divers"),("undefined"!=typeof isAdrenalinePage&&isAdrenalinePage||-1!=at_url.indexOf("/adrenaline/"))&&(atname="home_adrenaline",xtn2=41,s18=atchapter1=at_url.split("/").slice(-2)[0],"adrenaline"==atchapter1&&(atchapter1="",s18="general"),at_url.split("/").length>5&&(s18=at_url.split("/").slice(4)[0],s17="divers")),at_url.replace(/-|_/g,"").indexOf("/jeuxvideo/")>-1&&(xtn2="40",atname="home_esport",s18="esport",atchapter1=""),"home"==(s18=s18.replace("formule_1","formule1"))&&(s18="tous_sports")),void 0!==xtpage&&"patrimonial"==at_typePage){lxitiP=1;var pageTypeIndicators="patrimonial",patrim=1;if(s14=$(".div-provenance").length>0&&"issu du magazine"==$(".div-provenance").text()?"[Equipe_Mag]":$(".div-provenance").length>0&&"issu du journal"==$(".div-provenance").text()?"[Quotidien_Payant]":"articlejournal"==$("article.article").attr("data-content-type")?"[Quotidien_Payant]":"[Web_Payant]",s16=$(".div-journaliste").length>0&&void 0!==$(".div-journaliste").data("auteur")?"["+$(".div-journaliste").data("auteur")+"]":$(".div-journaliste span").length>0?"["+$(".div-journaliste span").html()+"]":"[Redaction]",$("article .article__surtitre span:first-child").length>0&&(s18="["+$("article .article__surtitre span:first-child").text()+"]"),$("article").attr("data-date").length>0&&(s19="article"==$("article").attr("data-content-type")?"["+$("article").attr("data-date").replace(/\//g,"").substring(4)+$("article").attr("data-date").replace(/\//g,"").substring(2,4)+$("article").attr("data-date").replace(/\//g,"").substring(0,2)+"]":"["+$("article").attr("data-date").replace(/\-/g,"").substring(0,4)+$("article").attr("data-date").replace(/\-/g,"").substring(4,6)+$("article").attr("data-date").replace(/\-/g,"").substring(6,8)+"]"),"undefined"!=typeof mots_cles?s29="["+mots_cles.toLowerCase().replace(/\ /g,"_").replace(" ","").replace("é","e").replace("ê","e").replace("ë","e").replace("ï","i").replace("à","a").replace("è","e").replace("ö","o").replace("ô","o").replace("ñ","n").replace("&","et")+"]":mots_cles=s29="","object"==("undefined"==typeof _userInfos?"undefined":_typeof(_userInfos))&&null!=_userInfos&&(s20=1!=_userInfos.quotiAbonne?"10":"100"),void 0!==xtpage){void 0!==$("article.article").data("xtpage")?AtTableau=$("article.article").data("xtpage").split("::"):AtTableau=xtpage.toLowerCase().split("::"),"no-xtpage"==AtTableau[0]?(atname=AtTableau[1].split("/").slice(-2)[0]+"_"+AtTableau[1].split("/").slice(-1)[0].substring(0,6),s30=AtTableau.slice(-1)[0],atchapter1=AtTableau[1].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_"),at_typePage=AtTableau[1].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_").replace("patrimonial","premium"),s18=AtTableau[0].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_")):(atname=AtTableau.slice(-2)[0]+"_"+AtTableau.slice(-1)[0],s30=AtTableau.slice(-1)[0],atchapter1=AtTableau[1].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_"),at_typePage="article"==$("article").attr("data-content-type")?AtTableau[1].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_").replace("patrimonial","premium").replace("breve","premium").replace("premiumfree","premium_free"):at_url.indexOf("abonnes.lequipe.fr")>-1?"premium_full":"premium_preview",s18=AtTableau[0].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_"));var s28="news_premium";atchapter2="news",s17=atchapter1="string"==typeof xtcompetition&&null!=xtcompetition&&"news"!=xtcompetition.split("::")[1]?xtcompetition.split("::")[1].replace(/\-/g,"_").replace(/\ /g,"_").replace("cyclisme_sur_route","cyclisme").replace("formule_1","formule1").replace(/\'/g,"_").replace(" ","").replace("é","e").replace("ê","e").replace("ë","e").replace("ï","i").replace("à","a").replace("è","e").replace("ö","o").replace("ô","o").replace("ñ","n").replace("toussports","tous_sports").replace("tssports","tous_sports"):"divers",atchapter2=atchapter2.replace(/\-/g,"_").replace(/\ /g,"_"),atname=atname.replace(/\-/g,"_").replace(/\ /g,"_"),"tous_sports"==atchapter1&&(s17=atchapter1="divers")}else console.log("no::::::xtttttt");"undefined"!=typeof edition_RIO&&"1"==edition_RIO&&(xtn2="44",atchapter1="toussports"==s18?s17:s18,atchapter3+="_la_nuit_a_rio"),s17==s18&&(s17="divers"),s18=s18.replace("cyclisme_sur_route","cyclisme").replace("formule_1","formule1"),$("body").hasClass("js-page-article-adrenaline")&&(xtn2=41)}if(void 0!==xtpage&&"news"==at_typePage&&1!=patrim){var pageTypeIndicators="articles";if($("body").hasClass("page-article")&&(s14="[web_Gratuit]",s16=$(".article__paragraphe__auteur").length>0&&void 0!==$(".article__paragraphe__auteur").data("auteur")?"["+$(".article__paragraphe__auteur").data("auteur").trim().toLowerCase()+"]":$(".article__paragraphe__auteur span").length>0?"["+$(".article__paragraphe__auteur span").html().trim().toLowerCase()+"]":"[Redaction]",$("body").attr("sport").length>0&&(s18="["+$("body").attr("sport").toLowerCase().replace(/\-/g,"_").replace(" sur route","")+"]"),"undefined"!=typeof articleDate&&(s19="["+articleDate.substring(0,10).replace(/\-/g,"")+"]"),
"undefined"!=typeof mots_cles?s29="["+mots_cles.toLowerCase().replace(/\ /g,"_").replace(" ","").replace("é","e").replace("ê","e").replace("ë","e").replace("ï","i").replace("à","a").replace("è","e").replace("ö","o").replace("ô","o").replace("ñ","n").replace("&","et")+"]":mots_cles="",videoInterne=0,videoExterne=0,$(".article__main iframe").each(function(){$(this).attr("src")&&(iframeSrc=$(this).attr("src"),iframeSrc.indexOf("dailymotion")>0?videoInterne=1:iframeSrc.indexOf("youtube")>0&&(videoExterne=1))}),s27=1==videoInterne?1==videoExterne?3:1:1==videoExterne?2:0,nbPhotos=0,$(".article__main img").each(function(){$(this).attr("src")&&(imgSrc=$(this).attr("src"),imgSrc.indexOf("medias.lequipe.fr")>0&&(nbPhotos+=1))}),s26=nbPhotos),void 0!==xtpage?(AtTableau=xtpage.toLowerCase().split("::"),atname=AtTableau.slice(-2)[0]+"_"+AtTableau.slice(-1)[0],"breve"==AtTableau.slice(-2)[0]&&(atname=at_url.split("/").slice(-2)[0]+"_"+AtTableau.slice(-1)[0]),at_typePage="news",s30=AtTableau.slice(-1)[0].substr(-6),s18=atchapter0=AtTableau[0].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_").replace("toussports","tous_sports").replace("tssports","tous_sports"),-1==AtTableau[1].indexOf("transferts-")&&""===atchapter1&&"wim"==(atchapter1=AtTableau[1].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_").replace("cyclisme_sur_route","cyclisme").replace("formule_1","formule1").replace(/\'/g,"_").replace(" ","").replace("é","e").replace("ê","e").replace("ë","e").replace("ï","i").replace("à","a").replace("è","e").replace("ö","o").replace("ô","o").replace("ñ","n").replace("toussports","tous_sports").replace("tssports","tous_sports").replace("d1","ligue_1").replace("d2","ligue_2"))&&(atchapter1+="bledon"),void 0!==AtTableau[2]&&(atchapter2=AtTableau[2].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_").replace("cyclisme_sur_route","cyclisme").replace("formule_1","formule1").replace(/\'/g,"_").replace(" ","").replace("é","e").replace("ê","e").replace("ë","e").replace("ï","i").replace("à","a").replace("è","e").replace("ö","o").replace("ô","o").replace("ñ","n").replace("toussports","tous_sports").replace("tssports","tous_sports").replace("breve","")),"skiglace"==atchapter0&&(s18=at_repUrl,atchapter2=atchapter1.toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_").replace("cyclisme_sur_route","cyclisme").replace("formule_1","formule1").replace(/\'/g,"_").replace(" ","").replace("é","e").replace("ê","e").replace("ë","e").replace("ï","i").replace("à","a").replace("è","e").replace("ö","o").replace("ô","o").replace("ñ","n").replace("toussports","tous_sports").replace("tssports","tous_sports"),atchapter1=$("body").attr("sport").replace(/\-/g,"_").replace(/\ /g,"_").replace("skiglace","ski_glace").toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_").replace("cyclisme_sur_route","cyclisme").replace("formule_1","formule1").replace(/\'/g,"_").replace(" ","").replace("é","e").replace("ê","e").replace("ë","e").replace("ï","i").replace("à","a").replace("è","e").replace("ö","o").replace("ô","o").replace("ñ","n").replace("toussports","tous_sports").replace("tssports","tous_sports")),atchapter1!=atchapter0&&"news"!=atchapter1||(atchapter1="divers"),$("body").hasClass("Aussi")&&(s18=atchapter1=AtTableau[1],s17="divers"),"wtf"==AtTableau[1]&&(atchapter1=atchapter0,s18="wtf",s17=atchapter1,"wtf"==s17&&(s17="divers"),xtn2=31,special=1,atchapter2=""),"jeux-video"!=AtTableau[1]&&"jeuxvideos"!=AtTableau[1]||(atchapter1=atchapter0,s18=atchapter0,s17=atchapter2,xtn2=40,special=1),"medias"==AtTableau[1]&&(atchapter1=atchapter2,void 0!==atchapter2&&""===atchapter2&&(atchapter1=atchapter2),s18=atchapter0,xtn2=""),-1!=at_url.indexOf("volley-ball/")&&("volley_ball"!=atchapter1&&(s17=atchapter2=AtTableau[1]),s18=atchapter1="volley_ball"),$("body").hasClass("Ski-Glace")&&(atchapter1=atchapter2,atchapter2="")):(AtTableau=window.location.href.replace("http://www.lequipe.fr/","").replace("http://orig-www.lequipe.fr/","").replace("http://abonnes.lequipe.fr/","").split("/"),void 0!==atchapter1&&""!==atchapter1||(atchapter1="divers"),at_typePage="news",atname=AtTableau.slice(-2)[0]+"_"+AtTableau.slice(-1)[0],s30=AtTableau.slice(-1)[0].substr(-6)),atname=atname.replace(/\-/g,"_").replace(/\ /g,"_").replace("news_",""),$("body").hasClass("Wtf")&&(xtn2=31),window.location.href.toLowerCase().indexOf("football")&&"france"==atchapter1&&(atchapter1="equipe_de_france"),window.location.href.toLowerCase().indexOf("rugby")&&"fra-france"==atchapter2&&(atchapter2="XV_de_france"),(""===s17||"divers"!=atchapter1&&"volley_ball"!=atchapter1&&"adrenaline"!=atchapter1&&1!=special)&&(s17=atchapter1),"volley_ball"==atchapter1.replace(/\-/g,"_")&&("volley_ball"==atchapter2.replace(/\-/g,"_")?(atchapter1="divers",atchapter2=""):(atchapter1=atchapter2,atchapter2="")),s17.replace(/\-/g,"_").replace("formule_1","formule1")==s18.replace(/\-/g,"_")&&(s17="divers"),"medias"==s18&&(s18=s17,s17="divers"),at_typePage=at_typePage.toLowerCase().replace(/\-/g,"_"),atchapter1=atchapter1.toLowerCase().replace(/\-/g,"_"),atchapter2=atchapter2.toLowerCase().replace(/\-/g,"_"),"divers"!=atchapter2&&"news"!=atchapter2&&"divers"!=atchapter2&&atchapter2!=atname.replace("news_","")&&atchapter1!=atchapter2||(atchapter2=""),"divers"!=atchapter1&&"news"!=atchapter1||(atchapter2=""),"medias"==atchapter1&&(atchapter1=atchapter2,atchapter2=""),"wtf"==atchapter1&&(atchapter1="divers"),1!=special)if($("body").attr("sport")?atsport=$("body").attr("sport").toLowerCase():atsport="Aussi",-1==at_url.indexOf("/ski")&&"ski"!=atsport||(xtn2=19),-1==at_url.indexOf("/golf")&&"golf"!=atsport||(xtn2=13),-1==at_url.indexOf("/cyclisme")&&"cyclisme"!=atsport||(xtn2=14),-1==at_url.indexOf("/rugby")&&"rugby"!=atsport||(xtn2=8),-1==at_url.indexOf("/natation")&&"natation"!=atsport||(xtn2=15),-1!=at_url.indexOf("/handball")&&(xtn2=12),void 0!==$(".article__surtitre .skew--darkgrey")&&$(".article__surtitre .skew--darkgrey").length>0&&$(".article__surtitre .skew--darkgrey").text().trim().toLowerCase().indexOf("jo ")>-1&&"divers"==s17){var sportCompet=cleaningVar($(".article__surtitre .skew--darkgrey").text().trim());s17=sportCompet}else if(void 0!==$(".article__surtitre .skew--first")&&$(".article__surtitre .skew--first").length>0&&$(".article__surtitre .skew--first").text().trim().toLowerCase().indexOf("jo ")>-1&&"divers"==s17){var sportCompet=cleaningVar($(".article__surtitre .skew--first").text().trim());s17=sportCompet}at_url.indexOf("/adrenaline/")>-1&&(xtn2=41,""!==s17?atchapter2=s17:s17=atchapter2=void 0!==$(".article__surtitre .skew--first")&&$(".article__surtitre .skew--first").length>0?cleaningVar($(".article__surtitre .skew--first").text().trim()):"divers",s18=atchapter1=at_url.split("/").slice(4)[0],atchapter3="news",s17!=s18&&"adrenaline"!=atchapter2||(s17=atchapter2="divers")),at_url.indexOf("/sport-et-style")>-1&&(xtn2=45,s17=atchapter1=""!==at_url.split("/").slice(4)[0]&&at_url.split("/").length>=5?at_url.split("/").slice(4)[0]:"divers",s18="sport_et_style","home_sport_et_style"==atname&&(""===at_url.split("/").slice(4)[0]||at_url.split("/").length<5)&&(atchapter1="")),at_url.indexOf("/velo-mag")>-1&&(xtn2=46,s17=atchapter1=""!==at_url.split("/").slice(4)[0]&&at_url.split("/").length>=5?at_url.split("/").slice(4)[0]:"divers",s18="velo-mag",atchapter2="","home_velo_mag"==atname&&(""===at_url.split("/").slice(4)[0]||at_url.split("/").length<5)&&(atchapter1="")),$("article").find(".js-matchRatings-templating").length&&(atname=AtTableau.slice(-2)[0]+"_choix_notes_"+AtTableau.slice(-1)[0]),-1!==at_url.indexOf("/notes-internautes/")&&(atname=-1!==at_url.indexOf("&share")?AtTableau.slice(-2)[0]+"_partage_notes_"+AtTableau.slice(-1)[0]:AtTableau.slice(-2)[0]+"_recap_notes_"+AtTableau.slice(-1)[0]),($("body").hasClass("tag_VIDEOS360")||at_url.indexOf("video-360")>-1)&&(xtn2=43,atchapter1=s18,s17="divers"),s28="news",s17.indexOf(s18)>-1&&(s17=atchapter1="divers")}if(void 0!==xtpage&&"base"==at_typePage&&(""===atchapter1&&(atchapter1=void 0!==xtpage&&3==xtpage.split("::").length?xtpage.toLowerCase().split("::")[1].replace(/\ /g,"_").replace(/\-/g,"_"):"universel"!=at_repUrl?at_repUrl:"divers"),("classements"==at_repUrlUri||"classement"==at_repUrlUri||-1!=at_url.indexOf("_cla_")||-1!=at_url.indexOf("dakar")&&-1!=at_url.indexOf("classement"))&&(atname="classement",-1!=at_url.indexOf("_d")?atname+="_domicile":-1!=at_url.indexOf("_e.")?-1!=at_url.indexOf("nba")?atname+="_est":atname+="_exterieur":-1!=at_url.indexOf("_r.")?atname+="_relief":-1==at_url.indexOf("_f.")||-1==at_url.indexOf("football")&&-1==at_url.indexOf("rugby")?-1!=at_url.indexOf("_but")||-1!=at_url.indexOf("/but_")||-1!=at_url.indexOf("-buteurs.")?atname+="_buteurs":-1!=at_url.indexOf("_p.")?atname+="_passeurs":-1!=at_url.indexOf("-pilotes.")?atname+="_pilotes":-1!=at_url.indexOf("-ecuries.")?atname+="_ecuries":-1!=at_url.indexOf("_w.")?atname+="_ouest":-1!=at_url.indexOf("atp-")?atchapter1="atp":-1!=at_url.indexOf("dakar")?(-1!=at_url.indexOf("auto")&&(atname+="_auto"),-1!=at_url.indexOf("moto")&&(atname+="_moto"),-1!=at_url.indexOf("camion")&&(atname+="_camion"),-1!=at_url.indexOf("quad")&&(atname+="_quad")):-1!=at_url.indexOf("wta-")?atchapter1="wta":-1==at_url.indexOf("football")&&-1==at_url.indexOf("rugby")||(atname+="_general"):atname+="_fairplay"),("resultats"==at_repUrlUri||"championnats"==at_repUrlUri&&-1!=at_url.indexOf("natation")||-1!=at_url.indexOf("_res_"))&&(atname="resultat",-1!=at_url.indexOf("_general")&&(atname+="_general"),-1!=at_url.indexOf("_etape")&&(atname+="_etape"),at_url.indexOf("_montagne")||-1!=at_url.indexOf("_mont.html")?atname+="_montagne":-1!=at_url.indexOf("dakar")&&(-1!=at_url.indexOf("auto")&&(atname+="_auto"),-1!=at_url.indexOf("moto")&&(atname+="_moto"),-1!=at_url.indexOf("camion")&&(atname+="_camion"),-1!=at_url.indexOf("quad")&&(atname+="_quad")),-1!=at_url.indexOf("_jeune")&&(atname+="_jeune"),-1==at_url.indexOf("_points")&&-1==at_url.indexOf("_point.html")||(atname+="_points"),-1!=at_url.indexOf("_equipe")&&(atname+="_equipes"),-1!=at_url.indexOf("/circuits/")&&(atname+="_circuit")),"palmares"!=at_repUrlUri&&"records"!=at_repUrlUri||(atname="records",-1!=at_url.indexOf("/pal_")&&(atname="palmares")),"medailles"==at_repUrlUri&&(atname="medailles"),"programmes"==at_repUrlUri&&-1!=at_url.indexOf("/prog_")&&(atname="programme"),"fiches"==at_repUrlUri&&-1!=at_url.indexOf("circuits")&&(atname="circuit"),-1==at_url.indexOf("calendrier")&&-1==at_url.indexOf("cal_")||(atname="calendrier",-1!=at_url.indexOf("pga-tour")&&(atchapter1="pga_tour"),-1!=at_url.indexOf("tour-europeen")&&(atchapter1="tour_europeen"),-1!=at_url.indexOf("atp-")&&(atchapter1="atp"),-1!=at_url.indexOf("wta-")&&(atchapter1="wta")),-1!=at_url.indexOf("dakar")&&(atchapter1="dakar",-1!=at_url.indexOf("_part_")&&(-1!=at_url.indexOf("auto")&&(atname="participants_auto"),-1!=at_url.indexOf("moto")&&(atname="participants_moto"),-1!=at_url.indexOf("camion")&&(atname="participants_camion"),-1!=at_url.indexOf("quad")&&(atname="participants_quad"))),"tableaux"!=at_repUrlUri&&"tableau"!=at_repUrlUri||(atname="tableau",-1!=at_url.indexOf("/sh_")&&(atname+="_simple_hommes"),-1!=at_url.indexOf("/sd_")&&(atname+="_simple_dames"),-1!=at_url.indexOf("/dh_")&&(atname+="_double_hommes"),-1!=at_url.indexOf("/dd_")&&(atname+="_double_femmes")),"coupe-davis"==at_repUrlUri&&(atchapter1="coupe_davis",atname="tableau"),"tableau-bord"==at_repUrlUri&&(atname="tableau_bord"),-1!=at_url.indexOf("_fra_")&&(atname="francais"),-1==at_url.indexOf("stats")&&"stats"!=at_repUrlUri||(atname="statistiques",-1!=at_url.indexOf("francais")&&(atname+="_francais"),-1!=at_url.indexOf("mqr_")&&(atname+="_marqueurs")),-1!=at_url.indexOf("palmares")&&(atname="palmares"),-1!=at_url.indexOf("programme")&&(atname="programme"),-1==at_url.indexOf("fichejoueur")&&-1==at_url.indexOf("fichecoureur")&&-1==at_url.indexOf("ficheathlete")&&-1==at_url.indexOf("ficheentraineur")&&-1==at_url.indexOf("ficheequipe")&&-1==at_url.indexOf("fichepilote")&&-1==at_url.indexOf("ficheecurie")&&-1==at_url.indexOf("/tfj")&&-1==at_url.indexOf("ficheskieur")||(atname="fiches_joueurs",-1==at_url.indexOf("ficheequipe")&&-1==at_url.indexOf("ficheecurie")||(atname="fiches_equipe"),-1!=at_url.indexOf("ficheentraineur")&&(atname="fiches_entraineurs"),"golf"==atchapter1&&(atchapter1=atname),atname=cleaningVar($.trim($("h1").text()))),"transferts"==at_repUrlUri&&(atname="transferts"),-1!=at_url.indexOf("golf/tournoi-")&&(atname="resultat_tournoi"),-1!=at_url.indexOf("ficheclub")&&(atname="fiches_equipe",$("h1").length>0&&(atname=cleaningVar($("h1").html().trim()))),-1==at_url.indexOf("/eq_")&&-1==at_url.indexOf("ecuries_pilotes")&&-1==at_url.indexOf("equipes")||(atname="liste_equipes",-1!=at_url.indexOf("/eq_transfert")&&(atname="transferts"),-1!=at_url.indexOf("/formule1")&&(atname="ecuries_pilotes")),-1!=at_url.indexOf("/maps_")&&(atname="cartes"),-1!=at_url.indexOf("/hist")&&(atname="historique"),-1!=at_url.indexOf("/hist_nba")&&(atchapter1="nba",atname="historique"),-1!=at_url.indexOf("playoff")&&(atname="playoffs"),-1!=at_url.indexOf("recap-vainqueurs")&&(atname="tous_les_vainqueurs"),void 0!==atchapter1&&"aussi"!=atchapter1&&"base"!=atchapter1&&"jo"!=atchapter1||-1==at_url.indexOf("/aussi/")&&-1==at_url.indexOf("/universel/")||!$(".SousMenu h3 a").attr("href")||(atchapter1=$(".SousMenu h3 a").attr("href").toLowerCase().replace(/\-/g,"_").split("/")[2]),(void 0===atchapter1||""===atchapter1||atchapter1.replace(/\_/g,"").replace(/\ /g,"")==document.location.href.toLowerCase().split("/")[3]||atchapter1.replace(/\_/g,"").replace(/\ /g,"")==document.location.href.toLowerCase().split("/")[4]&&"volley"!=document.location.href.toLowerCase().split("/")[3])&&"moto"!=document.location.href.toLowerCase().split("/")[3]&&"rallye"!=document.location.href.toLowerCase().split("/")[3]&&"dakar"!=document.location.href.toLowerCase().split("/")[3]||-1!=xtpage.toLowerCase().indexOf("voile")?-1!=xtpage.indexOf("no-xtpage")&&$(".SousMenu h3 a").attr("href")?atchapter1=$(".SousMenu h3 a").attr("href").toLowerCase().replace(/\-/g,"_").split("/")[2]:void 0!==atchapter1&&""!==atchapter1||(atchapter1="divers"):void 0===xtpage||-1==xtpage.toLowerCase().indexOf("volley")&&-1==at_url.toLowerCase().indexOf("volley")?void 0!==atchapter1&&"gymnastique_rythmique"==atchapter1&&(atchapter1="gymnastique"):void 0!==atchapter1&&"volley_ball"!=atchapter1?(atchapter2=atchapter1,atchapter1="volley_ball"):atchapter1="volley_ball",s18=void 0!==xtpage&&"no-xtpage"!=xtpage.substring(0,9)?xtpage.toLowerCase().split("::").slice(0)[0]:at_repUrl,-1!=at_url.indexOf("handball")&&(xtn2=12),-1!=at_url.indexOf("/pronos/")&&(competition=at_url.split("/").slice(4)[0].replace(/-/g,"_").replace(/(.[0-9]*)/g,""),atchapter1=s17=competition,atchapter2=s28="prono",s18=competition,atchapter3=at_typePage=""),s17=""===atchapter1?atchapter1="divers":atchapter1,""===atname&&(atname="resultats"),"tous_sports"==(s18=s18.replace("athle","athletisme").replace("tssports","tous_sports"))&&(s18=s17,s17="divers")),-1!=at_url.indexOf("transferts-mercato")&&(atchapter3=at_typePage="",s17=cleaningVar(s17),-1==atchapter1.indexOf("ligue")&&(s17=atchapter1="championnat_d_"+atchapter1)),void 0===xtpage||"directs"!=at_typePage&&"livesList"!=at_typePage||(at_typePage="directs",s17="divers",s28="directs",void 0!==xtpage&&-1==xtpage.indexOf("no-xtpage")?(AtTableau=xtpage.toLowerCase().split("::"),atname=AtTableau.slice(-1)[0]+"_"+AtTableau[0].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_"),s18=atchapter0=AtTableau[0].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_").replace("toussports","tous_sports"),atchapter1=""):(s18=atchapter0=at_url.split("/").slice(3)[0],atname="directs_"+AtTableau[0].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_"),atchapter1=""),atname=atname.replace(/\-/g,"_").replace(/\ /g,"_")),void 0!==xtpage&&"live"==at_typePage){if(void 0!==$("body").attr("commente")){var commente=$("body").attr("commente");s21="1"===commente?"[live_commente]":"[live_non_commente]"}if(void 0!==$(".scoreboard").attr("data-statut")){var statut=$(".scoreboard").attr("data-statut");s31="V"==statut?"[a_venir]":"T"==statut?"[termine]":"M"==statut?"[mi_temps]":"[en_cours]"}void 0!==xtpage&&-1==xtpage.indexOf("no-xtpage")?(AtTableau=xtpage.toLowerCase().split("::"),atname=AtTableau.slice(-1)[0],s18=atchapter0=AtTableau[0].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_").replace("toussports","tous_sports"),""!==atchapter1&&atchapter1!=AtTableau[0]||(s17=atchapter1=AtTableau[1].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_")),""===atchapter1&&"base"!=AtTableau[1]&&AtTableau[1]!=AtTableau[0]&&"handball"==AtTableau[0]&&(s17=atchapter1=AtTableau[1])):s18=atchapter0=at_url.split("/").slice(3)[0],""!==atchapter1&&atchapter1!=atchapter0&&"live"!=atchapter1||($(".info_match_sub .info_niveau").length?s17=atchapter1=$(".info_match_sub .info_niveau").html().toLowerCase().split(",")[0].replace(/\-/g,"_").replace(/\ /g,"_").replace(/\'/g,"_"):$(".SousMenu h3 a").attr("href")?s17=atchapter1=$(".SousMenu h3 a").attr("href").toLowerCase().split(",")[0].replace(/\-/g,"_").replace(/\ /g,"_").replace(/\'/g,"_").split("/")[2]:atchapter1="divers"),atname=cleaningVar(atname),s30="cyclisme"==atchapter0&&"course"!=document.location.href.split("/").slice(-2)[0]?at_url.split("/").slice(-2)[0]:at_url.split("/").slice(-1)[0].replace(".html","").replace("?m=1",""),s28="live"}if("recherche"==at_typePage){var _recherche=1;atchapter1="general",at_typePage="",atname="recherche",-1!=at_url.indexOf("?r=")&&(atname="resultat_recherche")}if("page_videos"==at_typePage){at_typePage="";var _video=1;void 0!==xtpage&&-1==xtpage.indexOf("no-xtpage")&&(AtTableau=xtpage.toLowerCase().split("::"),s17=atchapter1=AtTableau[1].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_").replace("d1","ligue_1"),s18=atchapter0=AtTableau[0].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_"),atchapter2=AtTableau.slice(-2)[0],"home"==AtTableau.slice(-1)[0]?(atchapter0=atchapter2="",atname="home_video",at_url.toLowerCase().split("/").slice(-2)[0].indexOf("journe")>-1&&(atname+="::"+at_url.toLowerCase().split("/").slice(-2)[0].replace(/\-/g,"_").replace(/\ /g,"_"))):atname=AtTableau.slice(-1)[0]+"_"+at_url.toLowerCase().split("/").slice(-3)[0].replace(/\-/g,"_").replace(/\ /g,"_")+"_"+at_url.toLowerCase().split("/").slice(-2)[0].replace(/\-/g,"_").replace(/\ /g,"_"),s28="videos")}if("quiz"==at_typePage&&(void 0!==xtpage&&-1==xtpage.indexOf("no-xtpage")&&(AtTableau=xtpage.toLowerCase().split("::"),atname=AtTableau.slice(-2)[0]+"_"+AtTableau.slice(-1)[0],atname=atname.replace("_:_","_"),s17=atchapter1=AtTableau[1],atchapter0=AtTableau[0].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_"),s18=$("body").attr("sport")?atsport=$("body").attr("sport").toLowerCase().replace("aussi","tous_sports"):atsport="tous_sports"),xtn2=-1!=at_url.indexOf("football")||"football"==atsport?6:-1!=at_url.indexOf("tennis")||"tennis"==atsport?7:-1!=at_url.indexOf("rugby")||"rugby"==atsport?8:-1!=at_url.indexOf("formule1")||"formule1"==atsport?9:-1!=at_url.indexOf("auto-moto")||"auto-moto"==atsport?10:-1!=at_url.indexOf("handball")||"handball"==atsport?12:-1!=at_url.indexOf("basket")||"basket"==atsport?11:-1!=at_url.indexOf("golf")||"golf"==atsport?13:-1!=at_url.indexOf("cyclisme")||"cyclisme"==atsport?14:-1!=at_url.indexOf("ski")||"ski"==atsport?19:-1!=at_url.indexOf("voile")||"voile"==atsport?16:17),"top"==at_typePage&&(atchapter1="special",atname=""===at_url.toLowerCase().split("/").slice(-1)[0]?at_url.toLowerCase().split("/").slice(-3)[0]+"_"+at_url.toLowerCase().split("/").slice(-2)[0]:at_url.toLowerCase().split("/").slice(-2)[0]+"_"+at_url.toLowerCase().split("/").slice(-1)[0],atname=atname.replace(/\-/g,"_").replace(/\ /g,"_"),s28=at_typePage,at_typePage="top",s17="undefined"!=typeof topcompetition&&""!==topcompetition?topcompetition.toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_"):"divers",s18=at_url.toLowerCase().split("/").slice(3)[1]),"infogs"!=at_typePage&&"blogs"!=at_typePage&&"webdocs"!=at_typePage&&"concours"!=at_typePage&&"agenda_sports"!=at_typePage&&"programme_tv"!=at_typePage||(pageTypeIndicators="divers",atchapter1="",atname="homes_"+at_typePage,xtn2=23,s28=at_typePage,at_typePage="general",s18=at_repUrl,("programme_tv"==at_typePage||at_url.indexOf("programme-tv/agenda")>-1||at_url.indexOf("programme-tv-2017/agenda")>-1)&&(pageTypeIndicators="",atname="agenda_tv",s28="agenda_tv",s18="agenda_tv",s17="divers")),"archives"!=at_typePage&&"articles_premium"!=at_typePage||(pageTypeIndicators="divers",atchapter1=at_typePage="articles_premium"==at_typePage?"article_premium":"archives",atname="home",xtn2=36,s28=at_typePage,at_typePage="",s18=at_repUrl),void 0===xtpage||"allos"!=at_typePage&&"portfolio"!=at_typePage&&"relive"!=at_typePage||(at_typePage=at_typePage.replace("portfolio","diaporama"),s28=s28.replace("portfolio","diaporama"),s29="undefined"!=typeof sas_target?"["+sas_target.toLowerCase().replace(/\ /g,"_").replace(" ","").replace("é","e").replace("ê","e").replace("ë","e").replace("ï","i").replace("à","a").replace("è","e").replace("ö","o").replace("ô","o").replace("ñ","n").replace("&","et")+"]":"",void 0!==xtpage&&-1==xtpage.indexOf("no-xtpage")?(AtTableau=xtpage.toLowerCase().split("::"),atname="relive"==at_typePage?AtTableau.slice(-2)[0]+"_"+AtTableau.slice(-1)[0]:AtTableau.slice(-1)[0],s18=atchapter0=AtTableau[0].toLowerCase().replace(/\-/g,"_").replace(/\ /g,"_").replace("toussports","tous_sports"),s17=atchapter1=AtTableau[1]):s18=atchapter0=at_url.split("/").slice(3)[0],""!==atchapter1&&atchapter1!=atchapter0&&"live"!=atchapter1&&"portfolio"!=atchapter1&&"diaporama"!=atchapter1||($("#nav-inside.NavSport").attr("libelle")?s17=atchapter1=$("#nav-inside.NavSport").attr("libelle").toLowerCase().split(",")[0].replace(/\-/g,"_").replace(/\ /g,"_").replace(/\'/g,"_"):$(".SousMenu h3 a").attr("href")?s17=atchapter1=$(".SousMenu h3 a").attr("href").toLowerCase().split(",")[0].replace(/\-/g,"_").replace(/\ /g,"_").replace(/\'/g,"_").split("/")[2]:atchapter1="divers"),at_url.indexOf("/adrenaline/")>-1&&(s17=atchapter2="divers",s18=atchapter1=at_url.split("/").slice(4)[0],xtn2=41),atname=atname.replace(/\-/g,"_").replace(/\ /g,"_"),s30=at_url.split("/").slice(-1)[0].replace(".html","").replace("?m=1",""),at_url.indexOf("/en-direct/")>-1&&(s28="allos",atchapter1.indexOf("jeux_olympique")>-1?(s17="jo_"+atchapter1.substr(-4),atchapter1=s18="jeux_olympiques",atname=atchapter1+"_"+s30):(s17=atchapter1="divers",atname=atname+"_"+s30)),at_url.indexOf("sport-et-style")>-1&&(xtn2=45),at_url.indexOf("velo-mag")>-1&&(xtn2=46)),at_url.indexOf("/esport/")>-1&&(xtn2=40,s17="divers",s18=atchapter1="esport",atchapter2="","home_esport"==atname&&""===at_url.split("/").slice(4)[0]?atchapter1="":"home_esport"==atname&&""!==at_url.split("/").slice(4)[0]?s17=atchapter1=cleaningVar(at_url.split("/").slice(4)[0]):at_url.indexOf("/actualites/")>-1&&$(".js-article__header").data("game-tag")&&(s17=atchapter1=cleaningVar($(".js-article__header").data("game-tag")))),at_url.toLowerCase().replace(/-|_/g,"").indexOf("/jeuxvideo/")>-1&&(xtn2=40,at_url.indexOf("/actualites/")>-1&&(s17=atchapter1="divers",s18="esport")),at_url.indexOf("/adrenaline/")>-1&&(xtn2=41),(at_url.match("/ilosport/*")||at_url.match("/coaching/*"))&&(xtn2=42,s17=atchapter1=""!==at_url.split("/").slice(4)[0]&&at_url.split("/").length>=5?at_url.split("/").slice(4)[0]:"divers",s18="coaching","home_ilosport"==atname&&(""===at_url.split("/").slice(4)[0]||at_url.split("/").length<5)&&(atchapter1=""),at_url.indexOf("plans-d-entrainement")>-1&&(atchapter1="plan_d_entrainement",atname="home_ilosport",s17="running")),"erreur"==at_typePage&&(pageTypeIndicators="erreur",at_typePage="",atchapter1="general",atname="pages_404",xtn2=37,s17="404",s18="404"),atname=cleaningVar(atname),atchapter1=cleaningVar(atchapter1),atchapter2=cleaningVar(atchapter2),s16=cleaningVar(s16),s17=s17.toLowerCase(),s18=s18.toLowerCase(),void 0!==xtn2&&""===xtn2&&($("body").attr("sport")?atsport=$("body").attr("sport").toLowerCase():atsport="Aussi",xtn2=-1!=at_url.indexOf("football")||"football"==atsport?6:-1!=at_url.indexOf("tennis")||"tennis"==atsport?7:-1!=at_url.indexOf("rugby")||"rugby"==atsport?8:-1!=at_url.indexOf("formule1")||"formule1"==atsport?9:-1!=at_url.indexOf("auto-moto")||"auto-moto"==atsport?10:-1!=at_url.indexOf("handball")||"handball"==atsport?12:-1!=at_url.indexOf("basket")||"basket"==atsport?11:-1!=at_url.indexOf("golf")||"golf"==atsport?13:-1!=at_url.indexOf("cyclisme")||"cyclisme"==atsport?14:-1!=at_url.indexOf("/ski/")&&-1==at_url.indexOf("/adrenaline/")||"ski"==atsport||"ski-glace"==atsport?19:-1!=at_url.indexOf("voile")||"voile"==atsport?16:17),-1!=at_url.indexOf("lachainelequipe")&&(xtn2=4,s17=s18="la_chaine_lequipe",s28=at_url.indexOf("/grille")>-1?"grille":at_url.indexOf("/video/")>-1?"video":"home"),void 0!==xtn2&&"21"==xtn2&&(xtn2=17),-1!=at_url.indexOf("/handball")&&(xtn2=12),-1!=at_url.indexOf("/voile")&&(xtn2=16),(void 0!==xtpage&&"home"==at_typePage||void 0!==xtpage&&"directs"==at_typePage||void 0!==xtpage&&"directs"==at_typePage)&&(at_typePage=""),-1!=at_url.indexOf("/base/tennis/duels/")&&(atchapter1="divers",atname="face_a_face"),s18=s18.replace("tssports","tous_sports"),-1!=at_url.indexOf("#decouverte")&&(xtn2=36,s13="nonabonnee",atname="home_general_decouverte_premium"),"undefined"!=typeof edition_RIO&&1==edition_RIO&&(atchapter1="toussports"==s18?s17:s18,xtn2=44,at_typePage+="_la_nuit_a_rio"),"JO Rio 2016"==$("#nav-inside.NavSport").attr("libelle")&&(xtn2=44,"toussports"==s18||"divers"==s18||"tous_sports"==s18?("toussports"!=s17&&"divers"!=s17||(s17=at_repUrl.replace(/\_/g,"_")),atchapter1=s17.replace(/\-/g,"_")):atchapter1=s18.replace(/\-/g,"_"),-1!=at_url.indexOf("selection-francaise-jo-rio-2016")&&(atname="selection_francaise"),-1!=at_url.indexOf("tableau-classement-medailles-jeux")&&(atname="medailles_pays"),-1!=at_url.indexOf("tableau-classement-medailles-athletes")&&(atname="medailles_athletes"),-1!=at_url.indexOf("jopodium")&&(atname="podium"),-1!=at_url.indexOf("jo-rio-2016-programme-calendrier")&&(atname="2016.html"==at_url.split("-").slice(-1)[0]?"programme_jour":"programme_"+at_url.split("-").slice(-1)[0].replace(".html","")),-1!=at_url.indexOf("jo-rio-2016-programme-calendrier-par-sport-date")&&"date.html"==at_url.split("-").slice(-1)[0]&&(atname="calendrier"),-1!=at_url.indexOf("jo-rio-2016-programme-calendrier-par-sport-date")&&"2016.html"==at_url.split("-").slice(-1)[0]&&(atname="programme_jour")),"articles"==pageTypeIndicators||"patrimonial"==pageTypeIndicators){var qs=window.location.search;qs.indexOf("editionspeciale")>0&&(at_typePage+="_edition_abonne",s20="edition_abonne_carte_"+qs.substr(qs.indexOf("carte")+6)+"_"+qs.substr(qs.indexOf("date")+5,8))}s17.indexOf("ligue_des_nations")>-1&&(s17=atchapter1="ligue_des_nations"),-1!=at_url.indexOf("/abonnement/kiosque")&&(at_typePage="",xtn2=51,s17="divers",s18="kiosque",s28="home",atchapter1="kiosque",atname="lequipe",atname=s17=-1!=at_url.indexOf("/mag/")?"magazine_lequipe":-1!=at_url.indexOf("/hs")?"hors_serie":-1!=at_url.indexOf("/velomag/")?"velo_magazine":-1!=at_url.indexOf("/journalff")?"france_football":-1!=at_url.indexOf("/sportetstyle")?"sport_et_style":-1!=at_url.indexOf("/journalgolf")?"journal_du_golf":"lequipe"),s29=s29.replace(/\-/g,"_").replace(/\ /g,"_"),window.ATInternet={onTrackerLoad:function(){window.tag=new window.ATInternet.Tracker.Tag,""!==at_typePage?""!==atchapter2?tag.page.set({name:atname,chapter1:atchapter1.toLowerCase(),chapter2:atchapter2.toLowerCase(),chapter3:at_typePage.toLowerCase(),level2:xtn2}):""!==atchapter1?tag.page.set({name:atname,chapter1:atchapter1.toLowerCase(),chapter2:at_typePage.toLowerCase(),level2:xtn2}):tag.page.set({name:atname,chapter1:at_typePage.toLowerCase(),level2:xtn2}):""!==atchapter2?tag.page.set({name:atname,chapter1:atchapter1.toLowerCase(),chapter2:atchapter2.toLowerCase(),level2:xtn2}):""!==atchapter1?tag.page.set({name:atname,chapter1:atchapter1.toLowerCase(),level2:xtn2}):tag.page.set({name:atname,level2:xtn2}),tag.identifiedVisitor.set({id:at_visitor,category:at_visitor_cat}),"articles"==pageTypeIndicators||"patrimonial"==pageTypeIndicators||"transferts"==pageTypeIndicators?tag.customVars.set({site:{13:"["+s13+"]",14:s14,16:s16,17:"["+s17+"]",18:"["+s18.replace(/\-/g,"_").replace(/\ /g,"_")+"]",19:s19,20:s20,21:s21,22:s22,24:"["+s24+"]",26:s26,27:s27,23:s23,28:"["+s28+"]",29:s29,30:s30}}):"erreur"==pageTypeIndicators?tag.customVars.set({site:{13:"["+s13+"]",17:"["+s17+"]",18:"["+s18.replace(/\-/g,"_").replace(/\ /g,"_")+"]",22:s22,23:s23,24:"["+s24+"]",28:"["+s28+"]"}}):"divers"==pageTypeIndicators?tag.customVars.set({site:{13:"["+s13+"]",22:s22,23:s23,24:"["+s24+"]",28:"["+s28+"]"}}):tag.customVars.set({site:{13:"["+s13+"]",17:"["+s17+"]",18:"["+s18.replace(/\-/g,"_").replace(/\ /g,"_")+"]",21:s21,22:s22,23:s23,24:"["+s24+"]",28:"["+s28+"]",30:s30,31:s31}}),1==_recherche&&(tag.internalSearch.set({keyword:window.location.search.substring(1).split("&")[0].replace("r=",""),resultPageNumber:$(".formulaireRecherche > .pagination b").text()}),tag.page.set({name:atname})),tag.dispatch()}};var notag=!1;if(notag)console.log("notag = "+notag),notag=!1;else if("lequipe.local"!=window.location.hostname&&"orig-www.lequipe.fr"!=window.location.hostname&&"object"==("undefined"==typeof _userInfos?"undefined":_typeof(_userInfos))&&null!=_userInfos&&1==_userInfos.quotiAbonne&&"abonnes.lequipe.fr"!=window.location.hostname);else if(navigator.userAgent.indexOf("MOBILE-LEQUIPE")>-1){var chaine_stats="";""!=xtn2&&(chaine_stats+="xtn2="+xtn2),atchapter1&&(chaine_stats+="&atchapter1="+atchapter1),atchapter2&&(chaine_stats+="&atchapter2="+atchapter2),atchapter3&&(chaine_stats+="&atchapter3="+atchapter3),atname&&(chaine_stats+="&atname="+atname),s2&&(chaine_stats+="&s2="+s2),s17&&(chaine_stats+="&s17="+s17),s18&&(chaine_stats+="&s18="+s18),s28&&(chaine_stats+="&s28="+s28),s29&&(chaine_stats+="&s29="+s29);var iframeStatApp=document.createElement("IFRAME");iframeStatApp.setAttribute("src","lequipefr://action/send_stat?"+encodeURI(chaine_stats)),document.documentElement.appendChild(iframeStatApp),iframeStatApp.parentNode.removeChild(iframeStatApp),iframeStatApp=null}else(window.location.href.indexOf("lequipe.fr")>0||window.location.href.indexOf("lequipe.local")>0||window.location.href.indexOf("lequipe.uat")>0)&&function(){var at=document.createElement("script");at.type="text/javascript",at.async=!0,at.src="/v6/js/smarttag-prod.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.getElementsByTagName("script")[0].parentNode).insertBefore(at,null);var testat=document.createElement("div");testat.id="tagAT",testat.setAttribute("data-xtsite",xtsite),testat.setAttribute("data-atname",atname),testat.setAttribute("data-xtn2",xtn2),testat.setAttribute("data-s17",s17),testat.setAttribute("data-s28",s28),testat.setAttribute("data-s18",s18),document.body.appendChild(testat)}();var at_visitor="",at_visitor_sha1="";w17=void 0===s17?"":s17,w18=void 0===s18?"":s18,w28=void 0===s28?"":s28,w29=void 0===s29?"":s29;var at_url=document.location.href.toLowerCase();void 0===s14&&(s14=""),void 0!==at_typePage&&""!=at_typePage&&(at_typePage.indexOf("premium_preview")>-1?w28="news_premium_preview":at_typePage.indexOf("premium_full")>-1&&(w28="news_premium_full")),""==w29&&void 0!==atname&&(w29=atname),void 0===s14&&(s14=""),""==xtn2?xtn2="23":"31"==xtn2?w18='wtf","'+w18:"34"==xtn2||"40"==xtn2?w18='jeuxvideo","'+w18:"41"==xtn2?w18='adrenaline","'+w18:"43"==xtn2&&(w18='video360","'+w18.replace("video360","general")),"recherche"!=w28&&"programme_tv"!=w28&&"compte"!=w28||(w18='general","'+w28),"object"==("undefined"==typeof _userInfos?"undefined":_typeof(_userInfos))&&null!=_userInfos?(at_visitor=_userInfos.id,at_visitor_sha1=_userInfos.id_sha1,1==_userInfos.quotiAbonne?userstatut="2":userstatut="1"):userstatut="0",
-1!=at_url.indexOf("fichejoueur")||-1!=at_url.indexOf("fichecoureur")||-1!=at_url.indexOf("ficheathlete")||-1!=at_url.indexOf("ficheentraineur")||-1!=at_url.indexOf("ficheequipe")||-1!=at_url.indexOf("fichepilote")||-1!=at_url.indexOf("ficheecurie")||-1!=at_url.indexOf("/tfj")||-1!=at_url.indexOf("ficheskieur")||-1!=at_url.indexOf("ficheclub")?w17=w17+'","'+cleaningVar($.trim($("h1").text().toLowerCase())):-1!=at_url.indexOf("/abonnement/kiosque")?(w17=atname,w29="kiosque::"+atname):-1!=at_url.indexOf("/offres/")&&(w18="achat",w17="divers"),w17=w17.toLowerCase().replace(/\_/g,""),w18=w18.toLowerCase().replace(/\_/g,"");var wamid="2973",typ="1",Wvar={d:JSON.parse('["lequipe.fr"]'),userid:at_visitor_sha1,userstatut:userstatut,rub:JSON.parse('["'+w18.replace(/\_/g,"").replace(/\-/g,"").replace(/\ /g,"")+'","'+w17.replace(/\_/g,"").replace(/\-/g,"").replace(/\ /g,"")+'"]'),nat:JSON.parse('["'+w28+'"]'),eve:JSON.parse('["'+s14.replace("[","").replace("]","")+'"]'),cat:JSON.parse('["'+w29.replace("[","").replace(";;]","").replace("]","").replace(/\;/g,'","')+'"]'),xiti_pageid:""+[xtn2]};!function(){var w=document.createElement("script");w.type="text/javascript",w.src=document.location.protocol+"//cstatic.weborama.fr/js/wam/customers/wamfactory_dpm.lequipe.min.js?rnd="+(new Date).getTime(),w.async=!0,(document.head||document.getElementsByTagName("head")[0]).appendChild(w)}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(a){"use strict";function b(b){return k.formatter=e,i=a("body"),a(this).not(".tipper-attached").addClass("tipper-attached").on("mouseenter.tipper",a.extend({},k,b||{}),c)}function c(b){var c=a(this),e=a.extend(!0,{},b.data,c.data("tipper-options"));e.$target=c,j={left:b.pageX,top:b.pageY},e.delay?(h(e.timer),e.timer=setTimeout(function(){d(e.$target,e)},e.delay)):d(e.$target,e),e.$target.one("mouseleave.tipper",e,g),!e.follow&&e.match&&e.$target.on("mousemove.tipper",e,f).trigger("mousemove")}function d(b,c){var d="";d+='<div class="tipper '+c.direction+'">',d+='<div class="tipper-content">',d+=c.formatter.apply(i,[b]),d+='<span class="tipper-caret"></span>',d+="</div>",d+="</div>",c.$target=b,c.$tipper=a(d),i.append(c.$tipper),c.$content=c.$tipper.find(".tipper-content"),c.$caret=c.$tipper.find(".tipper-caret"),c.offset=b.offset(),c.height=b.outerHeight(),c.width=b.outerWidth(),c.tipperPos={},c.caretPos={},c.contentPos={};var e=c.$caret.outerHeight(!0),g=c.$caret.outerWidth(!0),h=c.$content.outerHeight(!0),k=c.$content.outerWidth(!0);"right"===c.direction||"left"===c.direction?(c.caretPos.top=(h-e)/2,c.contentPos.top=-h/2,"right"===c.direction?c.contentPos.left=c.margin:"left"===c.direction&&(c.contentPos.left=-(k+c.margin))):(c.caretPos.left=(k-g)/2,c.contentPos.left=-k/2,"bottom"===c.direction?c.contentPos.top=c.margin:"top"===c.direction&&(c.contentPos.top=-(h+c.margin))),c.$content.css(c.contentPos),c.$caret.css(c.caretPos),c.follow?c.$target.on("mousemove.tipper",c,f).trigger("mousemove"):c.match?("right"===c.direction||"left"===c.direction?(c.tipperPos.top=j.top,"right"===c.direction?c.tipperPos.left=c.offset.left+c.width:"left"===c.direction&&(c.tipperPos.left=c.offset.left)):(c.tipperPos.left=j.left,"bottom"===c.direction?c.tipperPos.top=c.offset.top+c.height:"top"===c.direction&&(c.tipperPos.top=c.offset.top)),c.$tipper.css(c.tipperPos)):("right"===c.direction||"left"===c.direction?(c.tipperPos.top=c.offset.top+c.height/2,"right"===c.direction?c.tipperPos.left=c.offset.left+c.width:"left"===c.direction&&(c.tipperPos.left=c.offset.left)):(c.tipperPos.left=c.offset.left+c.width/2,"bottom"===c.direction?c.tipperPos.top=c.offset.top+c.height:"top"===c.direction&&(c.tipperPos.top=c.offset.top)),c.$tipper.css(c.tipperPos))}function e(a){return a.data("title")}function f(a){var b=a.data;j={left:a.pageX,top:a.pageY},b.follow&&void 0!==b.$tipper&&b.$tipper.css({left:j.left,top:j.top})}function g(a){var b=a.data;h(b.timer),void 0!==b.$tipper&&(b.$tipper.remove(),b.$target.off("mousemove.tipper mouseleave.tipper"))}function h(a){a&&(clearTimeout(a),a=null)}var i,j,k={delay:0,direction:"top",follow:!1,formatter:a.noop,margin:15,match:!1},l={defaults:function(b){return k=a.extend(k,b||{}),a(this)},destroy:function(){return a(this).trigger("mouseleave.tipper").off(".tipper").removeClass("tipper-attached")}};a.fn.tipper=function(a){return l[a]?l[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=(void 0===a?"undefined":_typeof(a))&&a?this:b.apply(this,arguments)},a.tipper=function(a){"defaults"===a&&l.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};if(jQuery)var VEL={BuyContext:{content:null,offer:null,processAction:null,paymentMode:null},Routes:{buyUrl:"/vel/services.php?action=buy",buyPdf:"/vel/services.php?action=buyPdf",buyPackArticle:"/vel/services.php?action=buyPackArticle",ePaymentUrl:-1!==document.location.host.indexOf("local")?"http://localhost/tunnel-mpp/payment/app/index.html?#/summary-short":-1!==document.location.host.indexOf("qlf")?"https://skinsuat.mppglobal.com/lequipe/payment/app/index.html?#/summary-short":"https://vl.lequipe.fr/lequipe/payment/app/index.html?#/summary-short",connectUrl:"lequipe.local"===document.location.host?"/mon-compte/#!/abonnement-numerique/inscription":"/mon-compte/abonnement-numerique/inscription"},UserInfo:null,ObjTrigger:null,WaitPopin:null,InBuyProcessing:!1,MsgFailBuy:"Nous sommes désolés, la transaction a échoué.</br></br>Veuillez réessayer ultérieurement",MsgWaitPlease:"<h2>Opération en cours...</h2><p>Merci de patienter</p>",setBuyContext:function(offer,contentToBuy){VEL.ObjTrigger=offer;var content=null,isArticleJournal=contentToBuy&&"articlejournal"===contentToBuy.data("content-type"),productDescription=offer.is(".jeton")&&isArticleJournal?offer.data("articlejournal-product-description"):offer.data("product-description"),jsonQueryString=VEL.convertQueryStringToJson(),contentUrl=!contentToBuy||"articlejournal"!==contentToBuy.data("content-type")&&"article"!==contentToBuy.data("content-type")&&"diaporama"!==contentToBuy.data("content-type")&&"infographie"!==contentToBuy.data("content-type")&&"editionspeciale"!==contentToBuy.data("content-type")?null:document.location.href;console.log(contentToBuy),contentToBuy&&0!=contentToBuy.length&&(content={type:contentToBuy.data("content-type"),id:contentToBuy.data("content-id"),url:void 0!==contentToBuy.data("content-url")&&null!=contentToBuy.data("content-url")?document.location.origin+contentToBuy.data("content-url"):contentUrl,name:contentToBuy.data("content-title")}),productDescription&&content&&(productDescription+="-"+content.name),VEL.BuyContext={offer:{id:(offer.is(".jeton")&&isArticleJournal?offer.data("articlejournal-id"):offer.data("id"))||null,type:offer.data("type")||null,priceId:(offer.is(".jeton")&&isArticleJournal?offer.data("articlejournal-priceid"):offer.data("priceid"))||null,url:void 0!==offer.data("returnurl")?offer.data("returnurl"):null,tunnelImage:offer.data("tunnelimage")||null,productDescription:productDescription||null,provenance:jsonQueryString.prov||offer.data("provenance")||null},paymentMode:"tunnel",content:content}},createCookie:function(name,value,days,domain,path){if(days){var date=new Date;date.setTime(date.getTime()+24*days*60*60*1e3);var expires="; expires="+date.toGMTString()}else var expires="";domain||(domain="lequipe.local"),path||(path="/"),document.cookie=name+"="+value+expires+"; path="+path+";domain="+domain+";"},checkArticleBuyContext:function(){var offer=VEL.BuyContext.offer;VEL.BuyContext.content;if(!offer)throw"offer could not be determined";if(!offer.id)throw"offer id could not be determined";if(!offer.type)throw"offer type could not be determined";if(!offer.priceId)throw"offer price could not be determined"},buyProduct:function(){if(!VEL.BuyContext.processAction)throw"VEL.BuyContext.processAction is not defined";switch(VEL.BuyContext.processAction){case"buyArticle":VEL.buyArticle();break;case"buyPdf":VEL.buyPdf();break;case"buyPackArticle":VEL.buyPackArticle();break;case"buyDiaporama":case"buyInfog":VEL.buyActContent();break;default:throw VEL.BuyContext.processAction+" is not in scope"}},buyProcess:function(buyUrl){if(-1!=document.location.host.indexOf("qlf")&&(VEL.Routes.ePaymentUrl="https://skinsuat.mppglobal.com/lequipe/payment/app/index.html?#/summary-short"),!VEL.InBuyProcessing){if(!buyUrl)throw"buyUrl could not be determined";VEL.InBuyProcessing=!0;var buyContext=VEL.BuyContext;return VEL.toggleObjTrigger(),$.ajax({type:"POST",url:buyUrl,data:buyContext}).done(function(data){var followRedirectUrl=!0;if(void 0===data.error)VEL.failBuy();else if(void 0!==data.error.customParams.succeed||"grantedProduct"===data.error.errorMessages[0]||"tokensLeft"===data.error.errorMessages[0]){"tokensLeft"===data.error.errorMessages[0]&&void 0!==data.error.customParams.succeedMsg&&VEL.failBuy(data.error.customParams.succeedMsg),"grantedProduct"===data.error.errorMessages[0]&&4001===data.error.errorCode&&void 0!==data.error.customParams.succeedMsg&&(followRedirectUrl=!1,VEL.confirmActionPopin({btnYesName:"Accéder",btnNoName:"Fermer",msg:data.error.customParams.succeedMsg,yesCallback:function(){var redirecturl=data.error.customParams.returnurl||null;redirecturl&&VEL.redirectTo(redirecturl)}}));var redirecturl=data.error.customParams.callbackurl||data.error.customParams.returnurl||null;followRedirectUrl&&redirecturl&&VEL.redirectTo(redirecturl)}else if(void 0!==data.error.customParams.guid){var redirecturl=VEL.Routes.ePaymentUrl+"?guid="+data.error.customParams.guid+"&tunnel=court";"service"===VEL.BuyContext.offer.type&&$.isPlainObject(_userInfos)&&1===_userInfos.quotiAbonne&&(followRedirectUrl=!1,console.log(redirecturl),VEL.redirectTo(redirecturl)),followRedirectUrl&&VEL.redirectTo(redirecturl)}else"notConnected"===data.error.errorMessages[0]?VEL.form(VEL.Routes.connectUrl,buyContext).submit():"duplicateSubscription"===data.error.errorMessages[0]&&void 0!==data.error.customParams.errorMsg?VEL.failBuy(data.error.customParams.errorMsg):VEL.failBuy()}).fail(function(){VEL.failBuy()}),!1}VEL.showWaitPopin()},buyArticle:function(){VEL.checkArticleBuyContext();var buyUrl=VEL.Routes.buyUrl||null;VEL.buyProcess(buyUrl)},buyActContent:function(){var buyUrl=VEL.Routes.buyUrl||null;VEL.buyProcess(buyUrl)},buyPdf:function(){var buyUrl=VEL.Routes.buyPdf||null;VEL.buyProcess(buyUrl)},buyPackArticle:function(){var buyUrl=VEL.Routes.buyPackArticle||null;VEL.buyProcess(buyUrl)},toggleObjTrigger:function(vActivate){var activate=!0;void 0!==vActivate&&(activate=vActivate),VEL.ObjTrigger&&(activate&&!VEL.ObjTrigger.hasClass("action-load")&&VEL.ObjTrigger.toggleClass("action-load"),!activate&&VEL.ObjTrigger.hasClass("action-load")&&VEL.ObjTrigger.toggleClass("action-load"))},failBuy:function(vfailMessage){_userInfos||VEL.UserInfo;VEL.closeWaitPopin(),VEL.InBuyProcessing=!1,VEL.toggleObjTrigger(!1);var failMessage=VEL.MsgFailBuy;if(vfailMessage){failMessage=vfailMessage;var btn=new PopinBtn("Aller sur L'Équipe.fr","action-button",function(){document.location.pathname="/"}),popin=new Popin("",failMessage,[btn]);popin.getTitre().addClass("error"),popin.getTexte().css("text-align","center"),popin.Open()}else{var popin=new Popin("",failMessage);popin.Open()}},redirectTo:function(redirecturl){document.location=redirecturl,0!==document.location.hash.length&&document.location.href===redirecturl&&document.location.reload()},goBuy:function(yesCallback,noCallback){var that=(_userInfos||VEL.UserInfo,this);if(VEL.InBuyProcessing)VEL.showWaitPopin();else{var data={offer:{type:that.BuyContext.offer.type?that.BuyContext.offer.type:"",id:that.BuyContext.offer.id,priceId:that.BuyContext.offer.priceId,url:that.BuyContext.offer.url,productDescription:that.BuyContext.offer.productDescription,provenance:that.BuyContext.offer.provenance},content:{type:that.BuyContext.content&&that.BuyContext.content.type?that.BuyContext.content.type:"",name:that.BuyContext.content&&that.BuyContext.content.name?that.BuyContext.content.name:"",url:that.BuyContext.content&&that.BuyContext.content.url?that.BuyContext.content.url:"",id:that.BuyContext.content&&that.BuyContext.content.id?that.BuyContext.content.id:""}};this.createCookie("lequipe-offer-numeric-selected",encodeURIComponent(JSON.stringify(data)),0,".lequipe.fr","/mon-compte/"),VEL.form(VEL.Routes.connectUrl,VEL.BuyContext).submit()}},showWaitPopin:function(){console.log("showWaitPopin"),VEL.WaitPopin=new Popin("",VEL.MsgWaitPlease,null,!1),VEL.WaitPopin.Open()},closeWaitPopin:function(){VEL.WaitPopin&&VEL.WaitPopin.Close()},form:function(url,data,method){null==method&&(method="POST"),null==data&&(data={});var form=$("<form>").attr({method:method,action:url}).css({display:"none"});for(var key in data)data.hasOwnProperty(key)&&function addData(name,data){if($.isArray(data))for(var i=0;i<data.length;i++){var value=data[i];addData(name+"[]",value)}else if("object"===(void 0===data?"undefined":_typeof(data)))for(var key in data)data.hasOwnProperty(key)&&addData(name+"["+key+"]",data[key]);else null!=data&&form.append($("<input>").attr({type:"hidden",name:String(name),value:String(data)}))}(key,data[key]);return form.appendTo("body")},convertQueryStringToJson:function(){var arrQueryString=window.location.search.substr(1).split("&"),jsonQueryString={};if("object"===(void 0===arrQueryString?"undefined":_typeof(arrQueryString))&&arrQueryString instanceof Array&&arrQueryString.length)for(var i in arrQueryString)if(arrQueryString.hasOwnProperty(i)){var param=arrQueryString[i].split("=");if(2!==param.length)continue;jsonQueryString[decodeURIComponent(param[0])]=decodeURIComponent(param[1])}return jsonQueryString},flushPlaceHolderWhenIE:function(){var ua=navigator.userAgent,msie=ua.indexOf("MSIE ");if(msie>0){var posCharSep=ua.indexOf(".",msie);parseInt(ua.substring(msie+5,posCharSep))<10&&$("form").each(function(){$(this).find("input, textarea").each(function(){void 0!==$(this).attr("placeholder")&&$(this).attr("placeholder","")})})}}};if(jQuery)var Popin=function(vtitre,vtext,vbtn,vclosePopin,vCallbackClose){var titre=vtitre||"",texte=vtext||"",btn=vbtn||null,callBackClose=vCallbackClose||null,closePopin=!0;void 0!==vclosePopin&&(closePopin=vclosePopin);var html='<div id="lightboxp"><div class="lightContent"><h2></h2><p></p><div class="btContent"></div>';closePopin&&(html+='<a id="close-panel" href="#">Close this window</a></div></div>');var FireBtn=function(btnClicked){"function"==typeof btnClicked.action&&btnClicked.action(),Close()},Close=function(vUserEvent){var userEvent=!1;void 0!==vUserEvent&&(userEvent=vUserEvent),userEvent&&callBackClose instanceof Function&&callBackClose(),$("#lightbox-panel, #lightboxp").remove()};!function(){($("#lightbox-panel")||$("#lightboxp"))&&$("#lightbox-panel, #lightboxp").remove(),$("<div>").attr("id","lightbox-panel").html(html).appendTo("body"),$("#close-panel").on("click",function(event){event.preventDefault(),Close(!0)}),$("#lightboxp .lightContent h2").html(titre),$("#lightboxp .lightContent p").html(texte),btn&&$.each(btn,function(key,btnClicked){$("#lightboxp .btContent").append('<button class="'+btnClicked.cssClass+'" type="button">'+btnClicked.libelle+"</button>"),$("#lightboxp .btContent button:last").on("click",function(){FireBtn(btnClicked)})})}(),this.Close=function(){Close()},this.Open=function(){$("#lightbox-panel, #lightboxp").fadeIn(300)},this.getTitre=function(){return $("#lightboxp .lightContent h2")},this.getTexte=function(){return $("#lightboxp .lightContent p")}},PopinBtn=function(vlibelle,vclass,vaction){this.libelle=vlibelle,this.action=vaction,this.cssClass=vclass};var helpers={debug:function(optionalValue){console.log("Current Context"),console.log("===================="),console.log(this),optionalValue&&(console.log("Value"),console.log("===================="),console.log(optionalValue))},eachReverse:function(context){var options=arguments[arguments.length-1],ret="";if(context&&context.length>0)for(var i=context.length-1;i>=0;i--)ret+=options.fn(context[i]);else ret=options.inverse(this);return ret},formatHour:function(input){return input?input.replace(":","h"):""},formatText:function(input){input=JSON.stringify(input),input=input.trim();try{input=input.toLowerCase().replace(/ /g,"-").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^0-9a-z]/g,"-")}catch(e){console.log('Erreur formatText avec input="'+input+'"',e)}return input},isoToDay:function(input){return input?String(input).substring(0,10):""},isoToHour:function(input){return input?String(input).substring(11,16).replace(":","h"):""},isoToMathHour:function(input){return input?String(input).substring(11,16).replace(":",""):""},firstLetter:function(input){return input?String(input).charAt(0)+".":""},dayCompare:function(d1,d2){var date=new Date(d1),dateCompare=new Date(d2);return date.getDay()!=dateCompare.getDay()?Handlebars.helpers.dateFormat(d1,"dd/MM"):Handlebars.helpers.dateFormat(d1,"HH/hII")},dateFormat:function(datetime,format){var retDate,options={};if(!datetime)return"";var dateArgs=datetime.split(/[^0-9]/),date=new Date(dateArgs[0],dateArgs[1]-1,dateArgs[2],dateArgs[3],dateArgs[4],dateArgs[5]);switch(format){case"short":case"long":options={weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},retDate=date.toLocaleDateString("fr-FR",options).replace("à","-").replace(":","h").replace(" 1 "," 1er ");break;case"dd DD MMMM YYYY":options={weekday:"long",year:"numeric",month:"long",day:"numeric"},retDate=date.toLocaleDateString("fr-FR",options).replace("à","-").replace(" 1 "," 1er ");break;case"dd DD MMMM YYYY - HH/hII":options={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},retDate=date.toLocaleDateString("fr-FR",options).replace("à","-").replace(":","h").replace(" 1 "," 1er ");break;case"HH/hII":options={hour:"2-digit",minute:"2-digit"},retDate=date.toLocaleTimeString("fr-FR",options).replace(":","h");break;case"dd/MM":options={month:"numeric",day:"numeric"},retDate=date.toLocaleDateString("fr-FR",options).replace("à","-").replace(":","h").replace(" 1 "," 1er ");break;case"dd/MM/YYYY":options={month:"numeric",day:"numeric",year:"numeric"},retDate=date.toLocaleDateString("fr-FR",options).replace(" 1 "," 1er ");break;default:options={weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},retDate=date.toLocaleDateString("fr-FR",options).replace("à","-").replace(":","h").replace(" 1 "," 1er ")}return retDate},secToMin:function(input){var output;if(input>60){var seconds=input%60<10?"0"+input%60:input%60;output=Math.floor(input/60)+"'"+seconds+'"'}else output=input+'"';return output},stripHttp:function(input){if(input){return input.replace(/http:\/\/(.[a-z0-9.]*)\//i,"/")}return""},ifvalue:function(conditional,options){var valArray=[];return"string"==typeof options.hash.value&&(valArray=String(options.hash.value).split("||")),valArray.length&&-1!==valArray.indexOf(conditional)?options.fn(this):options.hash.value===conditional?options.fn(this):options.inverse(this)},ifnotvalue:function(conditional,options){var valArray=[];return"string"==typeof options.hash.value&&(valArray=String(options.hash.value).split("||")),valArray.length&&-1===valArray.indexOf(conditional)?options.fn(this):options.hash.value!==conditional?options.fn(this):options.inverse(this)},limit:function(array,_limit){return Array.isArray(array)?array.slice(0,_limit):[]},math:function(lvalue,operator,rvalue){return lvalue=parseFloat(lvalue),rvalue=parseFloat(rvalue),{"+":lvalue+rvalue,"-":lvalue-rvalue,"*":lvalue*rvalue,"/":lvalue/rvalue,"%":lvalue%rvalue}[operator]},imageSize:function(src,width,height,quality,declinaison){return String(src).replace("{width}",width).replace("{height}",height).replace("{quality}",quality).replace("{declinaison}",declinaison)},setvar:function(name,value,context){this[name]=value},ifCond:function(v1,operator,v2,options){switch(operator){case"==":return v1==v2?options.fn(this):options.inverse(this);case"===":return v1===v2?options.fn(this):options.inverse(this);case"!=":return v1!=v2?options.fn(this):options.inverse(this);case"!==":return v1!==v2?options.fn(this):options.inverse(this);case"<":return v1<v2?options.fn(this):options.inverse(this);case"<=":return v1<=v2?options.fn(this):options.inverse(this);case">":return v1>v2?options.fn(this):options.inverse(this);case">=":return v1>=v2?options.fn(this):options.inverse(this);case"&&":return v1&&v2?options.fn(this):options.inverse(this);case"||":return v1||v2?options.fn(this):options.inverse(this);default:return options.inverse(this)}},stringify:function(json){return JSON.stringify(json)},replace:function(string,to_replace,replacement){return(string||"").replace(to_replace,replacement)},length:function(obj){return obj.length},indexOf:function(obj,needle){return obj.indexOf(needle)>-1},isDark:function(hexCode){return"string"!=typeof hexCode||(hexCode=hexCode.replace("#","").toUpperCase(),(299*parseInt(hexCode.substr(0,2),16)+587*parseInt(hexCode.substr(2,2),16)+114*parseInt(hexCode.substr(4,2),16))/1e3<230)},charCode:function(n){return String.fromCharCode(64+n)},for:function(from,to,incr,block){for(var accumulator="",i=from;i<to;i+=incr)accumulator+=block.fn(i);return accumulator},times:function(n,block){for(var accum="",i=0;++i<=n;)accum+=block.fn(i);return accum},dfp:function(format){googletag.cmd.push(function(){googletag.display(format)})},numberMatchs:function(pots,teams){return pots*teams/2},setVariable:function(varName,varValue,options){options.data.root[varName]=varValue},addition:function(varName,number,options){options.data.root[varName]+=number},multiply:function(varName,number,options){options.data.root[varName]*=number},divide:function(varName,number,options){parseInt(number)?options.data.root[varName]/=number:options.data.root[varName]=0},increment:function(varName,options){options.data.root[varName]++},eq:function(v1,v2){return v1===v2},ne:function(v1,v2){return v1!==v2},lt:function(v1,v2){return v1<v2},gt:function(v1,v2){return v1>v2},lte:function(v1,v2){return v1<=v2},gte:function(v1,v2){return v1>=v2},and:function(){return Array.prototype.slice.call(arguments).every(Boolean)},or:function(){return Array.prototype.slice.call(arguments,0,-1).some(Boolean)},capitalize:function(string){return string.charAt(0).toUpperCase()+string.slice(1)},unCapitalize:function(string){return string.charAt(0).toLowerCase()+string.slice(1)}};for(var i in helpers)Handlebars.registerHelper(i,helpers[i]);var helpers={trackingKmTotal:function(data){return parseInt(data.KM_PARCOURUS)+parseInt(data.KM_RESTANTS)},trackingProgression:function(data){return Math.round(100*parseInt(data.KM_PARCOURUS)/(parseInt(data.KM_PARCOURUS)+parseInt(data.KM_RESTANTS)))},getWidthFromMinute:function(minute,min,max){return minute&&max!==min&&void 0!==min&&void 0!==max?Math.min(100,(minute-min)/(max-min)*82):0},getColor:function(specifics,side){if(!specifics)return"";var equipe={};equipe=specifics.domicile?"home"===side?specifics.domicile.equipe:specifics.exterieur.equipe:specifics.equipe;var color={};if(specifics[side+"_color_set"]?color=equipe[specifics[side+"_color_set"]+"_color"]:equipe.primary_color&&(color=equipe.primary_color),color)var text="color:"+color.text,background="background:"+color.background,css_add="";return text&&background||("home"===side?(text="#fff",background="#202020"):(text="#ccc",background="#101010"),css_add=""),background+" ;"+text+" ;"+css_add},isPositions:function(object){return!!object&&(result=object.filter(function(e){return e.x>0}).length>0,result)},isListed:function(object){return!!object&&(result=object.length>0,result)},getSportif:function(object,i){return object&&i?(obj=object.filter(function(e){return e.id==i})[0],obj?obj.nom_complet?obj.nom_complet:(console.log("%cgetSportif url_fiche does not exist in","background: #ffe500; color: #5e0808",object),""):(console.log("%cgetSportif filter not working : i="+i+" object=","background: #ffe500; color: #5e0808",object),"")):""},getFicheSportif:function(object,i){return object&&i?(obj=object.filter(function(e){return e.id==i})[0],obj?obj.url_fiche?obj.url_fiche.replace("webapp","www"):(console.log("%cgetFicheSportif url_fiche does not exist in","background: #ffe500; color: #5e0808",object),""):(console.log("%cgetFicheSportif filter not working : i="+i+" object=","background: #ffe500; color: #5e0808",object),"")):""},hasReplacedPlayer:function(object,i){return object&&i?(obj=object.filter(function(e){return e.entrant.id==i})[0],!!obj):""},getReplacedPlayer:function(replacements,substituteId,players,key){if(!replacements||!substituteId||!players)return"";var substitute=replacements.filter(function(e){return e.entrant.id===substituteId})[0].sortant;if(substitute){var replacedPlayer=players.filter(function(e){return e.id===substitute.id})[0];return replacedPlayer[key]?replacedPlayer[key]:""}return""},getReplacementTime:function(replacements,substituteId){if(!replacements||!substituteId)return"";var replacement=replacements.filter(function(e){return e.entrant.id===substituteId})[0];return replacement&&replacement.instant&&replacement.instant.libelle?replacement.instant.libelle:""},getGoals:function(object,i){return object&&i?(nb=object.filter(function(e){return e.joueur.id==i}).length,nb<2&&(nb=""),nb):""},sumType:function(obj,i){return $.isArray(obj)&&i?(nb=obj.filter(function(e){return e.type==i}),nb=nb.length,0==nb&&(nb=""),nb):""},getPercentage:function(v_first,v_second){var first=parseFloat(v_first),second=parseFloat(v_second);return first+second!==100?0!==first||0!==second?100/(first+second)*first:50:first},isNotEmpty:function(json,c){json&&json.length>0&&$("."+c).show()}};for(var i in helpers)Handlebars.registerHelper(i,helpers[i]);var helpers={parseSportLayout:function(data){var sportLayout=data.layout;return"direct_default"===sportLayout&&data.objet.specifics&&data.objet.specifics.classement&&(sportLayout="direct_sport_individuel"),sportLayout}};for(var i in helpers)Handlebars.registerHelper(i,helpers[i]);var helpers={getColorsOptions:function(options){var styles="";return options.forEach(function(option){"couleur_arriere_plan"===option.type&&(styles+="background-color:"+option.objet.couleur+";"),"couleur_texte"===option.type&&(styles+="color:"+option.objet.couleur+";")}),styles},getSelectedColorsOptions:function(options,cond){var styles="";return options.forEach(function(option){cond?("selected_background_color"===option.type&&(styles+="background-color:"+option.objet.couleur+";"),"selected_text_color"===option.type&&(styles+="color:"+option.objet.couleur+";")):("unselected_background_color"===option.type&&(styles+="background-color:"+option.objet.couleur+";"),"unselected_text_color"===option.type&&(styles+="color:"+option.objet.couleur+";"))}),styles},getGroupMatchName:function(match){if(match&&match.objet&&match.objet.rencontre){var rencontre=match.objet.rencontre;return rencontre.specifics.domicile.equipe.nom+" - "+rencontre.specifics.exterieur.equipe.nom}}};for(var i in helpers)Handlebars.registerHelper(i,helpers[i]);var helpers={getCurrentSubNavItem:function(navItem,property){for(var currentSubNavItem,subNavItems=navItem.sub_nav,requestedSeason="ete"===$("body").data("season")?"summer":"winter",requestedYears=$("body").data("year"),i=0;i<subNavItems.length;i++){var splittedSeason=subNavItems[i].id.split("-"),season=splittedSeason[0],years="current"===splittedSeason[1]?"current":splittedSeason.slice(1).join("-");if(season===requestedSeason&&years===requestedYears){currentSubNavItem=subNavItems[i];break}}return currentSubNavItem=currentSubNavItem||subNavItems[0],currentSubNavItem[property]}};for(var i in helpers)Handlebars.registerHelper(i,helpers[i]);var global_65="off",incDynamic,menu_on=0,vitesseFade=200,isMenuOver=!1,timerMenu=null,tpRefresh,lesport,upd,pageChrono=0,pageVideo=0,auto="undef",pageChronoDerniereChargee=0,_url_compte_amateur_home="/club/compte/formulaire_amateur.php",_url_quoti_achat_home="/club/compte/paiement/prepare_paiement.php",isConnectedAmateur=!1,codetraking="",mpp_mode=!0,queryString=convertQueryStringToJson(),channelPlayerId="k4NQgz15Xuw3tKaCf1y";if(void 0===features)var features={};$(function(){function setLiveTemplating(){$(".js-live-templating").templating({callback:function(){$(".js-tplhnavscroll").navpagescrolling({scrollDirection:"horizontal",anchor:"end",transition:"ease 0.5s"}),pageLive.onRefreshTemplate()}})}function setRacingTemplating(){$(".js-racing-templating").templating({callback:function(){$(".js-racingTimeline").racingTimeline(),$(".js-racingGeneralRanking").racingGeneralRanking(),$(".js-selector").selectList({callback:function(e){var newKey=e.currentTarget.value.toString(),season=e.currentTarget.dataset.season,selectedOption=e.currentTarget.querySelector('[value="'+newKey+'"]'),name="";null!==selectedOption&&(name=selectedOption.innerHTML),name=slugify(name),window.location.href="/Hippisme/prix-epiqe-series-saison-"+season+"-"+name+"/"+newKey+"#classementEtape"}})}})}$(window).remoteConfig(),incDynamic=$('meta[itemprop="dynamic"]').attr("content"),versionEfr=$('meta[property="version:efr"]').attr("content"),cookieLequipe(),init_sondages(),init_compte(),init_chrono(),init_video(),init_tops(),menuToggle(),init_eservices(),checkBadBrowser(),stickyMenu(),duel.initialize(),init_countdownOreillette(),!features.incitativePopin||null!==_userInfos||$("body").hasClass("home_estore")||$("body").hasClass("premium")||popinCheck(),$("body").hasClass("page-home")&&_userInfos&&1==_userInfos.quotiAbonne&&$(".home__colead__edspeciale").find(".skew--blue").remove(),"function"==typeof commentLoad&&commentLoad(),$(".page-home").pageHome();var pageLive=($(".tpl-allos").allo().data("plugin_allo"),$(".tpl-live").pageLive().data("plugin_pageLive"));$(".tpl-transfers").transfersTable().data("plugin_transfersTable"),$(".tpl-livesList").pageLivesList().data("plugin_pageLivesList");$(".js-matchRatings-templating").matchRatings(),$(".js-matchRatingsOverall-templating").matchRatingsOverall(),init_lazyloads(),$(".js-selecttabs").navtabing({tabSelect:"select"}).off("tabing-ready").on("tabing-ready",function(){init_lazyloads(),$("html").trigger("scroll")}),$(".js-selectcontroller").selectcontroller(),$(".js-explore-home").explorePromo(),setNavtabing(),$(".js-navscroll").navpagescrolling(),$(".videos").navpagescrolling({container:".home__colead__videos",scroller:".home__colead__videos__list",controllerPrev:".home__colead__paging__previous",controllerNext:".home__colead__paging__next",pager:{current:"span.page",total:"span.nbpage"},scrollDirection:"horizontal",transition:"linear 0.25s"}),$(".js-tabs-url").navtabing({matchUrl:!0}).off("tabing-ready").on("tabing-ready",function(){init_lazyloads(),$("html").trigger("scroll"),refreshPub($(".js-tabs-kiosque").length>0?"matchingUrl":"byclick")}),$(".js-tabs-live").navtabing().off("tabing-ready").on("tabing-ready",function(){setLiveTemplating(),refreshPub("byclick")}),$(".js-tvSchedule").navtabing().off("tabing-ready").on("tabing-ready",function(){init_lazyloads(),$("[data-templating]").templating(),refreshPub("filter")}),setLiveTemplating(),$(".js-tabs-racing").navtabing().off("tabing-ready").on("tabing-ready",function(){setRacingTemplating()}),setRacingTemplating(),$("[data-templating]:not([data-templating-lazyload]):not([data-templating-byclick]):not([data-templating-jsonsource])").templating({callback:function(){$(".js-tplnavpagescroll").navpagescrolling({scrollDirection:"vertical"}),$(".js-tplhnavscroll").navpagescrolling({scrollDirection:"horizontal",anchor:"end",transition:"ease 0.5s"}),$(".js-tvSchedule").tvSchedule(),
setTimeout($.proxy(function(){$(".js-filtersSchedule").filtersSchedule(),$(".js-filters").filters()},this),100),$(".js-navscroll").navpagescrolling(),navigator.userAgent.match("MOBILE-LEQUIPE")?$(".js-action-buttonApp").removeClass("is-hidden"):$(".js-action-button").removeClass("is-hidden"),setNavtabing()}}),$(".js-navpagescroll").navpagescrolling({scrollDirection:"vertical"}),$(".js-hnavscroll").navpagescrolling({scrollDirection:"horizontal",transition:"ease 0.5s"}),$(".js-navigation").navigationsetting({itemElement:"li",activeClass:"active"}),$(".js-stickyads-1").length&&setTimeout(function(){$(".js-stickyads-1").sticking({parent:{element:".js-col",stickyClass:"is-sticky",offset:48-($(".js-stickyads-1").position().top-$(".js-col").position().top)},start:"top",length:1e3,offset:-63})},5e3),$(".js-navigation").sticking({parent:{element:"body",stickyClass:"navigation-sticky",offset:$(".js-navigation").height()},start:"bottom",offset:-46}),$(".js-accordeon").accordeon(),$(".js-articleSelection").articleSelection(),$(window).backtotoping(),popincrm=$("body").popin().data("plugin_popin"),$(".js-cyclingTimeline").cyclingTimeline(),$(".js-comments").comments(),$(".js-stories").length&&$(".js-stories").stories(),$(".js-video").dailymotionAPI(),setTimeout(safeHTML,1e3)});
//# sourceMappingURL=scripts.min.js.map
