function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hasNewLine(e){return e.indexOf("\n")>=0}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function getStaticHost(){var e=document.getElementById("pulpix");if(e){var t=document.createElement("a"),i=e.getAttribute("src")?e.getAttribute("src"):"https://cdn.pulpix.com/static/pulpix.js";t.href=i;var n;if(t.protocol&&t.host)n=t.protocol+"//"+t.host;else{var r=t.href.split("/");n=r[0]+"//"+r[2]}return n}return"https://cdn.pulpix.com"}pxRequire.define("globals",[],function(){function e(){return o||(t(),o=!0),a}function t(){var e=n();a.env=e,a.apiHost=r(e),a.staticHost=i();var t=void 0,o=document.getElementById("pulpix"),s=void 0,l=void 0,d=void 0,c=void 0;o&&(t=o.getAttribute("data-website-id")||o.getAttribute("data-user-id"),t=parseInt(t,10),s=o.getAttribute("data-ayl-website-id"),l=o.getAttribute("data-placement-id"),d=o.getAttribute("data-success-callback"),c=o.getAttribute("data-fail-callback")),a=Object.assign(a,{env:e,apiHost:r(e),getApiHost:r.bind(this,e),cachedApiHost:"https://acdn.pulpix.com",staticHost:i(),location:document.location,websiteId:t,adyoulikeWebsiteId:s,MAXIMUM_BLACKLISTED_ELEMENTS:30,isPrisma:[878,638,875,888,1024,873,1032,1030,1387,1031,1386,1028,1025,1029,1023,826,780,1027].includes(t),adyoulikePlacementId:l,successCallback:d,failCallback:c})}function i(){var e=document.getElementById("pulpix");if(e){var t=document.createElement("a"),i=e.getAttribute("src")?e.getAttribute("src"):"https://cdn.pulpix.com/static/pulpix.js";t.href=i;var n=void 0;if(t.protocol&&t.host)n=t.protocol+"//"+t.host;else{var r=t.href.split("/");n=r[0]+"//"+r[2]}return n}return"https://cdn.pulpix.com"}function n(){var e="prod";return window.location.search.indexOf("px-test")>-1?e:(window.location.host.match("127.0.0.1|localhost|dev.pulpix")?e="dev":window.location.host.match("stg.pulpix.co")?e="staging":window.location.host.match("test.pulpix.com")?e="test":window.location.host.match("10.0.2.2")&&(e="virtualbox"),e)}function r(e){var t={prod:"https://api.pulpix.com",staging:"https://www.stg.pulpix.com",dev:"https://127.0.0.1:5001",test:"https://api3.pulpix.com",virtualbox:"https://10.0.2.2:5001"};return t[e]}var a={},o=!1;return e()});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};pxRequire.define("px-mini-utils",[],function(){var e={objPath:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.reduce(function(e,t){return e&&e[t]},e)},hasClass:function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},addClass:function(e,t){this.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},removeClass:function(e,t){this.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))},removeUndefinedKeys:function(e){return e||(e={}),Object.keys(e).forEach(function(t){(void 0===e[t]||""===e[t]||null===e[t])&&delete e[t]}),e},arrayEquals:function(e,t){if(!e)return!1;if(e.length!==t.length)return!1;for(var i=0,n=t.length;n>i;i++)if(e[i]instanceof Array&&t[i]instanceof Array){if(!e[i].equals(t[i]))return!1}else if(e[i]!==t[i])return!1;return!0},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|w3c(\-| )|webc|whit|wi(g |nc|nw)|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),/iPad/i.test(t)&&(e=!1)}(navigator.userAgent||navigator.vendor||window.opera),e||window.pxIsMobileOverride},isIpad:function(){var e=!1;return function(t){/iPad/i.test(t)&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},isIphone:function(){var e=navigator.userAgent,t=/iPhone/i.test(e)||/iPod/i.test(e);return/iPad/i.test(e)&&(t=!1),t||window.pxIsMobileOverride},isAndroid:function t(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("android")>-1;return t},createHashFromString:function(e){var t=0;if(0==e.length)return t;for(var i=0;i<e.length;i++){var n=e.charCodeAt(i);t=(t<<5)-t+n,t&=t}return Math.abs(t).toString(16)},endsWith:function(e,t){return-1!==e.indexOf(t,e.length-t.length)},smartBoolean:function(e){return"boolean"==typeof e?e:"string"==typeof e?Boolean("1"===e||"true"===e):Boolean(e)},optionalSmartBoolean:function(e){return void 0!==e&&null!==e?this.smartBoolean(e):void 0},isObject:function(e){return e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&!Array.isArray(e)},assignDeep:function(e,t){if(this.isObject(e)&&this.isObject(t))for(var i in t)this.isObject(t[i])?(e[i]||Object.assign(e,_defineProperty({},i,{})),this.assignDeep(e[i],t[i])):Object.assign(e,_defineProperty({},i,t[i]));return e},url:{uriEncodeIfNeeded:function(e,t){return t?encodeURIComponent(e):e},uriDecodeIfNeeded:function(e,t){return t?decodeURIComponent(e):e},serialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0,i=[];for(var n in e)if(e.hasOwnProperty(n)){var r=this.uriEncodeIfNeeded(encodeURIComponent(n),t);void 0!==e[n]&&(r+="="+this.uriEncodeIfNeeded(e[n],t)),i.push(r)}return i.join("&")},deserialize:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0,i=e.split("&"),n={},r=0;r<i.length;r++){var a=i[r].split("=");n[this.uriDecodeIfNeeded(a[0],t)]=a[1]?this.uriDecodeIfNeeded(a[1],t):void 0}return n},getParams:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0,i=e.split("?");return 2===i.length&&i[1]?this.deserialize(i[1],t):{}},updateParams:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!0,n=e.split("?"),r={};2===n.length&&(r=this.getParams(e,i));for(var a in t)r[a]=t[a];var o=this.serialize(r,i);return o&&(e=n[0]+"?"+o),e},setParams:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!0,n=e.split("?"),r=this.serialize(t,i);return e=r?n[0]+"?"+r:n[0]},removeParams:function(e){return e.split("?")[0]}},serialize:function(e){return this.url.serialize(e)},deserialize:function(e){return this.url.deserialize(e)},onDomReady:function(){var e=new Promise(function(e,t){"complete"===window.document.readyState||"loaded"===window.document.readyState||"interactive"===window.document.readyState?e():(document.addEventListener("DOMContentLoaded",function(){e()}),setTimeout(function(){e()},3e3))});return e},getCanonicalUrl:function(){var e=void 0,t=document.querySelector("link[rel='canonical']")||document.querySelector('meta[property="og:url"]');if(t){var i="LINK"===t.tagName?t.getAttribute("href"):t.getAttribute("content");i&&(i.startsWith("http")?e=i:i.startsWith("//")?e=location.protocol+i:i.startsWith("/")&&(e=location.protocol+"//"+location.host+i))}return e||(location.protocol+"//"+location.host+location.pathname).replace(/\/$/,"")},style:{serialize:function(e){var t=[];e=e||{};for(var i in e)e.hasOwnProperty(i)&&t.push(i+":"+e[i]);return t.join(";")},deserialize:function(e){e=e||"";for(var t=e.split(";"),i={},n=0;n<t.length;n++){var r=t[n].split(":");r.length>=2&&(r[0]=r[0].replace(/\s/g,""),i[r[0]]=t[n].substring(t[n].indexOf(":")+1))}return i}},setStyle:function(e,t,i){var n=this.style.deserialize(e.getAttribute("style"));for(var r in t)t[r]&&(n[r]=t[r],i&&"string"==typeof n[r]&&-1===n[r].indexOf("important")&&(n[r]+="!important"));e.setAttribute("style",this.style.serialize(n))},setStyleImportant:function(e,t){return this.setStyle(e,t,!0)},removeStyle:function(e,t){var i=this.style.deserialize(e.getAttribute("style"));delete i[t],e.setAttribute("style",this.style.serialize(i))},PromiseAny:function(e){var t=[],i=new Promise(function(){});return Promise.race(e.map(function(n){return n["catch"](function(n){if(t.push(n),t.length>=e.length)throw t;return i})}))},pixelTrack:function(e){var t=new Image;t.src=e},getAllCDATA:function(e){var t=this;return Array.from(e).map(function(e){return t.getCDATA(e)})},getCDATA:function(e){var t=void 0;return e.childNodes.forEach(function(e){"#cdata-section"===e.nodeName&&(t=e.data)}),t}};return e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};pxRequire.define("xhr",["px-mini-utils"],function(e){function t(e,t,i){if(4===e.readyState){var n=e;try{n.json=JSON.parse(n.responseText)}catch(r){}[200,201,202,203,204].includes(n.status)?t(n):i(n)}}function i(e){var t=[],i=JSON.stringify(e,function(e,i){if("object"===("undefined"==typeof i?"undefined":_typeof(i))&&null!==i){if(-1!==t.indexOf(i))return;t.push(i)}return i});return t=null,i}var n={post:function(e,t,i){return this._submitRequest("POST",e,t,i)},put:function(e,t,i){return this._submitRequest("PUT",e,t,i)},get:function(e,t){return this._submitRequest("GET",e,null,t)},_submitRequest:function(e,n,r){var a=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=new Promise(function(s,l){var d=new XMLHttpRequest;d.open(e,n,!0),"Content-Type"in o?(null!==o["Content-Type"]&&d.setRequestHeader("Content-Type",o["Content-Type"]),delete o["Content-Type"]):d.setRequestHeader("Content-Type","application/json; charset=UTF-8"),d.setRequestHeader("Accept","application/json; charset=UTF-8"),Object.keys(o).forEach(function(e){d.setRequestHeader(e,o[e])}),d.onreadystatechange=t.bind(a,d,s,l),r?d.send(i(r)):d.send()});return s},getJsonp:function(t,i){var n=new Promise(function(n,r){i||(i=Math.round(1e5*Math.random())),i="pxjsonpcb_"+i;var a=void 0;window[i]=function(e){delete window[i],document.body.removeChild(a),n(e)},a=document.createElement("script"),t=e.url.updateParams(t,{format:"jsonp",callback:i}),a.src=t,document.body.appendChild(a)});return n}};return n});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};pxRequire.define("model",["xhr"],function(e){function t(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],r=Object.assign({},t);Object.keys(n).forEach(function(a){if(e.hasOwnProperty(a))throw new Error("field "+a+" is not a valid field name");i.bind(e)(a,t[a],n[a]),delete r[a]}),Object.keys(r).forEach(function(e){throw new Error("field "+e+" not allowed")})}function i(e,i,a){if(a.required&&void 0===i)throw new Error("missing required field "+e);if(!a)throw new Error("field "+e+" not allowed");if(void 0!==i&&!n(i,a.type,a.array_type))throw new Error("value "+i+" of field "+e+" should be a "+a.type);return void 0!==i&&a.validators&&a.validators.forEach(function(t){var n=void 0;if("function"==typeof t?n=t:"string"==typeof t&&r.hasOwnProperty(t)&&(n=r[t]),n&&!n(i))throw new Error("value "+i+" of field "+e+" is not valid")}),a.model&&"object"===("undefined"==typeof i?"undefined":_typeof(i))?new a.model(i):a.fields&&t.bind(this)(i,a.fields),i}function n(e,t,i){Array.isArray(t)||(t=[t]);var n=Array.isArray(e)?"array":"undefined"==typeof e?"undefined":_typeof(e);return t.includes(n)?"array"===n?i?(i=Array.isArray(i)?i:[i],e.every(function(e){return i.includes("undefined"==typeof e?"undefined":_typeof(e))})):!1:!0:t.includes("object")&&"function"===n?!0:!1}var r={url:function(e){var t=/((ftp|http|https):)?\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return t.test(e)},element:function(e){try{return e instanceof HTMLElement||e instanceof HTMLDivElement}catch(t){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&1===e.nodeType&&"object"===_typeof(e.style)&&"object"===_typeof(e.ownerDocument)}}},a=function(){function e(i,n){var r=this;_classCallCheck(this,e),t.bind(this)(i,n),Object.keys(n).forEach(function(e){n[e].model?r[e]=new n[e].model(i[e]):r[e]=i[e]})}return _createClass(e,[{key:"update",value:function(e){var t=this,i=Object.assign({},this);Object.keys(e).forEach(function(t){i[t]=e[t]}),new this.constructor(i),Object.keys(e).forEach(function(i){t[i]=e[i]})}}]),e}();return a});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("local-storage",[],function(){var e=null,t=function(){function t(){return _classCallCheck(this,t),e?e:void(this.prefix="px")}return _createClass(t,[{key:"get",value:function(e){var t=void 0;try{var i=window.localStorage.getItem(this._prefixKey(e));i=JSON.parse(i);var n=!i.hasOwnProperty("value")&&!i.hasOwnProperty("expirationDate");if(n)t=i,this.set(e,t);else{if(i.expirationDate&&i.expirationDate<Date.now())return void window.localStorage.removeItem(this._prefixKey(e));t=i.value}}catch(r){"QuotaExceededError"===r.name&&void 0}return t}},{key:"set",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{return window.localStorage.setItem(this._prefixKey(e),JSON.stringify({value:t,expirationDate:i}))}catch(n){return void("QuotaExceededError"===n.name&&void 0)}}},{key:"_prefixKey",value:function(e){return this.prefix+"."+e}}]),t}();return new t});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("ab-test",["local-storage","globals"],function(e,t){var i=null,n=function(){function t(){return _classCallCheck(this,t),i?i:(this._settings={},this.chosenVariations={},void(i=this))}return _createClass(t,[{key:"init",value:function(e){JSON.stringify(this._settings)!==JSON.stringify(e)&&(this._settings=e,this._settings&&this._initAllVariations())}},{key:"_initAllVariations",value:function(){var t=this;this._storedData=e.get("ab_test"),this._storedData||(this._storedData={}),Object.keys(this._storedData).forEach(function(e){Object.keys(t._settings).includes(e)||delete t._storedData[e]}),Object.keys(this._settings).forEach(function(e){t._initVariation(e)}),e.set("ab_test",this._storedData),Object.keys(this._storedData).forEach(function(e){t.chosenVariations[e]=t._storedData[e].variation})}},{key:"_initVariation",value:function(e){if(this._settings[e].variations&&this._settings[e].start_date&&this._shouldUpdateVariation(e)){var t=this._chooseVariation(this._settings[e].variations);this._storedData[e]={variation:t,start_date:this._settings[e].start_date}}}},{key:"_shouldUpdateVariation",value:function(e){var t=this._storedData[e];return"object"!==("undefined"==typeof t?"undefined":_typeof(t))||!t.variation||!t.start_date||Date.parse(t.start_date)<Date.parse(this._settings[e].start_date)}},{key:"_chooseVariation",value:function(e){for(var t=Object.keys(e),i=t.reduce(function(t,i){return t+e[i]},0),n=Math.random()*i,r=0,a=0;a<t.length;a++){var o=t[a],s=e[o];if(r+=s,r>n)return o}}}]),t}();return new n});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("recommendation",["model","px-mini-utils"],function(e,t){var i={type:{type:"string",required:!0},page_info:{type:"object"},video_info:{type:"object"},social_info:{type:"object"},document_info:{type:"object"},tag_id:{type:"number"},campaign_id:{type:"number"},start_at:{type:"number"},end_at:{type:"number"},title:{type:"string"},description:{type:"string"},end_screen_order:{type:"number"},is_end_screen:{type:"boolean"},layout:{type:"string"},thumbnail_url:{type:"string"},engine_type:{type:"string"},engine_version:{type:"string"},recommendation_source_id:{type:"number"},recommendation_type:{type:"string"},trackingEndpoints:{type:"object",fields:{skip:{type:"array",array_type:"string"},progress:{type:"array",array_type:"string"},creativeView:{type:"array",array_type:"string"},start:{type:"array",array_type:"string"},firstQuartile:{type:"array",array_type:"string"},midpoint:{type:"array",array_type:"string"},thirdQuartile:{type:"array",array_type:"string"},complete:{type:"array",array_type:"string"},impression:{type:"array",array_type:"string"},clickTracking:{type:"array",array_type:"string"},nativeImpression:{type:"array",array_type:"string"},nativeVisibleImpression:{type:"array",array_type:"string"}}},extra_data:{type:"object"},cta_url:{type:"string"},content_id:{type:"number"},picture:{type:"string"},icon:{type:"string"},score_details:{type:"object",fields:{global:{type:"number"},collaborative_visitor:{type:"number"},collaborative_video:{type:"number"},content_description:{type:"number"},content_keywords:{type:"number"},content_title:{type:"number"},content_url:{type:"number"},recency:{type:"number"},recent_popularity:{type:"number"}}}},n=function(e){function n(e){return _classCallCheck(this,n),e=t.removeUndefinedKeys(e),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i))}return _inherits(n,e),_createClass(n,[{key:"_addLegacyInvideoFields",value:function(){return this.page_info?(this.cta_url=this.page_info.url,this.content_id=this.page_info.id):this.video_info?(this.cta_url=this.video_info.src,this.content_id=this.video_info.id):this.social_info?(this.cta_url=this.social_info.url,this.content_id=this.social_info.id):this.document_info&&(this.cta_url=this.document_info.url,this.content_id=this.document_info.id),this.picture=this.thumbnail_url,this.icon=this.thumbnail_url,delete this.thumbnail_url,this}},{key:"_getInfo",value:function(){var e={video:"video_info",page:"page_info",social:"social_info",document:"document_info"}[this.type];return this[e]}},{key:"getUrl",value:function(){return"video"===this.type?this._getInfo().referer:this._getInfo().url}},{key:"getContentId",value:function(){return this.content_id||this._getInfo().id}}]),n}(e);return n});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("history",["local-storage"],function(e){var t=20,i=void 0,n=function(){function n(){return _classCallCheck(this,n),i||(i=this),this.list=e.get("history")||[],i}return _createClass(n,[{key:"add",value:function(i){i&&!this.list.includes(i)&&(this.list.length>=t&&(this.list=this.list.slice(this.list.length-t+1,this.list.length)),this.list.push(i),e.set("history",this.list))}},{key:"flush",value:function(){this.list=[],e.set("history",this.list)}},{key:"get",value:function(){return this.list}}]),n}();return new n});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("video-info",["xhr","model","globals","require","ab-test","px-mini-utils","recommendation","history"],function(e,t,i,n,r,a,o,s){function l(e){var t={prod:/((ftp|http|https):)?\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,
dev:/(\/?[\w-]+)(\/[\w-]+)*\/?|(((http|ftp|https):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?)/gi},n=t.prod;return"prod"!==i.env&&"test"!==i.env&&(n=t.dev),n.test(e)}function d(e){return["thumbnail_url","background_url","logo_icon_url"].forEach(function(t){return e[t]?e[t].startsWith("//")?void(e[t]="http:"+e[t]):void(e[t].startsWith("http")||(e[t]=i.staticHost+e[t])):void 0}),e}function c(e){if(!e.provider_id&&!e.sponsoredParams)throw new Error("Field provider_id is required for non-native video.");return!0}var u={id:{type:"number"},provider:{type:"string",required:!0},provider_id:{type:"string"},title:{type:"string"},description:{type:"string"},website_id:{type:"number"},catalog_id:{type:"string"},user_id:{type:"number"},duration:{type:"number"},thumbnail_url:{type:"string"},background_url:{type:"string",validators:[l]},logo_icon_url:{type:"string"},user_avatar_url:{type:"string",validators:[l]},src:{type:["string","array"],array_type:"object"},pulpix_src:{type:"string"},provider_specific_params:{type:"object",required:!0},sponsoredParams:{type:"object",fields:{dsp_icon:{type:"string"},sponsor:{type:"string"},privacy:{type:"string"},clickThrough:{type:"string",validators:["url"]},callToAction:{type:"string"},preloadedAdsResponse:{type:"string"}}},invideoRecommendations:{type:"object"},referer:{type:"string"},referer_canonical_url:{type:"string"},aspect_ratio:{type:"number"},iframe_wrapper_url:{type:"string"},keywords:{type:"array",array_type:["string","object"]},_inVideoRecoPromise:{type:"object"},_updatePromise:{type:"object"},_nextContentPromise:{type:"object"},_nextContentPromiseArgs:{type:"object"},_customUpdateFromApi:{type:"object"}},p={brightcove:"bc","brightcove-iframe":"bci",dailymotion:"dm",jwplayer:"jw",kaltura:"kt",ooyala:"oo",theplatform:"tp",ultimedia:"ul",videojs:"vjs",vidible:"vd",vimeo:"vm",youtube:"yt"},h={},f={},m=function(t){function r(e){var t;_classCallCheck(this,r),c(e),e.src=e.src||e.provider_specific_params.file||e.provider_specific_params.src,e.provider_specific_params=a.removeUndefinedKeys(e.provider_specific_params),e=a.removeUndefinedKeys(e),e=d(e);var i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,u));return t=i,_possibleConstructorReturn(i,t)}return _inherits(r,t),_createClass(r,[{key:"import",value:function(){var t={provider:this.provider,provider_id:this.provider_id,provider_specific_params:this.provider_specific_params,thumbnail_url:this.thumbnail_url,title:this.title,iframe_wrapper_url:this.iframe_wrapper_url,duration:this.duration,referer_canonical_url:a.getCanonicalUrl(),src:this.src},n=this.website_id||i.websiteId,r=i.getApiHost()+"/api/v1/website/"+n+"/video/import?format=json";return i.isBookmarklet&&(r=i.demoApiHost+"/api/v1/website/"+n+"/video/sync-import?format=json"),e.post(r,t).then(function(e){return e.json})}},{key:"updateFromAPI",value:function(){var e=this;return this._updatePromise&&"Promise"===this._updatePromise.constructor||(this.id?this._updatePromise=Promise.resolve():this._customUpdateFromApi?this._updatePromise=this._customUpdateFromApi():this._updatePromise=r.findDataFromAPI(this.website_id,this.provider,this.provider_id).then(function(t){var i={};["id","title","website_id","catalog_id","duration","thumbnail_url","background_url","pulpix_src","logo_icon_url"].forEach(function(n){e[n]||(i[n]=t[n])}),e.update(i)})["catch"](function(t){i.isBookmarklet||"No Video matches the given query."!==t||e["import"](),Promise.reject(t)})),this._updatePromise}},{key:"overrideUpdateFromAPI",value:function(e){this._updatePromise=void 0,this._customUpdateFromApi=e}},{key:"_updateFromIframe",value:function(e){var t=this,i=function(){return new Promise(function(i,n){if(f[t.provider_id])return t.update(f[t.provider_id]),void i();e.contentWindow.postMessage(JSON.stringify({method:"syncVideoInfo",fromPulpix:!0}),"*");var r=function a(n){if(e){if(n.source===e.contentWindow){var r=void 0;try{r=JSON.parse(n.data)}catch(n){return}if(!r.fromPulpix||!r.event)return;if("updated_video_info"===r.event)return t.update(r.videoInfo),f[t.provider_id]=r.videoInfo,i(),void window.removeEventListener("message",a,!1)}}else window.removeEventListener("message",a,!1)};window.addEventListener("message",r,!1),setTimeout(function(){n("Timeout")},1e4)})};return i}},{key:"getInvideoRecommendations",value:function(){return this._inVideoRecoPromise?this._inVideoRecoPromise:(this._inVideoRecoPromise=Promise.resolve([]),this._inVideoRecoPromise)}},{key:"_formatInvideoTags",value:function(e){var t=this,i=e.map(function(e){return e.recommendation_source_id=e.recommendation_source_id||t.id,new o(e)._addLegacyInvideoFields()});return i}},{key:"getLegacySourceId",value:function(){return p[self.provider]+"."+self.provider_id}},{key:"getPlayerClassPromise",value:function(){var e=this,t=new Promise(function(t,i){n([e.getPlayerClassName()],function(e){t(e)})});return t}},{key:"getPlayerClass",value:function(){return n(this.getPlayerClassName())}},{key:"getPlayerClassName",value:function(){var e="px-"+this.provider;return"file"===this.provider&&(e="px-pulpixplayer"),this.iframe_wrapper_url&&"pulpixplayer"!==this.provider&&(e="px-iframe"),e}},{key:"toJSON",value:function(){var e={};for(var t in u)"_"!==t[0]&&(e[t]=a.clone(this[t]));return e}},{key:"isSponsored",value:function(){return this.provider_specific_params.is_sponsored}}],[{key:"findDataFromAPI",value:function(t,n,r){t=t||i.websiteId;var a=""+t+n+r;return h[a]?h[a]:(h[a]=new Promise(function(a,o){var s=i.cachedApiHost;Math.random()<.1&&(s=i.getApiHost());var l=s+"/api/v1/website/"+t+"/video/find"+("?provider="+n+"&provider_id="+r),d="find_"+i.websiteId+n+r;d=d.replace(/\W/g,""),e.getJsonp(l,d).then(function(e){e&&e.id?a(e):o(e)})["catch"](function(e){o(e)})}),h[a])}},{key:"createFromAPI",value:function(e,t,i){return r.findDataFromAPI(e,t,i).then(function(e){return new r(e)})}},{key:"getExcludedIds",value:function(){var e=new Promise(function(e,t){pxRequire.require(["finder"],function(t){var n=t.find(),r=[],a=n.map(function(e){var t=new Promise(function(t,i){e.videoInfo.updateFromAPI().then(function(){r.push(e.videoInfo.id),t()})["catch"](function(){t()})});return t});Promise.all(a).then(function(){r=r.concat(s.get()).filter(function(e,t,i){return i.indexOf(e)===t}).slice(0,i.MAXIMUM_BLACKLISTED_ELEMENTS+1),e(r)})})});return e}}]),r}(t);return m}),pxRequire.define("player-config",["model","px-mini-utils"],function(e,t){var i={ads:{type:"object"},analyticsParams:{type:"object",fields:{campaignId:{type:"number"},engine_version:{type:"string"},engine_type:{type:"string"},isRecommended:{type:"boolean"},slot:{type:"string"},recommendation_source_id:{type:"number"},recommendation_type:{type:"string"},launched_immersive:{type:"boolean"},widget:{type:"string"},playlist_index:{type:"number"}}},trackingEndpoints:{type:"object",fields:{skip:{type:"array",array_type:"string"},progress:{type:"array",array_type:"string"},creativeView:{type:"array",array_type:"string"},start:{type:"array",array_type:"string"},firstQuartile:{type:"array",array_type:"string"},midpoint:{type:"array",array_type:"string"},thirdQuartile:{type:"array",array_type:"string"},complete:{type:"array",array_type:"string"},impression:{type:"array",array_type:"string"},clickTracking:{type:"array",array_type:"string"},nativeImpression:{type:"array",array_type:"string"},nativeVisibleImpression:{type:"array",array_type:"string"}}},switchedApiOn:{type:"boolean"},autoplay:{type:"boolean"},scroll_to_play:{type:"boolean"},controls:{type:"boolean"},preload:{type:"boolean"},muted:{type:"boolean"},containerId:{type:"string"},externalEventTarget:{type:"object"},forceReload:{type:"boolean"},height:{type:"string"},jwplayerIndex:{type:"number"},replaceElement:{type:"object",fields:{id:{type:"string"},styles:{type:"object"},classNames:{type:"array",array_type:"string"},nextSibling:{type:"object",validator:"element"},parentNode:{type:"object",validator:"element"},attributes:{type:"object"}}},resetEventListeners:{type:"boolean"},playsAtTime:{type:"number"},updateSrc:{type:"boolean"},width:{type:"string"},iframeParam:{type:"string"}},n=function(e){function n(e){return _classCallCheck(this,n),e=t.removeUndefinedKeys(e),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i))}return _inherits(n,e),n}(e);return n}),pxRequire.define("finder-response",["model","video-info","player-config"],function(e,t,i){var n={element:{type:"object",required:!0,validators:["element"]},videoInfo:{type:"object",required:!0,model:t},config:{type:"object",required:!0,model:i}},r=function(e){function t(e){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return"iframe"===i.videoInfo.provider&&i.videoInfo.overrideUpdateFromAPI(i.videoInfo._updateFromIframe(i.element)),i}return _inherits(t,e),t}(e);return r});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_slicedToArray=function(){function e(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(l){r=!0,a=l}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw a}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();pxRequire.define("finder",["px-mini-utils","finder-response","globals"],function(e,t,i){function n(e){return this.videos=[],this.potentialContainers=e,this}function r(e){for(var t=["vpaid","gcdn.2mdn.net","innovid.com","output_ads","serving-sys.com","player.mediabong.com/static/videojs/black.mp4","player.mediabong.com/static/mp4/black_1s.mp4","playtime.tubemogul.com","videos.cdn.engagefront.com","video-assets.mathtag.com","cdn.n.dynstc.com","amazon-adsystem.com","extremereach.io","eyeviewads.com","adsrvr.org","fna.fbcdn.net","/scontent-","&gad=1","s3.amazonaws.com/barometricv2/placement_creatives","gfp_video_ads","eu-adstatic.sam4m.com","flashtalking.com","videoamp.com","atlassbx.com","cla.a2dfp.net","pinetreecreative.com","secure-ds.serving-sys.com","cdn.3lift.com","manifest.mpd","adventori","adnxs.com","undertonevideo.com","spongecell.com","web_video_ads","videologygroup.com","doubleclick_dmm","cdn.stickyadstv.com","adserver.adotmob.com","cdn.tabmo.io","cstatic.weborama.fr","i.r1-cdn.net"],i=0;i<t.length;i++)if(-1!==e.indexOf(t[i]))return!0;return!1}var a=[],o={youtube:{regex:/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,prefix:"yt",containerType:"iframe",cleanIframeUrl:function(t,n){var r=e.url.getParams(t.src),o=null;r.enablejsapi&&r.playsinline||(o=Object.assign(r,{origin:document.location.protocol+"//"+document.location.host,enablejsapi:1,controls:1,iv_load_policy:3,autohide:0,rel:0,showinfo:640===i.websiteId?1:0,wmode:"transparent",playsinline:1}),!o.autoplay||e.isMobile()||e.isIpad()||(n.videoInfo.provider_specific_params.autoplay=1),t.src=e.url.setParams(t.src,o),a.push(t))},getConfig:function(t){var i=e.url.getParams(t);return{switchedApiOn:!e.smartBoolean(i.enablejsapi),autoplay:e.smartBoolean(i.autoplay)}},findVideos:function(){var e=n.prototype.findVideos.call(this);return e.filter(function(e){return-1===e.element.className.indexOf("vjs-tech")})}},dailymotion:{regex:/^(?:https?:\/\/)?(?:www.)?(?:dai.ly|dailymotion.com)\/(?:embed)\/(?:video\/|hub\/)?([a-zA-Z0-9]+)(?:\/)?([a-zA-Z0-9]+)?(?:_[a-zA-Z0-9-_]*)?|(?:https?:\/\/)?/,prefix:"dm",containerType:"iframe",cleanIframeUrl:function(t){var n=e.url.getParams(t.src),r=null;(!n.api||715===i.websiteId&&"0"!==n["queue-enable"])&&(r=Object.assign(n,{origin:document.location.protocol+"//"+document.location.host,api:"postMessage","queue-enable":0}),e.isMobile()&&r.autoplay&&delete r.autoplay,t.src=e.url.setParams(t.src,r),a.push(t))},getConfig:function(t){var i=e.url.getParams(t);return{switchedApiOn:!("postMessage"===i.api),autoplay:e.smartBoolean(i.autoplay||i.autoPlay)}}},vimeo:{regex:/^.*vimeo\.com\/(?:(?:channels\/[A-z]+\/)|(?:groups\/[A-z]+\/videos\/)|(?:video\/))?([0-9]+)?/,prefix:"vm",cleanIframeUrl:function(t){var i=e.url.getParams(t.src),n=null;i.api||(n=Object.assign(i,{origin:document.location.protocol+"//"+document.location.host,api:1}),t.src=e.url.setParams(t.src,n),a.push(t))},getConfig:function(t){var i=e.url.getParams(t);return{switchedApiOn:!e.smartBoolean(i.api),autoplay:e.smartBoolean(i.autoplay)}}},ooyala:{regex:/^.*(?:player\.ooyala\.com\/iframe\.html|embeds\.vice\.com\/)\?.*(?:ec|embedCode)=([a-zA-Z0-9_-]+).*$/,prefix:"oo",findVideos:function(){var i=function(){return Array.from(document.getElementsByTagName("script")).map(function(t){return/ooyala/.exec(t.src)?e.url.getParams(t.src).namespace:void 0}).find(Boolean)||"OO"},r=function(){var n=window[i()],r=[];return n&&n.__internal?(Object.keys(n.__internal.players).forEach(function(i){var a=document.getElementById(i),o=n.__internal.players[i],s=o.getItem(),l=e.objPath(o,["parameters","skin","config"]);l=l?"//"+e.getLocation(l).host+e.getLocation(l).pathname:void 0;var d={element:a,videoInfo:{provider:"ooyala",provider_id:s.embed_code||s.embedCode,thumbnail_url:s.thumbnail_image||s.promo,provider_specific_params:{embed_code:s.embed_code||s.embedCode,pcode:s.asset_pcode||s.providerCode,playerBrandingId:o.parameters.playerBrandingId,version:e.objPath(n,["VERSION","core","releaseVersion"])||e.objPath(n,["__internal","playerParams","core_version"]),duration:s.duration,skin_config:l}},config:{autoplay:e.objPath(o,["parameters","autoplay"])}};r.push(new t(d))}),r):r};return n.prototype.findVideos.call(this),this.videos=this.videos.concat(r()),this.videos},getConfig:function(t){var i=e.url.getParams(t);return{autoplay:e.smartBoolean(i.autoplay||i["options[autoplay]"])}},getProviderSpecificParams:function(t){var i=e.url.getParams(t);return{embed_code:i.embedCode||i.ec,pcode:i.playerId||i.pbid||i.me}}},ultimedia:{regex:[/^(?:https?:\/\/)?(?:www\.)?(?:ultimedia\.com|digiteka\.net)\/deliver\/(?:[a-zA-Z0-9]+)\/iframe\/(?:mdtk\/(?:[a-zA-Z0-9]+)\/)?(?:(?:[a-zA-Z0-9]+)\/(?:[a-zA-Z0-9]+)\/)+?src\/([a-zA-Z0-9]+)?/,/^(?:https?:\/\/)?(?:www\.)?(?:ultimedia\.com|digiteka\.net)\/deliver\/(?:[a-zA-Z0-9]+)\/iframe\?.*src=([a-zA-Z0-9]+).*?/],prefix:"ul",getProviderSpecificParams:function(e,t){var i=/deliver\/([a-zA-Z0-9]+)\/.*mdtk(?:\/|=)([a-zA-Z0-9]+)(\/|\&)/,n=i.exec(e),r=void 0,a=void 0;return n&&n.length>=2&&(a=n[1],r=n[2]),{playerId:r,category:a}},getConfig:function(e){var t,i=/^.*(autoplay)\/([a-zA-Z0-9]+).*?/.exec(e);return null!==i&&i.length>=2&&(t=i[2]),{autoplay:Boolean("yes"===t)}}},jwplayer:{prefix:"jw",findVideos:function(){function i(e){return"function"==typeof e.getConfig?e.getConfig():e.config}function n(t){var n=i(t),r=[e.objPath(n,["file"]),e.objPath(n,["playlistItem","file"]),e.objPath(n,["sources",0,"file"]),e.objPath(n,["playlist",0,"file"]),e.objPath(n,["playlist",0,"sources",0,"file"]),e.objPath(n,["playlist",0,"sources",0,"file"])].concat((e.objPath(n,["playlist",0,"allSources"])||[]).map(function(e){return e&&e.file})).filter(Boolean),a=r[0],o="http://nrj12hls-lh.akamaihd.net/i/nrj12hls_1@579113/master.m3u8",s="http://cherie25hls-lh.akamaihd.net/i/cherie25hls_1@579096/master.m3u8";return a.includes(o)?o:a.includes(s)?s:a}function a(t){var i=e.objPath(t,["image"])||e.objPath(t,["playlist",0,"image"]);return i&&!i.includes("default-PLAY.jpg")?i:void 0}if(!window.jwplayer||"function"!=typeof window.jwplayer)return[];for(var o=[],s=0;Object.keys(window.jwplayer(s)||{}).length>1;){var l=window.jwplayer(s),d=i(l),c=document.getElementById(l.id),u=n(l);if(d&&c&&!l.id.match("ultimedia")&&c.parentNode&&e.hasClass(c,"jwplayer")&&!e.hasClass(c,"jw-flag-live")&&!r(u)&&"LIVE"!==d.streamType){var p=d.pid,h=d.mediaid,f=void 0;if((!p||!h)&&u&&u.match("content.jwplatform.com|jwpsrv.a.ssl.fastly.net"))if(d.playlist instanceof Array)p=p||e.objPath(d,["playlist",0,"player"]),h=h||e.objPath(d,["playlist",0,"mediaid"]);else if(d.playlist instanceof String){var m=/content.jwplatform.com\/jw6\/([a-zA-Z0-9-_]+)\.xml/.exec(d.playlist),y=_slicedToArray(m,2);_=y[0],h=y[1]}f=h||(u?e.createHashFromString(u):null),o.push(new t({element:l.getRenderingMode&&"flash"===l.getRenderingMode()?c.parentNode:c,videoInfo:{title:d.title,thumbnail_url:a(d),provider:"jwplayer",provider_id:f,duration:Math.floor(1e3*d.duration),src:u,provider_specific_params:{version:window.jwplayer.version,syndication:d.key,flashplayer:d.flashplayer,playerId:p,skin:d.skin,file:u,mediaId:h}},config:{jwplayerIndex:s,autoplay:Boolean(d.autostart)}})),s++}else s++}return o}},"brightcove-iframe":{regex:/players.brightcove\.(?:net|com)\/([0-9]+)\/([a-zA-Z0-9-\-:%]+)_([a-zA-Z0-9-\-:%]+)\/index.html\?videoId=([a-zA-Z0-9-\-:%]+)/,prefix:"bci",containerType:"iframe",findVideos:function(){for(var i=this,n=[],r=this.potentialContainers,a=0;a<r.length;a++){var o=r[a],s=this.regex.exec(o.src);if(null!==s&&s.length>=4){var l=s[1],d=s[2],c=s[4],u=e.url.getParams(o.src);n.push(new t({element:o,videoInfo:{provider:"brightcove-iframe",provider_id:c,provider_specific_params:{playerId:d,syndication:l}},config:{autoplay:e.smartBoolean(u.autoplay)}}))}}return i.videos=n,i.generateUniqueIds(),i.videos}},brightcove:{prefix:"bc",regex:/brightcove\.com\/services\/viewer\/.*\?.*video(?:Player|Id)=([a-zA-Z0-9-\-:%]+).*/,provider_specific_params:["flashID","playerID","playerKey","@videoPlayer"],getProviderSpecificParams:function(t){var i=e.url.getParams(t);return{flashID:i.flashID,playerID:i.playerID,playerKey:i.playerKey,"@videoPlayer":i["@videoPlayer"]||i.videoPlayer||i.videoId}},getConfig:function(t){var i=e.url.getParams(t);return{autoplay:e.smartBoolean(i.autoplay)}}},vidible:{prefix:"vd",selecor:".vdb_player",findVideos:function(){function i(e,t){if(e&&e.vdb_Player&&e.vdb_Player.getPlayerInfo()&&e.vdb_Player.getPlayerInfo().video)t(e.vdb_Player,e);else{var i=arguments.callee;setTimeout(function(){i(e,t)},0)}}function n(i,n){var r=i.getPlayerInfo(),o={},s=n.getElementsByTagName("script")[0],l=/.*vidible\.tv.*(pid=[a-zA-Z0-9]+).*(bcid=[a-zA-Z0-9]+)|.*delivery\.vidible\.tv\/jsonp\/(pid=[a-zA-Z0-9]+)?\/(vid=[a-zA-Z0-9]+)?/i,d=l.exec(s.src)||[];d.shift(),d.forEach(function(e){if(e){var t=e.split(/[\/=]/);2===t.length&&(o[t[0]]=t[1])}});var c={};i.div.previousElementSibling&&i.div.previousElementSibling.src&&(c=e.url.getParams(i.div.previousElementSibling.src)),a.push(new t({element:n,videoInfo:{provider:"vidible",provider_id:r.video.videoId||r.video.aolVideoId,provider_specific_params:{syndication:c.sid||n.vdb_Context.id,bcid:r.bcid,pid:o.pid},title:r.video.name,thumbnail_url:r.video.fullsizeThumbnail||r.video.thumbnail},config:{autoplay:e.smartBoolean(c.autoplay)}}))}for(var r=this,a=[],o=this.potentialContainers,s=0;s<o.length;s++){var l=o[s];l&&l.children.length&&i.bind(r)(l,n)}return r.videos=a,r.generateUniqueIds(),r.videos},provider_specific_params:["syndication","bcid","pid"]},kaltura:{selector:".kWidgetIframeContainer",findVideos:function(){var e=[];if(window.hasOwnProperty("kWidget"))for(var i=this.potentialContainers,n=function(){if(a=i[r],!a.evaluate)return"break";o=a.evaluate("{mediaProxy.sources}"),s=/.*\/(p\/[a-zA-Z0-9_-]+).*(?:(uiConfId=[a-zA-Z0-9_-]+)|(entryId\/[a-zA-Z0-9_-]+).*(flavorId\/[a-zA-Z0-9_-]+))/i;var n={};o.length&&(l=s.exec(o[0].src),l&&l.length>=1&&(l.shift(),l.forEach(function(e){if(e){var t=e.split(/[\/=]/);n[t[0]]=t[1]}}),n.uiconfId||(n.uiconfId=Object.keys(window.kWidget.uiConfScriptLoadList)[0]),n.uiconfId&&e.push(new t({element:a,videoInfo:{provider:"kaltura",provider_id:n.entryId||a.evaluate("{mediaProxy.entry.id}"),provider_specific_params:{syndication:a.evaluate("{mediaProxy.entry.partnerId}")||n.p,playerId:n.uiconfId,flavorId:n.flavorId,preferedFlavorBR:a.evaluate("{mediaProxy.preferedFlavorBR}")},thumbnail_url:a.evaluate("{mediaProxy.entry.thumbnailUrl}"),title:a.evaluate("{mediaProxy.entry.name}")},config:{autoplay:a.evaluate("{autoPlay}")}}))))},r=0;r<i.length;r++){var a,o,s,l,d=n();if("break"===d)break}return self.videos=e,self.videos},provider_specific_params:["syndication","playerId"]},theplatform:{regex:/^.*player\.theplatform\.com\/p\/([a-zA-Z0-9]+)\/([a-zA-Z0-9_-]+)\/embed\/select\/([a-zA-Z0-9_]+)?/,prefix:"tp",containerType:"iframe",findVideos:function(){for(var i=this,n=[],r=this.potentialContainers,a=0;a<r.length;a++){var o=r[a],s=this.regex.exec(this.decodeUrl(o.src));if(null!==s&&4===s.length){var l=s[1],d=s[2],c=s[3],u=e.url.getParams(o.src);n.push(new t({element:o,videoInfo:{provider:"theplatform",provider_id:c,src:o.src,provider_specific_params:{playerId:d,syndication:l}},config:{autoplay:e.smartBoolean(u.autoplay)}}))}}return i.videos=n,i.generateUniqueIds(),i.videos}},vjs:{prefix:"vjs",findVideos:function(){var i=[],n={};window.videojs&&(window.videojs.getPlayers?n=window.videojs.getPlayers():window.videojs.players&&(n=window.videojs.players));for(var a in n)if(n.hasOwnProperty(a)&&n[a]&&document.getElementById(n[a].id_)){var o=n[a],s=("undefined"!==o.poster_?o.poster_:void 0)||e.objPath(o,["mediainfo","poster"])||(document.querySelector('meta[property="og:image"]')?document.querySelector('meta[property="og:image"]').content:void 0),l=o.el_||o.c;if(e.isMobile()){l.setAttribute("playsinline",""),l.setAttribute("webkit-playsinline","");var d=l.getElementsByTagName("video");d.length>0&&(d[0].setAttribute("playsinline",""),d[0].setAttribute("webkit-playsinline",""))}var c,u=o.currentSrc()||l.getAttribute("src"),p={};if(c=e.objPath(o,["mediainfo","id"])||e.objPath(o,["tagAttributes","data-video-id"])||l.getAttribute("data-video-id"),!c){if(!u||r(u))continue;c=e.createHashFromString(u),p.file=u}p.tags=e.objPath(o,["mediainfo","tags"]),p.syndication=e.objPath(o,["mediainfo","accountId"])||e.objPath(o,["mediainfo","account_id"])||e.objPath(o,["tagAttributes","data-account"])||l.getAttribute("data-account"),p.playerId=e.objPath(o,["tagAttributes","data-player"])||l.getAttribute("data-player");var h=l.getAttribute("data-tags");if(h)try{p.partnerName=JSON.parse(h).partnerName}catch(f){}var m=e.hasClass(l,"vjs-px-skin")?"pulpixplayer":"videojs",y=new t({element:l,videoInfo:{provider:m,provider_id:c,thumbnail_url:s,src:u,provider_specific_params:p},config:{}});i.push(y)}return self.videos=i,self.videos},provider_specific_params:["file","syndication","playerId"]},iframe:{regex:[/(?:videos-aggregator\.ladtech|www\.public)\.fr\/jwplayer\/embed\/(?!mobile)([a-zA-Z0-9]+)/],prefix:"ifr",containerType:"iframe",getConfig:function(t){var i=e.url.getParams(t);return{autoplay:e.smartBoolean(i.autoplay)}},getProviderSpecificParams:function(e,t){return{}}}};n.prototype.getProviderSpecificParams=function(t){var i=e.url.getParams(t),n={};if(this.provider_specific_params)for(var r=0;r<this.provider_specific_params.length;r++){var a=this.provider_specific_params[r];i[a]&&(n[a]=i[a])}return n},n.prototype.isSupported=function(e){var t=this,n=!1,r=e.src||e.data;r||994!==i.websiteId||(r=e.getAttribute("data-src"));for(var o=0,s=void 0,l=Array.isArray(t.regex)?t.regex:[t.regex];o<l.length&&!s;){if(!(l[o]instanceof RegExp))return!1;if(s=l[o].exec(this.decodeUrl(r)),null!==s&&void 0!==s[1]){var d=s[1];if("videoseries"===d||"subscribe_e"===d)return!1;var c=t.prefix+"."+d,u=document.querySelector('#pulpix[data-source-id="'+c+'"]');if(!u){var p=t.getProviderSpecificParams(r,o),h=t.getConfig(r);h.switchedApiOn=Boolean(h.switchedApiOn||a.includes(e)),h.ads=p.ads,h.jwplayerIndex=p.jwplayerIndex,n={element:e,videoInfo:{provider:t.name,provider_id:d,provider_specific_params:p},config:h},"function"==typeof t.cleanIframeUrl&&t.cleanIframeUrl(e,n)}}o++}return n},n.prototype.findVideos=function(){for(var e=this,i=0;i<this.potentialContainers.length;i++){var n=e.isSupported(this.potentialContainers[i]);n&&e.videos.push(new t(n))}return e.generateUniqueIds(),e.videos},n.prototype.generateUniqueIds=function(){for(var e=0;e<this.videos.length;e++)if(!this.videos[e].element.id){var t=Math.floor((new Date).getTime()/1e3),i=o[this.videos[e].videoInfo.provider].prefix+"-"+this.videos[e].videoInfo.provider_id+"_"+e+"_"+t;this.videos[e].element.id=i,this.videos[e].elementId=i}},n.prototype.decodeUrl=function(e){try{e=decodeURIComponent(e)}catch(t){}return e};var s={},l=["iframe","object"];for(var d in o)o.hasOwnProperty(d)&&(o[d].selector&&l.push(o[d].selector),s[d]=function(){n.apply(this,arguments),this.videos=[]},s[d].prototype=Object.create(n.prototype),s[d].prototype.name=d,s[d].prototype.regex=o[d].regex,s[d].prototype.prefix=o[d].prefix,s[d].prototype.provider_specific_params=o[d].provider_specific_params,o[d].getProviderSpecificParams&&(s[d].prototype.getProviderSpecificParams=o[d].getProviderSpecificParams),o[d].getConfig&&(s[d].prototype.getConfig=o[d].getConfig),o[d].findVideos&&(s[d].prototype.findVideos=o[d].findVideos),o[d].cleanIframeUrl&&(s[d].prototype.cleanIframeUrl=o[d].cleanIframeUrl));var c=null,u=function(){function e(){if(_classCallCheck(this,e),c)return c;c=this;var t=document.getElementById("pulpix");return this.dynamicCheck=t?t.getAttribute("data-dynamic"):!1,this.dynamicCheck=this.dynamicCheck||-1!==[451,453,174,540,542,1,536,643,547,822].indexOf(i.websiteId),this}return _createClass(e,[{key:"reset",value:function(){return this.players=[],this}},{key:"find",value:function(){var e=[],t=this.getPotentialContainers();for(var i in s)if(s.hasOwnProperty(i)){var n=new s[i](t),r=n.findVideos();Array.prototype.push.apply(e,r)}return e=e.filter(function(e){return null===e.element.getAttribute("px-reco")}),this.players=e,this.players}},{key:"getPotentialContainers",value:function(){var e=[];return Array.prototype.push.apply(e,Array.prototype.slice.call(document.querySelectorAll(l.join(",")))),e}}]),e}();return new u});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};pxRequire.define("px-utils",["px-mini-utils"],function(e){var t=function n(e,t){return Boolean(e)&&Boolean(t)&&Array.from(e.childNodes).reduce(function(e,i){return e||t===i||n(i,t)},!1)},i=Object.assign(e,{grep:function(e,t){var i=[],n=e.length,r=0;for(r;n>r;r++){var a=e[r],o=t(a);o&&i.push(a)}return i},extend:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},getElementsByClassName:function(e,t){for(var i=(t||document.body).getElementsByTagName("*"),n=[],r=new RegExp("\\b"+e+"\\b"),a=void 0,o=0,s=i.length;s>o;o++)a=i[o],r.test(a.className)&&n.push(a);return n},getNext:function(e,t){var i=t.nextSibling;return i},setCSS:function(e,t){for(var i in t)e.style[i]=t[i];return e},flashParams:{deserialize:function(e){var t=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}');for(key in t)if(t[key].length&&"{"===t[key][0])try{t[key]=JSON.parse(decodeURIComponent(t[key]))}catch(i){void 0,void 0}return t}},cumulativeOffset:function(e){var t=0,i=0,n=0,r=0,a=e;do t+=e.offsetTop||0,i+=e.offsetLeft||0,e=e.offsetParent;while(e);return n=window.innerHeight-t-a.offsetHeight,r=window.innerWidth-i-a.offsetWidth,{top:t,left:i,bottom:n,right:r}},createDivWithClass:function(e,t){var i=document.createElement("div");return i.setAttribute("class",e),t&&i.setAttribute("id",t),i},checkIdInDOM:function(e){return Boolean(document.getElementById(e))},getUniqueId:function(e){for(;document.getElementById(e);)e+="_0_";return e},prependChild:function(e,t){var i=e.firstChild;i?e.insertBefore(t,i):e.appendChild(t)},isChildNode:t,setAttributes:function(e,t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},addMultipleListeners:function(e,t,i,n,r){if(!(t instanceof Array))throw'addMultipleListeners: please supply an array of eventstrings (like ["click","mouseover"])';for(var a=function(){i.apply(this,r&&r instanceof Array?r:[])},o=0;o<t.length;o+=1)e.addEventListener(t[o],a,n)},loadScript:function(e,t,i){"function"!=typeof t||i||(i=t,t=null),t=t||document.head||document.getElementsByTagName("head")[0];var n=document.createElement("script");n.type="text/javascript",n.src=e,n.async=!0,n.addEventListener?n.addEventListener("load",i,!0):n.onload=i,t.appendChild(n)},wrap:function(e,t){t.length||(t=[t]);for(var i=t.length-1;i>=0;i--){var n=i>0?e.cloneNode(!0):e,r=t[i],a=r.parentNode,o=r.nextSibling;n.appendChild(r),o?a.insertBefore(n,o):a.appendChild(n)}},getMetaWithName:function(e){for(var t=document.getElementsByTagName("meta"),i=0;i<t.length;i++)if(t[i].getAttribute("name")===e)return t[i].getAttribute("content");return""},inArray:function(e,t){return t.indexOf(e)>-1?!0:!1},getScrollPosition:function(){var e=document.documentElement,t=document.body,i=e&&e.scrollLeft||t&&t.scrollLeft||0,n=e&&e.scrollTop||t&&t.scrollTop||0;return[i,n]},isAndroid:function r(){var e=navigator.userAgent.toLowerCase(),r=e.indexOf("android")>-1;return r},serialize:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")},isFirefox:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},isSafari:function a(){var e=navigator.userAgent.toLowerCase(),a=!1;return-1!==e.indexOf("safari")&&!e.indexOf("chrome")>-1&&(a=!0),a},isChrome:function(){var e=window.chrome,t=window.navigator,i=t.vendor,n="undefined"!=typeof window.opr,r=t.userAgent.indexOf("Edge")>-1,a=t.userAgent.match("CriOS");return a?!0:null!==e&&"undefined"!=typeof e&&"Google Inc."===i&&n===!1&&r===!1?!0:!1},cleanUrl:function(e){return!e||this.inArray("http://",e)||this.inArray("https://",e)||(0!==e.indexOf("//")&&(e="//"+e),e="http:"+e),e},replaceTemplateInUrl:function(e,t){var i=this.url.getParams(e);return e=e.split("?")[0],Object.keys(i).forEach(function(e){i[e].match(/{.*}/)&&(t[e]?i[e]=t[e]:delete i[e])}),e+"?"+this.url.serialize(i)},removeFromArrayIfMatchRegex:function(e,t){for(var i=e.length;i--;){var n=e[i];n.match(t)&&e.splice(i,1)}return e},getElementInsideContainer:function(e,t){for(var i={},n=document.getElementById(e).getElementsByTagName("*"),r=0;r<n.length;r++)if(n[r].id===t){i=n[r];break}return i},clone:function(e){if(null==e||"object"!=("undefined"==typeof e?"undefined":_typeof(e)))return e;var t=e.constructor();for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},hideElementsOtherThanElems:function(e){for(var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.document.body,r=n.childNodes,a=[],o=function(n){var o=r[n];if(e.some(function(e){return o===e}))return"continue";if(e.some(function(e){return o.contains(e)})){i.addClass(o,"px-clean-parent"),a.push({element:o,clean:!0});var s=t.hideElementsOtherThanElems(e,o);return s&&(a=a.concat(s)),"continue"}o.style&&("none"!==o.style.display&&a.push({element:o,display:o.style.display}),i.setStyleImportant(o,{display:"none"}))},s=0;s<r.length;s++){o(s)}return a},findHighestZIndex:function(e){for(var t=document.getElementsByTagName(e),i=0,n=0;n<t.length;n++){var r=document.defaultView.getComputedStyle(t[n],null).getPropertyValue("z-index");r=parseInt(r,10),r>i&&"auto"!==r&&(i=r)}return i},getParamsFromUrl:function(e){var t=e.split("?"),i={};return 2===t.length&&(i=this.url.deserialize(decodeURIComponent(t[1]))),i},getLocation:function(e){var t=document.createElement("a");return t.href=e,t},getNextSiblings:function(e,t){for(var i=[];e=e.nextSibling;)(!t||t(e))&&i.push(e);return i},isIE:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");return t>0||navigator.userAgent.match(/Trident.*rv\:11\./)?!0:!1},setMobileStyle:function(e){e.getAttribute("px-style")||e.setAttribute("px-style",e.getAttribute("style")),this.setStyleImportant(e,{position:"fixed",width:"100%",height:"100%",
"max-height":"100%",top:"0",left:"0","z-index":"99999999999"})},removeMobileStyle:function(e){e.getAttribute("px-style")&&(e.setAttribute("style",e.getAttribute("px-style")),e.removeAttribute("px-style"))},arrayEquals:function(e,t){if(!e)return!1;if(e.length!==t.length)return!1;for(var i=0,n=t.length;n>i;i++)if(e[i]instanceof Array&&t[i]instanceof Array){if(!e[i].equals(t[i]))return!1}else if(e[i]!==t[i])return!1;return!0},time:{timeToReadableFormat:function(e,t){var i={millisecond:function(){var t=Math.floor(e/6e4),i=(e%6e4/1e3).toFixed(0);return t+":"+(10>i?"0":"")+i}};return i[t]()},parseReadableFormat:function(e){if(!i.time.isReadableFormat(e))throw new Error("<formattedTime> must be a string with format HH:MM:SS or MM:SS");var t=e.split(":");2===t.length&&t.splice(0,0,0);var n=60*parseInt(t[0],10)*60+60*parseInt(t[1],10)+parseInt(t[2],10);return 1e3*n},isReadableFormat:function(e){var t=!1;return"string"==typeof e&&(t=/^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9](\.[0-9]*)?)?$/.test(e)),t}},findLanguage:function(){var e=document.querySelector("html").getAttribute("lang")||navigator.language||navigator.browserLanguage;return e&&(e=e.split("-")[0]),["en","fr","es"].includes(e)||(e="en"),e},getOrDefault:function(e,t){return void 0===e?t:e},strFormat:function(e,t){return e.replace(/{([^{}]*)}/g,function(e,i){var n=t[i];return"string"==typeof n||"number"==typeof n?n:e})},setFibonacciInterval:function(e,t){if("[object Array]"!==Object.prototype.toString.call(t)||t.length<2)throw new Error("<delay> must be an Array with 2 values");var i,n=!0,r=t;return t=r[0],function a(e,t){return i=setTimeout(function(){e();var t=r[0]+r[1];r.shift(),r.push(t),n===!0&&a(e,r[0])},t),{clear:function(){clearTimeout(i),n=!1,r=[]},delay:function(){return r[0]}}}(e,t)},encodeURIComponentWithRule:function(e,t){var i=e.match(t)||[],n=[],r=e;return i.forEach(function(e){var t=r.split(e);r=t[1];var i=encodeURIComponent(t[0])+e;n.push(i)}),r&&n.push(encodeURIComponent(r)),n.join("")},setOrRemoveAttribute:function(e,t,i){i?e.setAttribute(t,i):e.removeAttribute(t)},getStyleForElementProperty:function(e,t){var i=document.querySelector(e);return i?window.getComputedStyle(i)[t]:void 0},addCss:function(e){var t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),t.appendChild(i)},animate:function(e,t,i,n){function r(t,i){t=t||(new Date).getTime();var a=t-d,o=a/i;o=Math.min(o,1);var u=c*s(o)+e;n(u),i>a&&l(function(e){r(e,i)})}var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"smooth",o={linear:function(e){return e},smooth:function(e){return.5>e?2*e*e:-1+(4-2*e)*e}},s=o[a],l=window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.ORequestAnimationFrame||window.msRequestAnimationFrame,d=void 0,c=t-e;l(function(e){d=e||(new Date).getTime(),r(e,i)})},isTabActive:function(){var e;return"undefined"!=typeof document.hidden?e="hidden":"undefined"!=typeof document.msHidden?e="msHidden":"undefined"!=typeof document.webkitHidden&&(e="webkitHidden"),!document[e]},objectEqual:function(e,t){var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++){var o=n[a];if("object"===_typeof(e[o])&&"object"===_typeof(t[o])){var s=i.objectEqual(e[o],t[o]);if(!s)return!1}else if(e[o]!==t[o])return!1}return!0},isInFullscreen:function(){return Boolean(window.fullScreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)},exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},requestFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}});return i});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("event-machine",["px-utils"],function(e){var t=function(){function t(e){_classCallCheck(this,t),this.__eventTarget=e||document.createTextNode(null),this.__onceTriggeredEvents=[]}return _createClass(t,[{key:"on",value:function(e,t){this.__eventTarget.addEventListener?this.__eventTarget.addEventListener(e,t):this.__eventTarget["on"+e]=t}},{key:"off",value:function(e,t){this.__eventTarget.removeEventListener?this.__eventTarget.removeEventListener(e,t):delete this.__eventTarget["on"+e]}},{key:"one",value:function(e,t){var i=this,n=function r(n){return i.off(e,r),t(n)};this.on(e,n)}},{key:"trigger",value:function(e,t){if(e){var i=void 0;return"function"==typeof window.CustomEvent?i=new window.CustomEvent(e):document.createEvent?(i=document.createEvent("HTMLEvents"),i.initEvent(e,!0,!0)):document.createEventObject&&(i=document.createEventObject(),i.eventType=e),i.player=this.__player,Object.defineProperty(i,"detail",{enumerable:!1,configurable:!1,writable:!1,value:t}),i.pxPlayer=!0,this.__eventTarget.dispatchEvent?this.__eventTarget.dispatchEvent(i):this.__eventTarget[e]?this.__eventTarget[e]():this.__eventTarget["on"+e]&&this.__eventTarget["on"+e](),e}}},{key:"triggerOnce",value:function(t,i){return e.inArray(t,this.__onceTriggeredEvents)?void 0:(this.__onceTriggeredEvents.push(t),this.trigger(t,i))}},{key:"attachPlayer",value:function(e){return this.__player=e,this.__onceTriggeredEvents=[],this}}]),t}();return t});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("state-machine",["px-utils","event-machine"],function(e,t){var i=function(){function i(e,n,r,a){_classCallCheck(this,i),this.__debug=a,this.__states=this.__normalizeStates(n),this.__listenTarget=e.listen,this.__triggerTarget=e.trigger,this.__stateChangeTarget=new t,this.__setListeners(),this.__initialState=this.findState(r)||this.__states[0],this.__isActive=!1,this.__currentState=this.__initialState}return _createClass(i,[{key:"findState",value:function(e){return this.__states.find(function(t){return e===t.name})}},{key:"currentStateName",value:function(){return(this.__currentState||{}).name}},{key:"isInState",value:function(e){return this.currentStateName()===e}},{key:"onGoToState",value:function(e,t){this.__stateChangeTarget.one("goTo"+e,t)}},{key:"activate",value:function(){this.__isActive=!0}},{key:"deactivate",value:function(){this.__isActive=!1}},{key:"reset",value:function(e){var t=this,i=this.__currentState.transitions.find(function(e){return t.__initialState.name===e.to()});return this.__transitionTo(this.__initialState,e,i),this.deactivate(),this}},{key:"hardReset",value:function(){return this.__listenTarget.reset(),this.__triggerTarget.reset(),this.removeListeners(),this.reset(),this.__setListeners(),this}},{key:"__normalizeStates",value:function(e){var t=this;return e.map(function(e){return e.transitions=e.transitions||[],e.subMachines=e.subMachines||[],e.freezeMachines=e.freezeMachines||[],e.transitions.map(function(e){return e.on=t.__normalizeListeners(e.on||[]),e.triggers=t.__normalizeTriggers(e.triggers||[]),e["if"]=e["if"]||function(){return!0},"function"!=typeof e.to&&(e._to=e.to,e.to=function(){return e._to}),e}),e.triggersIn=t.__normalizeTriggers(e.triggersIn),e.triggersOut=t.__normalizeTriggers(e.triggersOut),e})}},{key:"__normalizeListeners",value:function(e){return e.reduce(function(e,t){return 0===t.indexOf("*_")?e.concat(["video","ad","generic"].map(function(e){return t.replace(/^\*/,e)})):e.concat(t)},[])}},{key:"__normalizeTriggers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(function(e){return"function"==typeof e||"string"==typeof e?{name:e,unique:!1}:e})}},{key:"__uniqueListeners",value:function(){return this.__states.reduce(function(e,t){return e.concat(t.transitions.reduce(function(e,t){return e.concat(t.on)},[]))},[]).filter(function(e,t,i){return i.indexOf(e)===t})}},{key:"__setListeners",value:function(){var e=this;this.__activeEventNames=this.__uniqueListeners(),this.__activeEventNames.forEach(function(t){e.__listenTarget.on(t,function(t){e.__onEventGoToState(t.type)})})}},{key:"__onEventGoToState",value:function(t){if(this.__isActive&&this.__currentState.transitions.length&&e.inArray(t,this.__activeEventNames)){var i=this.__currentState.transitions.find(function(i){return e.inArray(t,i.on)&&i["if"](t)});if(i){var n=this.findState(i.to(t));this.__transitionTo(n,t,i)}}}},{key:"__transitionTo",value:function(e,t,i){if(e){var n=this.__currentState;n.freezeMachines.forEach(function(e){e.activate()}),n.subMachines.forEach(function(e){e.reset(t)}),this.__currentState=e;var r=n.triggersOut.concat(i?i.triggers:[]).concat(e.triggersIn);e.subMachines.forEach(function(e){e.activate()}),e.freezeMachines.forEach(function(e){e.deactivate()}),this.__stateChangeTarget.trigger("goTo"+e.name);var a=this.__triggerEvents(r,t);e.name!==n.name?void 0:void 0}}},{key:"__triggerEvents",value:function(e,t){var i=this;return e.map(function(e){var n="function"==typeof e.name?e.name(t):e.name;return e.unique?i.__triggerTarget.triggerOnce(n):i.__triggerTarget.trigger(n)}).filter(Boolean)}}]),i}();return i});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("ad-viewability-tracker",[],function(){var e=2e3,t=200,i=function(){function i(e){_classCallCheck(this,i),this.player=e,this.init(),this.delay=200}return _createClass(i,[{key:"init",value:function(){var i=this;this.counter=0,this.player.isVisible()&&(this.counter=1),this.interval=setInterval(function(){return-1===["preroll","midroll","postroll"].indexOf(i.player.getState())?void i.clear():void(i.player.isVisible()?(i.counter++,i.counter>=e/t&&(i.player.__externalEventTarget.trigger("viewable_ad_impression"),i.clear())):i.counter=0)},t)}},{key:"clear",value:function(){this.counter=0,clearInterval(this.interval)}}]),i}();return i}),pxRequire.define("element-sizer",[],function(){function e(e){this.element=e}return e.prototype.get=function(e){var t=this,i=function(){var i=void 0,n=function(){if(t.element){var n=t.element.offsetWidth,r=t.element.offsetHeight,a=t.element.offsetTop,o=t.element.offsetLeft;n&&r&&(clearInterval(i),e(n,r,a,o))}};i=setInterval(n,500),n(),setTimeout(function(){clearInterval(i)},5e3)};if(t.element){var n=t.element.offsetWidth,r=t.element.offsetHeight,a=t.element.offsetTop,o=t.element.offsetLeft;0===n||0===r||0===a||0===o?i():e(n,r,a,o)}else i()},e.prototype.getById=function(e,t){this.element=document.getElementById(e),this.getDimensions(t)},e});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("element-position-binder",["element-sizer","px-utils"],function(e,t){var i=function(){function i(e,t){return _classCallCheck(this,i),e.pxPositionBinder?e.pxPositionBinder:(this.$sourceEl=e,this.targetEls=[],this.callbacks={},this._lastDims=void 0,void(this.delay=t||500))}return _createClass(i,[{key:"bind",value:function(t,i){var n=this;this.targetEls.push(t),this.callbacks[this.targetEls.length-1]=i,this.$sourceEl.pxPositionBinder=this,this.sizer=new e(this.$sourceEl),this.updatePosition(!0),1===this.targetEls.length&&(this.myInterval=setInterval(function(){n.updatePosition()},this.delay))}},{key:"update",value:function(e){e.pxPositionBinder=this,this.$sourceEl=e,this.sizer.element=e}},{key:"unbind",value:function(e){var t=this.targetEls.indexOf(e);t>-1&&(this.targetEls.splice(t,1),delete this.callbacks[t]),this.targetEls.length||clearInterval(this.myInterval)}},{key:"getBoundElements",value:function(){return this.targetEls}},{key:"_hasDimensionChanged",value:function(e,t){e=e||{};for(var i=["top","left","height","width"],n=0;n<i.length;n++)if(e[i[n]]!==t[i[n]])return!0;return!1}},{key:"updatePosition",value:function(e){var i=this;this.sizer.get(function(n,r,a,o){i.$sourceEl.marginBottomHeight&&(r-=i.$sourceEl.marginBottomHeight);var s={width:n,height:r,top:a,left:o};(e||i._hasDimensionChanged(i._lastDims,s))&&(i._lastDims=s,i.targetEls.forEach(function(e,s){t.setStyleImportant(e,{width:n+"px",height:r+"px",top:a+"px",left:o+"px",position:"fixed"===window.getComputedStyle(i.$sourceEl).getPropertyValue("position")?"fixed":"absolute"}),i.callbacks[s]&&i.callbacks[s](n,r,a,o)}))})}}]),i}();return i});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("call-to-action",["px-utils","element-position-binder"],function(e,t){var i={fr:"Sponsorisée par ",en:"Sponsored by ",es:"Patrocinado por "},n={fr:"Voir",en:"See",es:"Ver"},r=function(){function r(t){var i=this;_classCallCheck(this,r),this.player=t,this.userLanguage=e.findLanguage(),this._shouldRender()&&this.player.one("start",function(){i._rendered||i._render()})}return _createClass(r,[{key:"_render",value:function(){var t=this,i=void 0;this.$el=document.createElement("div"),this.$el.className="header-overlay-container",i=this.player.$el.parentNode,this._buildBinder(),this.$link=document.createElement("span"),this.$link.target="_blank",this.$link.className="header-overlay-cta",this.$el.appendChild(this.$link),this.$title=document.createElement("div"),this.$title.target="_blank",this.$title.className="px-header-overlay-title",this.$title.innerHTML='<div class="px-header-overlay-title-info-container"><div class="px-header-overlay-title-info"><img class="px-header-overlay-title-icon"></img><span class="px-header-overlay-title-text"><span class="title-line"></span><span class="description"></spam></span></div></div>',this.$titleIcon=this.$title.querySelector(".px-header-overlay-title-icon"),this.$titleTextContainer=this.$title.querySelector(".px-header-overlay-title-text .title-line"),this.$titleDescription=this.$title.querySelector(".px-header-overlay-title-text span.description"),this.$el.appendChild(this.$title),this._updateLink(),this._updateTitle(),i.appendChild(this.$el),this._rendered=!0,this.$el.addEventListener("click",function(){window.open(t.player.videoInfo.sponsoredParams.clickThrough),e.objPath(t.player.config,["trackingEndpoints","clickTracking"]||[]).forEach(function(t){e.pixelTrack(t)}),t.player._nativePause()})}},{key:"_shouldRender",value:function(){return this._needsTitle()||this._needsLink()}},{key:"_needsLink",value:function(){return Boolean(e.objPath(this.player.videoInfo,["sponsoredParams","clickThrough"]))}},{key:"_needsTitle",value:function(){return Boolean("outstream_player"===this.player.config.analyticsParams.slot||this.player.videoInfo.sponsoredParams)}},{key:"update",value:function(e){this.player=e,!this._rendered&&this._shouldRender()&&this._render(),this._rendered&&(this._updateLink(),this._updateTitle())}},{key:"showTitle",value:function(){e.addClass(this.$el,"px-header-overlay-title-visible")}},{key:"hideTitle",value:function(){e.removeClass(this.$el,"px-header-overlay-title-visible")}},{key:"dispose",value:function(){this._rendered&&(this._unbindBinder(),this.$el.parentNode.removeChild(this.$el))}},{key:"_updateLink",value:function(){return this._needsLink()?(this.$link.textContent=this.player.videoInfo.sponsoredParams.callToAction||n[e.findLanguage()],void e.addClass(this.$el,"px-header-overlay-cta-visible")):void e.removeClass(this.$el,"px-header-overlay-cta-visible")}},{key:"_updateTitle",value:function(){return this._needsTitle()?(this.$titleTextContainer.textContent=this.player.videoInfo.title,this.player.videoInfo.logo_icon_url?(this.$titleIcon.src=this.player.videoInfo.logo_icon_url,e.removeClass(this.$titleIcon,"px-hide")):e.addClass(this.$titleIcon,"px-hide"),this.player.videoInfo.sponsoredParams&&(this.$titleTextContainer.innerHTML+='<span class="sponsored">'+i[this.userLanguage]+this.player.videoInfo.sponsoredParams.sponsor+'<a class="player-header-ad-choice px-cleanslate" href="'+this.player.videoInfo.sponsoredParams.privacy+'" target="_blank"><img src="'+this.player.videoInfo.sponsoredParams.dsp_icon+'" class="px-ad-choice-logo"></a></span>'),this.player.videoInfo.description?this.$titleDescription.innerHTML=this.player.videoInfo.description:this.$titleDescription.innerHTML="",void(this.player.videoInfo.description||this.player.videoInfo.sponsoredParam||(this.$titleDescription.textContent="",e.removeClass(this.$el,"px-header-overlay-title-visible")))):void e.removeClass(this.$el,"px-header-overlay-title-visible")}},{key:"_buildBinder",value:function(){var i=this;this._binder=this.player.$el.pxPositionBinder||new t(this.player.$el),this._binder.bind(this.$el,function(t,n){var r=window.getComputedStyle(i.player.$el),a=i._needsLink()?parseInt(r.getPropertyValue("height").replace("px",""),10)-80+"px":"60px";e.setStyleImportant(i.$el,{"max-height":a,"z-index":i.player.$el.style.zIndex||"9999"}),e.removeClass(i.$el,"px-xs-video"),e.removeClass(i.$el,"px-sm-video"),e.removeClass(i.$el,"px-medium-video"),400>t||300>n?e.addClass(i.$el,"px-xs-video"):600>t||500>n?e.addClass(i.$el,"px-sm-video"):e.addClass(i.$el,"px-medium-video")})}},{key:"_unbindBinder",value:function(){this._binder.unbind(this.player.$el)}}]),r}();return r}),function(e){var t="object"==typeof exports&&exports,i="object"==typeof module&&module&&module.exports==t&&module,n="object"==typeof global&&global;(n.global===n||n.window===n)&&(e=n);var r=function(e){this.message=e};r.prototype=new Error,r.prototype.name="InvalidCharacterError";var a=function(e){throw new r(e)},o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=/[\t\n\f\r ]/g,l=function(e){e=String(e).replace(s,"");var t=e.length;t%4==0&&(e=e.replace(/==?$/,""),t=e.length),(t%4==1||/[^+a-zA-Z0-9\/]/.test(e))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var i,n,r=0,l="",d=-1;++d<t;)n=o.indexOf(e.charAt(d)),i=r%4?64*i+n:n,r++%4&&(l+=String.fromCharCode(255&i>>(-2*r&6)));return l},d=function(e){e=String(e),/[^\0-\xFF]/.test(e)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var t,i,n,r,s=e.length%3,l="",d=-1,c=e.length-s;++d<c;)t=e.charCodeAt(d)<<16,i=e.charCodeAt(++d)<<8,n=e.charCodeAt(++d),r=t+i+n,l+=o.charAt(r>>18&63)+o.charAt(r>>12&63)+o.charAt(r>>6&63)+o.charAt(63&r);return 2==s?(t=e.charCodeAt(d)<<8,i=e.charCodeAt(++d),r=t+i,l+=o.charAt(r>>10)+o.charAt(r>>4&63)+o.charAt(r<<2&63)+"="):1==s&&(r=e.charCodeAt(d),l+=o.charAt(r>>2)+o.charAt(r<<4&63)+"=="),l},c={encode:d,decode:l,version:"0.1.0"};if("function"==typeof pxRequire.define&&"object"==typeof pxRequire.define.amd&&pxRequire.define.amd)pxRequire.define("base-64",[],function(){return c});else if(t&&!t.nodeType)if(i)i.exports=c;else for(var u in c)c.hasOwnProperty(u)&&(t[u]=c[u]);else e.base64=c}(this),pxRequire.define("utils/definitions",["require","exports","module"],function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=(Array.from||function(){var e=function(e){return"function"==typeof e},t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},i=Math.pow(2,53)-1,r=function(e){var n=t(e);return Math.min(Math.max(n,0),i)},a=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf("undefined"==typeof e?"undefined":n(e))>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},o=function(t,i){if(null!=t&&null!=i){var n=t[i];if(null==n)return;if(!e(n))throw new TypeError(n+" is not a function");return n}},s=function(e){var t=e.next(),i=Boolean(t.done);return i?!1:t};return function(t){var i,n=this,l=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof l){if(!e(l))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}var d,c,u=o(t,a(t));if(void 0!==u){d=e(n)?Object(new n):[];var p=u.call(t);if(null==p)throw new TypeError("Array.from requires an array-like or iterable object");c=0;for(var h,f;;){if(h=s(p),!h)return d.length=c,d;f=h.value,l?d[c]=l.call(i,f,c):d[c]=f,c++}}else{var m=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var y=r(m.length);d=e(n)?Object(new n(y)):new Array(y),c=0;for(var v;y>c;)v=m[c],l?d[c]=l.call(i,v,c):d[c]=v,c++;d.length=y}return d}}(),6),a={1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(e){return e.maxVendorId},validator:function(e){return!e.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(e){return e.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(e){return e.isRange}},{name:"vendorRangeList",type:"list",listCount:function(e){return e.numEntries},validator:function(e){return e.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(e){return e.isRange}}]}]}};i.exports={versionNumBits:r,vendorVersionMap:a}}),pxRequire.define("utils/bits",["require","exports","module","base-64","./definitions"],function(e,t,i){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return I(e)}function r(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",i="",n=0;e>n;n+=1)i+=t;return i}function a(e,t){return r(Math.max(0,t))+e}function o(e,t){return e+r(Math.max(0,t))}function s(e,t){var i="";return"number"!=typeof e||isNaN(e)||(i=parseInt(e,10).toString(2)),t>=i.length&&(i=a(i,t-i.length)),i.length>t&&(i=i.substring(0,t)),i}function l(e){return s(e===!0?1:0,1)}function d(e,t){return e instanceof Date?s(e.getTime()/100,t):s(e,t)}function c(e,t){return s(e.toUpperCase().charCodeAt(0)-65,t)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return c(e.slice(0,1),t/2)+c(e.slice(1),t/2)}function p(e,t,i){return parseInt(e.substr(t,i),2)}function h(e,t,i){return new Date(100*p(e,t,i))}function f(e,t){return 1===parseInt(e.substr(t,1),2)}function m(e){var t=p(e);return String.fromCharCode(t+65).toLowerCase()}function y(e,t,i){var n=e.substr(t,i);return m(n.slice(0,i/2))+m(n.slice(i/2))}function v(e){var t=e.input,i=e.field,n=i.name,r=i.type,a=i.numBits,c=i.encoder,p=i.validator;if("function"==typeof p&&!p(t))return"";if("function"==typeof c)return c(t);var h="function"==typeof a?a(t):a,f=t[n],m=null===f||void 0===f?"":f;switch(r){case"int":return s(m,h);case"bool":return l(m);case"date":return d(m,h);case"bits":return o(m,h-m.length).substring(0,h);case"list":return m.reduce(function(e,t){return e+g({input:t,fields:i.fields})},"");case"language":return u(m,h);default:throw new Error("ConsentString - Unknown field type "+r+" for encoding")}}function g(e){var t=e.input,i=e.fields;return i.reduce(function(e,i){return e+=v({input:t,field:i})},"")}function _(e){var t=e.input,i=e.output,r=e.startPosition,a=e.field,o=a.type,s=a.numBits,l=a.decoder,d=a.validator,c=a.listCount;if("function"==typeof d&&!d(i))return{newPosition:r};if("function"==typeof l)return l(t,i,r);var u="function"==typeof s?s(i):s,m=0;switch("function"==typeof c?m=c(i):"number"==typeof c&&(m=c),o){case"int":return{fieldValue:p(t,r,u)};case"bool":return{fieldValue:f(t,r)};case"date":return{fieldValue:h(t,r,u)};case"bits":return{fieldValue:t.substr(r,u)};case"list":return new Array(m).fill().reduce(function(e){var i=b({input:t,fields:a.fields,startPosition:e.newPosition}),r=i.decodedObject,o=i.newPosition;return{fieldValue:[].concat(n(e.fieldValue),[r]),newPosition:o}},{fieldValue:[],newPosition:r});case"language":return{fieldValue:y(t,r,u)};default:throw new Error("ConsentString - Unknown field type "+o+" for decoding")}}function b(e){var t=e.input,i=e.fields,n=e.startPosition,r=void 0===n?0:n,a=r,o=i.reduce(function(e,i){var n=i.name,r=i.numBits,o=_({input:t,output:e,startPosition:a,field:i}),s=o.fieldValue,l=o.newPosition;return void 0!==s&&(e[n]=s),void 0!==l?a=l:"number"==typeof r&&(a+=r),e},{});return{decodedObject:o,newPosition:a}}function w(e,t){var i=e.version;if("number"!=typeof i)throw new Error("ConsentString - No version field to encode");if(t[i]){var n=t[i].fields;return g({input:e,fields:n})}throw new Error("ConsentString - No definition for version "+i)}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,i=w(e,t);if(i){for(var n=o(i,7-(i.length+7)%8),r="",a=0;a<n.length;a+=8)r+=String.fromCharCode(parseInt(n.substr(a,8),2));return E.encode(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}return null}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,i=p(e,0,S);if("number"!=typeof i)throw new Error("ConsentString - Unknown version number in the string to decode");if(!j[i])throw new Error("ConsentString - Unsupported version "+i+" in the string to decode");var n=t[i].fields,r=b({input:e,fields:n}),a=r.decodedObject;return a}function P(e,t){for(var i=e;i.length%4!==0;)i+="=";i=i.replace(/-/g,"+").replace(/_/g,"/");for(var n=E.decode(i),r="",o=0;o<n.length;o+=1){var s=n.charCodeAt(o).toString(2);r+=a(s,8-s.length)}return k(r,t)}function T(e){return e.split("").reduce(function(e,t,i){return"1"===t&&-1===e.indexOf(i+1)&&e.push(i+1),e},[])}var C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I=Array.from||function(){var e=function(e){return"function"==typeof e},t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},i=Math.pow(2,53)-1,n=function(e){var n=t(e);return Math.min(Math.max(n,0),i)},r=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf("undefined"==typeof e?"undefined":C(e))>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},a=function(t,i){if(null!=t&&null!=i){var n=t[i];if(null==n)return;if(!e(n))throw new TypeError(n+" is not a function");return n}},o=function(e){var t=e.next(),i=Boolean(t.done);return i?!1:t};return function(t){var i,s=this,l=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof l){if(!e(l))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}var d,c,u=a(t,r(t));if(void 0!==u){d=e(s)?Object(new s):[];var p=u.call(t);if(null==p)throw new TypeError("Array.from requires an array-like or iterable object");c=0;for(var h,f;;){if(h=o(p),!h)return d.length=c,d;f=h.value,l?d[c]=l.call(i,f,c):d[c]=f,c++}}else{var m=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var y=n(m.length);d=e(s)?Object(new s(y)):new Array(y),c=0;for(var v;y>c;)v=m[c],l?d[c]=l.call(i,v,c):d[c]=v,c++;d.length=y}return d}}(),E=e("base-64"),A=e("./definitions"),S=A.versionNumBits,j=A.vendorVersionMap;i.exports={padRight:o,padLeft:a,encodeField:v,encodeDataToBits:w,encodeIntToBits:s,encodeBoolToBits:l,encodeDateToBits:d,encodeLanguageToBits:u,encodeLetterToBits:c,encodeToBase64:x,decodeBitsToIds:T,decodeBitsToInt:p,decodeBitsToDate:h,decodeBitsToBool:f,decodeBitsToLanguage:y,decodeBitsToLetter:m,decodeFromBase64:P}}),pxRequire.define("encode",["require","exports","module","./utils/bits"],function(e,t,i){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return c(e)}function r(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i="",n=1;e>=n;n+=1)i+=-1!==t.indexOf(n)?"1":"0";return h(i,Math.max(0,e-i.length))}function a(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,i=Math.max.apply(Math,[0].concat(n(e.map(function(e){var t=e.id;return t})),n(c(t)))),r="",a=1;i>=a;a+=1)r+=-1!==t.indexOf(a)?"1":"0";return r}function o(e,t){var i=[],r=e.map(function(e){return e.id});return e.reduce(function(a,o,s){var l=o.id;if(-1!==t.indexOf(l)&&i.push(l),(-1===t.indexOf(l)||s===e.length-1||-1===r.indexOf(l+1))&&i.length){var d=i.shift(),c=i.pop();return i=[],[].concat(n(a),[{isRange:"number"==typeof c,startVendorId:d,endVendorId:c}])}return a},[])}function s(e){var t=e.maxVendorId,i=e.vendorList,n=void 0===i?{}:i,s=e.allowedPurposeIds,l=e.allowedVendorIds,c=n.vendors,u=void 0===c?[]:c,h=n.purposes,f=void 0===h?[]:h;t||(t=0,u.forEach(function(e){e.id>t&&(t=e.id)}));var m=p(d({},e,{maxVendorId:t,purposeIdBitString:a(f,s),isRange:!1,vendorIdBitString:r(t,l)})),y=o(u,l),v=p(d({},e,{maxVendorId:t,purposeIdBitString:a(f,s),isRange:!0,defaultConsent:!1,numEntries:y.length,vendorRangeList:y}));return m.length<v.length?m:v}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},c=Array.from||function(){var e=function(e){return"function"==typeof e},t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},i=Math.pow(2,53)-1,n=function(e){var n=t(e);return Math.min(Math.max(n,0),i)},r=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf("undefined"==typeof e?"undefined":l(e))>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},a=function(t,i){if(null!=t&&null!=i){var n=t[i];if(null==n)return;if(!e(n))throw new TypeError(n+" is not a function");return n}},o=function(e){var t=e.next(),i=Boolean(t.done);return i?!1:t};return function(t){var i,s=this,l=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof l){if(!e(l))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}var d,c,u=a(t,r(t));if(void 0!==u){d=e(s)?Object(new s):[];var p=u.call(t);if(null==p)throw new TypeError("Array.from requires an array-like or iterable object");
c=0;for(var h,f;;){if(h=o(p),!h)return d.length=c,d;f=h.value,l?d[c]=l.call(i,f,c):d[c]=f,c++}}else{var m=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var y=n(m.length);d=e(s)?Object(new s(y)):new Array(y),c=0;for(var v;y>c;)v=m[c],l?d[c]=l.call(i,v,c):d[c]=v,c++;d.length=y}return d}}(),u=e("./utils/bits"),p=u.encodeToBase64,h=u.padRight;i.exports={convertVendorsToRanges:o,encodeConsentString:s}}),pxRequire.define("decode",["require","exports","module","./utils/bits"],function(e,t,i){"use strict";function n(e){var t=s(e),i=t.version,n=t.cmpId,r=t.vendorListVersion,a=t.purposeIdBitString,l=t.maxVendorId,d=t.created,c=t.lastUpdated,u=t.isRange,p=t.defaultConsent,h=t.vendorIdBitString,f=t.vendorRangeList,m=t.cmpVersion,y=t.consentScreen,v=t.consentLanguage,g={version:i,cmpId:n,vendorListVersion:r,allowedPurposeIds:o(a),maxVendorId:l,created:d,lastUpdated:c,cmpVersion:m,consentScreen:y,consentLanguage:v};if(u){var _=f.reduce(function(e,t){for(var i=t.isRange,n=t.startVendorId,r=t.endVendorId,a=i?r:n,o=n;a>=o;o+=1)e[o]=!0;return e},{});g.allowedVendorIds=[];for(var b=0;l>=b;b+=1)(p&&!_[b]||!p&&_[b])&&-1===g.allowedVendorIds.indexOf(b)&&g.allowedVendorIds.push(b)}else g.allowedVendorIds=o(h);return g}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(Array.from||function(){var e=function(e){return"function"==typeof e},t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},i=Math.pow(2,53)-1,n=function(e){var n=t(e);return Math.min(Math.max(n,0),i)},a=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf("undefined"==typeof e?"undefined":r(e))>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},o=function(t,i){if(null!=t&&null!=i){var n=t[i];if(null==n)return;if(!e(n))throw new TypeError(n+" is not a function");return n}},s=function(e){var t=e.next(),i=Boolean(t.done);return i?!1:t};return function(t){var i,r=this,l=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof l){if(!e(l))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}var d,c,u=o(t,a(t));if(void 0!==u){d=e(r)?Object(new r):[];var p=u.call(t);if(null==p)throw new TypeError("Array.from requires an array-like or iterable object");c=0;for(var h,f;;){if(h=s(p),!h)return d.length=c,d;f=h.value,l?d[c]=l.call(i,f,c):d[c]=f,c++}}else{var m=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var y=n(m.length);d=e(r)?Object(new r(y)):new Array(y),c=0;for(var v;y>c;)v=m[c],l?d[c]=l.call(i,v,c):d[c]=v,c++;d.length=y}return d}}(),e("./utils/bits")),o=a.decodeBitsToIds,s=a.decodeFromBase64;i.exports={decodeConsentString:n}}),pxRequire.define("consent-string",["require","exports","module","./encode","./decode","./utils/definitions"],function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=(Array.from||function(){var e=function(e){return"function"==typeof e},t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},i=Math.pow(2,53)-1,n=function(e){var n=t(e);return Math.min(Math.max(n,0),i)},a=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf("undefined"==typeof e?"undefined":r(e))>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},o=function(t,i){if(null!=t&&null!=i){var n=t[i];if(null==n)return;if(!e(n))throw new TypeError(n+" is not a function");return n}},s=function(e){var t=e.next(),i=Boolean(t.done);return i?!1:t};return function(t){var i,r=this,l=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof l){if(!e(l))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}var d,c,u=o(t,a(t));if(void 0!==u){d=e(r)?Object(new r):[];var p=u.call(t);if(null==p)throw new TypeError("Array.from requires an array-like or iterable object");c=0;for(var h,f;;){if(h=s(p),!h)return d.length=c,d;f=h.value,l?d[c]=l.call(i,f,c):d[c]=f,c++}}else{var m=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var y=n(m.length);d=e(r)?Object(new r(y)):new Array(y),c=0;for(var v;y>c;)v=m[c],l?d[c]=l.call(i,v,c):d[c]=v,c++;d.length=y}return d}}(),e("./encode")),s=o.encodeConsentString,l=e("./decode"),d=l.decodeConsentString,c=e("./utils/definitions"),u=c.vendorVersionMap,p=/^[a-z]{2}$/,h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n(this,e),this.created=new Date,this.lastUpdated=new Date,this.version=1,this.vendorList=null,this.vendorListVersion=null,this.cmpId=null,this.cmpVersion=null,this.consentScreen=null,this.consentLanguage=null,this.allowedPurposeIds=[],this.allowedVendorIds=[],t&&Object.assign(this,d(t))}return a(e,[{key:"getConsentString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!0;if(!this.vendorList)throw new Error("ConsentString - A vendor list is required to encode a consent string");return e===!0&&(this.lastUpdated=new Date),s({version:this.getVersion(),vendorList:this.vendorList,allowedPurposeIds:this.allowedPurposeIds,allowedVendorIds:this.allowedVendorIds,created:this.created,lastUpdated:this.lastUpdated,cmpId:this.cmpId,cmpVersion:this.cmpVersion,consentScreen:this.consentScreen,consentLanguage:this.consentLanguage,vendorListVersion:this.vendorListVersion})}},{key:"getMetadataString",value:function(){return s({version:this.getVersion(),created:this.created,lastUpdated:this.lastUpdated,cmpId:this.cmpId,cmpVersion:this.cmpVersion,consentScreen:this.consentScreen,vendorListVersion:this.vendorListVersion})}},{key:"getVersion",value:function(){return this.version}},{key:"getVendorListVersion",value:function(){return this.vendorListVersion}},{key:"setGlobalVendorList",value:function(e){if("object"!==("undefined"==typeof e?"undefined":r(e)))throw new Error("ConsentString - You must provide an object when setting the global vendor list");if(!e.vendorListVersion||!Array.isArray(e.purposes)||!Array.isArray(e.vendors))throw new Error("ConsentString - The provided vendor list does not respect the schema from the IAB EU’s GDPR Consent and Transparency Framework");this.vendorList={vendorListVersion:e.vendorListVersion,lastUpdated:e.lastUpdated,purposes:e.purposes,features:e.features,vendors:e.vendors.slice(0).sort(function(e,t){return e.id<t.id?-1:1})},this.vendorListVersion=e.vendorListVersion}},{key:"setCmpId",value:function(e){this.cmpId=e}},{key:"getCmpId",value:function(){return this.cmpId}},{key:"setCmpVersion",value:function(e){this.cmpVersion=e}},{key:"getCmpVersion",value:function(){return this.cmpVersion}},{key:"setConsentScreen",value:function(e){this.consentScreen=e}},{key:"getConsentScreen",value:function(){return this.consentScreen}},{key:"setConsentLanguage",value:function(e){if(p.test(e)===!1)throw new Error("ConsentString - The consent language must be a two-letter ISO639-1 code (en, fr, de, etc.)");this.consentLanguage=e}},{key:"getConsentLanguage",value:function(){return this.consentLanguage}},{key:"setPurposesAllowed",value:function(e){this.allowedPurposeIds=e}},{key:"getPurposesAllowed",value:function(){return this.allowedPurposeIds}},{key:"setPurposeAllowed",value:function(e,t){var i=this.allowedPurposeIds.indexOf(e);t===!0?-1===i&&this.allowedPurposeIds.push(e):t===!1&&-1!==i&&this.allowedPurposeIds.splice(i,1)}},{key:"isPurposeAllowed",value:function(e){return-1!==this.allowedPurposeIds.indexOf(e)}},{key:"setVendorsAllowed",value:function(e){this.allowedVendorIds=e}},{key:"getVendorsAllowed",value:function(){return this.allowedVendorIds}},{key:"setVendorAllowed",value:function(e,t){var i=this.allowedVendorIds.indexOf(e);t===!0?-1===i&&this.allowedVendorIds.push(e):t===!1&&-1!==i&&this.allowedVendorIds.splice(i,1)}},{key:"isVendorAllowed",value:function(e){return-1!==this.allowedVendorIds.indexOf(e)}}],[{key:"decodeMetadataString",value:function(e){var t=d(e),i={};return u[t.version].metadataFields.forEach(function(e){i[e]=t[e]}),i}}]),e}();i.exports={ConsentString:h}});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("gdpr",["consent-string","px-mini-utils"],function(e,t){var i=null,n=259,r=4,a=2e3,o=function(){function o(){return _classCallCheck(this,o),i?i:(this._readyPromise=this._init(),void(i=this))}return _createClass(o,[{key:"_init",value:function(){return this.gdprApplies=void 0,this.consentString=void 0,this.computedConsent=void 0,this.$pulpix=document.getElementById("pulpix"),this.$pulpix&&this.$pulpix.getAttribute("data-gdpr-consent-string")?(this._initWithPulpixAttributes(),Promise.resolve()):window.__cmp?this._initWithCMP():Promise.resolve()}},{key:"ready",value:function(){return this._readyPromise}},{key:"_initWithCMP",value:function(){var e=this;return new Promise(function(t,i){var n=void 0;window.__cmp("getConsentData",null,function(i){e.consentString=i.consentData,e.gdprApplies=i.gdprApplies,e.computedConsent=e._computeConsent(e.consentString),n=!0,t()}),setTimeout(function(){n||t()},a)})}},{key:"_initWithPulpixAttributes",value:function(){this.gdprApplies=t.smartBoolean(this.$pulpix.getAttribute("data-gdpr")),this.consentString=this.$pulpix.getAttribute("data-gdpr-consent-string"),this.computedConsent=this._computeConsent(this.consentString),!this.computedConsent&&this.$pulpix.getAttribute("data-gdpr-consent")&&(this.computedConsent=t.optionalSmartBoolean(this.$pulpix.getAttribute("data-gdpr-consent")))}},{key:"_computeConsent",value:function(t){try{var i=new e.ConsentString(t);return i.isVendorAllowed(n)&&i.isPurposeAllowed(r)}catch(a){}}}]),o}();return new o});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("tag-formatter",["px-utils","xhr","globals","gdpr"],function(e,t,i,n){function r(e){return"videos,vpaid"}function a(e){var t=e?e.$el||document.getElementById(e.elementId):void 0;if(t)return{width:Math.max(t.offsetWidth,400),height:Math.max(t.offsetHeight,300)}}var o=null,s=function(){function t(){return _classCallCheck(this,t),o?o:o=this}return _createClass(t,[{key:"format",value:function(t,o,s,l){!s&&o&&o.videoInfo&&(s=o.videoInfo);var d=e.objPath(o,["config","replaceElement","attributes","data-tags"])||{},c=a(o),u=Object.assign({content_page_url:encodeURIComponent(document.location.href),cb:(new Date).getTime()},s?{video_duration:Math.round(s.duration/1e3),provider_id:s.provider_id,"mediainfo.id":s.provider_id,"mediainfo.tags":s.provider_specific_params.tags?encodeURIComponent(s.provider_specific_params.tags):void 0,"mediainfo.partnerName":s.provider_specific_params.partnerName||d.partnerName}:{},o?{pulpix_slot:o._getAnalyticsParamsSlot(),pulpix_widget:o.config.analyticsParams.widget,pulpix_multitask:o.hasMultitask(),player_visible:o.isVisible()}:{},c?{player_width:c.width,player_height:c.height}:{});return t=e.strFormat(t,u),t.match(/broker(-preview-\d+)?\.omnitagjs\.com/)&&(t=e.url.updateParams(t,e.removeUndefinedKeys(Object.assign({gdpr:n.gdprApplies,gdpr_consent:n.computedConsent,gdpr_consent_string:n.consentString,Url:document.location.href,CanonicalUrl:e.getCanonicalUrl(),creative_mimes:r(l)},s?{catalog_id:s.catalog_id}:{},c?{player_width:c.width,player_height:c.height}:{},l?{native_width:e.isMobile()?screen.width:320,native_height:e.isMobile()?screen.width*(2/3):180}:{})))),t.includes(i.getApiHost())&&(t=e.url.updateParams(t,e.removeUndefinedKeys(Object.assign({gdpr:n.gdprApplies,gdpr_consent:n.computedConsent,gdpr_consent_string:n.consentString,url:document.location.href,canonical_url:e.getCanonicalUrl(),creative_mimes:r(l)},s?{catalog_id:s.catalog_id}:{},c?{player_width:c.width,player_height:c.height}:{},l?{native_width:e.isMobile()?screen.width:320,native_height:e.isMobile()?screen.width*(2/3):180}:{},i.adyoulikePlacementId?{ayl_placement_id:i.adyoulikePlacementId}:{})))),t.match(/ads\.stickyadstv\.com/)&&(t=e.url.updateParams(t,e.removeUndefinedKeys({_fw_gdpr:n.gdprApplies,_fw_gdpr_consent:n.consentString}))),t}}]),t}();return new s}),pxRequire.define("px-player",["require","px-utils","globals","video-info","player-config","state-machine","event-machine","ad-viewability-tracker","call-to-action","tag-formatter"],function(e,t,i,n,r,a,o,s,l,d){function c(e,i){var a=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return void 0,this.readyPromise=new Promise(function(s,l){if(a.elementId=e,a.config=new r(i.config),a.videoInfo=new n(i.videoInfo),a.shouldUpdateFromAPI()&&a.updateVideoInfoFromAPI(),e?a.$el=t.checkIdInDOM(e)&&a.__pxize(e):a.$el=t.checkIdInDOM(a.config.containerId)&&a.__pxmake(a.config.containerId),!a.$el)throw new Error("Element not correctly initialized, stopping");a.__initializeAndWaitForReady(function(){o(a),a.__updateOrCreateCTA(),s(a)})}),this}function u(e){var n=t.style.deserialize(e.getAttribute("style")),r=(e.offsetWidth||e.parentNode.offsetWidth)+"px !important",a=(e.offsetHeight||e.parentNode.offsetHeight)+"px !important";return i.isPrisma&&"wrapperPlayer"===e.parentNode.id&&(r=void 0,a=void 0),n=Object.assign(n,{width:r,height:a,top:""+e.style.top,left:""+e.style.left,overflow:"hidden !important"})}var p=250,h={iframe:{scrolling:"no",frameBorder:0,webkitAllowFullScreen:"true",mozAllowfullscreen:"true",allowFullScreen:"true"}},f={start:"video_start",firstQuartile:"video_25",midpoint:"video_50",thirdQuartile:"video_75",complete:"video_end",creativeView:"video_start"};return c.prototype.supportsAdTracking=!0,c.prototype.canSetAds=!1,c.prototype.canPauseDuringAds=!0,c.prototype.shouldUpdateFromAPI=function(){return Boolean(!this.videoInfo.id&&"test"!==i.env)},c.prototype.updateVideoInfoFromAPI=function(){this.videoInfo.updateFromAPI()["catch"](function(e){void 0})},c.prototype.__pxize=function(e){var t=document.getElementById(e);return this.config.updateSrc&&"IFRAME"===t.tagName&&(this.manuallyCreated=!0,t.src=this._nativeIframeUrl()),t.parentNode.id=t.parentNode.id||"pulpix_container",this.config.containerId=t.parentNode.id,this._nativePxize&&(this.$el=t,this._nativePxize(t)),t},c.prototype.__pxmake=function(e){this.manuallyCreated=!0;var i=document.createElement(this.containerType);t.setAttributes(i,Object.assign({id:t.getUniqueId("px_"+this.videoInfo.provider+"_"+this.videoInfo.provider_id),"background-color":"black",pulpix:""},h[this.containerType],this._nativeIframeUrl?{src:this._nativeIframeUrl(),allow:"autoplay"}:{},this.isRecommended()?{"px-reco":""}:{})),this.config.replaceElement?(t.setStyle(i,t.objPath(this.config,["replaceElement","styles"])),(t.objPath(this.config,["replaceElement","classNames"])||[]).forEach(function(e){t.addClass(i,e)})):t.setStyleImportant(i,{width:"100%",height:"100%"});var n=t.objPath(this.config,["replaceElement","nextSibling"]);return n?n.parentNode.insertBefore(i,n):document.getElementById(e).appendChild(i),this._nativePxmake&&(this.$el=i,this._nativePxmake(i)),i},c.prototype.__initializeAndWaitForReady=function(e){var t=this;this.__createEventTargetsAndStateMachines(),this._needsAdPlayer()&&this.__loadAdPlayer(),this._nativeInitialize&&this._nativeInitialize(),this.__contextStateMachine.onGoToState("startScreen",function(){t.isReady=!0,t._setTrackingEndpoints(),t.needsManualTriggersInterval&&t.needsManualTriggersInterval!==[]&&t.__setManualTriggersInterval(),t.__setHasControlsTriggers(),t._nativeOnReady&&t._nativeOnReady(),e(t),t.__handleAutoplayBehavior()})},c.prototype.__handleAutoplayBehavior=function(){var e=this;setTimeout(function(){e._needsAutoPlay()&&"never"===e.autoplayBehavior?e.play():e._needsAutoPlay()||"always"!==e.autoplayBehavior||e.pause()},250)},c.prototype.on=function(e,t){this.__externalEventTarget.on(e,t)},c.prototype.off=function(e,t){this.__externalEventTarget.off(e,t)},c.prototype.one=function(e,t){this.__externalEventTarget.one(e,t)},c.prototype.getState=function(){return this.__watchTypeStateMachine.currentStateName()||this.__contextStateMachine.currentStateName()},c.prototype.isPlaying=function(){return this.__playbackStateMachine.isInState("playing")},c.prototype.play=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return void 0,this._needsAdPlayer()&&this.adPlayer?void(this.adPlayer._nativePlay&&this.adPlayer._nativePlay()):(this._nativePlay(),void(this.isPlaying()?t():this.__playbackStateMachine.onGoToState("playing",function(){e.currentTimeNeedsTimeupdateToBeUpdated?e.one("video_timeupdate",t):t()})))},c.prototype.pause=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return void 0,this._needsAdPlayer()&&this.adPlayer?void(this.adPlayer._nativePause&&this.adPlayer._nativePause()):(this._nativePause(),void(this.isPlaying()?this.__playbackStateMachine.onGoToState("paused",e):e()))},c.prototype.duration=function(){return this._nativeDuration()||this.videoInfo.duration||0},c.prototype.controls=function(e){"function"==typeof this._nativeControls&&this._nativeControls(e)},c.prototype.mute=function(e){this.canMute()&&this._nativeMute(e)},c.prototype.muted=function(){return"function"==typeof this._nativeMuted?this._nativeMuted():void 0},c.prototype.canMute=function(){return"function"==typeof this._nativeMute},c.prototype.currentTime=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if("number"!=typeof e){var i=this._nativeGetCurrentTime()||0;return Math.min(Math.max(i,0),this.duration()||i)}void 0,this._internalTrigger("video_seeking"),this.lastSeekRequiredAt=e,this.__seekStateMachine.onGoToState("notSeeking",function(){t()}),this._nativeSetCurrentTime(e)},c.prototype.progress=function(){return!this.duration()||this.duration()<2?void 0:this.currentTime()/this.duration()},c.prototype.isRecommended=function(){return(this.config.analyticsParams||{}).isRecommended||window.location.search.indexOf("utm_source=pulpix")>-1},c.prototype.getIsShowingControls=function(){return this.isShowingControls},c.prototype.setIsShowingControls=function(e){this.isShowingControls!==e&&this.__externalEventTarget.trigger(e?"showingControls":"hiddingControls"),this.isShowingControls=e},c.prototype.getMetadata=function(){return this.metadata},c.prototype.setMetadata=function(e){this.metadata=e},c.prototype.onClickToPlay=function(e){var t=this;if(!this.config.autoplay){var i=window.location.href.match(/(demo|admin).pulpix.com/),n=!1,r=function(){n||(e(),n=!0)};if(this.__internalEventTarget.one("clickToPlay",function(){r()}),this.config.switchedApiOn||i)this.one("start",r),this.one("video_timeupdate",function(){t.off("start",r)});else if("IFRAME"===this.$el.tagName&&"dailymotion"!==this.videoInfo.provider&&"ultimedia"!==this.videoInfo.provider){var a=function(){var e=this,t=function(){this.$el.removeEventListener("mouseover",a),r()}.bind(this);this.isPlaying()?(this._nativeGetCurrentTime()<3&&t(),this.$el.removeEventListener("mouseover",a)):(this.on("start",t),setTimeout(function(){e.off("start",t)},7e3))}.bind(this);this.$el.addEventListener("mouseover",a,!1),this.one("video_timeupdate",function(){t.$el.removeEventListener("mouseover",a,!1)})}else{var o=function(){this.one("start",r),this.$el.removeEventListener("click",o)}.bind(this);this.$el.addEventListener("click",o,!1),this.one("video_timeupdate",function(){t.off("start",r),t.$el.removeEventListener("click",o,!1)})}}},c.prototype.src=function(e,i){var a=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e=new n(e),i=new r(i);var s="iframe"===this.containerType&&i.iframeParam&&!this.$el.src.includes(this.config.iframeParam),l=e.provider===this.videoInfo.provider&&(this._nativeCanChangeSrc?this._nativeCanChangeSrc(e,i):!0)&&"iframe"!==this.playerName&&"px-iframe"!==e.getPlayerClassName()&&!s&&(!i.forceReload||t.isMobile());return this._removeTrackingEndpoints(),i.resetEventListeners||(i.externalEventTarget=this.__externalEventTarget),this.adPlayer&&this.__unloadAdPlayer(),l?(void 0,this.videoInfo=e,this.config=i,this._needsAdPlayer()&&this.__loadAdPlayer(),this._adViewabilityTracker&&(this._adViewabilityTracker.clear(),delete this._adViewabilityTracker),this.__createEventTargetsAndStateMachines(),this.__contextStateMachine.onGoToState("startScreen",function(){o(a),a.__handleAutoplayBehavior()}),this._nativeChangeSrc(function(){a._setTrackingEndpoints(),a.__updateOrCreateCTA(),a.__externalEventTarget.trigger("src_changed")}),this):(void 0,this.__reload(e,i,o))},c.prototype.dispose=function(e){this.adPlayer&&this.__unloadAdPlayer(),this.needsManualTriggersInterval&&this.__stopManualTriggersInterval(),this.__contextStateMachine&&this.__contextStateMachine.reset(),this.callToAction&&(this.callToAction.dispose(),delete this.callToAction),this._nativeDispose(e);var t=document.getElementById(this.$el.id);e&&t&&t.parentNode.removeChild(t),delete this},c.prototype.__reload=function(e,i,n){var r=this,a=void 0,o=e.getPlayerClass(),s=Boolean(this.$el.getAttribute("px-style")),l="iframe"===this.containerType&&"iframe"===o.containerType&&"youtube"!==o.playerName&&"youtube"!==this.playerName,d=t.style.deserialize(this.$el.getAttribute("px-style"));l&&(a=this.$el.id);var c=0;t.isInFullscreen()&&(c=500,t.exitFullscreen()),setTimeout(function(){return i=Object.assign({},i,{containerId:r.$el.parentNode.id,replaceElement:r._buildReplaceElement(),updateSrc:l,muted:r.muted()},{externalEventTarget:r.__externalEventTarget},s?{height:d.height,width:d.width}:{},i.ads&&i.ads.tag?{ads:{tag:r._getAdTag()}}:{}),r.dispose(!l),new o(a,{videoInfo:e,config:i},function(e){s&&t.setMobileStyle(e.$el),n(e),e.__externalEventTarget.trigger("src_changed")})},c)},c.prototype._internalTrigger=function(e,t){this.__internalEventTarget.trigger(e,t)},c.prototype._internalTriggerOnce=function(e,t){this.__internalEventTarget.triggerOnce(e,t)},c.prototype._needsAutoPlay=function(){return this.config.autoplay&&!this._needsAdPlayer()},c.prototype._isNativeAd=function(){return Boolean(this.videoInfo.sponsoredParams)},c.prototype._needsAdPlayer=function(){return!t.isMobile()&&!this.canSetAds&&this.config.ads&&this.config.ads.tag&&t.objPath(this.config,["analyticsParams","isRecommended"])},c.prototype._getAdTag=function(e){var t=void 0;return e?t=e:this.config.ads&&this.config.ads.tag&&(t=this.config.ads.tag),t?t=this._formatAdTag(t):void 0},c.prototype._getAdConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{tag:this._getAdTag(e.tag)||t.objPath(this.videoInfo,["sponsoredParams","adTag"]),preloadedAdsResponse:t.objPath(this.videoInfo,["sponsoredParams","preloadedAdsResponse"])||e.preloadedAdsResponse||t.objPath(this.config,["ads","preloadedAdsResponse"]),showCountdown:!this._isNativeAd()}},c.prototype.getAdUnit=function(){var e=this._getAdTag()||"";if(e.includes("doubleclick.net")){var i=t.url.getParams(e);return i.iu}},c.prototype._formatAdTag=function(e){return d.format(e,this,this.videoInfo)},c.prototype._buildReplaceElement=function(){var e=this,i=function(){var t=e.$el.getAttribute("data-tags");if(t)try{t=JSON.parse(t)}catch(i){}return t};return{nextSibling:t.getNextSiblings(this.$el,function(e){var t=e.className||"";return!t.includes("header-overlay-container")})[0],styles:u(this.$el),attributes:{"data-tags":i()},classNames:t.removeFromArrayIfMatchRegex(this.$el.className.split(" "),/(vjs|jw|not-hover)(\-.*)?/)}},c.prototype._getAnalyticsParamsWidget=function(){return this.config.analyticsParams.widget},c.prototype._getAnalyticsParamsSlot=function(){return this.config.analyticsParams.slot},c.prototype.__manualSeekedTrigger=function(){var e=(this.seekingTolerance||p)/1e3;if(this.lastSeekRequiredAt){var t=Math.abs(this.currentTime()-this.lastSeekRequiredAt);e>t&&(this.lastSeekRequiredAt=null,this._internalTrigger("video_seeked"))}},c.prototype.__onManualTriggersInterval=function(){this._nativeOnManualTriggersInterval&&this._nativeOnManualTriggersInterval(),t.inArray("seeked",this.needsManualTriggersInterval)&&this.__manualSeekedTrigger(),t.inArray("timeupdate",this.needsManualTriggersInterval)&&this.isPlaying()&&this._internalTrigger("generic_timeupdate")},c.prototype.__setManualTriggersInterval=function(){var e=this;this._manualTriggersInterval&&this.__stopManualTriggersInterval(),this._manualTriggersInterval=setInterval(function(){e.__onManualTriggersInterval()}.bind(this),p)},c.prototype.__stopManualTriggersInterval=function(){clearInterval(this._manualTriggersInterval),delete this._manualTriggersInterval},c.prototype.__setHasControlsTriggers=function(){var e=this,i=new o(this.controlEl||this.$el);if(i.on("mouseenter",function(){e.setIsShowingControls(!0),clearTimeout(e._showingControlsTimeout)}),i.on("mouseleave",function(){e.isPlaying()&&e.setIsShowingControls(!1)}),t.isMobile()){this.on("video_pause",function(){e.setIsShowingControls(!0),clearTimeout(e._showingControlsTimeout)}),this.on("video_seeked",function(){e.setIsShowingControls(!0),clearTimeout(e._showingControlsTimeout),e._showingControlsTimeout=setTimeout(function(){e.isPlaying()&&e.setIsShowingControls(!1)},4e3)}),this.on("video_play",function(){e.setIsShowingControls(!0),clearTimeout(e._showingControlsTimeout),e._showingControlsTimeout=setTimeout(function(){e.isPlaying()&&e.setIsShowingControls(!1)},4e3)});var n=void 0;"iframe"===this.containerType?setInterval(function(){n!==e.$el&&document.activeElement===e.$el&&e.isPlaying()&&(e.setIsShowingControls(!0),clearTimeout(e._showingControlsTimeout),e._showingControlsTimeout=setTimeout(function(){e.isPlaying()&&e.setIsShowingControls(!1)},4e3)),n=document.activeElement},1e3):this.$el.addEventListener("click",function(){e.setIsShowingControls(!0),clearTimeout(e._showingControlsTimeout)},!1)}},c.prototype.__hasTimeUpdated=function(){if(this.__watchTypeStateMachine.isInState("inVideo")){var e=this.currentTime(),t=this.__lastTimeupdateAt&&this.__lastTimeupdateAt<e;return this.__lastTimeupdateAt=e,t}return!0},c.prototype.__watchTypeEventPrefix=function(){var e=this.__watchTypeStateMachine.currentStateName();if(e)return"inVideo"===e?"video":"ad"},c.prototype._setTrackingEndpoints=function(){var e=this;this.config.trackingEndpoints&&(this._trackingEndpointsCallback={},Object.keys(this.config.trackingEndpoints).forEach(function(i){e._trackingEndpointsCallback[i]=function(){e.config.trackingEndpoints[i].forEach(function(e){t.pixelTrack(e)})},e.on(f[i],e._trackingEndpointsCallback[i])}))},c.prototype._removeTrackingEndpoints=function(){var e=this;this._trackingEndpointsCallback&&(Object.keys(this._trackingEndpointsCallback).forEach(function(t){e.off(f[t],e._trackingEndpointsCallback[t])}),this._trackingEndpointsCallback={})},c.prototype.__updateOrCreateCTA=function(){this.callToAction?this.callToAction.update(this):this.callToAction=new l(this)},c.prototype.__createEventTargetsAndStateMachines=function(){var e=this;this.__internalEventTarget=new o,this.__externalEventTarget=(this.config.externalEventTarget||new o).attachPlayer(this),this.__contextStateMachine=new a({listen:this.__internalEventTarget,trigger:this.__externalEventTarget},[{name:"initialization",transitions:[{on:["ready","changed_src"],to:"startScreen",triggers:[{name:"ready",unique:!0}]}]},{name:"startScreen",transitions:[{on:["*_start","*_play","*_timeupdate"],to:"watching",triggers:[{name:"start",unique:!0}]}]},{name:"watching",transitions:[{on:["video_end","end"],triggers:[{name:"video_end",unique:!0},{name:"end",unique:!0}],"if":function(){return e.duration()>5},to:"endScreen"}]},{name:"endScreen",transitions:[{on:["*_start","*_play","*_timeupdate"],triggers:[{name:"start",unique:!0}],to:"watching"}]}]),this.__watchTypeStateMachine=new a({listen:this.__internalEventTarget,trigger:this.__externalEventTarget},[{name:null,transitions:[{on:["ad_start","ad_play","ad_timeupdate"],to:"preroll"},{on:["video_start","video_play","generic_play","video_timeupdate","generic_timeupdate"],to:"inVideo"}]},{name:"inVideo",triggersIn:[{name:"video_start",unique:!0}],transitions:[{on:["ad_start","ad_play","ad_timeupdate"],triggers:[function(){return e.progress()>.98?"video_end":void 0}],"if":function(){return e.duration()>5},to:function(){var t=e.progress();return!t||.02>t?"preroll":t>.98?"postroll":"midroll"}},{on:["video_end"],to:null}]},{name:"preroll",triggersIn:["ad_start"],transitions:[{on:["ad_error","ad_skip","video_start","video_timeupdate"],to:"inVideo"},{on:["ad_end"],to:"inVideo",triggers:["ad_end"]},{on:["video_end"],to:"inVideo","if":function(){return e._isNativeAd()},triggers:["ad_end","video_end"]}]},{name:"midroll",triggersIn:["ad_start"],transitions:[{on:["ad_error","ad_skip","video_timeupdate"],to:"inVideo"},{on:["ad_end"],to:"inVideo",triggers:["ad_end"]}]},{name:"postroll",triggersIn:["ad_start"],transitions:[{on:["ad_end"],to:"inVideo",triggers:["ad_end"]}]}]);var t=function(t){var i=e.__watchTypeEventPrefix();if(!t||!i)return!1;var n=t.split("_")[0];return"generic"===n||n===i},i=function(t){return function(i){return(e.__watchTypeEventPrefix()||"video")+"_"+t}};this.__playbackStateMachine=new a({listen:this.__internalEventTarget,trigger:this.__externalEventTarget},[{name:"paused",transitions:[{on:["*_start","*_play"].concat(this.noTimeupdateStartPlaying?[]:"*_timeupdate").concat(this.alwaysPlayAfterSeek?["video_seeked"]:[]),"if":t,triggers:[i("play")],to:"playing"}]},{name:"playing",transitions:[{on:["*_pause","video_end"],"if":t,triggers:[i("pause")],to:"paused"},{on:["*_timeupdate"],"if":this.__hasTimeUpdated.bind(this),triggers:[i("timeupdate")],to:"playing"}]}]),this.__seekStateMachine=new a({listen:this.__internalEventTarget,trigger:this.__externalEventTarget},[{name:"notSeeking",transitions:[{on:["video_seeking"],to:"seeking"}]},{name:"seeking",transitions:[{on:["video_seeked"],triggers:["video_seeked"],to:"notSeeking"}]}]),this.__adProgressStateMachine=new a({listen:this.__internalEventTarget,trigger:this.__externalEventTarget},[{name:"ad0",transitions:[{on:["ad_timeupdate","generic_timeupdate","ad_start","ad_play"],triggers:[{name:"ad_2s",unique:!0}],"if":function(){return e.__initAdViewabilityTracker(),e.dateadstart||(e.dateadstart=Date.now()),Date.now()-e.dateadstart>2e3},to:"2s"}]},{name:"2s"}]),this.dateadstart=void 0,this.__progressStateMachine=new a({listen:this.__internalEventTarget,trigger:this.__externalEventTarget},[{name:0,transitions:[{on:["video_timeupdate","generic_timeupdate"],triggers:[{name:"video_25",unique:!0}],"if":function(){return e.progress()>=.25},to:function(){return 25}}]},{name:25,transitions:[{
on:["video_timeupdate","generic_timeupdate"],triggers:[{name:"video_50",unique:!0}],"if":function(){return e.progress()>=.5},to:function(){return 50}}]},{name:50,transitions:[{on:["video_timeupdate","generic_timeupdate"],triggers:[{name:"video_75",unique:!0}],"if":function(){return e.progress()>=.75},to:function(){return 75}}]},{name:75,transitions:[{on:["video_timeupdate","generic_timeupdate"],"if":function(){return e.progress()>=1},to:function(){return 100}}]},{name:100}]),this.__timeProgressStateMachine=new a({listen:this.__internalEventTarget,trigger:this.__externalEventTarget},[{name:"video_10s",transitions:[{on:["video_timeupdate","generic_timeupdate","timeupdate"],triggers:[{name:"video_10s",unique:!0}],to:function(){return e.currentTime()>10?"10s":void 0}}]},{name:"10s"}]),this.__contextStateMachine.findState("watching").subMachines=[this.__watchTypeStateMachine,this.__playbackStateMachine],this.__watchTypeStateMachine.findState("inVideo").subMachines=[this.__seekStateMachine,this.__progressStateMachine,this.__timeProgressStateMachine],this.__watchTypeStateMachine.findState("preroll").subMachines=[this.__adProgressStateMachine],this.__watchTypeStateMachine.findState("midroll").subMachines=[this.__adProgressStateMachine],this.__watchTypeStateMachine.findState("postroll").subMachines=[this.__adProgressStateMachine],this.__playbackStateMachine.findState("paused").freezeMachines=[this.__progressStateMachine,this.__timeProgressStateMachine],this.__seekStateMachine.findState("seeking").freezeMachines=[this.__playbackStateMachine,this.__progressStateMachine,this.__timeProgressStateMachine],this.__contextStateMachine.activate()},c.prototype.__resetEventTargetsAndStateMachines=function(){this.__internalEventTarget.reset(),this.__externalEventTarget.reset(),this.__contextStateMachine.reset().activate()},c.prototype.getDimensions=function(){var e=this.$el.getBoundingClientRect();return{height:e.bottom-e.top,width:e.right-e.left}},c.prototype.isVisible=function(){return Boolean(t.isTabActive()&&this.proportionVisible()>=.5)},c.prototype.proportionVisible=function(){var e=this.$el.getBoundingClientRect(),t=e.bottom-e.top,i=0;return e.top>=0&&e.bottom<=window.innerHeight?i=1:e.top<0?i=Math.max(e.bottom/t,0):e.bottom>window.innerHeight&&(i=Math.max((window.innerHeight-e.top)/t,0)),i},c.prototype.__initAdViewabilityTracker=function(){this._adViewabilityTracker||(this._adViewabilityTracker=new s(this))},c.prototype.hasMultitask=function(){return Boolean(this.$el&&t.hasClass(this.$el,"px-flip-player"))},c.prototype.onResize=function(){this.adPlayer&&this.adPlayer.positionBinder&&this.adPlayer.positionBinder.updatePosition(),this._nativeOnResize&&this._nativeOnResize()},c.prototype.__loadAdPlayer=function(){var e=this;this.adPlayer={};var i=function(){e.readyPromise.then(function(){(e.config.autoplay||e.config.scroll_to_play||e.__clickedOnAdPlayer)&&(e._internalTrigger("ad_error"),e.play())})},n=function(){e._internalTrigger("ready"),e.adPlayer.ima.addEventListener(window.google.ima.AdEvent.Type.STARTED,function(){e._internalTrigger("ad_start"),e.adPlayer.timeupdateInterval=window.setInterval(function(){e._internalTrigger("ad_timeupdate")},p)}),e.adPlayer.ima.addEventListener(window.google.ima.AdEvent.Type.COMPLETE,function(){e.__unloadAdPlayer(),e.play(),e._internalTrigger("ad_end")}),e.adPlayer.ima.addEventListener(window.google.ima.AdEvent.Type.SKIPPED,function(){e.adWasCanceled=!0,e.__unloadAdPlayer(),e.readyPromise.then(function(){e._internalTrigger("ad_skip"),e.play()})}),e.adPlayer.ima.addEventListener("adError",function(){e.adWasCanceled=!0,e.__unloadAdPlayer(),i()}),e.adPlayer.ima.adsManager.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,function(){e.adWasCanceled=!0,e.__unloadAdPlayer(),i()})},r=function(){void 0===this.adInjector||this.adInjector.requestedFirstAds?this.ads&&(this.ads.isAdPlaying()||this.ads._state.adsReady)&&(t.objPath(this,["ima","adPlayer","play"])?this.ima.adPlayer.play():t.objPath(this,["ima3","resumeAd"])&&this.ima.resumeAd()):(this.adInjector.initialize(),this.adInjector.requestAds({title:this.videoInfo.title,thumbnail_url:this.videoInfo.thumbnail_url}))},a=function(){(this.ads&&this.ads.isAdPlaying()||t.objPath(this.ima,["adPlaying"]))&&(t.objPath(this,["ima","adPlayer","pause"])?this.ima.adPlayer.pause():t.objPath(this,["ima","pauseAd"])&&this.ima.pauseAd())};pxRequire.require(["px-videojs-custom-with-ads","element-position-binder","videojs-ad-injector"],function(o,s,l){var d=document.createElement("video"),c=e.$el.id+"-ad-player";d.id=c,d.className="video-js vjs-px-skin px-hide px-ad-player",e.config.autoplay&&(d.className+=" vjs-waiting"),d.setAttribute("style","position:absolute!important;overflow:hidden;display:none"),d.setAttribute("poster",e.videoInfo.thumbnail_url),d.setAttribute("px-reco","");var u=document.createElement("source");u.setAttribute("src","//scdn.pulpix.com/px-videos/black.mp4"),u.setAttribute("type","video/mp4"),d.appendChild(u),t.setOrRemoveAttribute(d,"muted",t.getOrDefault(e.config.muted,!1)),e.$el.parentNode.appendChild(d);var p=e;o(function(o){return o?(p.adPlayer=o(c,{controls:!0,autoplay:e.config.autoplay,poster:e.videoInfo.thumbnail_url,src:"",techOrder:["html5"]},function(){p.adPlayer=this}).ready(function(){var i=document.getElementById(c);i.addEventListener("click",function(){e.__clickedOnAdPlayer=!0}),p.adPlayer.muted(t.getOrDefault(p.config.muted,!1)),p.adPlayer.positionBinder=new s(p.$el),p.adPlayer._nativePause(),p.adPlayer.positionBinder.bind(i,function(){t.removeClass(i,"px-hide");var e=window.getComputedStyle(p.$el);i.style.display="block",t.objPath(p.adPlayer,["ima","adsManager","resize"])&&p.adPlayer.ima.adsManager.resize(p.$el.clientWidth,p.$el.clientHeight,window.google.ima.ViewMode.NORMAL),i.style.zIndex=e.getPropertyValue("z-index")})}),p.adPlayer.on("adserror",function(){p.adWasCanceled=!0,p.__unloadAdPlayer(),i()}),p.adPlayer.adInjector=new l(p.adPlayer,p._getAdConfig(),p.config.autoplay,{title:p.videoInfo.title,thumbnail_url:p.videoInfo.thumbnail_url},n.bind(p)),p.adPlayer.adInjector.firstPlaySetup(),p.adPlayer._nativePlay=r.bind(p.adPlayer),void(p.adPlayer._nativePause=a.bind(p.adPlayer))):void i()})},i)},c.prototype.__unloadAdPlayer=function(){if(this.adPlayer){try{window.clearInterval(this.adPlayer.timeupdateInterval),this.adPlayer.positionBinder.unbind(this.adPlayer.el_),this.adPlayer.dispose()}catch(e){}delete this.adPlayer}},c}),pxRequire.define("px-youtube",["require","px-player","px-utils"],function(e,t,i){var n=function(){t.apply(this,arguments)};return n.prototype=Object.create(t.prototype),n.playerName="youtube",n.prototype.playerName=n.playerName,n.containerType="iframe",n.prototype.containerType=n.containerType,n.forceReloadOnSrcChange=!0,n.prototype.needsManualTriggersInterval=["seeked","timeupdate"],n.prototype._nativeInitialize=function(){var e=this;this.__loadSDK().then(function(e){1===e.loaded?n():e.ready(function(){n()})});var t=function(t){e.__onStateChange(t)},i=function(){e.ytplayer.addEventListener("onStateChange",t),window.YT_GA&&YT.get(e.$el.id).addEventListener("onStateChange",t),e._internalTrigger("ready")},n=function(){e.ytplayer=YT.get(e.$el.id);var t=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;if(t.exec(e.$el.src)||(e.$el.src=e._nativeIframeUrl()),window.YT_GA&&e.ytplayer&&!e.ytplayer.playVideo)try{e.ytplayer=window.YT_GA.players[e.params.source.provider_id].player}catch(n){}e.ytplayer?setTimeout(i,0):e.ytplayer=new YT.Player(e.$el.id,{height:"390",width:"640",origin:document.location.protocol+"//"+document.location.host,events:{onReady:i}})};return this},n.prototype.__loadSDK=function(){var e=new Promise(function(e){pxRequire.require(["youtube-iframe-api"],function(t){e(t)})});return e},n.prototype._nativeIframeUrl=function(){var e,t=(e={enablejsapi:1,iv_load_policy:3,disablekb:1,wmode:"transparent",controls:1,playsinline:1,showinfo:0,modestbranding:1,rel:0},_defineProperty(e,"playsinline",1),_defineProperty(e,"origin",window.location.protocol+"//"+window.location.host),e);return this._needsAutoPlay()&&(t.autoplay=1),this.config.playsAtTime&&(t.start=this.config.playsAtTime),"//www.youtube.com/embed/"+this.videoInfo.provider_id+"?"+i.serialize(t)},n.prototype._nativeDuration=function(){return this.ytplayer.getDuration()},n.prototype._nativePlay=function(e){this.ytplayer.playVideo()},n.prototype._nativePause=function(e){this.ytplayer.pauseVideo()},n.prototype._nativeSetCurrentTime=function(e){this.ytplayer.seekTo(e,!0)},n.prototype._nativeGetCurrentTime=function(){return this.ytplayer.getCurrentTime?this.ytplayer.getCurrentTime():void 0},n.prototype._nativeChangeSrc=function(e){try{this._needsAutoPlay()?this.ytplayer.loadVideoById(this.videoInfo.provider_id):this.ytplayer.cueVideoById(this.videoInfo.provider_id),this._internalTrigger("changed_src"),e()}catch(t){void 0}},n.prototype._nativeDispose=function(e){if(this.ytplayer){try{this.ytplayer.clearVideo(),e&&this.ytplayer.destroy()}catch(t){void 0}delete this.ytplayer}},n.prototype.__onStateChange=function(e){if(this.ytplayer)switch(e.data){case YT.PlayerState.PLAYING:this._internalTrigger("video_play");break;case YT.PlayerState.ENDED:this._internalTrigger("video_end");break;case YT.PlayerState.PAUSED:this._internalTrigger("video_pause")}},n.prototype._nativeMute=function(e){e?this.ytplayer.mute():this.ytplayer.unMute()},n}),pxRequire.define("px-kaltura",["px-player","px-utils"],function(e,t){var i=function(){e.apply(this,arguments)};return i.prototype=Object.create(e.prototype),i.playerName="kaltura",i.prototype.playerName=i.playerName,i.containerType="div",i.prototype.containerType=i.containerType,i.prototype.currentTimeNeedsTimeupdateToBeUpdated=!0,i.prototype._nativeInitialize=function(){var e=this;this.__currentTime=0,this.$el&&t.hasClass(this.$el,"kWidgetIframeContainer")&&this.$el.evaluate?(this.ktplayer=this.$el,this.__setupTriggers(),setTimeout(function(){e._internalTrigger("ready")},0)):this.createPlayer(this.$el.id)},i.prototype.createPlayer=function(e){var i=this,n="https://cdnapisec.kaltura.com/p/"+this.videoInfo.provider_specific_params.syndication+("/sp/"+this.videoInfo.provider_specific_params.syndication)+"00/embedIframeJs/uiconf_id/"+(this.videoInfo.provider_specific_params.playerId+"/")+"partner_id/"+this.videoInfo.provider_specific_params.syndication;t.loadScript(n,function(){var t={targetId:e,wid:"_"+i.videoInfo.provider_specific_params.syndication,uiconf_id:i.videoInfo.provider_specific_params.playerId,params:{wmode:"transparent"},flashvars:{autoPlay:i._needsAutoPlay()},readyCallback:function(e){i.$el=document.getElementById(e),i.ktplayer=i.$el,i.__setupTriggers(),i._internalTrigger("ready")}};if(i.videoInfo.provider_specific_params.flavorId){var n="http://ib203846.ib-prod.com/pd/p/"+i.videoInfo.provider_specific_params.syndication+("/sp/"+i.videoInfo.provider_specific_params.syndication)+"00/serveFlavor/entryId/"+i.videoInfo.provider_id+("/v/1/flavorId/"+i.videoInfo.provider_specific_params.flavorId+"/name/a.mp4");t.flashvars.mediaProxy={preferedFlavorBR:i.videoInfo.provider_specific_params.preferedFlavorBR||1600,entry:{},sources:[{src:n}]}}else t.entry_id=i.videoInfo.provider_id;window.kWidget.embed(t)})},i.prototype._nativeIframeUrl=function(){var e={api:"postMessage",info:1,logo:1,controls:"html",wmode:"opaque",format:"json",syndication:this.videoInfo.provider_specific_params.syndication,origin:window.location.protocol+"//"+window.location.host};return"//www.kaltura.com/embed/video/"+(this.videoInfo.provider_id+"?"+t.serialize(e))},i.prototype._nativeDuration=function(){return this.__duration},i.prototype._nativePlay=function(e){this.ktplayer.sendNotification("doPlay")},i.prototype._nativePause=function(e){this.ktplayer.sendNotification("doPause")},i.prototype._nativeGetCurrentTime=function(){return this.__currentTime},i.prototype._nativeSetCurrentTime=function(e){this.ktplayer.sendNotification("doSeek",e)},i.prototype._nativeChangeSrc=function(e){this.ktplayer.sendNotification("changeMedia",{entryId:this.videoInfo.provider_id}),e()},i.prototype._nativeDispose=function(){window.kWidget.destroy(this.$el.id)},i.prototype._nativeCanChangeSrc=function(e){return!1},i.prototype.__setupTriggers=function(){var e=this,t=function(t){switch(void 0,t){case"ready":e._internalTrigger("ready");break;case"loading":case"buffering":break;case"playing":e._internalTrigger("video_play");break;case"seeking":e._internalTrigger("video_seeking");break;case"seeked":e._internalTrigger("video_seeked");break;case"paused":e._internalTrigger("video_pause")}};this.ktplayer.addJsListener("playerStateChange",t),this.ktplayer.addJsListener("playerSeekStart",function(){e._internalTrigger("video_seeking")}),this.ktplayer.addJsListener("playerSeekEnd",function(){e._internalTrigger("video_seeked")}),this.ktplayer.addJsListener("durationChange",function(t){e.__duration=t.newValue}),this.ktplayer.addJsListener("playerPlayEnd",function(){e._internalTrigger("video_end")}),this.ktplayer.addJsListener("playerUpdatePlayhead",function(t){e.__currentTime=t,e.__currentTime>0&&e._internalTrigger("video_timeupdate")});var i=function(){e._internalTrigger("ad_start")},n=function(){e._internalTrigger("ad_end")};this.ktplayer.addJsListener("preSequenceStart",i),this.ktplayer.addJsListener("postSequenceStart",i),this.ktplayer.addJsListener("midSequenceStart",i),this.ktplayer.addJsListener("onAdPlay",i),this.ktplayer.addJsListener("preSequenceComplete",n),this.ktplayer.addJsListener("postSequenceComplete",n),this.ktplayer.addJsListener("midSequenceComplete",n),this.ktplayer.addJsListener("onAdComplete",n),this.ktplayer.addJsListener("onAdSkip",n)},i}),pxRequire.define("px-vimeo",["px-player","px-utils"],function(e,t){var i=function(){e.apply(this,arguments)};return i.prototype=Object.create(e.prototype),i.playerName="vimeo",i.prototype.playerName=i.playerName,i.containerType="iframe",i.prototype.containerType=i.containerType,i.prototype._nativeInitialize=function(){var e=this;return this.__duration=(this.videoInfo.duration||0)/1e3,this.__currentTime=0,this.vmPlayer=this.$el,this.__setupTriggers(),this.manuallyCreated||setTimeout(function(){e._internalTrigger("ready")},0),this},i.prototype._nativeOnReady=function(){this.__post("addEventListener","play"),this.__post("addEventListener","pause"),this.__post("addEventListener","seek"),this.__post("addEventListener","finish"),this.__post("addEventListener","playProgress")},i.prototype._nativeIframeUrl=function(){var e={autoplay:this._needsAutoPlay()?1:0,api:1,byline:0,portrait:0,show_title:0,show_byline:0,show_portait:0,title:0,portait:0,badge:0,fullscreen:0,fs:0,controls:"html",wmode:"opaque",format:"json",origin:window.location.protocol+"//"+window.location.host};return this._needsAutoPlay()&&(e.autoplay=1),this.config.iframeParam&&Object.assign(e,t.deserialize(this.config.iframeParam)),"//player.vimeo.com/video/"+this.videoInfo.provider_id+"?"+t.serialize(e)},i.prototype._nativeDuration=function(){return this.__duration},i.prototype._nativePlay=function(){this.__post("play")},i.prototype._nativePause=function(){this.__post("pause")},i.prototype._nativeGetCurrentTime=function(){return this.__currentTime},i.prototype._nativeSetCurrentTime=function(e){this.__post("seekTo",e)},i.prototype._nativeChangeSrc=function(e){this.__duration=0,this.__currentTime=0,this.__post("loadVideo",this.videoInfo.provider_id),this._internalTrigger("changed_src"),e()},i.prototype._nativeDispose=function(e){delete this.vmPlayer},i.prototype.__setupTriggers=function(){var e=this,t=function n(t){if(e.vmPlayer){if(/^https?:\/\/player.vimeo.com/.test(t.origin)&&t.source===e.vmPlayer.contentWindow){var i=JSON.parse(t.data);switch(void 0,i.event){case"ready":e._internalTrigger("ready");break;case"play":e.__currentTime=i.data.seconds,e.__duration=e.__duration||i.data.duration,e._internalTrigger("video_play");break;case"seek":e._internalTrigger("video_seeking"),e._internalTrigger("video_seeked");break;case"finish":e._internalTrigger("video_end");break;case"playProgress":e.__currentTime=i.data.seconds,e.__duration=i.data.duration,i.data.percent>=.99?e._internalTrigger("video_end"):e.isPlaying()&&e._internalTrigger("video_timeupdate");break;case"pause":e._internalTrigger("video_pause");break;case"loadProgress":case"durationchange":e.__duration=i.data.duration}}}else window.removeEventListener("message",n,!1)};return window.addEventListener?window.addEventListener("message",t,!1):window.attachEvent("onmessage",t,!1),i},i.prototype.__post=function(e,t){if(this.vmPlayer){var i={method:e};t&&(i.value=t),this.vmPlayer.contentWindow.postMessage(JSON.stringify(i),"*")}},i}),pxRequire.define("style-loader",[],function(){var e=function(e,t){var i=new Promise(function(i,n){function r(){i()}var a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",e),a.onload=r;var o=document.getElementsByTagName("head")[0];t?o.insertBefore(a,o.firstChild):o.appendChild(a),setTimeout(function(){i()},4e3)});return i};return e}),pxRequire.define("px-ooyala",["require","px-player","px-utils","style-loader"],function(e,t,i,n){function r(){return Array.from(document.getElementsByTagName("script")).map(function(e){return/ooyala/.exec(e.src)?i.deserialize(e.src).namespace:void 0}).find(Boolean)||"OO"}function a(){var e=this.videoInfo.provider_specific_params.version||"3";return e="<PLUGIN_VERSION>"===e?"4.4.8":e}var o=function(){t.apply(this,arguments)};return o.prototype=Object.create(t.prototype),o.playerName="ooyala",o.prototype.playerName=o.playerName,o.containerType="div",o.prototype.containerType=o.containerType,o.prototype.currentTimeNeedsTimeupdateToBeUpdated=!0,o.prototype.seekingPrecision=6,o.prototype._nativePxize=function(e){var t=this;this.ooyalaGlobal=window[r()],this.videoInfo.provider_specific_params.version=this.videoInfo.provider_specific_params.version||this.ooyalaGlobal.version,this.ooPlayer=this.ooyalaGlobal.__internal.players[e.id],this.__setupTriggers(),this.config.ads&&this.config.ads.tag&&this.__updateAdTag(),setTimeout(function(){t._internalTrigger("ready")},0)},o.prototype._nativePxmake=function(e){var t=this;this.$el=e,this.ooyalaGlobal=window[r()];var n=function(){t.ooyalaGlobal=t.ooyalaGlobal||window.OO,t.ooyalaGlobal.ready(function(){i.setStyle(t.$el,{height:t.$el.getAttribute("height"),width:t.$el.getAttribute("width"),"background-color":"black"}),t.$el.outerHTML=t.$el.outerHTML.replace(/iframe/g,"div");var e={autoplay:t._needsAutoPlay(),pcode:t.videoInfo.provider_specific_params.pcode,playerBrandingId:t.videoInfo.provider_specific_params.playerBrandingId,debug:!0,adRequestTimeout:30,showLinearAdSkipButton:!0,"google-ima-ads-manager":{all_ads:[{tag_url:t._getAdTag()}],adTagUrl:t._getAdTag(),vid:t.videoInfo.provider_id},onCreate:function(e){t.ooPlayer=e,t.__setupTriggers(),setTimeout(function(){t._internalTrigger("ready"),t.$el=document.getElementById(t.$el.id)},2e3)}};"4"===a.bind(t)().split(".")[0]&&(e.skin={config:t.videoInfo.provider_specific_params.skin_config||"//player.ooyala.com/static/v4/stable/"+a.bind(t)()+"/skin-plugin/skin.json"}),t.ooyalaGlobal.Player.create(t.$el.id,t.videoInfo.provider_id,e)})};this.ooyalaGlobal?n():this.__loadDependency(e,n)},o.prototype._nativeCanChangeSrc=function(e,t){var n=i.objPath(this.ooyalaGlobal,["__internal","playerParams","core_version"]);return 3!==n},o.prototype.__loadDependency=function(t,r){var o=a.bind(this)().split(".")[0],s={3:{js:["//player.ooyala.com/v3/"+this.videoInfo.provider_specific_params.playerId]},4:{js:["ooyala-4.10.4","ooyala-4.10.4.main_html5","ooyala-4.10.4.html5-skin","ooyala-4.10.4.google_ima"],css:"//player.ooyala.com/static/v4/stable/4.10.4/skin-plugin/html5-skin.css"}},l=r;dependencies=s[o].js,s[o].css&&(l=function(){var e=n(s[o].css);e.then(r)});var d=i.objPath(window,["pxRequire","require"])||e;d.undef&&dependencies.forEach(function(e){d.undef(e)}),delete window.OO,d(dependencies,l)},o.prototype._nativeIframeUrl=function(){return this.videoInfo.src},o.prototype._nativeChangeSrc=function(e){this.ooPlayer.setEmbedCode(this.videoInfo.provider_id,{vid:this.videoInfo.provider_id}),this._internalTrigger("changed_src"),e()},o.prototype._nativeDuration=function(){return this.ooPlayer.duration||(this.ooPlayer.getItem()||{}).duration},o.prototype._nativePlay=function(e){this.ooPlayer.play()},o.prototype._nativePause=function(e){this.ooPlayer.pause()},o.prototype._nativeGetCurrentTime=function(){return this.ooPlayer.getPlayheadTime()},o.prototype._nativeSetCurrentTime=function(e){this.ooPlayer.seek(e)},o.prototype._nativeDispose=function(e){this.ooPlayer&&(e&&this.ooPlayer.destroy(),delete this.ooPlayer)},o.prototype.__setupTriggers=function(){var e=this,t=this.ooPlayer.mb;this.ooPlayer.subscribe("*",t,function(t,i){switch(t){case"playbackReady":e._internalTrigger("ready");break;case"paused":e._internalTrigger("generic_pause");break;case"playing":e._internalTrigger("generic_play");break;case"seek":e._internalTrigger("video_seeking"),e.__ignoreNextTimeupdate=!e.isPlaying(),e.__needSeekedEvent=!0;break;case"seeked":delete e.__needSeekedEvent,e._internalTrigger("video_seeked");break;case"adsPlayed":e._internalTrigger("ad_end");break;case"willPlayAds":e._internalTrigger("ad_play");break;case"playheadTimeChanged":if(e.__needSeekedEvent){delete e.__needSeekedEvent,e._internalTrigger("video_seeked");break}e.__ignoreNextTimeupdate?delete e.__ignoreNextTimeupdate:e._internalTrigger("generic_timeupdate"),e.progress>=1&&e._internalTrigger("video_end");break;case"played":e._internalTrigger("video_end")}})},o.prototype.__updateAdTag=function(){i.objPath(ooPlayer,["parameters","google-ima-ads-manager","adTagUrl"])&&(this.ooPlayer.parameters["google-ima-ads-manager"].adTagUrl=this.config.ads.tag)},o}),pxRequire.define("px-jwplayer",["require","px-player","px-utils","globals","video-info","player-config"],function(e,t,i,n,r,a){var o=function(){t.apply(this,arguments)};return o.prototype=Object.create(t.prototype),o.playerName="jwplayer",o.prototype.playerName=o.playerName,o.containerType="div",o.prototype.containerType=o.containerType,o.prototype.canSetAds=!0,o.prototype.alwaysPlayAfterSeek=!0,o.prototype.currentTimeNeedsTimeupdateToBeUpdated=!0,o.prototype._nativePxize=function(e){var t=this;this.jwGlobal=window.jwplayer,this.videoInfo.provider_specific_params.version=this.videoInfo.provider_specific_params.version||this.jwGlobal.version,this.jwPlayer=this.jwGlobal(e.id),this.$el=e;var i=function(){t.__setupTriggers(),setTimeout(function(){t._internalTrigger("ready"),t._needsAutoPlay()&&t.jwPlayer.getState&&"idle"===t.jwPlayer.getState()&&t.jwPlayer.play()},0)};this._getAdTag();return void i()},o.prototype._nativePxmake=function(e){var t=this;this.__isJwHosted(this.videoInfo)&&(e.id="botr_"+this.videoInfo.provider_id+"_"+(this.videoInfo.provider_specific_params.playerId+"_div")),this.__loadDependency(e,function(){t.__setupJwPlayerWithConfig(e,function(){t._internalTrigger("ready")})})},o.prototype._nativeDuration=function(){return this.jwPlayer.getDuration()},o.prototype._nativePlay=function(){this.jwPlayer.play(!0)},o.prototype._nativePause=function(){this.jwPlayer.pause(!0),this.isNRJ()&&i.objPath(this.jwPlayer,["plugins","StickyJW6Plugin","playerAdsManager","pauseAd"])&&this.jwPlayer.plugins.StickyJW6Plugin.playerAdsManager.pauseAd()},o.prototype._nativeGetCurrentTime=function(){return this.jwPlayer.getPosition()},o.prototype._nativeSetCurrentTime=function(e){this.jwPlayer.seek(e)},o.prototype._nativeCanChangeSrc=function(e,t){return this.isPMC()?!1:this.__getVersionNumber(this.videoInfo)===this.__getVersionNumber(e)&&this.__isJwHosted(this.videoInfo)===this.__isJwHosted(e)},o.prototype._nativeChangeSrc=function(e){var t=this,n=this.$el.pxPositionBinder,r=0;i.isInFullscreen()&&(r=500,i.exitFullscreen()),setTimeout(function(){t.config.replaceElement=t._buildReplaceElement(),t.__setupJwPlayerWithConfig(t.$el,function(){t._internalTrigger("changed_src"),n&&n.update(t.$el),e()})},r)},o.prototype._nativeDispose=function(e){this.jwPlayer&&(!e||this.videoInfo.src.match("youtu")||this.jwPlayer.getRenderingMode&&"flash"===this.jwPlayer.getRenderingMode()||this.videoInfo.provider_specific_params.version.match(/^6\.6/)||this.videoInfo.provider_specific_params.version.match(/^5\./)||this.jwGlobal(this.$el).remove(),delete this)},o.prototype.__isJwHosted=function(e){return e.src.indexOf("content.jwplatform.com/")>-1},o.prototype.__loadDependency=function(t,n){var r=this,a=function(){r.jwGlobal=window.jwplayer,n()};if(this.__isJwHosted(this.videoInfo))delete window.jwplayer,i.loadScript("//content.jwplatform.com/players/"+this.videoInfo.provider_id+"-"+(this.videoInfo.provider_specific_params.playerId+".js"),t.parentNode,a);else if(this.__isJwplayerVersionCorrect(window.jwplayer))a();else{var o=this.__requireDependencyWithVersion(),s=i.objPath(window,["pxRequire","require"])||e;s.undef&&s.undef(o),delete window.jwplayer,s([o],a)}},o.prototype.__getVersionNumber=function(e){return parseFloat(e.provider_specific_params.version)||7},o.prototype.__isJwplayerVersionCorrect=function(e){var t=e&&parseInt(e.version,10),i=parseInt(this.__getVersionNumber(this.videoInfo),10);return e&&i===t||5===i&&6===t},o.prototype.__requireDependencyWithVersion=function(){return this.__getVersionNumber(this.videoInfo)<7?"jwplayer-6":1282===n.websiteId?"jwplayer-hollywood-life":"jwplayer-7.1.4"},o.prototype.__getJwConfig=function(e){return e?e.getConfig?e.getConfig():e.config:void 0},o.prototype.__onReadyMultipleVersions=function(e){var t=this,i=function(){t.$el=document.getElementById(t.jwPlayer.id),e()};this.jwPlayer.onReady?this.jwPlayer.onReady(i):this.jwPlayer.on?this.jwPlayer.on("ready",i):void 0},o.prototype.__setupJwPlayerWithConfig=function(e,t){var n=this;this.videoInfo.provider_specific_params.version=this.videoInfo.provider_specific_params.version||this.jwGlobal.version;var r=this.jwGlobal(e.id),a=this.__getJwConfig(r)||{},o=this._getAdTag(),s=Object.assign({},a,{autostart:this._needsAutoPlay(),file:this.videoInfo.src,mediaid:this.videoInfo.provider_specific_params.mediaId,height:i.objPath(this.config,["replaceElement","styles","height"])||this.config.height||"100%",width:i.objPath(this.config,["replaceElement","styles","width"])||this.config.width||"100%",flashplayer:this.videoInfo.provider_specific_params.flashplayer||"//ssl.p.jwpcdn.com/player/v/7.1.4/jwplayer.flash.swf",modes:[{type:"html5"},{type:"flash"}]},this.__isJwHosted(this.videoInfo)?{}:{playlist:this.__makePlaylist()},o?{primary:this.config.ads.tag.match("verta")?"flash":null,advertising:{tag:o,client:o?o.match("doubleclick")?"googima":"vast":null}}:{}),l=this.videoInfo.provider_specific_params.skin||(this.isNRJPlay()?this.getNRJPlaySettings().skin:null);l&&(s.skin=this.__getVersionNumber(this.videoInfo)<7?l:{name:l}),this.jwGlobal.key||(this.jwGlobal.key=i.objPath(this.jwGlobal,["defaults","key"])||s.key||this.videoInfo.provider_specific_params.syndication||(this.isNRJPlay()?this.getNRJPlaySettings().syndication:null)),this.jwPlayer=r.setup(s),this.__onReadyMultipleVersions(function(){n.$el.setAttribute("pulpix",""),n.isRecommended()&&n.$el.setAttribute("px-reco",""),setTimeout(function(){n.__setupTriggers(),s.mute||n.jwPlayer.setMute(!1),i.objPath(n.config,["replaceElement","classNames"])&&n.config.replaceElement.classNames.forEach(function(e){i.addClass(n.$el,e)}),i.setStyle(n.$el,i.objPath(n.config,["replaceElement","styles"])),i.setStyleImportant(n.$el,{opacity:1}),n.jwPlayer.resize(n.$el.offsetWidth,n.$el.offsetHeight),t()},100)})},o.prototype.__makePlaylist=function(){return[{image:this.videoInfo.thumbnail_url,sources:[{file:this.videoInfo.src}]}]},o.prototype.__setupTriggers=function(){function e(e){return e.charAt(0).toUpperCase()+e.slice(1)}var t=this;if(this.isNRJ()&&i.objPath(this.jwPlayer,["plugins","StickyJW6Plugin","playerAdsManager"])){var n={AD_STARTED:"ad_play",AD_IMPRESSION:"ad_play",AD_STOPPED:"ad_error",AD_SKIPPED:"ad_skip",AD_REMAINING_TIME_CHANGE:"ad_play",AD_VIDEO_FIRST_QUARTILE:"ad_timeupdate",AD_VIDEO_MIDPOINT:"ad_timeupdate",AD_VIDEO_THIRD_QUARTILE:"ad_timeupdate",AD_COMPLETE:"ad_end",AD_SLOT_COMPLETE:"ad_end",AD_PAUSE:"ad_pause",AD_RESUME:"ad_play",AD_ERROR:"ad_error"},r=void 0;Object.keys(n).forEach(function(e){t.jwPlayer.plugins.StickyJW6Plugin.playerAdsManager.on(window.com.stickyadstv.PlayerAdsManager[e],function(){t._internalTrigger(n[e]),"AD_REMAINING_TIME_CHANGE"===e&&(clearTimeout(r),r=setTimeout(function(){t.__externalEventTarget.trigger("ad_start")},2e3))})})}var a={play:function(){return t.isNRJ()?void 0:void t._internalTrigger("video_play")},pause:function(){return t.isNRJAdPlaying()?void t._internalTrigger("ad_pause"):void t._internalTrigger("video_pause")},time:function(){return t.isNRJAdPlaying()?void t._internalTrigger("ad_timeupdate"):(t._internalTrigger("video_timeupdate"),void(t.progress()>=1&&t._internalTrigger("video_end")))},complete:function(){t.isNRJAdPlaying()||t._internalTrigger("video_end")},seek:function(){t._internalTrigger("video_seeking"),t._internalTrigger("video_seeked")},playlistItem:function(e){if(!t.isNRJ()||"endScreen"===t.getState()){var n=t.config;n.autoplay=!0;var r={};r.id=void 0,e.item&&(r.provider_id=e.item.mediaid||i.createHashFromString(e.item.file),r.provider=t.videoInfo.provider,r.website_id=t.videoInfo.website_id,r.provider_specific_params=t.videoInfo.provider_specific_params,r.provider_specific_params.file=e.item.file,r.provider_specific_params.mediaId=e.item.mediaid,t._onSrcChangedNatively(r,n))}},fullscreen:function(e){e.fullscreen?(t._fullscreenRemovedStyle=t.$el.getAttribute("style"),t.__externalEventTarget.trigger("fullscreen",{fullscreen:!0}),t.$el.setAttribute("style","")):t._fullscreenRemovedStyle&&(t.__externalEventTarget.trigger("fullscreen",{fullscreen:!1}),t.$el.setAttribute("style",t._fullscreenRemovedStyle),t._fullscreenRemovedStyle=void 0)},adPlay:function(){t._internalTrigger("ad_play")},adComplete:function(){t._internalTrigger("ad_end")},adSkipped:function(){t._internalTrigger("ad_end")},adTime:function(){t._internalTrigger("ad_timeupdate")}};Object.keys(a).forEach(function(i){var n="on"+e(i);t.jwPlayer[n]?t.jwPlayer[n](a[i]):t.jwPlayer.on&&t.jwPlayer.on(i,a[i])}),this.isLagardere()&&this.jwPlayer.onAdPlay&&setInterval(function(){"playing"===t.jwPlayer.getState()&&t._internalTrigger("generic_timeupdate")},500)},o.prototype._onSrcChangedNatively=function(e,t){var i=this;this.videoInfo=new r(e),this.config=new a(t),this.updateVideoInfoFromAPI(),this.__contextStateMachine&&this.__contextStateMachine.reset(),this.config.externalEventTarget=this.__externalEventTarget,this.__createEventTargetsAndStateMachines(),this.__contextStateMachine.onGoToState("startScreen",function(){i.__handleAutoplayBehavior()}),this._internalTrigger("changed_src")},o.prototype.resize=function(e,t){this.jwPlayer.resize(e,t)},o.prototype._nativeOnResize=function(){var e=window.getComputedStyle(this.$el);this.jwPlayer.resize(e.width,e.height)},o.prototype._nativeMute=function(e){this.jwPlayer.setMute(e)},o.prototype.isNRJ=function(){return[1321,1322].includes(n.websiteId)},o.prototype.isNRJPlay=function(){return 1322===n.websiteId||!0},o.prototype.isNRJAdPlaying=function(){return this.isNRJ()&&i.objPath(this.jwPlayer,["plugins","StickyJW6Plugin","playerAdsManager","isAdPlaying"])&&this.jwPlayer.plugins.StickyJW6Plugin.playerAdsManager.isAdPlaying()},o.prototype.isLagardere=function(){return[989,994].includes(n.websiteId)},o.prototype.isPMC=function(){return[1281,1282].includes(n.websiteId)},o.prototype.getNRJPlaySettings=function(){return{flashplayer:"http://www.nrj-play.fr/js/jwplayer.flash.swf",version:"7.9.1+commercial_v7-9-1.156.commercial.e05360.jwplayer.b85544.freewheel.f5bb34.googima.f2c593.vast.9a56a3.analytics.898d43.plugin-gapro.7e936b.plugin-related.d1b3e9.plugin-sharing.a93859.vr-plugin.84df0c.hls.js.",
syndication:"LHiuqy9PC2+UBNxvu7WvYZN8vFAdJlAQ6Su3lw==",skin:"five"}},o}),pxRequire.define("px-brightcove-iframe",["px-player","px-utils"],function(e,t){var i=function(){e.apply(this,arguments)};return i.prototype=Object.create(e.prototype),i.playerName="brightcove-iframe",i.prototype.playerName=i.playerName,i.containerType="iframe",i.prototype.containerType=i.containerType,i.prototype._nativeInitialize=function(){var e=this;this._duration=this.videoInfo.duration/1e3,this._currentTime=0,this.bcIframePlayer=this.$el,this._setupTriggers(),this.manuallyCreated!==!0&&setTimeout(function(){e._internalTrigger("ready")},0)},i.prototype._nativeIframeUrl=function(){var e={videoId:this.videoInfo.provider_id};return this.config.autoplay&&(e.autoplay=!0),"//players.brightcove.net/"+this.videoInfo.provider_specific_params.syndication+"/"+(this.videoInfo.provider_specific_params.playerId+"_default/")+("index.html?"+t.serialize(e))},i.prototype._setupTriggers=function(){var e=this,t=function i(t){if(e.bcIframePlayer){if(-1!==["https://players.brightcove.com","https://players.brightcove.net","http://players.brightcove.com","http://players.brightcove.net"].indexOf(t.origin)&&t.source===e.bcIframePlayer.contentWindow){for(var n=t.data.split("&"),r={},a=0;a<n.length;a++){var o=n[a].split("=");r[o[0]]=o[1]}switch(r.event){case"apiready":e._internalTrigger("ready");break;case"play":e._internalTrigger("video_play");break;case"timeupdate":"endScreen"!==e.getState()&&(e._currentTime=r.time,e._internalTrigger("video_timeupdate"));break;case"pause":e._internalTrigger("video_pause");break;case"seeking":e._internalTrigger("video_seeking");break;case"seeked":e._internalTrigger("video_seeked");break;case"ended":e._internalTrigger("video_end");break;case"durationchange":e._duration=r.duration;break;case"ad_play":e._internalTrigger("ad_play");break;case"ad_pause":e._internalTrigger("ad_pause");break;case"ad-playback":case"ad_timeupdate":e._internalTrigger("ad_timeupdate");break;case"ad_ended":e._internalTrigger("ad_end")}}}else window.removeEventListener("message",i,!1);e.bcIframePlayer.contentWindow.postMessage("event=sendAdState","*")};window.addEventListener("message",t,!1)},i.prototype._nativeDuration=function(){return this._duration},i.prototype._nativePlay=function(t){this.bcIframePlayer.contentWindow.postMessage("event=play","*"),e.prototype.play.call(this,t)},i.prototype._nativePause=function(t){this.bcIframePlayer.contentWindow.postMessage("event=pause","*"),e.prototype.pause.call(this,t)},i.prototype._nativeGetCurrentTime=function(){return this._currentTime},i.prototype._nativeSetCurrentTime=function(e){this.bcIframePlayer.contentWindow.postMessage("event=currentTime&time="+e,"*")},i.prototype._nativeChangeSrc=function(e,t,i){return"undefined"!=typeof e&&(this.videoId=e.provider_id,this.videoInfo=e,this.config=t,this._currentTime=0,this._duration=0,this.bcIframePlayer.contentWindow.postMessage("event=load&videoId="+this.videoId,"*"),this._currentTime=0,i&&i(this)),this.videoId},i.prototype._nativeDispose=function(e){this.bcIframePlayer&&delete this.bcIframePlayer},i}),pxRequire.define("px-theplatform",["px-player","px-utils"],function(e,t){var i=function(){e.apply(this,arguments)};return i.prototype=Object.create(e.prototype),i.playerName="theplatform",i.prototype.playerName=i.playerName,i.containerType="iframe",i.prototype.containerType=i.containerType,i.prototype.alwaysPlayAfterSeek=!0,i.prototype._nativePxize=function(){var e=this;setTimeout(function(){e.__post("initialization","playerUrl",[window.location.href]),e.__setupTriggers(),e._internalTrigger("ready")},0)},i.prototype._nativePxmake=function(e){var t=this;e.frameborder="0",e.allowfullscreen="",e.setAttribute("data-pdkController",""),e.setAttribute("data-pdkEvents",""),e.onload=function(){t.__post("initialization","playerUrl",[window.location.href]),t.__setupTriggers()}},i.prototype._nativePlay=function(e){this.__playButtonInitialized?this.__post("method","pause",[!1]):(this.__playButtonInitialized=!0,this.__post("method","clickPlayButton"))},i.prototype._nativePause=function(e){this.__post("method","pause",[!0])},i.prototype._nativeDuration=function(){return this.__duration},i.prototype._nativeGetCurrentTime=function(){return this.__currentTime},i.prototype._nativeSetCurrentTime=function(e){this.__post("method","seekToPosition",[1e3*e]),this.__seeking=!0,this.__currentTime=e},i.prototype._nativeChangeSrc=function(e){var t=this;this.__duration=0,this.__currentTime=0,this.$el.src=this.videoInfo.src,this.$el.onload=function(){t.__post("initialization","playerUrl",[window.location.href]),t.__setupTriggers(),t._internalTrigger("changed_src"),e()}},i.prototype._nativeIframeUrl=function(){return"//player.theplatform.com/p/"+(this.videoInfo.provider_specific_params.syndication+"/")+(this.videoInfo.provider_specific_params.playerId+"/embed/select/")+(this.videoInfo.provider_id+"?autoPlay="+this._needsAutoPlay()+"&allowEmbed=true")},i.prototype._nativeDispose=function(){},i.prototype.__setupTriggers=function(){var e=this,i=function(e){return(e.parameters[0].data.baseClip||{}).isAd},n=[{nativeEvents:["OnPlayerLoaded","OnReleaseStart"],internalEvent:"ready"},{nativeEvents:["OnSetReleaseUrl","OnLoadReleaseUrl"],internalEvent:"changed_src"},{nativeEvents:["OnReleaseStart"],internalEvent:"video_start"},{nativeEvents:["OnMediaStart"],internalEvent:function(t){return i(t)?"ad_start":(e.__duration=t.parameters[0].data.length/1e3,"video_start")}},{nativeEvents:["OnMediaPlay"],internalEvent:"generic_play"},{nativeEvents:["OnMediaPlaying"],internalEvent:function(t){return"inVideo"===e.getState()&&(e.__currentTime=t.parameters[0].data.currentTime/1e3),"generic_timeupdate"}},{nativeEvents:["OnMediaPause"],internalEvent:"generic_pause"},{nativeEvents:["OnMediaUnpause"],internalEvent:"generic_play"},{nativeEvents:["OnMediaSeek"],internalEvent:function(){return e._internalTrigger("video_seek"),"video_seeked"}},{nativeEvents:["OnMediaEnd"],internalEvent:function(e){return e.parameters[0].data.baseClip.isAd?"ad_end":"video_end"}}];n.forEach(function(t){t.nativeEvents.forEach(function(t){e.__post("addEventListener",t,[void 0,void 0])})});var r=function a(i){if(e.$el){if(t.inArray(i.origin,["http://player.theplatform.com","https://player.theplatform.com"])&&i.source===e.$el.contentWindow)try{var r=JSON.parse(i.data),o=n.find(function(e){return e.nativeEvents.find(function(e){return e===r.name})});e._internalTrigger("function"==typeof o.internalEvent?o.internalEvent(r):o.internalEvent)}catch(i){}}else window.removeEventListener("message",a,!1)};window.addEventListener("message",r,!1)},i.prototype.__post=function(e,t,i){this.$el.contentWindow.postMessage(JSON.stringify({type:e,name:t,parameters:i||[]}),"*")},i});var _slicedToArray=function(){function e(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(l){r=!0,a=l}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw a}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();pxRequire.define("px-dailymotion",["px-player","px-utils","globals"],function(e,t,i){var n=function(){e.apply(this,arguments)};return n.prototype=Object.create(e.prototype),n.playerName="dailymotion",n.prototype.playerName=n.playerName,n.containerType="iframe",n.prototype.containerType=n.containerType,n.prototype.canPauseDuringAds=!1,n.prototype.seekingPrecision=8,n.prototype._nativeInitialize=function(){var e=this;this.__duration=this.videoInfo.duration,this.__currentTime=0,this.dmPlayer=this.$el,this.__setupTriggers(),this.manuallyCreated||setTimeout(function(){e._internalTrigger("ready")},0)},n.prototype._nativeIframeUrl=function(){var e={autoplay:this._needsAutoPlay()?1:0,api:"postMessage",info:1,logo:1,controls:"html",wmode:"opaque",origin:window.location.protocol+"//"+window.location.host,"queue-enable":0};return e.autoplay&&(t.isChrome()||t.isSafari())&&(e.mute=1),this.videoInfo.provider_specific_params.syndication&&(e.syndication=this.videoInfo.provider_specific_params.syndication),this.config.iframeParam&&Object.assign(e,t.deserialize(this.config.iframeParam)),"//www.dailymotion.com/embed/video/"+this.videoInfo.provider_id+"?"+t.serialize(e)},n.prototype._nativeDuration=function(){return this.__duration},n.prototype._nativePlay=function(){this.dmPlayer.contentWindow.postMessage("play","*")},n.prototype._nativePause=function(){this.dmPlayer.contentWindow.postMessage("pause","*")},n.prototype._nativeGetCurrentTime=function(){return this.__currentTime},n.prototype._nativeSetCurrentTime=function(e){this.dmPlayer.contentWindow.postMessage("seek="+e,"*")},n.prototype._nativeChangeSrc=function(e){this.__currentTime=0,this.__duration=0,this.dmPlayer.contentWindow.postMessage(JSON.stringify({command:"load",parameters:[this.videoInfo.provider_id,{autoplay:this._needsAutoPlay(),start:0}]}),"*"),e()},n.prototype._nativeDispose=function(e){this.dmPlayer&&delete this.dmPlayer},n.prototype.__setupTriggers=function(){var e=this,t=function n(t){if(e.dmPlayer){if(-1!==["https://www.dailymotion.com","http://www.dailymotion.com","https://www.dailymotion.com","http://www.dailymotion.com"].indexOf(t.origin)&&t.source===e.dmPlayer.contentWindow){var r=t.data.split("&").reduce(function(e,t){var i=t.split("="),n=_slicedToArray(i,2),r=n[0],a=n[1];return e[r]=a,e},{});switch(r.event){case"apiready":case"qualitiesavailable":e._internalTrigger("ready");break;case"ad_start":e._internalTrigger("ad_start");case"ad_play":e._internalTrigger("ad_play");break;case"ad_pause":e._internalTrigger("ad_pause");break;case"video_start":e._internalTrigger("video_start");break;case"playing":case"play":e._internalTrigger("video_play");break;case"ad_timeupdate":e._internalTrigger("ad_timeupdate");break;case"timeupdate":e.ignoreNextTimeupdate?delete e.ignoreNextTimeupdate:(e.__currentTime=parseFloat(r.time)||e.__currentTime,e._internalTrigger("video_timeupdate"));break;case"pause":e._internalTrigger("video_pause");break;case"seeking":e._internalTrigger("video_seeking");break;case"seeked":e.__currentTime=parseFloat(r.time)||e.__currentTime,e._internalTrigger("video_seeked"),e.ignoreNextTimeupdate=!0;break;case"start":e._internalTrigger("start");case"durationchange":"inVideo"===e.getState()&&(e.__duration=parseFloat(r.duration));break;case"video_end":1006===i.websiteId&&e._internalTrigger("video_end");break;case"end":e._internalTrigger("end");break;case"ad_end":e._internalTrigger("ad_end");break;case"ended":case"started":case"progress":case"waiting":case"qualitychange":case"controlschange":case"loadedmetadata":}}}else window.removeEventListener("message",n,!1)};window.addEventListener("message",t,!1)},n.prototype._nativeMute=function(e){this.dmPlayer.contentWindow.postMessage("muted="+e,"*")},n});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("videojs-ad-injector",["px-utils","xhr","globals"],function(e,t,i){function n(){var e=this;this.vjsplayer.ima;this.adTrackingTimer=setInterval(function(){return e.vjsplayer.ima.getAdsManager()?void e._updateImaCountdownRemainingTime():void clearInterval(e.adTrackingTimer)},500)}function r(e){return Math.floor(e/60)?Math.floor(e/60)+":"+(e%60?e%60:"00"):e%60}function a(){clearInterval(this.adTrackingTimer)}var o={en:"Video starts in ",es:"Vídeo dentro de ",fr:"Votre vidéo dans "},s={en:"a few seconds",fr:"un instant",es:"un momento"},l=function(){function l(e,t,i,n,r){_classCallCheck(this,l),this.vjsplayer=e,this.adConfig=t,this.autoplay=i,this.callback=r,this.videoInfo=n,this.imaPlugin=this.vjsplayer.ima3||this.vjsplayer.ima}return _createClass(l,[{key:"firstPlaySetup",value:function(){var t=this;if(!e.isMobile()&&this.autoplay)this.initialize(),this.requestAds();else{var i="click";e.isMobile()&&(i="touchend"),this.initialize(),this.vjsplayer.one(i,function(){t.requestedFirstAds||t.requestAds()})}}},{key:"initialize",value:function(t){var i=this;if("function"==typeof this.vjsplayer.ima){t&&(this.callback=t),e.isIphone()&&window.google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),window.google.ima.settings.setNumRedirects(10);var n=void 0;this.adConfig.preloadedAdsResponse||Array.isArray(this.adConfig.tag)||!this.autoplay||(n=this.adConfig.tag);var r="<VAST></VAST>";this.adConfig.preloadedAdsResponse?r=this.adConfig.preloadedAdsResponse:Array.isArray(this.adConfig.tag)&&(r=this.buildWaterfall(this.adConfig.tag)),this.vjsplayer.ima({id:this.vjsplayer.id_,adTagUrl:n,adsResponse:r,adLabel:"Your content starts in",showCountdown:!1,withCredentials:!1,nativeControlsForTouch:!1,timeout:1e4,adsRenderingSettings:{loadVideoTimeout:1e4,uiElements:[],useStyledLinearAds:!1},adsManagerLoadedCallback:this.onInitialized.bind(this),vpaidMode:this.getVpaidMode(),vpaidAllowed:!e.isMobile()}),this.vjsplayer.ima.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(){i.calledInitializedCallback||i.onInitialized()}),setTimeout(function(){i.calledInitializedCallback||(i.vjsplayer.ima.getAdsManager()?i.onInitialized():i.autoplay&&i.vjsplayer.play())},2e3),[window.google.ima.AdErrorEvent.Type.AD_ERROR,window.google.ima.AdError.Type.AD_LOAD,window.google.ima.AdError.Type.AD_PLAY].forEach(function(e){i.vjsplayer.ima.addEventListener(e,function(e){i.vjsplayer.trigger("aderror"),i.logError(e.getError())})})}}},{key:"onInitialized",value:function(){var e=this;this.calledInitializedCallback||(this.imaPlugin=this.vjsplayer.ima3||this.vjsplayer.ima,this.calledInitializedCallback=!0),this.callback&&this.callback();try{this.vjsplayer.ima.startFromReadyCallback()}catch(t){}this.vjsplayer.ima.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,function(t){e.logError(t.getError())},!0),this.$imaCountdown&&this.updateCountdownDisplay(),this.vjsplayer.ima.addEventListener(window.google.ima.AdEvent.Type.STARTED,n.bind(this)),this.vjsplayer.ima.addEventListener(window.google.ima.AdEvent.Type.COMPLETE,a.bind(this)),this.vjsplayer.ima.addEventListener(window.google.ima.AdEvent.Type.SKIPPED,a.bind(this))}},{key:"updateCountdownDisplay",value:function(){this.adConfig.showCountdown?e.removeClass(this.$imaCountdown,"px-hide"):e.addClass(this.$imaCountdown,"px-hide"),e.setStyle(this.$imaCountdownThumbnail,{"background-image":"url("+this.videoInfo.thumbnail_url+")"}),this.$imaCountdownTitle.innerHTML=this.videoInfo.title}},{key:"setVideoInfo",value:function(e){e&&(this.videoInfo=e)}},{key:"requestAds",value:function(t){!this.adContainerInitialized&&this.vjsplayer.ima&&(this.vjsplayer.ima.initializeAdDisplayContainer(),this.adContainerInitialized=!0),this.imaPlugin=this.vjsplayer.ima3||this.vjsplayer.ima,this.imaPlugin&&this.imaPlugin.requestAds&&(this.setContentWithAds(null,this.adConfig,!1,t),this.adConfig.showCountdown&&this.createImaCountdown(),e.isMobile()&&this.createImaAdOverlay(),this.imaPlugin.requestAds()),this.requestedFirstAds=!0}},{key:"setContentWithAds",value:function(e,t,i,n){this.setVideoInfo(n),this.adConfig=t,this.imaPlugin.setContentWithAdTag&&this.imaPlugin.setContentWithAdsResponse&&(Array.isArray(t.tag)||t.preloadedAdsResponse?(this.imaPlugin.setContentWithAdsResponse(e,t.preloadedAdsResponse||this.buildWaterfall(t.tag),i),this.imaPlugin.controller.settings.adTagUrl=void 0):this.imaPlugin.setContentWithAdTag(e,t.tag||null,i))}},{key:"createImaCountdown",value:function(){if(!this.$imaCountdown){var t=this.vjsplayer.el_.querySelector(".ima-ad-container");this.$imaCountdown=document.createElement("div"),this.$imaCountdown.innerHTML='<div class="ima-ad-countdown-content ima-ad-countdown-content-left">'+('<div class="ima-ad-countdown-thumbnail" style="background-image:url('+this.videoInfo.thumbnail_url+');"></div>')+'</div><div class="ima-ad-countdown-content ima-ad-countdown-content-right"><div class="ima-content-middle">'+('<div class="ima-ad-countdown-label">'+o[e.findLanguage()]+' <span class="ima-ad-countdown-remaining-time"></span></div>')+('<div class="ima-ad-countdown-title">'+this.videoInfo.title+"</div>")+"</div></div>",this.$imaCountdown.className="ima-ad-countdown",this.$remainingTime=this.$imaCountdown.querySelector(".ima-ad-countdown-remaining-time"),this.$imaCountdownThumbnail=this.$imaCountdown.querySelector(".ima-ad-countdown-thumbnail"),this.$imaCountdownTitle=this.$imaCountdown.querySelector(".ima-ad-countdown-title"),this._updateImaCountdownRemainingTime(),t.appendChild(this.$imaCountdown)}}},{key:"_updateImaCountdownRemainingTime",value:function(){if(this.$imaCountdown){var t=this.vjsplayer.ima,i=-1;t&&t.getAdsManager&&t.getAdsManager()&&(i=t.getAdsManager().getRemainingTime()),-1===i&&t.contentPlayer&&(i=t.contentPlayer.duration-t.contentPlayer.currentTime),i&&i>0?this.$remainingTime.innerHTML=r(Math.floor(i,10))+"s":this.$remainingTime.innerHTML=s[e.findLanguage()]}}},{key:"createImaAdOverlay",value:function(){var e=this;if(!this.$imaOverlay){var t=this.vjsplayer.el_.querySelector(".ima-ad-container");this.$imaOverlay=document.createElement("div"),this.$imaOverlay.className="ima-overlay",this.$imaOverlay.addEventListener("click",function(){e.vjsplayer.ima.adPlaying?e.vjsplayer.ima.pauseAd():e.vjsplayer.ima.resumeAd()}),t.appendChild(this.$imaOverlay)}}},{key:"getVpaidMode",value:function(){return window.google.ima.ImaSdkSettings.VpaidMode.INSECURE}},{key:"buildWaterfall",value:function(e){var t=['<VAST version="2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="vast.xsd">',e.map(function(e,t){return'<Ad id="'+t+'">\n                        <Wrapper>\n                            <AdSystem>adsystem'+t+"</AdSystem>\n                            <VASTAdTagURI>\n                                <![CDATA["+e+']]>\n                            </VASTAdTagURI>\n                          <Extensions>\n                            <Extension type="waterfall" fallback_index="'+t+'" />\n                          </Extensions>\n                        </Wrapper>\n                    </Ad>'}).join(""),"</VAST>"].join("");return t}},{key:"logError",value:function(e){var n=i.getApiHost(),r=n+"/api/v1/analytics/log_ad_error",a={timestamp:(new Date).toISOString(),website_id:i.websiteId,error_code:e.getErrorCode(),inner_error:e.getInnerError(),message:e.getMessage(),type:e.getType(),vast_error_code:e.getVastErrorCode()};t.post(r,a)}}]),l}();return l});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};pxRequire.define("px-videojs",["require","px-player","px-utils","videojs-ad-injector","globals"],function(e,t,i,n,r){var a=function(){t.apply(this,arguments)};return a.prototype=Object.create(t.prototype),a.playerName="videojs",a.prototype.playerName=a.playerName,a.containerType="video",a.prototype.containerType=a.containerType,a.prototype.canSetAds=!0,a.forceReloadOnSrcChange=!0,a.prototype.canPauseDuringAds=!1,a.prototype.needsManualTriggersInterval=!0,a.prototype.cssClass="vjs-default-skin",a.prototype._nativePxize=function(e){var t=this;this.vjsplayer=window.videojs.players[e.id],this.__setupTriggers(),this.__needsAds()&&this.__updateAdTag(),this.replaceAdMacroReplacement(),setTimeout(function(){t._internalTrigger("ready")},0)},a.prototype._nativePxmake=function(e){this.__isBrightcoveHosted(this.videoInfo)?this.__nativePxmakeBrightcove(e):this.__nativePxmakeSelfHosted(e);var t=i.objPath(this.config,["replaceElement","attributes","data-tags"]);(this.videoInfo.provider_specific_params.partnerName||t)&&this.__setPrismaDataTag(e,t)},a.prototype.__nativePxmakeBrightcove=function(e){e.id;i.addClass(e,"video-js vjs-default-skin"),e.setAttribute("data-embed","default"),e.setAttribute("data-account",this.videoInfo.provider_specific_params.syndication),e.setAttribute("data-player",this.videoInfo.provider_specific_params.playerId),e.setAttribute("data-video-id",this.videoInfo.provider_id),e.setAttribute("controls",""),e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e.setAttribute("data-param-playsinline","true"),this.config.muted&&e.setAttribute("muted",""),this.config.autoplay&&(e.setAttribute("autoplay",!0),e.setAttribute("data-param-autoplay","true")),this.autoplayBehavior="never",window.videojs&&"4.8"===window.videojs.CDN_VERSION&&(window.videojs=void 0),window.google&&(window.google=void 0);var t=this;i.loadScript("//players.brightcove.net/"+this.videoInfo.provider_specific_params.syndication+"/"+(this.videoInfo.provider_specific_params.playerId+"_default/index.min.js"),function(){var n=window.bc||window.videojs;n(e.id).ready(function(){t.vjsplayer=this,e.setAttribute("style",""),t.$el=t.vjsplayer.el_,t.__needsAds()&&t.__updateAdTag(),t.__setupTriggers(),i.setStyle(t.vjsplayer.el_,{"z-index":Math.max(i.style.deserialize(t.vjsplayer.el_.getAttribute("style"))["z-index"],99)}),t._internalTrigger("ready"),t._needsAutoPlay()||(t.vjsplayer.options_.autoplay=!1,e.removeAttribute("autoplay"))})})},a.prototype.__getSrc=function(){return this.videoInfo.src},a.prototype.__getTypedSrc=function(){var e=function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e.src&&e.type},t=this.__getSrc();if(!t)return null;if("string"==typeof t)return[{src:this.__getSrc(),type:this._findType(this.__getSrc())}];if(Array.isArray(t)&&t.every(e))return t;if(e(t))return[t];throw new Error("Src is not in the right format")},a.prototype.__nativePxmakeSelfHosted=function(t){var r=this;i.addClass(t,"video-js"),i.addClass(t,this.cssClass);var a=this.__getTypedSrc();a&&a.forEach(function(e){var i=document.createElement("source");i.setAttribute("src",e.src),i.setAttribute("type",e.type),t.appendChild(i)}),t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline",""),t.setAttribute("poster",this.videoInfo.thumbnail_url);var o=this;e(this.__nativePxmakeGetRequirements(),function(e){e(function(e){o.vjsplayer=e(t,{autoplay:r._needsAutoPlay(),controls:!0,src:""},function(){o.vjsplayer=this}).ready(function(){r.vjsplayer=bc(r.$el),r.vjsplayer.controls(!0),r.$el=r.vjsplayer.el_,i.setStyle(r.$el,{"z-index":99}),r.__setupTriggers(),r._internalTrigger("ready")}),(o.__needsAds()||"pulpix-player"===o.playerName)&&(o.adInjector=new n(o.vjsplayer,o._getAdConfig(),o._needsAutoPlay(),{title:r.videoInfo.title,thumbnail_url:r.videoInfo.thumbnail_url},o.__setupImaTriggers.bind(o)),o.adInjector.firstPlaySetup())})})},a.prototype.__nativePxmakeGetRequirements=function(){var e=this.__needsAds()?"px-videojs-ima":"videojs-private";return[e]},a.prototype._nativeInitialize=function(){var e=this;this.on("ad_start",function(){e.__setManualTriggersInterval()}),this.on("ad_end",function(){e.__stopManualTriggersInterval()})},a.prototype._nativeDuration=function(){return this.vjsplayer&&this.vjsplayer.duration()},a.prototype._nativePlay=function(e){if(this.__needsAds()){var t=this.vjsplayer.ima3||this.vjsplayer.ima;t&&t.requestAds&&t.requestAds()}if(this.vjsplayer.ads&&("ad-playback"===this.vjsplayer.ads.state||"ads-ready"===this.vjsplayer.ads.state)){var i=this.vjsplayer.ima3||this.vjsplayer.ima;return i&&i.adPlayer&&i.adPlayer.play&&i.adPlayer.parentNode?i.adPlayer.play():i&&i.resumeAd?i.resumeAd():this.vjsplayer.play(),this._internalTrigger("ad_play"),!0}this.vjsplayer.play()},a.prototype._nativePause=function(e){if(this.vjsplayer.ads&&"ad-playback"===this.vjsplayer.ads.state){var t=this.vjsplayer.ima3||this.vjsplayer.ima;t&&t.adPlayer&&t.adPlayer.play?t.adPlayer.pause():t&&t.resumeAd&&t.pauseAd(),this._internalTrigger("ad_pause")}else this.vjsplayer.pause()},a.prototype._nativeGetCurrentTime=function(){return this.vjsplayer.ads&&this.vjsplayer.ads.isAdPlaying&&this.vjsplayer.ads.isAdPlaying()?0:this.vjsplayer.currentTime()},a.prototype._nativeSetCurrentTime=function(e){this.vjsplayer.currentTime(e)},a.prototype._nativeChangeSrc=function(e){var t=this;if(this.videoInfo.provider_specific_params.partnerName&&this.__setPrismaDataTag(this.$el),this.__isBrightcoveHosted(this.videoInfo)){if(this.vjsplayer.ads&&"ad-playback"===this.vjsplayer.ads.state)try{this.vjsplayer.ima3.adsManager.stop()}catch(i){}this.vjsplayer.catalog.getVideo(this.videoInfo.provider_id,function(i,n){t.vjsplayer.catalog.load(n),t._needsAutoPlay()&&t.vjsplayer.play(),t._internalTrigger("changed_src"),e()})}else{if(this.__needsAds()){if(this.vjsplayer.vastClient)return this.vjsplayer.vastClient({adTagUrl:this._getAdTag()}),this.vjsplayer.src({src:this.__getSrc(),type:this._findType(this.__getSrc())}),this._internalTrigger("changed_src"),this.vjsplayer.play(),void e();if(this.vjsplayer.ima){var r=function(){t.vjsplayer.options_.autoplay=!1;var i=t.__getSrc();i||t.vjsplayer.src(null),t.vjsplayer.ima.setContentWithAdTag(t.__getTypedSrc(),t._getAdTag(),!1),t.adInjector?t.adInjector.requestAds({thumbnail_url:t.videoInfo.thumbnail_url,title:t.videoInfo.title}):t.vjsplayer.ima.requestAds(),t._internalTrigger("changed_src"),e()};return"function"==typeof this.vjsplayer.ima&&(this.adInjector=new n(this.vjsplayer,this._getAdConfig(),this._needsAutoPlay(),{title:this.videoInfo.title,thumbnail_url:this.videoInfo.thumbnail_url},this.__setupImaTriggers.bind(this)),this.adInjector.initialize()),this.vjsplayer.ima.getAdsManager()?(this.vjsplayer.ima.getAdsManager().stop(),void setTimeout(function(){r()},50)):void r()}}if(this.vjsplayer.ima.getAdsManager())return this.vjsplayer.ima.getAdsManager().stop(),this.vjsplayer.ima.setContentWithAdTag({src:this.__getSrc(),type:this._findType(this.__getSrc())},null,!0),this._internalTrigger("changed_src"),void e();this.vjsplayer.src(this.__getTypedSrc()),this.vjsplayer.play(),this._internalTrigger("changed_src"),e()}},a.prototype.__needsAds=function(){return Boolean(this.config.ads&&(this.config.ads.tag||this.config.ads.preloadedAdsResponse))||this._isNativeAd()||r.isPrisma&&this.isRecommended()},a.prototype._nativeCanChangeSrc=function(e){return this.__isBrightcoveHosted(e)===this.__isBrightcoveHosted(this.videoInfo)},a.prototype.__isBrightcoveHosted=function(e){return Boolean(e.provider_specific_params.playerId)},a.prototype._nativeDispose=function(e){this.vjsplayer.ima&&this.vjsplayer.ima.controller&&this.vjsplayer.ima.controller.onPlayerDisposed();try{this.vjsplayer.dispose()}catch(t){void 0}},a.prototype.__adTimeHasPassed=function(){var e=this.vjsplayer.ima3||this.vjsplayer.ima;if("inVideo"!==this.getState()&&this.__isAdPlaying()&&e&&i.objPath(e,["adsManager","getRemainingTime"])){var t=e.adsManager.getRemainingTime(),n=t<this.lastAdTimeRemaining;return this.lastAdTimeRemaining=t,n}},a.prototype.__onManualTriggersInterval=function(){this.__adTimeHasPassed()&&this._internalTrigger("ad_timeupdate")},a.prototype.__setupTriggers=function(){var e=this;if("www.ign.com"===window.location.hostname){var t=document.getElementsByClassName("ign-controls-overlay");t.length&&(this.controlEl=t[0])}this.vjsplayer.on("playing",function(){e._internalTrigger("video_play")}),this.vjsplayer.on("pause",function(){e.progress()>=1?e._internalTrigger("video_end"):e._internalTrigger("video_pause")}),this.vjsplayer.on("seeking",function(){e._internalTrigger("video_seeking")}),this.vjsplayer.on("seeked",function(){e._internalTrigger("video_seeked")}),this.vjsplayer.on("ended",function(){e._internalTrigger("video_end")}),this.vjsplayer.on("timeupdate",function(){e.currentTime()&&(e.__isAdPlaying()?e._internalTrigger("ad_timeupdate"):e._internalTrigger("video_timeupdate"))}),this.__setupAdTriggers()},a.prototype.__setupAdTriggers=function(){var e=this,t=void 0;t=this.__isBrightcoveHosted(this.videoInfo)?{"ima3-ad-error":"ad_error","ima3-complete":"ad_end","ima3-hardtimeout":"ad_error","ima3-started":"ad_start","ima3-impression":"ad_start","ima3-resumed":"ad_play","ima3-midpoint":"ad_timeupdate","ima3-first-quartile":"ad_timeupdate","ima3-third-quartile":"ad_timeupdate","ima3-volume-changed":"ad_timeupdate"}:{"ads-first-quartile":"ad_timeupdate","ads-midpoint":"ad_timeupdate","ads-third-quartile":"ad_timeupdate","ads-play":"ad_play",adend:"ad_end","vast.adStart":"ad_start","vast.adEnd":"ad_end","vast.adSkip":"ad_skip",aderror:"ad_error"},Object.keys(t).forEach(function(i){e.vjsplayer.on(i,function(){e._internalTrigger(t[i])})}),setTimeout(function(){e.__isAdPlaying()?e._internalTrigger("ad_play"):e.vjsplayer.paused()||e._internalTrigger("video_play")},10)},a.prototype.__isAdPlaying=function(){return"ad-playback"===i.objPath(this.vjsplayer,["ads","state"])||i.objPath(this.vjsplayer,["vast","adUnit"])},a.prototype._getAdTag=function(e){if(e=t.prototype._getAdTag.call(this,e),!e){var n=this.vjsplayer.ima3||this.vjsplayer.ima;e=i.objPath(n,["settings","serverUrl"])}return e},a.prototype.replaceAdMacroReplacement=function(){if(i.objPath(this.vjsplayer,["ima3","adMacroReplacement"])){var e=this.vjsplayer.ima3.adMacroReplacement,t=this;this.vjsplayer.ima3.adMacroReplacement=function(i){i=t._formatAdTag(i);var n=i,a=t._getAdTag();return!i.includes(t.getAdUnit())&&a.includes(r.getApiHost())&&(n=i?a+"&prepend_url="+encodeURIComponent(i):a),e(n)},this.replacedAdMacroReplacementFunction=!0}},a.prototype._formatAdTag=function(e){if(e=t.prototype._formatAdTag.call(this,e),r.isPrisma){var n=!1,a=i.url.getParams(e,n),o=i.url.deserialize(decodeURIComponent(a.cust_params),n);this.isRecommended()&&(o.origine="pulpix",o.pulpix_widget=this._getAnalyticsParamsWidget(),o.pulpix_slot=this._getAnalyticsParamsSlot()),o.player_visible="mfeed"===this._getAnalyticsParamsWidget()||this.isVisible(),o.pulpix_multitask=this.hasMultitask();var s=i.url.serialize(o,n);a.cust_params=i.encodeURIComponentWithRule(s,/{([^{}]*)}/g),e=i.url.setParams(e,a,n)}return e},a.prototype.__updateAdTag=function(){if(i.objPath(this.vjsplayer,["ima3"])&&!this.replacedAdMacroReplacementFunction&&r.isPrisma)return void this.replaceAdMacroReplacement();var e=this._getAdTag();if(e!==this.__currentAdTag){var t=this.vjsplayer.ima3||this.vjsplayer.ima;if(window.google&&window.google.ima&&t)if(t.settings&&"onplay"===t.settings.requestMode)t.settings.serverUrl=e;else if(t.requestAds&&window.google.ima.AdsRequest){var n=new window.google.ima.AdsRequest;n.adTagUrl=e;var a=t.adsRequest;a&&(n.linearAdSlotWidth=a.linearAdSlotWidth,n.linearAdSlotHeight=a.linearAdSlotHeight,n.nonLinearAdSlotWidth=a.nonLinearAdSlotWidth,n.nonLinearAdSlotHeight=a.nonLinearAdSlotHeight),t.requestAds(n)}i.objPath(window,["google","ima","settings","setVpaidMode"])&&window.google.ima.settings.setVpaidMode(window.google.ima.ImaSdkSettings.VpaidMode.INSECURE),this.__currentAdTag=e}},a.prototype.setPoster=function(e){this.vjsplayer.poster(e)},a.prototype._findType=function(e){e=e||"";var t={m3u8:"application/x-mpegURL",mp4:"video/mp4",ogg:"video/ogg",mp3:"audio/mp3"},i=e.split("."),n=i[i.length-1];return t[n]||""},a.prototype._nativeOnResize=function(){if(this.vjsplayer&&(this.vjsplayer.ima3||this.vjsplayer.ima)){var e=this.vjsplayer.ima3||this.vjsplayer.ima;i.objPath(e,["adsManager","resize"])&&e.adsManager.resize(this.$el.clientWidth,this.$el.clientHeight,window.google.ima.ViewMode.NORMAL)}},a.prototype._nativeMute=function(e){if(e!==this.vjsplayer.muted()){this.vjsplayer.muted(e),this.vjsplayer.options_&&(this.vjsplayer.options_.muted=e),i.setOrRemoveAttribute(this.$el,"muted",e);var t=this.$el.querySelector("video");t&&(t.removeAttribute("muted"),i.setOrRemoveAttribute(t,"muted",e));var n=this.vjsplayer.ima3||this.vjsplayer.ima;if(n&&n.adsManager){var r=e?0:1;n.adsManager.setVolume(r)}}},a.prototype._nativeMuted=function(e){return this.vjsplayer.muted()},a.prototype.__setPrismaDataTag=function(e,t){if(!t)try{t=JSON.parse(e.getAttribute("data-tags"))}catch(i){t={}}t=t||{},e.setAttribute("data-tags",JSON.stringify({partnerName:this.videoInfo.provider_specific_params.partnerName||t.partnerName,
typePage:"inplayer"===this._getAnalyticsParamsWidget()?t.typePage||"inplayer":"pulpix-immersive",positionPage:t.positionPage||"widget",playerStart:"Autoplay",pubStart:"onPlay"}))},a.prototype.__imaEventMap=function(){var e;return e={},_defineProperty(e,window.google.ima.AdEvent.Type.IMPRESSION,"ad_start"),_defineProperty(e,window.google.ima.AdEvent.Type.COMPLETE,"ad_end"),_defineProperty(e,window.google.ima.AdEvent.Type.SKIPPED,"ad_skip"),_defineProperty(e,window.google.ima.AdEvent.Type.RESUMED,"ad_play"),_defineProperty(e,window.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,"ad_end"),_defineProperty(e,window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,"ad_end"),_defineProperty(e,window.google.ima.AdEvent.Type.PAUSED,"ad_pause"),_defineProperty(e,window.google.ima.AdErrorEvent.Type.AD_ERROR,"ad_error"),_defineProperty(e,window.google.ima.AdEvent.Type.FIRST_QUARTILE,"ad_timeupdate"),_defineProperty(e,window.google.ima.AdEvent.Type.MIDPOINT,"ad_timeupdate"),_defineProperty(e,window.google.ima.AdEvent.Type.THIRD_QUARTILE,"ad_timeupdate"),e},a.prototype.__setupImaTriggers=function(){var e=this;Object.keys(this.__imaEventMap()).forEach(function(t){e.vjsplayer.ima.addEventListener(t,function(){e._internalTrigger(e.__imaEventMap()[t]),2015===r.websiteId&&t===window.google.ima.AdEvent.Type.COMPLETE&&i.objPath(e.vjsplayer.ima,["controller","sdkImpl","onContentResumeRequested"])&&e.vjsplayer.ima.controller.sdkImpl.onContentResumeRequested()})})},a}),pxRequire.define("px-ultimedia",["px-player","px-utils"],function(e,t){var i=function(){e.apply(this,arguments)};return i.prototype=Object.create(e.prototype),i.playerName="ultimedia",i.prototype.playerName=i.playerName,i.containerType="iframe",i.prototype.containerType=i.containerType,i.prototype.supportsAdTracking=!1,i.prototype.alwaysPlayAfterSeek=!0,i.prototype.currentTimeNeedsTimeupdateToBeUpdated=!0,i.prototype.needsManualTriggersInterval=["seeked"],i.prototype.seekingTolerance=1e3,i.prototype._nativeInitialize=function(){var e=this;this.manuallyCreated?this.$el.onload=function(){e.__setupTriggers()}:this.__setupTriggers()},i.prototype._nativeIframeUrl=function(){var e=this.videoInfo.provider_specific_params.category||"generic",i={src:this.videoInfo.provider_id,mdtk:this.videoInfo.provider_specific_params.playerId};this._needsAutoPlay()&&(i.autoplay="yes"),this.config.iframeParam&&Object.assign(i,t.deserialize(this.config.iframeParam));var n="//www.digiteka.net/deliver/"+e+"/iframe?";return n+t.serialize(i)},i.prototype._nativeDuration=function(){return this.__duration},i.prototype._nativePlay=function(e){!this.isPlaying()||this._needsAdPlayer()&&!this._nativeGetCurrentTime()?this.__post("play"):void 0},i.prototype._nativePause=function(e){this.isPlaying()?this.__post("pause"):void 0},i.prototype._nativeGetCurrentTime=function(){return this.__currentTime},i.prototype._nativeOnManualTriggersInterval=function(){this.lastSeekRequiredAt&&this.__post("getCurrentTime")},i.prototype._nativeSetCurrentTime=function(e){this.__post("setCurrentTime="+e)},i.prototype._nativeChangeSrc=function(e){delete this.__currentTime,this.__post("loadVideo="+this.videoInfo.provider_id),e()},i.prototype._nativeCanChangeSrc=function(e,t){var i=e.provider_specific_params.category||"generic",n=this.videoInfo.provider_specific_params.category||"generic";return n===i},i.prototype._nativeDispose=function(){},i.prototype.__setupTriggers=function(){var e=this,t=function i(t){if(e.$el){if(-1!==["https://www.ultimedia.com","http://www.ultimedia.com","https://www.digiteka.net","http://www.digiteka.net"].indexOf(t.origin)&&t.source===e.$el.contentWindow){e._internalTrigger("ready");var n=[],r={};"string"==typeof t.data?n=t.data.split("&"):r=t.data;for(var a=0;a<n.length;a++){var o=n[a].split("=");r[o[0]]=o[1]}switch(void 0,r.message&&"newVideo"===r.message&&e._needsAutoPlay()&&"startScreen"===e.getState()&&setTimeout(function(){e._needsAutoPlay()&&"startScreen"===e.getState()&&e._internalTriggerOnce("generic_start")},1e3),r.event){case"ready":e.__getDuration(),e._needsAutoPlay()&&e._internalTriggerOnce("generic_start");break;case"played":e.__getDuration(),e._internalTrigger("video_play");break;case"ended":e._internalTrigger("video_end");break;case"timeupdate":e.__currentTime=parseInt(r.time,10),e.__getDuration(),e._internalTrigger("video_timeupdate"),e.progress()>=1&&e._internalTrigger("video_end");break;case"paused":e._internalTrigger("video_pause");break;case"getCurrentTime":e.__currentTime=parseInt(r.time,10),e._internalTrigger("video_timeupdate");break;case"getDuration":e.__duration=parseInt(r.duration,10)||e.__duration}}}else window.removeEventListener("message",i,!1)};window.addEventListener("message",t,!1)},i.prototype.__getDuration=function(){this.__duration||this.__post("getDuration")},i.prototype.__post=function(e){this.$el.contentWindow.postMessage(e,"*")},i}),pxRequire.define("px-vidible",["px-player","px-utils","video-info","player-config","globals"],function(e,t,i,n,r){var a=function(){e.apply(this,arguments)};return a.prototype=Object.create(e.prototype),a.playerName="vidible",a.prototype.playerName=a.playerName,a.containerType="div",a.prototype.containerType=a.containerType,a.prototype.needsManualTriggersInterval=["seeked"],a.prototype._nativeInitialize=function(){var e=this;return this.$el&&this.$el.vdb_Player?(this.vidiblePlayer=this.$el.vdb_Player,this.$playerContainer=Array.from(this.$el.childNodes).find(function(e){return"DIV"===e.tagName}),t.setStyleImportant(this.$el,{width:this.$playerContainer.offsetWidth+"px",height:this.$playerContainer.offsetHeight+"px"}),this.__setupTriggers(),setTimeout(function(){e._internalTrigger("ready")},0)):this.__loadNativeLib(),this},a.prototype._nativeDuration=function(){return this.vidiblePlayer.getPlayerInfo().video.metadata.duration/1e3},a.prototype._nativePlay=function(){this.vidiblePlayer.play()},a.prototype._nativePause=function(){this.vidiblePlayer.pause()},a.prototype._nativeGetCurrentTime=function(){return this.vidiblePlayer.getPlayerInfo().playheadTime},a.prototype._nativeSetCurrentTime=function(e){this.vidiblePlayer.seekTo(e)},a.prototype._nativeChangeSrc=function(e){try{this.vidiblePlayer.loadVideoById?this.vidiblePlayer.loadVideoById(this.videoInfo.videoId):this.vidiblePlayer.updateBid({query:this.videoInfo.videoId}),e()}catch(t){void 0,void 0}},a.prototype._nativeDispose=function(){delete this.vidiblePlayer},a.prototype.__loadNativeLib=function(){var e=this,i=document.createElement("script");if(i.type="text/javascript",this.videoInfo.provider_specific_params.pid){var n=t.url.serialize({"m.onLoad":"pulpixGetVidibleOnLoad","m.isResponsive":1,"m.playback":this._needsAutoPlay()?"autoplay":"click"});i.src="http://cdn.vidible.tv/prod/player/js/latest/vidible-min.js",i.src="//delivery.vidible.tv/jsonp/"+("pid="+this.videoInfo.provider_specific_params.pid+"/")+("vid="+this.videoInfo.provider_id+"/")+(this.videoInfo.provider_specific_params.bcid+".js?")+(""+n);var r=this;window.pulpixGetVidibleOnLoad=function(i){void 0;var n=i;r.vidiblePlayer=n,r.__setupTriggers(),e.$playerContainer=Array.from(e.$el.childNodes).find(function(e){return"DIV"===e.tagName}),void 0,t.setStyleImportant(e.$playerContainer,{width:e.config.replaceElement.styles.width,"max-height":"100%"}),void 0},this.$el.setAttribute("vdb_params",n),this.config.replaceElement?t.setStyleImportant(this.$el,{width:this.config.replaceElement.styles.width,"max-width":this.config.replaceElement.styles.width}):this.$el.setAttribute("style","width:100%;height:100%;max-height:100%;min-height:100%;"),t.addClass(this.$el,"vdb_player vdb_"+this.videoInfo.provider_specific_params.pid+this.videoInfo.provider_specific_params.bcid)}else i.src="https://spshared.5min.com/Scripts/PlayerSeed.js?"+t.url.serialize({sid:this.videoInfo.provider_specific_params.syndication,playList:this.videoInfo.provider_id,ratio:1,width:"auto",height:100,htmlplayerforce:1,playerActions:8}),i.onload=function(){var i=setInterval(function(){var n=e.$el.querySelector("[id^='o2player']");if(n&&n.vdb_Player){e.vidiblePlayer=n.vdb_Player,clearInterval(i),e.$playerContainer=Array.from(n.childNodes).find(function(e){return"DIV"===e.tagName});t.setCSS(e.$playerContainer,{width:"100%",height:"100%","max-width":"","max-height":""}),t.setStyle(e.$playerContainer,{width:"100%",height:"100%","max-width":"","max-height":""}),e.__setupTriggers(),e._internalTrigger("ready")}},10)};this.$el.appendChild(i)},a.prototype.__setupTriggers=function(){var e=this;this.vidiblePlayer.addEventListener(window.vidible.PLAYER_READY,function(t){e._internalTrigger("ready")}),this.vidiblePlayer.addEventListener(window.vidible.VIDEO_START,function(){e._internalTrigger("video_start")}),this.vidiblePlayer.addEventListener(window.vidible.VIDEO_PLAY,function(t){t.data.isAd?e._internalTrigger("ad_play"):e._internalTrigger("video_play")}),this.vidiblePlayer.addEventListener(window.vidible.VIDEO_PAUSE,function(t){t.data.isAd?e._internalTrigger("ad_pause"):e._internalTrigger("video_pause")}),this.vidiblePlayer.addEventListener(window.vidible.VIDEO_SELECTED,function(t){var i=e.config;i.autoplay=!0;var n={};n.id=void 0,n.provider_id=t.data.videoId,n.provider=e.videoInfo.provider,n.website_id=e.videoInfo.website_id,n.provider_specific_params=e.videoInfo.provider_specific_params,e._onSrcChangedNatively(n,i)}),this.vidiblePlayer.addEventListener(window.vidible.VIDEO_TIMEUPDATE,function(t){var i=t.data;i.isAd?e._internalTrigger("ad_timeupdate"):e._internalTrigger("video_timeupdate")}),this.vidiblePlayer.addEventListener(window.vidible.VIDEO_SEEKEND,function(){e._internalTrigger("video_seeked")}),this.vidiblePlayer.addEventListener(window.vidible.VIDEO_END,function(){e._internalTrigger("video_end")}),this.vidiblePlayer.addEventListener(window.vidible.AD_START,function(){e._internalTrigger("ad_start")}),this.vidiblePlayer.addEventListener(window.vidible.AD_END,function(){e._internalTrigger("ad_end")})},a.prototype._nativeOnResize=function(){var e=this.$el.getAttribute("vdb_params"),i=(this.$el.offsetHeight/this.$el.offsetWidth*100).toFixed(2).toString()+"%";if((e&&t.deserialize(e)||{})["m.isResponsive"])t.setStyleImportant(this.$playerContainer,{"padding-bottom":i});else{var n=this._getIframeElements();t.setStyleImportant(this.$playerContainer,{"max-height":"100%","max-width":"100%",height:"100%"}),t.setStyleImportant(n.$controlBarContainer,{"padding-bottom":i,"max-height":"100%"}),t.setStyleImportant(n.$videoContainer,{"padding-bottom":i,"max-height":"100%"})}},a.prototype._getIframeElements=function(){if(!this._iframeElements){var e=this.$playerContainer.getElementsByTagName("iframe")[0];this._iframeElements={},this._iframeElements.$videoContainer=e.contentDocument.getElementById("videos-container"),this._iframeElements.$controlBarContainer=e.contentDocument.getElementsByClassName("control-bar-container")[0]}return this._iframeElements},a.prototype._nativeCanChangeSrc=function(e){return!1},a.prototype._onSrcChangedNatively=function(e,t){var r=this;this.videoInfo=new i(e),this.config=new n(t),this.updateVideoInfoFromAPI(),this.__contextStateMachine&&this.__contextStateMachine.reset(),this.config.externalEventTarget=this.__externalEventTarget,this.__createEventTargetsAndStateMachines(),this.__contextStateMachine.onGoToState("startScreen",function(){r.__handleAutoplayBehavior()}),this._internalTrigger("changed_src")},a}),pxRequire.define("px-native-mixin",[],function(){var e=function(){};return e.prototype.needsManualTriggersInterval=!0,e.prototype.__getSrc=function(){return"//scdn.pulpix.com/px-videos/black.mp4"},e.prototype.__imaEventMap=function(){var e;return e={},_defineProperty(e,window.google.ima.AdEvent.Type.IMPRESSION,"video_start"),_defineProperty(e,window.google.ima.AdEvent.Type.COMPLETE,"video_end"),_defineProperty(e,window.google.ima.AdEvent.Type.SKIPPED,"video_end"),_defineProperty(e,window.google.ima.AdEvent.Type.RESUMED,"video_play"),_defineProperty(e,window.google.ima.AdEvent.Type.PAUSED,"video_pause"),_defineProperty(e,window.google.ima.AdErrorEvent.Type.AD_ERROR,"ad_error"),_defineProperty(e,window.google.ima.AdErrorEvent.Type.FIRST_QUARTILE,"video_timeupdate"),_defineProperty(e,window.google.ima.AdErrorEvent.Type.MIDPOINT,"video_timeupdate"),_defineProperty(e,window.google.ima.AdErrorEvent.Type.THIRD_QUARTILE,"video_timeupdate"),e},e.prototype._nativeGetCurrentTime=function(){var e=this.vjsplayer.ima3||this.vjsplayer.ima;if(e&&e.getAdsManager()&&e.getAdsManager().getRemainingTime()){var t=e.getAdsManager().getRemainingTime();return this._nativeDuration()-t}},e.prototype._nativeDuration=function(){var e=this.vjsplayer.ima3||this.vjsplayer.ima;return e&&e.controller.getCurrentAd()?e.controller.getCurrentAd().getDuration()||this.videoInfo.duration:void 0},e.prototype.__timeHasPassed=function(){var e=this.vjsplayer.ima3||this.vjsplayer.ima;if(e&&e.getAdsManager()&&e.getAdsManager().getRemainingTime()){var t=e.getAdsManager().getRemainingTime(),i=t<this.lastAdTimeRemaining;return this.lastAdTimeRemaining=t,i}},e.prototype.__onManualTriggersInterval=function(){this.__timeHasPassed()&&this.vjsplayer.ima.controller.sdkImpl.isAdPlaying()&&this._internalTrigger("video_timeupdate")},e}),pxRequire.define("adblock-detector",[],function(){function e(){i=document.createElement("div"),i.className="pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",i.style="width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",document.body.appendChild(i)}function t(){i||e();var t=!1;return(null!==window.document.body.getAttribute("abp")||null===i.offsetParent||0==i.offsetHeight||0==i.offsetLeft||0==i.offsetTop||0==i.offsetWidth||0==i.clientHeight||0==i.clientWidth)&&(t=!0),t}var i=void 0;return t}),pxRequire.define("px-pulpixplayer",["require","px-videojs","px-native-mixin","videojs-ad-injector","px-utils","globals","adblock-detector"],function(e,t,i,n,r,a,o){var s=function(){t.apply(this,arguments)};return s.prototype=Object.create(t.prototype),s.playerName="pulpix-player",s.prototype.playerName=s.playerName,s.prototype.cssClass="vjs-px-skin",s.prototype.__getSrc=function(){return this.videoInfo.pulpix_src||this.videoInfo.src||"//scdn.pulpix.com/px-videos/black.mp4"},s.prototype.__nativePxmakeGetRequirements=function(){return!r.isMobile()&&o()?["px-videojs-custom"]:["px-videojs-custom-with-ads"]},s.prototype._nativePlay=function(e){if(this.__needsAds()&&void 0!==this.adInjector&&!this.adInjector.requestedFirstAds)this.adInjector.initialize(),this.adInjector.requestAds();else if(this.vjsplayer.ads&&this.vjsplayer.ads.isAdPlaying&&(this.vjsplayer.ads.isAdPlaying()||this.vjsplayer.ads._state.adsReady)){var t=this.vjsplayer.ima3||this.vjsplayer.ima;return void(t&&t.adPlayer&&t.adPlayer.play?t.adPlayer.play():t&&t.resumeAd&&t.resumeAd())}this.vjsplayer.play()},s.prototype._nativePause=function(e){if(this.vjsplayer.ads&&this.vjsplayer.ads.isAdPlaying&&this.vjsplayer.ads.isAdPlaying()){var t=this.vjsplayer.ima3||this.vjsplayer.ima;t&&t.adPlayer&&t.adPlayer.pause?t.adPlayer.pause():t&&t.resumeAd&&t.pauseAd(),this._internalTrigger("ad_pause")}else this._internalTrigger("video_pause");this.vjsplayer.pause()},s.prototype._nativeControls=function(e,t){return this.vjsplayer.controls(e)},s.prototype._nativePxmake=function(t){var i=this;this.__loadOrRemoveNativeMixin(),r.addClass(t,"video-js"),r.addClass(t,this.cssClass);var a=this.__getTypedSrc();a&&a.forEach(function(e){var i=document.createElement("source");i.setAttribute("src",e.src),i.setAttribute("type",e.type),t.appendChild(i)}),t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline",""),t.setAttribute("poster",this.videoInfo.thumbnail_url),r.setOrRemoveAttribute(t,"muted",r.getOrDefault(this.config.muted,!1));var o=r.getOrDefault(this.config.preload,!1)?"auto":"none";t.setAttribute("preload",o);var s=this;e(this.__nativePxmakeGetRequirements(),function(e){e(function(e){r.isIphone()&&(e.getTech("Html5").prototype.featuresVolumeControl=!0),s.vjsplayer=e(t,{autoplay:i._needsAutoPlay(),controls:r.getOrDefault(i.config.controls,!0),src:"",controlBar:{captionsButton:!1},techOrder:["html5"]},function(){s.vjsplayer=this}).ready(function(){i.vjsplayer=e(i.$el),i.vjsplayer.controls(r.getOrDefault(i.config.controls,!0)),i.vjsplayer.muted(r.getOrDefault(i.config.muted,!1)),i.$el=i.vjsplayer.el_,r.removeStyle(i.$el.querySelector("video"),"z-index"),i.__setupTriggers(),i._internalTrigger("ready")}),s.adInjector=new n(s.vjsplayer,s._getAdConfig(),s._needsAutoPlay(),{title:s.videoInfo.title,thumbnail_url:s.videoInfo.thumbnail_url},s.__needsAds()?s.__setupImaTriggers.bind(s):null),s.adInjector.firstPlaySetup()})})},s.prototype.__loadNativeMixin=function(){var e=this;this.nonNativeMethods={},Object.getOwnPropertyNames(i.prototype).forEach(function(t){"constructor"!==t&&(e.nonNativeMethods[t]=e[t],e[t]=i.prototype[t])}),this.__nativeMixinApplied=!0},s.prototype.__removeNativeMixin=function(){var e=this;Object.keys(this.nonNativeMethods).forEach(function(t){e[t]=e.nonNativeMethods[t]}),this.__nativeMixinApplied=!1},s.prototype.__loadOrRemoveNativeMixin=function(){this._isNativeAd()&&!this.__nativeMixinApplied?this.__loadNativeMixin():!this._isNativeAd()&&this.__nativeMixinApplied&&this.__removeNativeMixin()},s.prototype._nativeChangeSrc=function(e){var t=this;if(this.__loadOrRemoveNativeMixin(),this.vjsplayer.poster(this.videoInfo.thumbnail_url),this.__needsAds()&&this.vjsplayer.ima){var i=function(){t.vjsplayer.options_.autoplay=!1;var i=t.__getSrc();i||t.vjsplayer.src(null),t.setContentWithAds(t.__getTypedSrc(),t._getAdConfig(),!1,t.__setupImaTriggers.bind(t)),t.vjsplayer.ima.requestAds(),t._internalTrigger("changed_src"),e(),t.vjsplayer.play()};return"function"==typeof this.vjsplayer.ima?(this.adInjector=new n(this.vjsplayer,this._getAdConfig(),this._needsAutoPlay(),{thumbnail_url:this.videoInfo.thumbnail_url,title:this.videoInfo.title}),this.adInjector.initialize(),void setTimeout(function(){i()},1e3)):this.vjsplayer.ima.getAdsManager()?(this.vjsplayer.ima.getAdsManager().stop(),void setTimeout(function(){i()},50)):void i()}r.objPath(this.vjsplayer,["ima","getAdsManager"])&&this.vjsplayer.ima.getAdsManager()?(this.vjsplayer.ima.getAdsManager().destroy(),r.objPath(this.vjsplayer,["ima","controller","adUi","onAdError"])&&this.vjsplayer.ima.controller.adUi.onAdError(),this.setContentWithAds(this.__getTypedSrc(),{},!0),this._internalTrigger("changed_src"),e()):(this.vjsplayer.src(this.__getTypedSrc()),this.vjsplayer.play(),setTimeout(function(){t.isPlaying()||t.vjsplayer.play()},500),this._internalTrigger("changed_src"),e()),setTimeout(function(){t.vjsplayer.trigger("adscanceled")},500)},s.prototype._nativeCanChangeSrc=function(e){return!0},s.prototype.__setupAdTriggers=function(){},s.prototype.setContentWithAds=function(e,t,i,n){var r=this;if(this.adInjector.setContentWithAds(e,t,i,{thumbnail_url:this.videoInfo.thumbnail_url,title:this.videoInfo.title}),"function"==typeof n&&!this.__calledSetContentWithAdTagCallback){this.__calledSetContentWithAdTagCallback=!0;var a=!1;this.vjsplayer.ima.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(){a||(n(),a=!0)},!1),setTimeout(function(){r.vjsplayer.ima.getAdsManager()&&(a||(n(),a=!0))},1e3)}},s.prototype._getAdTag=function(e){var t=this,i=void 0;if(e?i=e:this.config.ads&&this.config.ads.tag&&(i=this.config.ads.tag),i){if(!i.includes(","))return this._formatAdTag(i);var n=i.split(",");return n.map(function(e){return t._formatAdTag(e)})}},s}),pxRequire.define("px-iframe",["px-player","px-utils"],function(e,t){var i=function(){e.apply(this,arguments)};return i.prototype=Object.create(e.prototype),i.playerName="iframe",i.prototype.playerName=i.playerName,i.containerType="iframe",i.prototype.containerType=i.containerType,i.prototype.canPauseDuringAds=!1,i.prototype.seekingPrecision=8,i.prototype._nativeInitialize=function(){var e=this;this.__duration=this.videoInfo.duration,this.__currentTime=0,this.__setupTriggers(),this.manuallyCreated||setTimeout(function(){e._internalTrigger("ready")},0)},i.prototype.updateVideoInfoFromAPI=function(){var e=this;setTimeout(function(){e.videoInfo.overrideUpdateFromAPI(e.videoInfo._updateFromIframe(e.$el)),e.videoInfo.updateFromAPI()["catch"](function(e){void 0})})},i.prototype._nativeIframeUrl=function(){var e={};return this._needsAutoPlay()&&(e.autoplay="true"),this.isRecommended()&&(e.pulpix="true"),t.url.setParams(this.videoInfo.iframe_wrapper_url,e)},i.prototype._nativeDuration=function(){return this.__duration},i.prototype.__postMessage=function(e,t){this.$el.contentWindow.postMessage(JSON.stringify({method:e,arguments:t,fromPulpix:!0}),"*")},i.prototype._nativePlay=function(){this.__postMessage("play")},i.prototype._nativePause=function(){this.__postMessage("pause")},i.prototype._nativeGetCurrentTime=function(){return this.__currentTime},i.prototype._nativeSetCurrentTime=function(e){this.__postMessage("currentTime",[e])},i.prototype._nativeChangeSrc=function(e){this.__postMessage("src",[this.videoInfo,this.config]),e()},i.prototype._nativeOnResize=function(){this.__postMessage("resize",["100%","100%"])},i.prototype._nativeDispose=function(e){this.$el&&this.$el.contentWindow&&this.__postMessage("dispose",[e])},i.prototype.__setupTriggers=function(){var e=this,t=function i(t){if(e.$el){if(t.source===e.$el.contentWindow){var n=void 0;try{n=JSON.parse(t.data)}catch(t){return}if(!n.fromPulpix||!n.event)return;if("updated_video_info"===n.event)return e.videoInfo.update(n.videoInfo),void(e.__videoInfoResolver&&e.__videoInfoResolver());e._internalTrigger(n.event),n.event.match("timeupdate")&&(e.__currentTime=parseFloat(n.currentTime)||e.__currentTime,!e.__duration&&n.duration&&(e.__duration=parseFloat(n.duration))),n.event.match("ready")&&(e.__duration=parseFloat(n.duration)||e.__currentTime,!e.__duration&&n.duration&&(e.__duration=parseFloat(n.duration)))}}else window.removeEventListener("message",i,!1)};window.addEventListener("message",t,!1)},i}),pxRequire.define("all-players",["px-youtube","px-kaltura","px-vimeo","px-ooyala","px-jwplayer","px-brightcove-iframe","px-theplatform","px-dailymotion","px-videojs","px-ultimedia","px-vidible","px-pulpixplayer","px-iframe"],function(e,t,i,n,r,a,o,s,l,d,c,u,p){var h={youtube:e,kaltura:t,vimeo:i,ooyala:n,jwplayer:r,"brightcove-iframe":a,theplatform:o,dailymotion:s,videojs:l,ultimedia:d,vidible:c,pulpixplayer:u,iframe:p};return h});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("error-logger",["xhr","globals","px-mini-utils"],function(e,t,i){var n=void 0,r=t.getApiHost(),a=r+"/api/v1/analytics/log_error",o=.05,s=function(){function r(){return _classCallCheck(this,r),n?n:void(n=this)}return _createClass(r,[{key:"log",value:function(n){if(void 0,n instanceof Error&&!(Math.random()>o)){var r={canonical_url:i.getCanonicalUrl(),message:n.message,name:n.name,stack_trace:n.stack,timestamp:(new Date).toISOString(),website_id:t.websiteId};e.post(a,r)}}}]),r}();return new s});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("player-loader",["finder","globals","px-player","video-info","all-players","px-mini-utils","error-logger"],function(e,t,i,n,r,a,o){function s(e,i){var n={videoInfo:e.videoInfo,config:e.config};return n.config=Object.assign(n.config,i),n.videoInfo.website_id=t.websiteId,window.demo&&window.demo.video&&(window.demo.video.provider_id===e.videoInfo.provider_id||window.demo.video.pulpix_src===e.videoInfo.src)&&(n.videoInfo.id=window.demo.video.id),n}function l(e){return null!==e.element.getAttribute("px-reco")}function d(e){var t=a.objPath(e,["element","parentNode","className"]);return t&&t.includes("px-immersive-player-container")}function c(e){return this.element.id===e.$el.id}var u=250,p=null,h=function(){function t(){return _classCallCheck(this,t),p?p:(p=this,p.reset(),p)}return _createClass(t,[{key:"reset",value:function(){clearInterval(this.interval),this.players=[]}},{key:"load",value:function(t,i){var n=this;this.interval=window.setInterval(function(){var r=[];try{r=e.find()}catch(a){o.log(a)}r.forEach(function(e){if(!l(e)&&!d(e)&&!n.isAlreadyLoaded(e)){var r=n.loadPlayer(e,t);n.players.push(r),"function"==typeof i&&i(r)}})},u)}},{key:"reload",value:function(t,i){return e.reset(),this.reset(),this.load(t,i)}},{key:"loadPlayer",value:function(e,t){var i=s(e,t),r=new n(e.videoInfo),a=r.getPlayerClass(),o=new a(e.element.id,i);return o}},{key:"isAlreadyLoaded",value:function(e){return this.players.find(c,e)}}]),t}();return new h});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("user-preferences",["xhr","globals","ab-test","px-mini-utils","local-storage","finder","player-config","error-logger","require"],function(e,t,i,n,r,a,o,s,l){function d(e){return window.pxPreferencesOverride&&(e=n.assignDeep(e,window.pxPreferencesOverride)),e}function c(){return t.websiteId?u()+"/api/v1/website/"+t.websiteId+"/":t.adyoulikeWebsiteId?u()+"/api/v1/ayl-website/"+t.adyoulikeWebsiteId+"/":void 0}function u(){return"prod"===t.env?t.cachedApiHost:t.getApiHost()}function p(){return t.websiteId?"preferences_"+t.websiteId:t.adyoulikeWebsiteId?"preferences_"+t.adyoulikeWebsiteId:void 0}function h(e){return"outstream_player"===e||"multitask"===e?"inplayer":e}function f(){return"/"===window.location.pathname}var m=void 0,y=function(){function l(){var t=this;if(_classCallCheck(this,l),m)throw new Error("Cannot instantiate more than one UserPreferences, use getInstance()");this.readyPromise=n.onDomReady().then(function(){return window.pxWebsiteApiOverride?window.pxWebsiteApiOverride:e.getJsonp(c(),p())}).then(function(e){return e||Promise.reject(),t._init(e),t})["catch"](function(e){s.log(e)})}return _createClass(l,[{key:"_init",value:function(e){var n=this;if(e&&e.computed_preferences){t.websiteId=e.id,t.adyoulikeWebsiteId=e.adyoulikeWebsiteId;var r=d(e.computed_preferences);Object.keys(r).forEach(function(e){n[e]=r[e]}),this._apiResponse=e,this._apiResponse.logo_banner_url=r.logo_banner_url||e.logo_banner_url,this.applyDemoOverrides(),i.init(e.ab_test),this._syncCookies()}}},{key:"applyDemoOverrides",value:function(){var e=n.url.getParams(window.location.href);if(e.is_pulpix_demo){var t=e.campaign||e.Campaign,i=e.track||e.Track,r=e.creative||e.Crea||e.Creative;if(t){var a={partnerId:"aff110416d7293348cc15043facf8194",Campaign:t,Track:i,Creative:r,Source:"ADSERVER",placementId:"bdff81994dc4c9e5805e94442fd20914"};this._demoAdTag=n.url.setParams("https://broker.omnitagjs.com/broker/bid",a),"native"in e?this._isNativeDemo=!0:this._isPrerollDemo=!0}}}},{key:"hasDisplayLogoBanner",value:function(e){return this.widgets.immersive.display_logo_banner}},{key:"getLogoBanner",value:function(){return this._apiResponse.logo_banner_url}},{key:"hasClickToImmersive",value:function(e){return this.slots.instream.activate_click_to_immersive&&!n.isMobile()&&this._checkCoverageExceptDevice(this.slots.instream.coverage,e)}},{key:"hasClickToMFeed",value:function(e){return this.slots.instream.activate_click_to_mfeed&&n.isMobile()&&this._checkCoverageExceptDevice(this.slots.instream.coverage,e)}},{key:"hasAutoplayToImmersive",value:function(e){return this.slots.instream.activate_autoplay_to_immersive&&!n.isMobile()&&!n.isIpad()&&this._checkCoverage(this.slots.instream.coverage,e)}},{key:"hasStickybar",value:function(){var e=r.get("stickybarClose")||{};return e.expiresAt&&e.expiresAt>Date.now()?!1:this.slots.stickybar.activate&&this._checkCoverage(this.slots.stickybar.coverage)}},{key:"hasOutstream",value:function(){return n.objPath(this.slots,["outstream_player","activate"])&&this._checkCoverage(n.objPath(this.slots,["outstream_player","coverage"]))}},{key:"isAdRequired",value:function(e){return this.slots[e].is_ad_required}},{key:"shouldLoadStickybar",value:function(){return this.hasStickybar()&&(!this.slots.stickybar.is_ad_required||this.hasPreroll())}},{key:"shouldLoadOutstreamPlayer",value:function(){return this.hasOutstream()&&(!this.slots.outstream_player.is_ad_required||this.hasPreroll())}},{key:"slotEnabledAndInCoverage",value:function(e,t){var i=this,r={stickybar:i.slots.stickybar.activate,instream:i.slots.instream.activate_autoplay_to_immersive||i.slots.instream.activate_click_to_immersive||i.slots.instream.activate_inplayer,outstream_player:n.objPath(i.slots,["outstream_player","activate"]),link:!0}[e];return Boolean(r&&("link"===e||this._checkCoverage(this.slots[e].coverage,t)))}},{key:"hasInPlayerWidgets",value:function(e){return this.slots.instream.activate_inplayer&&this._checkCoverage(this.slots.instream.coverage,e)}},{key:"hasUpnext",value:function(e,t){return"inplayer"===t?this.hasInPlayerWidgets(e):this.slots.outstream_player.activate_upnext}},{key:"hasCarousel",value:function(e){return!1}},{key:"hasMultitask",value:function(e,t){return(this.slots[e].activate_multitask_mobile&&n.isMobile()||this.slots[e].activate_multitask_desktop&&!n.isMobile())&&this._checkCoverage(this.slots[e].coverage,t)}},{key:"hasVideoRefererRedirect",value:function(){return this.widgets.inplayer.format.video_referer_redirect}},{key:"getConfigOverridesForWidget",value:function(e,t){return t?new o({ads:{tag:this.getAdTag(e,t)},forceReload:this.widgets[h(t)].force_reload,updateSrc:this.widgets[h(t)].iframe_player_param&&("immersive"===t||"mfeed"===t)&&this.slots.instream.activate_click_to_immersive,iframeParam:this.widgets[h(t)].iframe_player_param,analyticsParams:{widget:t,slot:e}}):{}}},{key:"getAdTag",value:function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"preroll";if(window.pxAdTagOverride){if(window.pxAdTagOverride["native"]&&"native"===r)return window.pxAdTagOverride["native"];if(window.pxAdTagOverride.preroll&&"preroll"===r)return window.pxAdTagOverride.preroll}if(this._demoAdTag&&(this._isNativeDemo&&"native"===r||!this._isNativeDemo&&"preroll"===r))return this._demoAdTag;var a=void 0;return a="outstream_player"===e?"smart":"immersive"===i||"mfeed"===i?"feed":"upnext",n.url.setParams(t.getApiHost()+"/api/v1/website/"+t.websiteId+"/ads",{widget:a,device:n.isMobile()?"mobile":"desktop",ad_format:r})}},{key:"getNativeAdTag",value:function(e,t){return this.getAdTag(e,t,"native")}},{key:"hasPreroll",value:function(){return this._apiResponse.ad_settings.has_preroll||this._isPrerollDemo||window.pxAdTagOverride&&window.pxAdTagOverride.preroll}},{key:"hasNative",value:function(){return this._apiResponse.ad_settings.has_native||this._isNativeDemo||window.pxAdTagOverride&&window.pxAdTagOverride["native"]}},{key:"getNativeAdRatio",value:function(){return"number"==typeof window.pxNativeAdRatio?window.pxNativeAdRatio:this._apiResponse.ad_settings.native_ad_ratio||3}},{key:"getForceReloadForWidget",value:function(e){return e?this.widgets[h(e)].force_reload:!1}},{key:"getIframePlayerParamForWidget",value:function(e){return e?this.widgets[h(e)].iframe_player_param:void 0}},{key:"getWidgetType",value:function(){var e=void 0;return this.slots.instream.activate_inplayer?e="inplayer":this.slots.instream.activate_click_to_immersive||this.slots.instream.activate_autoplay_to_immersive?e="immersive":n.objPath(this.slots,["outstream_player","activate"])&&(e="mfeed"),
e}},{key:"forcePulpixPlayer",value:function(e,i,r){if("pulpixplayer"===r&&n.isMobile()||window.location.href.match(/force-pulpix-player/))return!0;if(925===t.websiteId)return!0;if("instream"===e)return!1;if(-1!==[1282,1281].indexOf(t.websiteId)&&!n.isMobile()&&"stickybar"===e)return!1;var a=n.isMobile()?"player_mode_mobile":"player_mode_desktop";if(void 0!==this.globals[a])return"pulpix player"===this.globals[a];var o=n.isMobile()?"force_pulpix_player_mobile":"force_pulpix_player_desktop";return this._apiResponse[o]}},{key:"isCovered",value:function(e){return this.hasInPlayerWidgets(e)||this.hasClickToImmersive(e)||this.hasClickToMFeed(e)||this.hasAutoplayToImmersive(e)}},{key:"getStickybarPosition",value:function(){return this.slots.stickybar.position||"left"}},{key:"getStickybarZindex",value:function(){return-1!==[921,925,942].indexOf(t.websiteId)?"2999":void 0}},{key:"withoutPulpix",value:function(){return Boolean(i&&i.chosenVariations&&"withoutPulpix"===i.chosenVariations.control)}},{key:"_checkCoverage",value:function(e,t){return this._checkCoverageByDevice(e)&&this._checkCoverageExceptDevice(e,t)}},{key:"_checkCoverageExceptDevice",value:function(e,t){var i=Boolean(window.location.href.match(/px-mobile-debug/));return i||this._checkCoverageUrlFragments(e,document.location.href)&&this._checkCoverageProvider(e,t)&&this._checkCoverageByPageType(e)&&this._checkCoverageByCountry(e)}},{key:"_checkCoverageByCountry",value:function(e){var t=r.get("ids")||{};return t.country?Array.isArray(e.country_filter)&&e.country_filter.indexOf(t.country)>=0&&"exclude"===e.country_filter_type?!1:Array.isArray(e.country_filter)&&-1===e.country_filter.indexOf(t.country)&&"include"===e.country_filter_type&&"undefined"!=typeof e.country_filter&&e.country_filter.length>0?!1:!0:!0}},{key:"_checkCoverageByDevice",value:function(e){return n.isAndroid()&&e.enable_on_android||n.isIphone()&&e.enable_on_iphone||n.isMobile()&&e.enable_on_mobile||!n.isMobile()&&e.enable_on_desktop?!0:!1}},{key:"_checkCoverageUrlFragments",value:function(e,t){var i=function(e){return Boolean(e)},n=(e.include_fragments||[]).filter(i),r=(e.exclude_fragments||[]).filter(i),a=n.every(function(e){return t.includes(e)}),o=r.some(function(e){return t.includes(e)});return!a||o?!1:!0}},{key:"_checkCoverageProvider",value:function(e,t){var i=e.providers||[];return i&&i.length>0&&t&&!i.includes(t)?!1:!0}},{key:"_checkCoverageByPageType",value:function(e){return!(e.exclude_homepage&&f()||e.exclude_video_page&&a.find().length)}},{key:"_syncCookies",value:function(){if((this.hasPreroll()||this.hasNative())&&!r.get("syncedCookies")){pxRequire.require(["//fo-ssp.omnitagjs.com/fo-ssp/sync?"],function(){});var e=Date.now()+6048e5;r.set("syncedCookies",!0,e)}}}],[{key:"getInstance",value:function(){return m||(m=new l),m}},{key:"init",value:function(){return l.getInstance().readyPromise}}]),l}();return y});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("tracking-event",["model","px-utils"],function(e,t){function i(e){if("stickybar"!==e.slot&&!e.widget)throw new Error("Widget value can't be undefined on "+e.name);if(e.widget&&!["outstream_player","immersive","mfeed","inplayer","multitask"].includes(e.widget))throw new Error(e.widget+" is not a valid widget value")}function n(e){return o.widgetValidator(e)}function r(e){return o.slotValidator(e)}var a={ab_test:{type:"object",required:!0},autoplay:{type:"boolean"},canonical_url:{type:"string"},catalog_id:{type:"string"},content_id:{type:"number"},campaign_id:{type:"number"},device_orientation:{type:"string"},device_type:{type:"string"},document_referrer:{type:"string"},engine_type:{type:"string"},extra_data:{type:"object"},has_adblock:{type:"boolean"},in_coverage:{type:"boolean",required:!0},in_multitask_coverage:{type:"boolean"},is_recommended:{type:"boolean",required:!0},is_tab_active:{type:"boolean"},is_visitor_active:{type:"boolean"},name:{type:"string"},player_state:{type:"string"},proportion_visible:{type:"number"},provider:{type:"string"},recommendation_source_id:{type:"number"},recommendation_type:{type:"string"},score_details:{type:"object"},session_id:{type:"string"},slot:{type:"string",required:!0,validators:[r]},timestamp:{type:"string"},video_id:{type:"number"},visitor_fingerprint:{type:"string"},visitor_id:{type:"string"},visitor_random_id:{type:"string"},website_id:{type:"number",required:!0},widget:{type:"string",validators:[n]},widget_immersive:{type:"boolean"},widget_inplayer:{type:"boolean"},widget_mfeed:{type:"boolean"},widget_multitask:{type:"boolean"}},o=function(e){function n(e){return _classCallCheck(this,n),e=t.removeUndefinedKeys(e),i(e),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,a))}return _inherits(n,e),_createClass(n,null,[{key:"slotValidator",value:function(e){return Boolean(["stickybar","outstream_player","instream","link"].includes(e))}},{key:"widgetValidator",value:function(e){return Boolean(!e||["outstream_player","immersive","mfeed","inplayer","multitask"].includes(e))}}]),n}(e);return o}),function(e){pxRequire.define("sha256",[],function(){return function(){return function(e){"use strict";var t="object"==typeof process&&process.versions&&process.versions.node;t&&(e=global);var i=!e.JS_SHA256_TEST&&"object"==typeof module&&module.exports,n="0123456789abcdef".split(""),r=[-2147483648,8388608,32768,128],a=[24,16,8,0],o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=[],l=function(e){return d(e,!0)},d=function(t,i){var l="string"!=typeof t;l&&t.constructor==e.ArrayBuffer&&(t=new Uint8Array(t));var d,c,u,p,h,f,m,y,v,g,_,b,w,x,k,P,T,C,I,E,A,S,j=!0,O=!1,M=0,R=0,$=0,N=t.length;i?(d=3238371032,c=914150663,u=812702999,p=4144912697,h=4290775857,f=1750603025,m=1694076839,y=3204075428):(d=1779033703,c=3144134277,u=1013904242,p=2773480762,h=1359893119,f=2600822924,m=528734635,y=1541459225),v=0;do{if(s[0]=v,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0,l)for(_=R;N>M&&64>_;++M)s[_>>2]|=t[M]<<a[3&_++];else for(_=R;N>M&&64>_;++M)g=t.charCodeAt(M),128>g?s[_>>2]|=g<<a[3&_++]:2048>g?(s[_>>2]|=(192|g>>6)<<a[3&_++],s[_>>2]|=(128|63&g)<<a[3&_++]):55296>g||g>=57344?(s[_>>2]|=(224|g>>12)<<a[3&_++],s[_>>2]|=(128|g>>6&63)<<a[3&_++],s[_>>2]|=(128|63&g)<<a[3&_++]):(g=65536+((1023&g)<<10|1023&t.charCodeAt(++M)),s[_>>2]|=(240|g>>18)<<a[3&_++],s[_>>2]|=(128|g>>12&63)<<a[3&_++],s[_>>2]|=(128|g>>6&63)<<a[3&_++],s[_>>2]|=(128|63&g)<<a[3&_++]);$+=_-R,R=_-64,M==N&&(s[_>>2]|=r[3&_],++M),v=s[16],M>N&&56>_&&(s[15]=$<<3,O=!0);var L=d,B=c,D=u,V=p,q=h,z=f,F=m,H=y;for(b=16;64>b;++b)P=s[b-15],w=(P>>>7|P<<25)^(P>>>18|P<<14)^P>>>3,P=s[b-2],x=(P>>>17|P<<15)^(P>>>19|P<<13)^P>>>10,s[b]=s[b-16]+w+s[b-7]+x<<0;for(S=B&D,b=0;64>b;b+=4)j?(i?(I=300032,P=s[0]-1413257819,H=P-150054599<<0,V=P+24177077<<0):(I=704751109,P=s[0]-210244248,H=P-1521486534<<0,V=P+143694565<<0),j=!1):(w=(L>>>2|L<<30)^(L>>>13|L<<19)^(L>>>22|L<<10),x=(q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7),I=L&B,k=I^L&D^S,C=q&z^~q&F,P=H+x+C+o[b]+s[b],T=w+k,H=V+P<<0,V=P+T<<0),w=(V>>>2|V<<30)^(V>>>13|V<<19)^(V>>>22|V<<10),x=(H>>>6|H<<26)^(H>>>11|H<<21)^(H>>>25|H<<7),E=V&L,k=E^V&B^I,C=H&q^~H&z,P=F+x+C+o[b+1]+s[b+1],T=w+k,F=D+P<<0,D=P+T<<0,w=(D>>>2|D<<30)^(D>>>13|D<<19)^(D>>>22|D<<10),x=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),A=D&V,k=A^D&L^E,C=F&H^~F&q,P=z+x+C+o[b+2]+s[b+2],T=w+k,z=B+P<<0,B=P+T<<0,w=(B>>>2|B<<30)^(B>>>13|B<<19)^(B>>>22|B<<10),x=(z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7),S=B&D,k=S^B&V^A,C=z&F^~z&H,P=q+x+C+o[b+3]+s[b+3],T=w+k,q=L+P<<0,L=P+T<<0;d=d+L<<0,c=c+B<<0,u=u+D<<0,p=p+V<<0,h=h+q<<0,f=f+z<<0,m=m+F<<0,y=y+H<<0}while(!O);var U=n[d>>28&15]+n[d>>24&15]+n[d>>20&15]+n[d>>16&15]+n[d>>12&15]+n[d>>8&15]+n[d>>4&15]+n[15&d]+n[c>>28&15]+n[c>>24&15]+n[c>>20&15]+n[c>>16&15]+n[c>>12&15]+n[c>>8&15]+n[c>>4&15]+n[15&c]+n[u>>28&15]+n[u>>24&15]+n[u>>20&15]+n[u>>16&15]+n[u>>12&15]+n[u>>8&15]+n[u>>4&15]+n[15&u]+n[p>>28&15]+n[p>>24&15]+n[p>>20&15]+n[p>>16&15]+n[p>>12&15]+n[p>>8&15]+n[p>>4&15]+n[15&p]+n[h>>28&15]+n[h>>24&15]+n[h>>20&15]+n[h>>16&15]+n[h>>12&15]+n[h>>8&15]+n[h>>4&15]+n[15&h]+n[f>>28&15]+n[f>>24&15]+n[f>>20&15]+n[f>>16&15]+n[f>>12&15]+n[f>>8&15]+n[f>>4&15]+n[15&f]+n[m>>28&15]+n[m>>24&15]+n[m>>20&15]+n[m>>16&15]+n[m>>12&15]+n[m>>8&15]+n[m>>4&15]+n[15&m];return i||(U+=n[y>>28&15]+n[y>>24&15]+n[y>>20&15]+n[y>>16&15]+n[y>>12&15]+n[y>>8&15]+n[y>>4&15]+n[15&y]),U};i?(d.sha256=d,d.sha224=l,module.exports=d):e&&(e.sha256=d,e.sha224=l)}(this),e.sha256=sha256}.apply(e,arguments)})}(this);var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("promise-local-storage",["local-storage"],function(e){var t=null,i=function(){function i(){return _classCallCheck(this,i),t?t:(this.prefix="px",void(t=this))}return _createClass(i,[{key:"get",value:function(t){var i=new Promise(function(i,n){i(e.get(t))});return i}},{key:"set",value:function(t,i,n){var r=new Promise(function(r,a){r(e.set(t,i,n))});return r}}]),i}();return new i});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("cross-storage-client",["px-mini-utils"],function(e){var t=null,i=function(){function i(e){var n=this;return _classCallCheck(this,i),t?t:(t=this,this._requests={},this._iframePromise=new Promise(function(t,i){n._iframe=n._createIframe(e),n._requests.ready=function(){delete n._requests.ready,t()}}),this._listenToResponse(),this)}return _createClass(i,[{key:"get",value:function(e){return this._post("get",{key:e})}},{key:"set",value:function(e,t,i){return this._post("set",{key:e,value:t,expiration_date:i})}},{key:"_post",value:function(e,t){var i=this;return this._iframePromise.then(function(n){var r=new Promise(function(n,r){var a=i._createRequest(e,n,r);i._iframe.contentWindow.postMessage(JSON.stringify({method:e,id:a,arguments:t}),"*")});return r})}},{key:"_listenToResponse",value:function(){var e=function(e){if(e.source===this._iframe.contentWindow){var t=JSON.parse(e.data);this._requests.hasOwnProperty(t.id)?this._requests[t.id](t.arguments.value):"ready"===t.event&&(this._requests.ready(),delete this._requests.ready)}};window.addEventListener("message",e.bind(this))}},{key:"_createRequest",value:function(e,t,i){var n=this,r=e+"."+Date.now();return this._requests[r]=function(e){delete n._requests[r],t(e)},r}},{key:"_createIframe",value:function(t){var i=window.document.createElement("iframe");return i.src=t,i.id="pulpixiframe",e.setStyle(i,{display:"none",position:"absolute",top:"-999px",left:"-999px"}),window.document.body.appendChild(i),i}}]),i}();return i});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("optimized-cross-storage-client",["cross-storage-client","promise-local-storage","px-utils","globals"],function(e,t,i,n){function r(t){return o?o:new e(t)}var a=null,o=void 0,s=function(){function e(t,i){return _classCallCheck(this,e),a?a:(a=this,this.crossStorageUrl=t,this.defaultExpirationDate=i,this)}return _createClass(e,[{key:"get",value:function(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultExpirationDate;return new Promise(function(a,o){t.get(e).then(function(o){void 0===o?r(i.crossStorageUrl).get(e).then(function(i){t.set(e,i,n),a(i)}):a(o)})})}},{key:"set",value:function(e,i){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.defaultExpirationDate;return new Promise(function(o,s){Promise.all([r(n.crossStorageUrl).set(e,i,a),t.set(e,i,a)]).then(function(e){o(e[0])})})}}]),e}();return s});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("visitor-identifier",["require","xhr","sha256","user-preferences","promise-local-storage","cross-storage-client","optimized-cross-storage-client","globals","px-mini-utils","error-logger","gdpr"],function(e,t,i,n,r,a,o,s,l,d,c){var u=s.getApiHost()+"/api/v1/",p=void 0,h="4.0",f=13,m=new Date,y=m.setMonth(m.getMonth()+f),v=function(){function e(){return _classCallCheck(this,e),p?p:(this.VERSION=h,this._init(),this)}return _createClass(e,[{key:"_init",value:function(){var e=this;this._readyPromise=n.init().then(function(t){return e.userPreferences=t,e.Storage=e.chooseStorage(),e.getOrSetHasOptedOut()}).then(function(){return c.ready()}).then(function(){return e.hasOptedOut?Promise.reject({reason:"Opted out"}):c.computedConsent===!1?Promise.reject({reason:"GDPR consent is false"}):e.initVisitorId()}).then(function(){return e.updateSessionId()})}},{key:"onReady",value:function(){return this._readyPromise}},{key:"initVisitorId",value:function(){var e=this;return this.Storage.get("ids").then(function(t){e._storageIds=t||{};var i=function(){return Boolean(e._storageIds.fingerprint&&e._storageIds.visitorId&&e._storageIds.visitorIdSetAt&&e._storageIds.visitorRandomId&&e._storageIds.version===h)},n=function(){e.visitorFingerprint=t.fingerprint,e.visitorId=t.visitorId,e.visitorIdSetAt=t.visitorIdSetAt,e.visitorRandomId=t.visitorRandomId,e.country=t.country,e.fingerprint=t.fingerprint};return i()?void n():e.computeVisitorId.bind(e)().then(function(){e._saveIds()})})}},{key:"computeVisitorId",value:function(){function e(e,t){return i(t+e)}function n(){return i(window.navigator.userAgent+Date.now()+Math.random())}var r=this;return this._computeVisitorIdPromise?this._computeVisitorIdPromise:(this._computeVisitorIdPromise=Promise.all([t.get(u+"ping"),this.computeFingerprint()]).then(function(t){t[0]&&t[0].json?(r.clientIpAddress=t[0].json.client_ip_address,r.country=t[0].json.country,r.visitorId=e(r.fingerprint,r.clientIpAddress)):(r.visitorId=n(),d.log(new Error("Ping API responded with:"+t[0]))),r.fingerprint=t[1],r.visitorId=e(r.fingerprint,r.clientIpAddress),r.visitorIdSetAt=Date.now(),r.visitorRandomId=n()}),this._computeVisitorIdPromise)}},{key:"updateSessionId",value:function(){var e=this;return r.get("session").then(function(t){e._storageSession=t||{};var i=Date.now();return e.sessionId=e._storageSession.sessionId,e.sessionExpiresAt=e._storageSession.sessionExpiresAt,(!e.sessionExpiresAt||e.sessionExpiresAt<i||!e.sessionId)&&(e.sessionId=e.createSessionIdFromDate(e.visitorId,i)),e.updateExpirationDate(i)})}},{key:"updateExpirationDate",value:function(e){return this.sessionExpiresAt=this.createSessionExpirationDate(e),this._saveSession()}},{key:"_saveIds",value:function(){return this.Storage.set("ids",{visitorId:this.visitorId,visitorIdSetAt:this.visitorIdSetAt,visitorRandomId:this.visitorRandomId,fingerprint:this.fingerprint,country:this.country,version:h},y)}},{key:"_saveSession",value:function(){return r.set("session",{sessionId:this.sessionId,sessionExpiresAt:this.sessionExpiresAt},y)}},{key:"createSessionIdFromDate",value:function(e,t){return t+":"+e}},{key:"createSessionExpirationDate",value:function(e){var t=30,i=6e4;return e+t*i}},{key:"computeFingerprint",value:function(){var e=this;return new Promise(function(t,i){e._storageIds.fingerprint&&t(e._storageIds.fingerprint),pxRequire.require(["fingerprint"],function(e){new e({excludeAdBlock:!0,excludePlugins:!0,excludeAvailableScreenResolution:!0}).get(function(e,i){t(e)})})})}},{key:"getOrSetHasOptedOut",value:function(){var e=this,t=Date.now()+864e5;return this.Storage.get("oo",t).then(function(i){void 0===i&&e.Storage.set("oo",!1,t),e.hasOptedOut=Boolean(i)})}},{key:"chooseStorage",value:function(){var e=!l.isIphone()&&!l.isIpad()&&"third_party"===this.userPreferences.globals.storage_mode;return e?new o(s.staticHost+"/static/html/csi.html",y):r}}]),e}();return p=new v});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};pxRequire.define("debug-toolbar",["visitor-identifier","gdpr"],function(e,t){function i(){var i=this;if(n)throw new Error("Cannot instantiate more than one DebugToolbar, use DebugToolbar.getInstance()");this.isNeeded()&&Promise.all([e.onReady(),t.ready()]).then(function(){i.init()})["catch"](function(){i.init()})}var n;return i.getInstance=function(){return n||(n=new i),n},i.prototype.init=function(){var i=this,n=document.getElementById("px-event-debug");if(!n){n=document.createElement("div"),n.id="px-event-debug";var r="Event debug <small>1.8.83</small>";r+="<small><br> vid:"+e.visitorId+"<br>fp:"+e.fingerprint+"<br>v:"+e.VERSION+"<br>consent: "+t.computedConsent+"<br>consent string: "+t.consentString+"</small>",n.innerHTML="<p>"+r+'</p><span class="close icon px-icon-cross2"></span>',document.body.appendChild(n)}this.$closeButton=n.querySelector(".close"),this.$closeButton.addEventListener("click",function(){i.close()}),this.$container=n},i.prototype.isNeeded=function(){var e=window.location.href.match(/px-debug/);return Boolean(e||window.location.href.match(/dev.pulpix.co/)&&window.location.href.match(/snippettest|dmload/)||window.location.href.match(/127.0.0.1:9002/))},i.prototype.addEvent=function(e,t){if(!this.closed){var i=document.createElement("div");i.id="px-event-debug-event";var n=document.createElement("div");n.id="px-event-debug-metadata";var r=["<ul>",Object.keys(t).map(function(e){var i=t[e];return"object"===("undefined"==typeof i?"undefined":_typeof(i))&&(i=JSON.stringify(i)),[e,i]}).reduce(function(e,t){return void 0!==t[1]&&(e+="<li>"+t[0]+"="+t[1]+"</li>"),e}),"</ul>"].join();n.innerHTML=r,i.innerHTML=e,i.appendChild(n),this.$container.appendChild(i)}},i.prototype.close=function(){this.closed=!0,this.$container.parentNode.removeChild(this.$container)},i.getInstance()});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("api-class",["require","ab-test","xhr","px-utils","adblock-detector","globals","recommendation","tracking-event","model","visitor-identifier","debug-toolbar","error-logger"],function(e,t,i,n,r,a,o,s,l,d,c,u){function p(){var e=window,t=document,i=t.documentElement,n=t.getElementsByTagName("body")[0],r=e.innerWidth||i.clientWidth||n.clientWidth,a=e.innerHeight||i.clientHeight||n.clientHeight;return r>a?"landscape":"portrait"}function h(){return Date.now()-P<1e3*k}var f=void 0,m="https://events.pulpix.com/api/v1/track",y={callback:{type:"string"},canonical_url:{type:"string"},device_type:{type:"string"},engine_version:{type:"string"},excluded_ids:{type:"string"},force_enabled:{type:"boolean"},format:{type:"string"},offset:{type:"number"},force_pulpix_player:{type:"boolean"},visitor_id:{type:"string"},video_id:{type:"number"},website_id:{type:"number",required:!0},size:{type:"number",required:!0},url:{type:"string"}},v=function(e){function t(e){return _classCallCheck(this,t),e=n.removeUndefinedKeys(e),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,y))}return _inherits(t,e),_createClass(t,[{key:"serialize",value:function(){var e=n.removeUndefinedKeys(this);return n.serialize(e)}}]),t}(l),g={excluded_ids:{type:"string"},offset:{type:"number"},force_pulpix_player:{type:"boolean"},video_id:{type:"number"},website_id:{type:"number"},size:{type:"number",required:!0}},_=function(e){function t(e){return _classCallCheck(this,t),e=n.removeUndefinedKeys(e),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,g))}return _inherits(t,e),t}(l),b={autoplay:{type:"boolean"},content_id:{type:"number"},campaign_id:{type:"number"},catalog_id:{type:"string"},engine_type:{type:"string"},extra_data:{type:"object"},in_coverage:{type:"boolean",required:!0},in_multitask_coverage:{type:"boolean"},is_recommended:{type:"boolean",required:!0},name:{type:"string"},player_state:{type:"string"},proportion_visible:{type:"number"},provider:{type:"string"},recommendation_source_id:{type:"number"},recommendation_type:{type:"string"},score_details:{type:"object"},slot:{type:"string",required:!0,validators:[s.slotValidator]},video_id:{type:"number"},website_id:{type:"number"},widget:{type:"string",validators:[s.widgetValidator]}},w=function(e){function t(e){return _classCallCheck(this,t),e=n.removeUndefinedKeys(e),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,b))}return _inherits(t,e),t}(l),x=function(){function e(){return _classCallCheck(this,e),f||(f=this),this._init(),this._recoPromises={},f}return _createClass(e,[{key:"_init",value:function(){return this._initPromise?this._initPromise:(this._initPromise=d.onReady()["catch"](function(e){u.log(e)}),this._initPromise)}},{key:"track",value:function(e,t){var i=this;this._initPromise.then(function(){var n=i._computeTrackingEvent(e,t);i._track(n),c.isNeeded()&&c.addEvent(n.name,n)})["catch"](function(e){u.log(e)})}},{key:"_computeTrackingEvent",value:function(e,i){i.name=e;var a=new w(i),o=Object.assign({timestamp:(new Date).toISOString(),ab_test:t.chosenVariations,visitor_id:d.visitorId,session_id:d.sessionId,visitor_fingerprint:d.visitorFingerprint,visitor_random_id:d.visitorRandomId,document_referrer:window.document.referrer||void 0,device_orientation:p(),has_adblock:r(),is_tab_active:n.isTabActive(),is_visitor_active:h(),device_type:n.isMobile()?"mobile":"desktop",canonical_url:n.getCanonicalUrl()},n.removeUndefinedKeys(a));return new s(o)}},{key:"_track",value:function(e){i.post(m,e)}},{key:"getRecommendations",value:function(e){var t=this;return this._initPromise.then(function(){var i=t._computeGetRecoParams(e),n=Object.keys(i).map(function(e){return i[e]}).join();if(n in t._recoPromises)return t._recoPromises[n];var r=t._getReco(i);return t._recoPromises[n]=r,r})}},{key:"_computeGetRecoParams",value:function(e){var i=new _(e),r=Object.assign({url:n.getCanonicalUrl(),visitor_id:d.visitorId,website_id:a.websiteId,device_type:n.isMobile()?"mobile":"desktop",force_enabled:!1,format:"json",engine_version:i.video_id?t.chosenVariations.engine_version:t.chosenVariations.page_engine_version},n.removeUndefinedKeys(i));return new v(r)}},{key:"_getReco",value:function(e){if(window.pxRecosOverride)return Promise.resolve(this._getOverridenRecos(e.excluded_ids));var t=a.getApiHost()+"/api/v1/get_recommendations?"+e.serialize();return i.get(t).then(function(t){var i=t.json;return i.recommendations=i.recommendations.map(function(t){return t.recommendation_source_id=t.recommendation_source_id||e.video_id,new o(t)}),i})}},{key:"_getOverridenRecos",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(window.pxRecosOverride){var t=window.pxRecosOverride.filter(function(t){return-1===e.indexOf(t.video_info.id)});return{recommendations:t}}}}],[{key:"getInstance",value:function(){return f||(f=new e),f}}]),e}(),k=30,P=Date.now();return window.addEventListener("scroll",function(e){P=Date.now()}),window.addEventListener("mousemove",function(e){P=Date.now()}),x}),pxRequire.define("api",["api-class","globals"],function(e,t){return e.getInstance()}),pxRequire.define("analytics-utils",["globals","user-preferences","history","api"],function(e,t,i,n){function r(){if(o)throw new Error("Cannot instantiate more than one AnalyticsUtils, use AnalyticsUtils.getInstance()");this.init()}function a(e,t,i){return e&&(i=(e.config.analyticsParams||{}).widget||i,["instream","outstream_player"].includes(t)&&this.userPreferences.hasMultitask(t,e.videoInfo.provider)&&(i=e.flipper&&e.flipper.isActive()?"multitask":i)),i}var o;return r.getInstance=function(){return o||(o=new r),o},r.prototype.init=function(){var e=this;return this._isInitialized=!0,this._eventsTracked={},t.init().then(function(t){e.userPreferences=t})},r.prototype.initTrackingOnPlayer=function(e,t){if(!e.trackingEventInitialized){var r=this,a={start:"Played Video",end:"Ended Video",video_start:"Video Content Play",video_end:"Video Content End",video_10s:"Played 10s of video",video_25:"Played 25% of video",video_50:"Played 50% of video",video_75:"Played 75% of video",ad_start:"Ad Play",ad_end:"Ad Ended",ad_2s:"Ad Play 2s",viewable_ad_impression:"Viewable Ad Impression"},o=function(e){function o(){(!d.videoInfo.provider_specific_params.is_ad||["ad_start","ad_end","ad_2s"].includes(s))&&(n.track(l,r.generateVideoTrackingData(d,t.slot,t.widget)),void 0,"Played Video"===l&&d.videoInfo.id&&i.add(d.videoInfo.id))}var s=e.type;!s&&e.detail&&e.detail.detail&&(s=e.detail.detail.name);var l=a[s],d=e.player;d.videoInfo.id||!d.videoInfo._updatePromise?o():d.videoInfo._updatePromise.then(function(){o()})["catch"](function(){o()})}.bind(e);Object.keys(a).forEach(function(t){e.on(t,o)}),e.trackingEventInitialized=!0}},r.prototype.generateVideoTrackingData=function(t,i,n){var r={autoplay:t.config.autoplay,campaign_id:(t.config.analyticsParams||{}).campaignId,catalog_id:t.videoInfo.catalog_id,engine_type:(t.config.analyticsParams||{}).engine_type,extra_data:{isSponsored:Boolean(t.videoInfo.sponsoredParams)},in_coverage:this.userPreferences.slotEnabledAndInCoverage(i,t.videoInfo.provider)&&-1!==t.videoInfo.duration,is_recommended:t.isRecommended(),player_state:t.getState(),proportion_visible:t.proportionVisible(),provider:t.videoInfo.provider,recommendation_source_id:(t.config.analyticsParams||{}).recommendation_source_id,recommendation_type:t.config.recommendation_type||(t.config.analyticsParams||{}).recommendation_type,slot:i,video_id:t.videoInfo.id,website_id:e.websiteId||t.videoInfo.website_id,widget:a.bind(this)(t,i,n)};["instream","outstream_player"].includes(i)&&this.userPreferences.hasMultitask(i,t.videoInfo.provider)&&(r.in_multitask_coverage=!0);var o=t.getAdUnit();return o&&(r.extra_data.ad_unit=o),pxUtils.objPath(t,["vjsplayer","ima3","currentAd","getAdSystem"])&&(r.extra_data.ad_system=t.vjsplayer.ima3.currentAd.getAdSystem()),r.extra_data.playlist_index=(t.config.analyticsParams||{}).playlist_index,r},r.prototype.generateRecommendationTrackingData=function(t,i,n,r){var o=t?t.videoInfo:{};return{autoplay:"outstream_player"===i||t?t.config.autoplay:void 0,campaign_id:r.campaign_id,catalog_id:o.catalog_id,content_id:r.video_info.id,engine_type:r.engine_type,extra_data:r.extra_data,in_coverage:!0,is_recommended:t?t.isRecommended():!1,player_state:t?t.getState():void 0,proportion_visible:t?t.proportionVisible():void 0,provider:o.provider,recommendation_source_id:r.recommendation_source_id,recommendation_type:r.recommendation_type,score_details:r.score_details,slot:i,video_id:o.id,website_id:e.websiteId,widget:a.bind(this)(t,i,n)}},r.getInstance()});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("likes",["api","local-storage","px-utils","globals"],function(e,t,i,n){var r=1,a=-1,o=0,s=function(){function n(e,i,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a.likeCallback,s=a.dislikeCallback;_classCallCheck(this,n),this._$container=e,this._callbacks={like:o,dislike:s},this._currentState=(t.get("likes")||{})[i],this._videoId=i,this._buildTrackingData=r,this._render()}return _createClass(n,[{key:"enable",value:function(){i.addClass(this._$container,"player-footer-button-active")}},{key:"disable",value:function(){i.removeClass(this._$container,"player-footer-button-active")}},{key:"_toggleLike",value:function(){this._getState()!==r?(this._setState(r),e.track("Liked Video",this._buildTrackingData()),this._callbacks.like&&this._callbacks.like()):this._setState(o),this._updateLayout()}},{key:"_toggleDislike",value:function(){this._getState()!==a?(this._setState(a),e.track("Disliked Video",this._buildTrackingData()),this._callbacks.dislike&&this._callbacks.dislike()):this._setState(o),this._updateLayout()}},{key:"_render",value:function(){var e=document.createElement("div");e.innerHTML='<span class="px-icon-reaction px-icon-thumb-up"></span> Like',e.className="like-button";var t=document.createElement("div");t.innerHTML='<span class="px-icon-reaction px-icon-thumb-down"></span> Dislike',t.className="dislike-button",e.addEventListener("click",this._toggleLike.bind(this)),t.addEventListener("click",this._toggleDislike.bind(this)),this._$container.appendChild(e),this._$container.appendChild(t),this._$buttonLike=e,this._$buttonDislike=t,this._updateLayout()}},{key:"_setState",value:function(e){this._currentState=e;var i=t.get("likes")||{};return i[this._videoId]=this._currentState,t.set("likes",i),this._currentState}},{key:"_getState",value:function(){return this._currentState}},{key:"_updateLayout",value:function(){this._getState()===r?(i.addClass(this._$buttonLike,"active"),i.removeClass(this._$buttonDislike,"active")):this._getState()===a?(i.addClass(this._$buttonDislike,"active"),i.removeClass(this._$buttonLike,"active")):(i.removeClass(this._$buttonLike,"active"),i.removeClass(this._$buttonDislike,"active"))}},{key:"updateVideoId",value:function(e){this._currentState=(t.get("likes")||{})[e],this._videoId=e,this._updateLayout()}}]),n}();return s}),pxRequire.define("px-playlist-manager",["px-utils","api","analytics-utils","video-info","likes","error-logger"],function(e,t,i,n,r,a){function o(t,i,n,r){this.immersiveView=t,this.slides=i||[],this.playlistElements=[],this.currentSlide=n||0,this.numSlideDisplayed=r||3,this.elementsPerSlide=2,this.eventTarget=document.createTextNode(null),this.userLanguage=e.findLanguage()}function s(e,t,i,r){return this.immersiveView=e,this.index=t,this.impressionTrackings=(i.trackingEndpoints||{}).nativeImpression||[],this.visibleImpressionTrackings=(i.trackingEndpoints||{}).nativeVisibleImpression||[],this.recommendation=i,this.recommendation.extra_data=this.recommendation.extra_data||{},this.recommendation.extra_data.playlist_index=this.index,this.video_info=new n(i.video_info),this.userLanguage=r?r.userLanguage:"en",this.create(),this}function l(){return this.video_info.thumbnail_url||this.video_info.background||""}function d(){var t=void 0;return this.video_info.duration&&-1!==this.video_info.duration&&(t=e.time.timeToReadableFormat(this.video_info.duration,"millisecond")),t}function c(){return this.$playerFooter=document.createElement("div"),this.$playerFooter.className="player-footer",this.$playerFooterButton=document.createElement("div"),this.$playerFooterButton.className="player-footer-button",this.$playerFooter.appendChild(this.$playerFooterButton),
this.$el.appendChild(this.$playerFooter),this.$playerFooter}function u(){var t=this;this.$playerFooter||c.bind(this)();var i={more:{en:"Read more",fr:"Lire plus",es:"Leer mas"},less:{en:"Close",fr:"Fermer",es:"Cerrar"}};if(this.$playerFooterDescription=document.createElement("p"),this.$playerFooterDescription.className="player-footer-description player-footer-description-contracted",this.$playerFooterDescription.innerHTML=this.video_info.description,this.$playerFooter.appendChild(this.$playerFooterDescription),this.video_info.sponsoredParams&&e.addClass(this.$playerFooterButton,"hide"),this.video_info.description.length>60){var n=document.createElement("p");n.innerHTML=i.more[this.userLanguage],n.className="description-button",this.$playerFooter.appendChild(n),n.addEventListener("click",function(r){r.preventDefault(),t.immersiveView.setFreezeResizeSensorOnce(),e.hasClass(t.$playerFooterDescription,"player-footer-description-contracted")?(n.innerHTML=i.less[t.userLanguage],e.removeClass(t.$playerFooterDescription,"player-footer-description-contracted")):(n.innerHTML=i.more[t.userLanguage],e.addClass(t.$playerFooterDescription,"player-footer-description-contracted"))})}return this.$playerFooterDescription}function p(){var t=this;this.$playerFooter||c.bind(this)();var n=function(){return i.generateRecommendationTrackingData(t.immersiveView.player,t.immersiveView.slot,e.isMobile()?"mfeed":"immersive",t.recommendation)};this.likes=new r(this.$playerFooterButton,this.recommendation.video_info.id,n.bind(this),{dislikeCallback:this.immersiveView.playNext.bind(this.immersiveView)})}var h={en:"playing now",fr:"lecture en cours",es:"en curso"},f={fr:"sponsorisé par ",en:"sponsored by ",es:"patrocinado por "};return o.prototype.next=function(){if(this.currentSlide+this.numSlideDisplayed<this.slides.length){e.isMobile()||this.hideSlidesFromIndex(this.currentSlide);var t=this.currentSlide+this.numSlideDisplayed;this.showSlidesFromIndex(t),this.currentSlide=t<this.slides.length?t:this.slides.length-1,this.handleActionDisplay()}},o.prototype.previous=function(){if(this.currentSlide>0){e.isMobile()||this.hideSlidesFromIndex(this.currentSlide);var t=this.currentSlide-this.numSlideDisplayed;this.showSlidesFromIndex(t),this.currentSlide=t>=0?t:0,this.handleActionDisplay()}},o.prototype.loadMoreData=function(){this.trigger("needMoreData")},o.prototype.setSlideForElementAtIndex=function(e){var t=this.slideIndexForElementAtIndex(e);if(!this.isSlideAtIndexDisplayed(t)){var i=this.currentSlide;this.currentSlide=t,this.updateDisplay(this.currentSlide,i)}},o.prototype.showSlidesFromIndex=function(t){for(var i=t+this.numSlideDisplayed,n=t;i>n&&n<this.slides.length;n++)if(!e.hasClass(this.slides[n],"playlist-elements-slide-current")){var r=t<this.currentSlide?"px-fadeInLeft":"px-fadeInRight";e.addClass(this.slides[n],"playlist-elements-slide-current "+r)}},o.prototype.hideSlidesFromIndex=function(t){var i;for(i=t;i<t+this.numSlideDisplayed&&i<this.slides.length;i++)e.removeClass(this.slides[i],"playlist-elements-slide-current"),e.removeClass(this.slides[i],"px-fadeInRight"),e.removeClass(this.slides[i],"px-fadeInLeft")},o.prototype.slideIndexForElementAtIndex=function(t){return e.isMobile()?this.elementsPerSlide:Math.floor(t/this.elementsPerSlide)},o.prototype.isSlideAtIndexDisplayed=function(e){return e>=this.currentSlide&&e<this.currentSlide+this.numSlideDisplayed},o.prototype.isSlideFull=function(t){return e.isMobile()?!1:t.childNodes.length===this.elementsPerSlide},o.prototype.renderPlaylist=function(t,i,n){n=n||0;for(var r=this.slides.length?this.slides[this.slides.length-1]:void 0,a=0;a<i.length;a++){var o=new s(this.immersiveView,n+a,i[a],{userLanguage:this.userLanguage});this.playlistElements.push(o),(!r||this.isSlideFull(r))&&(r=document.createElement("div"),r.className="playlist-elements-slide",t.appendChild(r),this.slides.push(r)),r.appendChild(o.$el),o.sendImpressionTracking(),o.slideIndex=this.slides.indexOf(r),!this.isSlideFull(r)&&this.isSlideAtIndexDisplayed(this.slides.length-1)&&(e.addClass(r,"playlist-elements-slide-current"),e.isMobile()||e.addClass(r,"px-fadeInRight"))}},o.prototype.updateDisplay=function(t,i){t=void 0===t?this.currentSlide:t,i=void 0===i?this.currentSlide+this.numSlideDisplayed:i;var n=t-t%this.numSlideDisplayed;this.showSlidesFromIndex(n),e.isMobile()||this.hideSlidesFromIndex(i),this.currentSlide=n,this.handleActionDisplay()},o.prototype.triggerVisibleImpressions=function(){var e=this,t=this.playlistElements.filter(function(t){return t.slideIndex===e.currentSlide});t.forEach(function(e){e.sendVisibleImpressionTracking()})},o.prototype.handleActionDisplay=function(){this.currentSlide+this.numSlideDisplayed>this.slides.length-1&&!e.isMobile()&&this.loadMoreData(),this.currentSlide+this.numSlideDisplayed>this.slides.length-1?e.addClass(this.nextButtonElement,"playlist-action-disabled"):e.removeClass(this.nextButtonElement,"playlist-action-disabled"),0===this.currentSlide?e.addClass(this.previousButtonElement,"playlist-action-disabled"):e.removeClass(this.previousButtonElement,"playlist-action-disabled"),this.triggerVisibleImpressions()},o.prototype.trigger=function(e,t){var i;"function"==typeof window.CustomEvent?i=new window.CustomEvent(e,{detail:t}):document.createEvent?(i=document.createEvent("HTMLEvents"),i.initEvent(e,!0,!0)):document.createEventObject&&(i=document.createEventObject(),i.eventType=e),i.pxPlayer=!0,this.eventTarget.dispatchEvent?this.eventTarget.dispatchEvent(i):this.eventTarget[e]?this.eventTarget[e]():this.eventTarget["on"+e]&&this.eventTarget["on"+e]()},o.prototype.on=function(e,t){this.eventTarget.addEventListener?this.eventTarget.addEventListener(e,t,!1):this.eventTarget["on"+e]=t},o.prototype.orientationChanged=function(e){this.playlistElements.forEach(function(t){t.orientationChanged(e)})},s.prototype.create=function(){return this.$el=document.createElement("div"),this.$el.className="playlist-element",this.recommendation.video_info.sponsoredParams&&(this.$el.className+=" playlist-element-sponsored"),e.isMobile()?this.createMobile():this.createDesktop(),this.$el.instance=this,this.$el},s.prototype.createDesktop=function(){var e=h[this.userLanguage],t=l.call(this),i=d.call(this),n=void 0;n=i?'<div class="playlist-element-hover-fader-time">'+i+"</div>":"",this.$el.innerHTML=(this.video_info.sponsoredParams&&this.video_info.sponsoredParams.dsp_icon?'<img src="'+this.video_info.sponsoredParams.dsp_icon+'" class="px-ad-choice-logo">':"")+(t?'<img src="'+t+'" class="playlist-element-thumbnail">':"")+'<div class="playlist-element-playing-fader"><div class="playlist-element-playing-fader-title"><span class="px-icon-play"></span><span>'+e+'</span></div></div><div class="playlist-element-hover-fader"><div class="playlist-element-hover-fader-title">'+this.video_info.title+"</div>"+(this.video_info.sponsoredParams?'<span class="sponsored">'+this.video_info.sponsoredParams.sponsor+"</span>":"")+n+"</div>";var r=this.click.bind(this);this.$el.onclick=r},s.prototype.sendImpressionTracking=function(){this.impressionTrackings.forEach(function(t){e.pixelTrack(t)})},s.prototype.sendVisibleImpressionTracking=function(){this.visibleImpressionTrackings.forEach(function(t){e.pixelTrack(t)})},s.prototype.createMobile=function(){var t=this,i=l.call(this),n=void 0;n=this.video_info.sponsoredParams?'<a href="'+this.video_info.sponsoredParams.privacy+'" class="playlist-element-ad-choice px-cleanslate" target="_blank"><img class="px-ad-choice-logo" src="'+this.video_info.sponsoredParams.dsp_icon+'"></a>':"";var r="";if((this.video_info.title.length<50&&!this.video_info.sponsoredParams||this.video_info.title.length<20&&this.video_info.sponsoredParams)&&(r="one-line"),this.$el.innerHTML='<div class="player-header px-cleanslate"><img id="player-header-image"class="player-header-image'+(this.video_info.logo_icon_url?"":" player-header-image-hide")+'" src="'+this.video_info.logo_icon_url+'"></img><span class="player-header-title"id="player-header-title"><span class="'+r+'">'+this.video_info.title+"</span>"+(this.video_info.sponsoredParams?'<span class="sponsored">'+f[this.userLanguage]+this.video_info.sponsoredParams.sponsor+n+"</span>":"")+'</span></div><div style="background-image:url('+i+')!important;"class="playlist-element-thumbnail"><div class="px-player-icon"><div class="px-icon-play"></div></div></div>',this.immersiveView.userPreferences.widgets.mfeed.enable_likes&&p.call(this),this.video_info.description&&u.call(this),e.isIphone()&&(this.$el.querySelector(".playlist-element-thumbnail").onclick=function(){t.immersiveView.player.readyPromise.then(function(i){var n=e.findHighestZIndex("*"),r=2147483647,a=Math.min(Math.max(n+1,99999),r-2);e.setStyleImportant(t.immersiveView.$mainPlayerContainer,{opacity:"1","z-index":a}),t.immersiveView.player.play()})["catch"](function(e){a.log(e)})}),this.video_info.pulpix_src&&this.video_info.aspect_ratio&&this.immersiveView.aspectRatioSizingEnabled){var o=this.$el.getElementsByClassName("playlist-element-thumbnail")[0],s={"min-height":1/this._getAspectRatio()*window.innerWidth+125+"px"};e.setStyleImportant(this.$el,s),s={"padding-top":100/this._getAspectRatio()+"%",height:"0px"},e.setStyleImportant(o,s)}},s.prototype.click=function(){t.track("Clicked on Tag CTA",i.generateRecommendationTrackingData(this.immersiveView.player,this.immersiveView.slot,this.immersiveView.widget,this.recommendation)),this.immersiveView.playElementAtIndex(this.index)},s.prototype.setIsPlaying=function(){var t=this;return e.isMobile()&&this.likes&&this.immersiveView.player.one("video_timeupdate",function(){t.likes.enable()}),this.sendVisibleImpressionTracking(),e.addClass(this.$el,"playlist-element-playing")},s.prototype.removeIsPlaying=function(){return e.isMobile()&&this.likes&&this.likes.disable(),e.removeClass(this.$el,"playlist-element-playing")},s.prototype._getAspectRatio=function(){return this.video_info.aspect_ratio<1?1:this.video_info.aspect_ratio},s.prototype.orientationChanged=function(t){var i={"min-height":90===Math.abs(t)?"300px":1/this._getAspectRatio()*window.innerWidth+125+"px"};e.setStyleImportant(this.$el,i);var n=this.$el.getElementsByClassName("playlist-element-thumbnail")[0];e.setStyleImportant(n,{height:90===Math.abs(t)?"0px":"200px","padding-top":90===Math.abs(t)?"0px":100/this._getAspectRatio()+"%"})},o});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("ad-tag-preloader",["xhr","tag-formatter","globals","px-mini-utils"],function(e,t,i,n){function r(e,t){return t+":"+e}function a(e){var t=new DOMParser,i=t.parseFromString(e,"application/xml"),n=Array.from(i.childNodes).filter(function(e){return"VAST"===e.tagName});return n.length?(n=n[0],n.getElementsByTagName("Ad").length):!1}function o(e){return e.includes(i.getApiHost())}function s(e,t){function i(e){var n=this;return o.length===e?Promise.reject():this.load(o[e],t+"child"+e).then(function(e){return e})["catch"](function(t){return i.bind(n)(e+1)})}var r=new DOMParser,a=r.parseFromString(e,"application/xml"),o=n.getAllCDATA(a.querySelectorAll("VASTAdTagURI"));return i.bind(this)(0)}var l=void 0,d=function(){function t(){return _classCallCheck(this,t),l?l:(this._adTagResponsesPromises={},this)}return _createClass(t,[{key:"hasAdPromise",value:function(e,t){var i=r(e,t);return i in this._adTagResponsesPromises?!0:!1}},{key:"load",value:function(e,t){var i=this;return this._loadSingleUrl(e,t).then(function(n){return o(e)?s.bind(i)(n,t):n})}},{key:"_loadSingleUrl",value:function(t,i){if(t.includes(","))throw new Error("AdTagPreloader can't preload multiple adTags");var n=r(t,i);return n in this._adTagResponsesPromises||(this._adTagResponsesPromises[n]=e.get(t,{"Content-Type":null}).then(function(e){return a(e.response)?e.response:Promise.reject("AdError: The VAST response document is empty")})),this._adTagResponsesPromises[n]}},{key:"consume",value:function(e,t){var i=r(e,t);if(i in this._adTagResponsesPromises){var n=this._adTagResponsesPromises[i];return delete this._adTagResponsesPromises[i],n}}}]),t}();return new d});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("recommendation-caller",["xhr","globals","ab-test","px-mini-utils","user-preferences","video-info","player-config","error-logger","ad-tag-preloader","tag-formatter"],function(e,t,i,n,r,a,o,s,l,d){var c=null,u=function(){function e(){return _classCallCheck(this,e),c?c:(this._init(),this)}return _createClass(e,[{key:"_init",value:function(){var e=this;r.init().then(function(t){e.userPreferences=t})["catch"](function(e){s.log(e)})}},{key:"createPlayer",value:function(e,t,i){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=this._buildVideoInfo(e.video_info,i),o=this._buildConfig(e,void 0,t,i,r,!0);return Promise.all([o,a.getPlayerClassPromise()]).then(function(e){var t=e[0],i=e[1];return n.player=new i(void 0,{videoInfo:a,config:t}),n.player.readyPromise})["catch"](function(e){s.log(e)})}},{key:"call",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("video"===e.type&&(!this.userPreferences.hasVideoRefererRedirect()||["immersive","mfeed"].indexOf(i.widget)>-1))return this._playContent(e,t,i,n);var r=this._addGAParameters(e.getUrl());return window.parent.location.href=r,Promise.resolve()}},{key:"_playContent",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=this._buildConfig(e,t,void 0,n,r),o=new Promise(function(r,o){return a.then(function(a){t=t.src(i._buildVideoInfo(e.video_info,n,t.videoInfo.provider),a,function(e){r(e)})})["catch"](function(e){s.log(e)})});return o}},{key:"_buildVideoInfo",value:function(e,t,i){var r=void 0;return r=e.constructor.name===a.name?e.toJSON():n.clone(e),this.userPreferences.forcePulpixPlayer(t.slot,t.widget,i)&&r.pulpix_src&&(r.provider="pulpixplayer"),r&&delete r.preferences,new a(r)}},{key:"_buildConfig",value:function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:!1,l=r.widget,d=r.slot,c={containerId:i,autoplay:!0,ads:{},forceReload:this.userPreferences.getForceReloadForWidget(l),iframeParam:this.userPreferences.getIframePlayerParamForWidget(l),trackingEndpoints:e.trackingEndpoints,analyticsParams:{isRecommended:!0,engine_type:e.engine_type,recommendation_source_id:e.recommendation_source_id,recommendation_type:e.recommendation_type,playlist_index:(e.extra_data||{}).playlist_index,campaignId:e.campaign_id,widget:l,slot:d}};return c.analyticsParams=Object.assign(c.analyticsParams,a.analyticsParams),delete a.analyticsParams,c=Object.assign(c,a),null===a.ads?("number"==typeof this.videosWithoutAds?this.videosWithoutAds++:this.videosWithoutAds=1,c):this._shouldInjectPrerollAd(e,d,l)?this._buildPrerollAdConfig(e,d,l,t,s).then(function(e){return c.ads=a.ads||e,new o(c)}):(n.isMobile()&&(c.ads={tag:null,preloadedAdsResponse:"<VAST></VAST>"}),Promise.resolve(new o(c)))}},{key:"_shouldInjectPrerollAd",value:function(e,t,i){return this.userPreferences.hasPreroll()&&!e.video_info.sponsoredParams&&this.userPreferences.getAdTag(t,i)}},{key:"_buildPrerollAdConfig",value:function(e,t,i,n,r){var a=this._buildAdTag(e,t,i,n);return r&&this.userPreferences.isAdRequired(t)&&!e.adResponse?l.load(a,t).then(function(e){return{tag:a,preloadedAdsResponse:e}}):Promise.resolve({tag:a,preloadedAdsResponse:e.adResponse})}},{key:"_buildAdTag",value:function(e,t,i,n){var r=this.userPreferences.getAdTag(t,i);if(r)return d.format(r,n,e.video_info)}},{key:"_addGAParameters",value:function(e){var t=e;if(t&&this.userPreferences.widgets.inplayer.format.enable_ga_parameters){var i=t.split("?"),r=i[0],a={};2===i.length&&(a=n.url.deserialize(i[1])),a.utm_source="pulpix",a.utm_medium="pulpix_widget",t=r+"?"+n.url.serialize(a)}return t}}]),e}();return c=new u}),pxRequire.define("native-ad-getter",["px-utils","ad-tag-preloader","recommendation","globals","px-mini-utils"],function(e,t,i,n,r){function a(e,t){var n=o(e),r=new i({video_info:{website_id:1,provider:"pulpixplayer",duration:n.duration,provider_id:"na",provider_specific_params:{is_sponsored:!0},sponsoredParams:{dsp_icon:"//cdn.pulpix.com/static/img/ayl-brand.png",sponsor:n.sponsor,privacy:n.privacy||"https://www.adyoulike.com/privacy_policy_fr.php",clickThrough:n.clickThrough||n.landing,callToAction:n.callToAction,preloadedAdsResponse:e},src:void 0,logo_icon_url:n.logo,title:n.title||"Sponsored Content",description:n.description,thumbnail_url:n.thumbnail},extra_data:{is_sponsored:!0},trackingEndpoints:n.trackingEvents,type:"video"});return r}function o(t){var i=new DOMParser,n=i.parseFromString(t,"application/xml"),a=Array.from(n.querySelectorAll("MediaFile")).map(function(e){return{src:r.getCDATA(e),type:e.getAttribute("type")}}),o=e.time.parseReadableFormat(n.querySelector("Duration").textContent)/1e3,s=n.querySelector('Extension[type="AYL_NATIVE_VIDEO"]'),l={};if(s)try{l=JSON.parse(r.getCDATA(s))}catch(d){try{l=JSON.parse(s.textContent)}catch(d){}}var c={clickTracking:r.getAllCDATA(n.querySelectorAll("ClickTracking")),nativeImpression:l.Impressions||[],nativeVisibleImpression:l.VisibleImpressions||[]};return{mediaFiles:a,duration:o,trackingEvents:c,privacy:l.Privacy,icon:l.Icon,callToAction:l.CallToAction,description:l.Description,landing:l.Landing,clickThrough:(r.getAllCDATA(n.querySelectorAll("ClickThrough"))||[])[0],logo:l.Logo,sponsor:l.Sponsor,thumbnail:l.Thumbnail,title:l.Title}}var s={get:function(e,i){return t.load(e,i).then(function(t){var i=a(t,e);return i})},_parseAdResponse:o};return s});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("px-immersive-view",["px-playlist-manager","px-utils","api","analytics-utils","user-preferences","player-loader","recommendation-caller","video-info","recommendation","globals","error-logger","ad-tag-preloader","xhr","native-ad-getter","tag-formatter"],function(e,t,i,n,r,a,o,s,l,d,c,u,p,h,f){function m(e){var i=t.style.deserialize(e.getAttribute("style"));return i.width=i.width||(e.offsetWidth||e.parentNode.offsetWidth)+"px",i.height=i.height||(e.offsetHeight||e.parentNode.offsetHeight)+"px",i}var y=null,v=function(){function d(i,n){var a=this;if(_classCallCheck(this,d),y)return y;y=this,this.eventNames={displayed:"Displayed Immersive View",closed:"Closed Immersive View"},i=i||{},this.widget=t.isMobile()?"mfeed":"immersive",this.player=i.player,this.slot=i.slot,this.player&&(this.initialPlayerStyle=m(this.player.$el),this.initialPlayerTopPosition=this.player.$el.getBoundingClientRect().top-window.document.body.getBoundingClientRect().top),this.recommendation=i.recommendation,this.recommendationPlaylist=[],this.hiddenElements=[],this.offset=i.offset?i.offset:0,this.size=i.size?i.size:12,this.userLanguage=t.findLanguage();var s=t.objPath(this.player,["videoInfo"])||this.recommendation.video_info;s=o._buildVideoInfo(s,{widget:this.widget,slot:this.slot}),this.recommendationsLoaded=r.init().then(function(e){var t=e.forcePulpixPlayer(a.slot,a.widget);return a.loadRecommendations(t,s)}).then(function(e){e.length>0&&s.id!==e[0].video_info.id&&(a.recommendation=new l({type:"video",video_info:s,engine_type:t.objPath(a.recommendation,["engine_type"]),engine_version:t.objPath(a.recommendation,["engine_version"]),recommendation_type:t.objPath(a.player,["config","analyticsParams","recommendation_type"])||t.objPath(a.recommendation,["recommendation_type"]),recommendation_source_id:t.objPath(a.player,["config","analyticsParams","recommendation_source_id"])||t.objPath(a.recommendation,["recommendation_source_id"])}),e.unshift(a.recommendation),a.recommendation_source_id=e[0].video_info.id),a.recommendationPlaylist=t.clone(e)})["catch"](function(e){c.log(e)}),this.currentIndex=0,this.listeners={},this.siblingsPlayerListener={},this.slideManager=new e(this),this.slideManager.on("needMoreData",this.loadMoreData.bind(this)),this.sleepModeTimeout=!1;var u=t.findHighestZIndex("*"),p=2147483647;return this.immersiveZindex=Math.min(Math.max(u+1,99999),p-2),this.playerVisibility={isVideoVisibleInWindow:!1},this.recommendationsReady=r.init().then(function(e){return a.userPreferences=e,a.render(),"function"==typeof n&&n(),a.recommendationsLoaded}).then(function(){return a.userPreferences.hasNative()?a.injectNativeAds(a.userPreferences.getNativeAdTag(a.slot,a.widget),a.recommendationPlaylist).then(function(e){return a.recommendationPlaylist=e,a.recommendationPlaylist}):Promise.resolve()}),this}return _createClass(d,[{key:"playNext",value:function(e){this.currentIndex+1<this.recommendationPlaylist.length&&(this.slideManager.setSlideForElementAtIndex(this.currentIndex+1),this.playElementAtIndex(this.currentIndex+1,e))}},{key:"playPrevious",value:function(e){this.currentIndex-1>=0&&(this.slideManager.setSlideForElementAtIndex(this.currentIndex-1),this.playElementAtIndex(this.currentIndex-1,e))}},{key:"getNextRecommendation",value:function(){return this.recommendationPlaylist[this.currentIndex+1]}},{key:"loadMoreData",value:function(e){var t=this;if(this.offset||0===this.offset){var i=this.userPreferences.forcePulpixPlayer(this.slot,this.widget,this.player.videoInfo.provider);this.loadRecommendations(i,this.player.videoInfo).then(function(e){return e&&0!==e.length?t.userPreferences.hasNative()?t.injectNativeAds(t.userPreferences.getNativeAdTag(t.slot,t.widget),e):Promise.resolve():void 0},function(){void 0}).then(function(i){var n=i;t.slideManager.renderPlaylist(t.$playlistNode,n,t.recommendationPlaylist.length),t.slideManager.handleActionDisplay(),t.recommendationPlaylist=t.recommendationPlaylist.concat(n),"function"==typeof e&&e()})}}},{key:"loadRecommendations",value:function(e,t){var n=this;return s.getExcludedIds().then(function(r){return i.getRecommendations({video_id:t.id,force_pulpix_player:e,excluded_ids:r.join(","),offset:n.offset,size:n.size}).then(function(e){return n.offset=e.next_offset,e.recommendations})["catch"](function(e){c.log(e),n.recommendationPlaylist=[]})})}},{key:"playElementAtIndex",value:function(e,t){}},{key:"onResize",value:function(){var e=window,t=document,i=t.documentElement,n=window.document.body,r=e.innerWidth||i.clientWidth||n.clientWidth;859>r?this.slideManager.numSlideDisplayed=1:1201>r?this.slideManager.numSlideDisplayed=2:this.slideManager.numSlideDisplayed=3,this.slideManager.updateDisplay()}},{key:"close",value:function(){t.removeClass(window.document.body,"px-in-immersive"),i.track(this.eventNames.closed,n.generateVideoTrackingData(this.player,this.slot,t.isMobile()?"mfeed":"immersive")),this.removeListenersOnSiblingPlayers(),this.player&&(this.player.config.analyticsParams.widget="outstream_player"===this.slot?"outstream_player":"inplayer"),"function"==typeof this.onClose&&this.onClose(),y=null}},{key:"removePlayerListeners",value:function(){}},{key:"setPlayerListeners",value:function(){(!this.$initialPlayerContainer||t.isMobile())&&n.initTrackingOnPlayer(this.player,{slot:this.slot,widget:this.widget})}},{key:"setListeners",value:function(){this.setPlayerListeners(),this.listeners.sleepModeWatcher=this.sleepModeWatcher.bind(this),document.addEventListener("click",this.listeners.sleepModeWatcher),document.addEventListener("mousemove",this.listeners.sleepModeWatcher),this.sleepModeWatcher()}},{key:"removeListeners",value:function(){window.removeEventListener("resize",this.listeners.onWindowResize),document.removeEventListener("click",this.listeners.sleepModeWatcher),document.removeEventListener("mousemove",this.listeners.sleepModeWatcher)}},{key:"sleepModeWatcher",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!0;clearTimeout(this.sleepModeTimeout),t.removeClass(this.$el,"px-immersive-view-sleep-mode"),this.sleepModeTimeout=setTimeout(function(){i&&t.addClass(e.$el,"px-immersive-view-sleep-mode")},this.constructor.getTimeBeforeSleeping())}},{key:"render",value:function(){var e=this;if(this.$el=this.create(),this.recommendation?this._changeHeader(new s(this.recommendation.video_info)):this.player.videoInfo.updateFromAPI().then(function(){e._changeHeader(e.player.videoInfo)})["catch"](function(e){void 0}),this.player){var r=this.player.$el.parentNode;r.appendChild(this.$el),this.setInitialPlayer()}else t.addClass(this.$el,"px-fadeIn px-animated"),window.document.body.appendChild(this.$el);var a=this.close.bind(this);return this.$closeButton=this.$el.getElementsByClassName("px-immersive-close")[0],this.$closeButton.onclick=a,this.recommendationsReady.then(function(){e.recommendationPlaylist.length&&e.renderPlaylist.bind(e)()}),this.playerPromise=this.getVideoPlayer(),this.playerPromise.then(function(r){r.config.analyticsParams.playlist_index=0,r.config.analyticsParams.slot=e.slot,t.isMobile()?r.config.analyticsParams.widget="mfeed":r.config.analyticsParams.widget="immersive",e.callMethodOnSiblingPlayers("pause"),r.videoInfo.id?i.track(e.eventNames.displayed,n.generateVideoTrackingData(r,e.slot,e.widget)):r.videoInfo.updateFromAPI().then(function(){i.track(e.eventNames.displayed,n.generateVideoTrackingData(r,e.slot,e.widget))})["catch"](function(e){void 0})}),this.$el}},{key:"renderPlaylist",value:function(){var e=this.$el.getElementsByClassName("playlist-action-previous")[0],t=this.$el.getElementsByClassName("playlist-action-next")[0];this.slideManager.renderPlaylist(this.$playlistNode,this.recommendationPlaylist),this.slideManager.playlistElements[0].setIsPlaying();var i=this.slideManager.next.bind(this.slideManager);t.onclick=i,this.slideManager.nextButtonElement=t;var n=this.slideManager.previous.bind(this.slideManager);this.slideManager.previousButtonElement=e,e.onclick=n}},{key:"create",value:function(){}},{key:"callMethodOnSiblingPlayers",value:function(e){var t=this,i=!0,n=!1,r=void 0;try{for(var o,s=a.players[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var l=o.value;void 0,l.readyPromise.then(function(i){if(i.videoInfo.provider_id!==t.player.videoInfo.provider_id)try{var n=function(){d.getInstance()&&this[e]()}.bind(i);i.one("ad_timeupdate",n),i.one("video_timeupdate",n),t.siblingsPlayerListener[i.$el.id]=n,i[e]()}catch(r){void 0}})}}catch(c){n=!0,r=c}finally{try{!i&&s["return"]&&s["return"]()}finally{if(n)throw r}}}},{key:"removeListenersOnSiblingPlayers",value:function(){var e=!0,t=!1,i=void 0;try{for(var n,r=a.players[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value;this.siblingsPlayerListener[o.$el.id]&&(o.off("video_timeupdate",this.siblingsPlayerListener[o.$el.id]),o.off("ad_timeupdate",this.siblingsPlayerListener[o.$el.id]),delete this.siblingsPlayerListener[o.$el.id])}}catch(s){t=!0,i=s}finally{try{!e&&r["return"]&&r["return"]()}finally{if(t)throw i}}}},{key:"getVideoPlayer",value:function(){var e=this;return this.player?Promise.resolve(this.player):this.recommendationsReady.then(function(t){e.containerId="px-immersive-player-container";var i={};return"link"===e.slot&&(i={analyticsParams:{isRecommended:!1}}),o.createPlayer(e.recommendation,e.containerId,{widget:e.widget,slot:e.slot},i)}).then(function(t){return e.player=t,e.setListeners(),e.player})}},{key:"resetInitialPlayer",value:function(){this.player.$el.setAttribute("style",t.style.serialize(this.initialPlayerStyle)),t.removeClass(this.player.$el,"px-click-to-immersive-player"),t.removeClass(this.player.$el,"exit");try{this.player.canMute()?this.player.mute(!0):this.player.pause()}catch(e){void 0}this.$initialPlayerContainer=void 0}},{key:"_changeHeader",value:function(){return!1}},{key:"setInitialPlayer",value:function(){this.$initialPlayerContainer=this.player.$el,t.addClass(this.$initialPlayerContainer,"px-click-to-immersive-player"),"stickybar"!==this.slot&&"outstream_player"!==this.slot&&t.addClass(this.$initialPlayerContainer,"px-instream-click-to-immersive-player"),this.setListeners(),this.initialPlayerListeners={},this.player.canMute()&&this.player.mute(!1)}},{key:"injectNativeAds",value:function(e,t){var i=this.userPreferences.getNativeAdRatio()+1;e=f.format(e,this.player,void 0,!0);for(var n=[],r=[],a=0;a<t.length/this.userPreferences.getNativeAdRatio();a++){var o=a;n.push(h.get(e,o).then(function(e){return r.push(e)})["catch"](function(e){return Promise.resolve()}))}return Promise.all(n).then(function(){var e=1;t.length&&t[0].video_info.sponsoredParams&&(e=i);for(var n=e,a=0;n<t.length&&a<r.length;n+=i,a++)t.splice(n,0,r[a]);return t})}}],[{key:"shouldRender",value:function(){return 0===document.getElementsByClassName("px-immersive-view").length}},{key:"getTimeBeforeSleeping",value:function(){}},{key:"getInstance",value:function(){return y}}]),d}();return v});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("scroll-blocker",[],function(){function e(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}function t(e){var t={37:1,38:1,39:1,40:1};return t[e.keyCode]?(this.preventDefault(e),!1):void 0}var i=null,n=function(){function n(){return _classCallCheck(this,n),i?i:this}return _createClass(n,[{key:"disableScroll",value:function(){window.addEventListener&&window.addEventListener("DOMMouseScroll",e,!1),window.onwheel=e,window.onmousewheel=document.onmousewheel=e,window.ontouchmove=e,document.onkeydown=t}},{key:"enableScroll",value:function(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",e,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}}]),n}();return i=new n});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_get=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)};pxRequire.define("px-immersive-view-desktop",["px-immersive-view","px-utils","api","analytics-utils","recommendation-caller","scroll-blocker","globals","video-info","likes","error-logger"],function(e,t,i,n,r,a,o,s,l,d){function c(e,i){var n={en:"Back",fr:"Retour",es:"Atrás"}[t.findLanguage()],r={basic:'<div class="px-immersive-view"><div class="px-immersive-content"><div class="px-immersive-background"></div><div id="player" class="player player-immersive">'+i+'<div class="player-header px-cleanslate px-table"><img id="player-header-image"class="player-header-image player-header-image-hide px-cell"></img><div class="px-cell"><span class="player-header-title"id="player-header-title"></span><div class="player-header-description"></div></div></div><div class="px-immersive-player-container" id="px-immersive-player-container"></div><div class="player-action player-action-next px-cleanslate"><span class="px-icon-chevron-light-right"></span></div><div class="player-action player-action-previous px-cleanslate"><span class="px-icon-chevron-light-left"></span></div><div class="player-footer px-cleanslate"><div class="player-footer-button px-cleanslate"></div></div><div class="player-transition-fader"></div></div><div id="playlist" class="playlist px-cleanslate"><div id="playlist-elements" class="playlist-elements"></div><div class="playlist-action playlist-action-next playlist-action-disabled"><span class="px-icon-chevron-light-right"></span></div><div class="playlist-action playlist-action-previous playlist-action-disabled"><span class="px-icon-chevron-light-left"></span></div></div></div><div class="px-immersive-close px-cleanslate"><span class="px-icon-chevron-light-left"></span> '+n+"</div></div>",
lequipe:'<div class="px-immersive-view px-immersive-view-lequipe"><div class="px-immersive-content"><div class="px-immersive-background"></div><div id="player" class="player player-immersive"><div class="px-immersive-close px-cleanslate"><span class="icon px-icon-cross"></span></div>'+i+'<div class="player-header px-cleanslate"><div class="player-header-categories"><span class="player-header-category player-header-category-skew player-header-category-hide"id="player-header-category"></span><span class="player-header-sub-category player-header-sub-category-skew player-header-sub-category-hide"id="player-header-sub-category"></span></div><span class="player-header-title"id="player-header-title"></span></div><div class="px-immersive-player-container" id="px-immersive-player-container"></div><div class="player-action player-action-next px-cleanslate"><span class="px-icon-chevron-light-right"></span></div><div class="player-action player-action-previous px-cleanslate"><span class="px-icon-chevron-light-left"></span></div><div class="player-footer px-cleanslate"><div class="player-footer-button px-cleanslate"></div></div><div class="player-transition-fader"></div></div><div id="playlist" class="playlist px-cleanslate"><div id="playlist-elements" class="playlist-elements"></div><div class="playlist-action playlist-action-next playlist-action-disabled"><span class="px-icon-chevron-light-right"></span></div><div class="playlist-action playlist-action-previous playlist-action-disabled"><span class="px-icon-chevron-light-left"></span></div></div></div></div>'};return r[e]}function u(e){e.forEach(function(e){var i={};e.propertiesModified.forEach(function(n){n in e.previousStyle?i[n]=e.previousStyle[n]:t.removeStyle(e.elem,n)}),t.setStyle(e.elem,i)})}function p(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("BODY"===e.nodeName)return[];var n=[],r=h(e,"z-index"),a=Array.from(e.parentNode.childNodes);return a.forEach(function(a){if(m(a)&&f(a,r)&&a!==e&&!i.includes(a)){var o={elem:a,previousStyle:t.style.deserialize(a.getAttribute("style")),propertiesModified:["z-index"]},s={"z-index":r-1};"static"===h(a,"position")&&(s.position="relative",["top","left","right","bottom"].forEach(function(e){s[e]=0}),o.propertiesModified.concat(["top","bottom","left","right","position"])),t.setStyleImportant(a,s),n.push(o)}}),n=n.concat(p(e.parentNode,i))}function h(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)}function f(e,t){return h(e,"z-index")>=t}function m(e,t){return!["#comment","#text","SCRIPT"].includes(e.nodeName)}var y=4e3,v=function(e){function h(){return _classCallCheck(this,h),_possibleConstructorReturn(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return _inherits(h,e),_createClass(h,[{key:"renderPlaylist",value:function(){_get(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"renderPlaylist",this).call(this),this.updateNavigationButtons(),this.playlistResize()}},{key:"playElementAtIndex",value:function(e,t){var i=this;this._changeHeader(new s(this.recommendationPlaylist[e].video_info)),this.slideManager.playlistElements[this.currentIndex].removeIsPlaying(),this.slideManager.playlistElements[e].setIsPlaying(),this.currentIndex=e,this.updateNavigationButtons(),this.recommendation=this.recommendationPlaylist[e],this.likes&&(this.likes.disable(),this.likes.updateVideoId(this.recommendation.video_info.id)),r.call(this.recommendation,this.player,{widget:this.widget,slot:this.slot}).then(function(e){i.player=e,i.userPreferences.widgets.immersive.enable_likes&&i.setLikeListeners(),"function"==typeof t&&t()})["catch"](function(e){d.log(e)})}},{key:"updateNavigationButtons",value:function(){this.currentIndex===this.recommendationPlaylist.length-1?this.disableNavigationButton("next"):this.enableNavigationButton("next"),0===this.currentIndex?this.disableNavigationButton("previous"):this.enableNavigationButton("previous")}},{key:"enableNavigationButton",value:function(e){var i=this.$el.getElementsByClassName("player-action-"+e)[0];t.removeClass(i,"player-action-disabled")}},{key:"disableNavigationButton",value:function(e){var i=this.$el.getElementsByClassName("player-action-"+e)[0];t.addClass(i,"player-action-disabled")}},{key:"loadMoreData",value:function(){var e=this;_get(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"loadMoreData",this).call(this,function(){e.updateNavigationButtons()})}},{key:"setInitialPlayer",value:function(){_get(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"setInitialPlayer",this).call(this),t.setStyleImportant(this.player.$el,{position:"fixed"});var e=document.getElementsByClassName("player-header")[0],i=document.getElementsByClassName("player-header")[0];t.addClass(e,"player-header-fade-out"),t.addClass(i,"playlist-fade-out"),setTimeout(function(){t.addClass(e,"player-header-fade-in"),t.removeClass(e,"player-header-fade-out"),t.addClass(i,"playlist-fade-in"),t.removeClass(i,"playlist-fade-out")},300),this.playerResize()}},{key:"resetInitialPlayer",value:function(){_get(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"resetInitialPlayer",this).call(this),this.player.onResize()}},{key:"setListeners",value:function(){this.listeners.onWindowResize=this.onResize.bind(this),window.addEventListener("resize",this.listeners.onWindowResize),_get(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"setListeners",this).call(this)}},{key:"setLikeListeners",value:function(){var e=this;this.player.one("ad_timeupdate",function(){e.likes.disable()}),this.player.one("video_timeupdate",function(){e.likes.enable()})}},{key:"onResize",value:function(){this.playerResize(),this.playlistResize()}},{key:"playerResize",value:function(){if(this._updatePlayerSize(),this.$initialPlayerContainer&&!this.isInFullscreen){var e=document.getElementsByClassName("px-immersive-player-container")[0]||this.player.$el.parentNode,i=e.getBoundingClientRect();this.$initialPlayerContainer.style.width=e.offsetWidth,this.$initialPlayerContainer.style.maxWidth=e.offsetWidth,this.$initialPlayerContainer.style.height=e.offsetHeight,this.$initialPlayerContainer.style.top=i.top,this.$initialPlayerContainer.style.left=i.left,t.setStyleImportant(this.$initialPlayerContainer,{"z-index":(this.immersiveZindex+1).toString(),width:e.offsetWidth+"px","max-width":e.offsetWidth+"px","max-height":e.offsetHeight+"px",height:e.offsetHeight+"px",top:i.top+"px",left:i.left+"px",right:"auto",bottom:"auto"})}this.player.onResize()}},{key:"playlistResize",value:function(){var e=window,t=document,i=t.documentElement,n=window.document.body,r=e.innerWidth||i.clientWidth||n.clientWidth;859>r?this.slideManager.numSlideDisplayed=1:1201>r?this.slideManager.numSlideDisplayed=2:this.slideManager.numSlideDisplayed=3,this.slideManager.updateDisplay()}},{key:"setPlayerListeners",value:function(){var e=this;this.playerListeners={onEnd:function(){e._autoPlayNext()},onAdEnd:function(){e._autoPlayNext()}},this.player.on("video_end",this.playerListeners.onEnd),this.player.on("fullscreen",function(t){t.detail.fullscreen?(e.isInFullscreen=!0,e.player.$el.removeAttribute("style","")):e.isInFullscreen=!1}),_get(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"setPlayerListeners",this).call(this)}},{key:"removePlayerListeners",value:function(){this.player.off("video_end",this.playerListeners.onEnd),this.player.off("ad_end",this.playerListeners.onAdEnd)}},{key:"_autoPlayNext",value:function(){var e=this;clearTimeout(this.playNextTimeout),this.playNextTimeout=setTimeout(function(){e.currentIndex<=e.recommendationPlaylist.length&&i.track("Auto Clicked Tag",n.generateRecommendationTrackingData(e.player,e.slot,e.widget,e.recommendationPlaylist[e.currentIndex+1])),e.playNext()},200)}},{key:"render",value:function(){var e=this,i=_get(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"render",this).call(this);if(this.userPreferences.widgets.immersive.enable_likes){var r=function(){return n.generateRecommendationTrackingData(e.player,e.slot,e.widget,e.recommendation)};this.recommendationsReady.then(function(){return e.likes=new l(e.$playerFooter.getElementsByClassName("player-footer-button")[0],e.recommendation.video_info.id,r.bind(e),{dislikeCallback:e.playNext.bind(e)}),e.playerPromise}).then(function(){e.setLikeListeners()})["catch"](function(e){d.log(e)})}this.decreasedElements=p(this.$el,[this.$initialPlayerContainer].concat(_toConsumableArray(document.querySelectorAll(".header-overlay-container")))),this.zindexTimeout=window.setTimeout(function(){e.decreasedElements.concat(p(e.$el,[e.$initialPlayerContainer,document.querySelector(".px-ad-player")].concat(_toConsumableArray(document.querySelectorAll(".header-overlay-container")))))},5e3),this.playerPromise.then(function(){e._updatePlayerSize(),e.player.onResize(),e.player.on("src_changed",function(t){e.$initialPlayerContainer&&(e.$initialPlayerContainer=t.player.$el),t.player.onResize()})})["catch"](function(e){d.log(e)});var s=this.playNext.bind(this);i.getElementsByClassName("player-action-next")[0].onclick=s;var c=this.playPrevious.bind(this);i.getElementsByClassName("player-action-previous")[0].onclick=c,this.$headerPicture&&!this.$headerPicture.src&&t.addClass(this.$headerPicture,"player-header-image-hide"),this.disableNavigationButton("next"),this.disableNavigationButton("previous"),a.disableScroll(),989===o.websiteId&&(document.onkeydown=function(t){t=t||window.event;var i=!1;i="key"in t?"Escape"===t.key||"Esc"===t.key:27===t.keyCode,i&&e.close()})}},{key:"_updatePlayerSize",value:function(){var e=this.player.$el.offsetWidth,i=this.player.$el.offsetHeigh;t.removeClass(this.player.$el,"px-xs-video"),t.removeClass(this.player.$el,"px-sm-video"),t.removeClass(this.player.$el,"px-medium-video"),400>e||300>i?t.addClass(this.player.$el,"px-xs-video"):600>e||500>i?t.addClass(this.player.$el,"px-sm-video"):t.addClass(this.player.$el,"px-medium-video")}},{key:"_changeHeader",value:function(e){var i=this;if(!this.lastTitle||this.lastTitle!==e.title)return this.lastTitle=e.title,t.removeClass(this.$header,"player-header-fade-in"),t.addClass(this.$header,"player-header-fade-out"),setTimeout(function(){var n=e.title;if(715===o.websiteId)if("dailymotion"===e.provider&&e.title.includes(":")){n=e.title.substr(e.title.indexOf(":")+1);var r=e.title.substr(0,e.title.indexOf(":")).split("-");i.$headerCategory.innerHTML=r[0],r.length>1?(r.shift(),i.$headerSubCategory.innerHTML=r.join("-"),t.removeClass(i.$headerSubCategory,"player-header-sub-category-hide")):t.addClass(i.$headerSubCategory,"player-header-sub-category-hide"),t.removeClass(i.$headerCategory,"player-header-category-hide")}else t.addClass(i.$headerCategory,"player-header-category-hide"),t.addClass(i.$headerSubCategory,"player-header-sub-category-hide");else i.$headerPicture.src=e.logo_icon_url?e.logo_icon_url:"",e.logo_icon_url?t.removeClass(i.$headerPicture,"player-header-image-hide"):t.addClass(i.$headerPicture,"player-header-image-hide"),e.description?(i.$headerDescription.innerHTML=e.description,t.removeClass(i.$headerDescription,"hide")):(i.$headerDescription.innerHTML="",t.addClass(i.$headerDescription,"hide"));if(i.$headerTitle.innerHTML=n,e.sponsoredParams){var a={fr:"sponsorisé par ",en:"sponsored by ",es:"patrocinado por "};i.$headerTitle.innerHTML+='<span class="sponsored">'+a[i.userLanguage]+e.sponsoredParams.sponsor+'</span><a class="player-header-ad-choice px-cleanslate" href="'+e.sponsoredParams.privacy+'" target="_blank"><img src="'+e.sponsoredParams.dsp_icon+'" class="px-ad-choice-logo"></a>'}t.removeClass(i.$header,"player-header-fade-out"),t.addClass(i.$header,"player-header-fade-in")},250),!0}},{key:"create",value:function(){t.addClass(window.document.body,"px-in-immersive"),t.addClass(window.document.body,"px-in-immersive-desktop"),t.isIpad()&&t.addClass(window.document.body,"px-in-immersive-ipad");var e=document.createElement("div");e.id="pulpix",e.className="px-immersive-view-wrapper";var i="";this.userPreferences.hasDisplayLogoBanner()&&""!==this.userPreferences.getLogoBanner()&&(t.addClass(e,"px-logo-banner"),i='<div class="px-logo-banner-container"><img class="px-logo-banner-image" src="'+this.userPreferences.getLogoBanner()+'"></div>');var n=715===o.websiteId?"lequipe":"basic";if(e.innerHTML=c(n,i),!this.userPreferences.globals.enable_whitelabel){var r=document.createElement("div");r.className="px-immersive-brand",r.innerHTML='<a href="https://www.adyoulike.com/privacy_policy_fr.php" target="_blank"><span class="pulpix-text" translate>Powered by </span><span class="pulpix-logo"><img class="img" src="//cdn.pulpix.com/static/img/ayl-brand.png"alt="Adyoulike"></span></a>';var a="playlist",s=e.getElementsByClassName(a)[0];s.appendChild(r)}return t.setStyleImportant(e,{"z-index":this.immersiveZindex.toString(),position:"fixed",top:"0"}),this.$header=e.getElementsByClassName("player-header")[0],this.$headerPicture=this.$header.getElementsByClassName("player-header-image")[0],this.$headerTitle=this.$header.getElementsByClassName("player-header-title")[0],this.$headerDescription=this.$header.getElementsByClassName("player-header-description")[0],this.$headerCategory=this.$header.getElementsByClassName("player-header-category")[0],this.$headerSubCategory=this.$header.getElementsByClassName("player-header-sub-category")[0],this.$playlistNode=e.getElementsByClassName("playlist-elements")[0],this.$playlist=e.getElementsByClassName("playlist")[0],this.$playerFooter=e.getElementsByClassName("player-footer")[0],e}},{key:"close",value:function(){var e=this;window.clearTimeout(this.zindexTimeout),u(this.decreasedElements),setTimeout(function(){t.addClass(e.$playlist,"playlist-exit");var i=e.$el.getElementsByClassName("px-immersive-player-container")[0];t.addClass(i,"exit"),e.$initialPlayerContainer&&t.addClass(e.$initialPlayerContainer,"exit"),t.addClass(e.$el,"fade-out"),t.removeClass(window.document.body,"px-in-immersive-desktop"),a.enableScroll(),setTimeout(function(){e.$el.parentNode.removeChild(e.$el),e.$initialPlayerContainer?(e.resetInitialPlayer(),e.removePlayerListeners()):"stickybar"===e.slot&&e.player.dispose(),_get(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"close",e).call(e)},800),e.removeListeners()},100)}}],[{key:"getTimeBeforeSleeping",value:function(){return y}}]),h}(e);return v}),pxRequire.define("px-resize-sensor",["px-utils"],function(e){function t(e,t){var i=Object.prototype.toString.call(e),n="[object Array]"===i||"[object NodeList]"===i||"[object HTMLCollection]"===i||"[object Object]"===i||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,r=0,a=e.length;if(n)for(;a>r;r++)t(e[r]);else t(e)}if("undefined"==typeof window)return null;var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)},n=function r(n,a){function o(){var e=[];this.add=function(t){e.push(t)};var t,i;this.call=function(){for(t=0,i=e.length;i>t;t++)e[t].call()},this.remove=function(n){var r=[];for(t=0,i=e.length;i>t;t++)e[t]!==n&&r.push(e[t]);e=r},this.length=function(){return e.length}}function s(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t]}function l(t,n){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(n)}else t.resizedAttached=new o,t.resizedAttached.add(n);t.resizeSensor=document.createElement("div"),t.resizeSensor.className="resize-sensor";var r="position: absolute!important; left: 0!important; top: 0!important; right: 0!important; bottom: 0!important; overflow: hidden!important; z-index: -1!important; visibility: hidden!important;",a="position: absolute!important; left: 0!important; top: 0!important; transition: 0s!important;";t.resizeSensor.style.cssText=r,t.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+r+'"><div style="'+a+'"></div></div><div class="resize-sensor-shrink" style="'+r+'"><div style="'+a+' width: 200%!important; height: 200%!important"></div></div>',t.appendChild(t.resizeSensor),"static"==s(t,"position")&&(t.style.position="relative",e.setStyleImportant(t,{position:"relative"}));var l,d,c,u,p=t.resizeSensor.childNodes[0],h=p.childNodes[0],f=t.resizeSensor.childNodes[1],m=t.offsetWidth,y=t.offsetHeight,v=function(){h.style.width="100000px",h.style.height="100000px",e.setStyleImportant(h,{width:"100000px",height:"100000px"}),p.scrollLeft=1e5,p.scrollTop=1e5,f.scrollLeft=1e5,f.scrollTop=1e5};v();var g=function(){d=0,l&&(m=c,y=u,t.resizedAttached&&t.resizedAttached.call())},_=function(){c=t.offsetWidth,u=t.offsetHeight,l=c!=m||u!=y,l&&!d&&(d=i(g)),v()},b=function(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i)};b(p,"scroll",_),b(f,"scroll",_)}t(n,function(e){l(e,a)}),this.detach=function(e){r.detach(n,e)}};return n.detach=function(e,i){t(e,function(e){e.resizedAttached&&"function"==typeof i&&(e.resizedAttached.remove(i),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached)})},n});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_get=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)};pxRequire.define("px-immersive-view-mobile",["px-immersive-view","px-utils","api","analytics-utils","px-resize-sensor","recommendation-caller","error-logger"],function(e,t,i,n,r,a,o){function s(e,t){var i=window.document.getElementsByClassName(e)[0];return i||(i=document.createElement("div"),i.className=e,t.appendChild(i)),i}function l(e,t){var i=void 0;return function(){var n=this,r=arguments;clearTimeout(i),i=setTimeout(function(){e.apply(n,r)},t||250)}}var d=55,c=50,u=250,p=300,h=6e3,f=20,m={landscape:{top:80,bottom:-60},portrait:{top:0,bottom:.55*screen.height-300}},y=function(e){function y(e,i){_classCallCheck(this,y);var n=_possibleConstructorReturn(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,e,i));return n.eventNames={displayed:"Displayed mFeed",closed:"Closed mFeed"},n.currentIndex=0,n.lastYOffset=0,n.orientation=window.orientation||t.objPath(window,["screen","orientation","angle"]),n}return _inherits(y,e),_createClass(y,[{key:"renderPlaylist",value:function(){var e=this;this.isClosing||(_get(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"renderPlaylist",this).call(this),this.playerBoundElementTop=this.getPlayerBoundElement().getBoundingClientRect().top,this.$playlistEl=document.getElementsByClassName("playlist")[0],t.addClass(this.getPlayerBoundElement(),"playlist-element-thumbnail-hide"),this.resizePlayer(function(){t.removeClass(e.getPlayerBoundElement(),"playlist-element-thumbnail-hide")}),this.playerSensor=new r(this.$el.getElementsByClassName("playlist")[0],function(){e.freezeResizeSensorOnce?e.freezeResizeSensorOnce=!1:e.resizePlayer.bind(e)()}),"stickybar"!==this.slot&&(this.$firstParent=this.$mainPlayerContainer.parentNode,t.setStyleImportant(this.$firstParent,{"min-height":this.$playlist.offsetHeight+"px"})))}},{key:"create",value:function(){t.addClass(window.document.body,"px-in-immersive px-in-immersive-mobile");var e=this.player?"":'<div id="player" class="player player-immersive"><div class="player-header px-cleanslate player-header-mobile" ><img id="player-header-image"class="player-header-image player-header-image-hide"></img><span class="player-header-title"id="player-header-title"></span></div><div class="px-immersive-player-container" id="px-immersive-player-container"></div></div>',i=document.createElement("div");return i.id="pulpix",i.className="px-immersive-view-wrapper px-immersive-view-wrapper-mobile",i.innerHTML='<div class="px-immersive-view"><div class="px-immersive-content"><div class="px-immersive-background"></div>'+e+'<div id="playlist" class="playlist px-cleanslate"><div id="playlist-elements" class="playlist-elements"></div><div class="playlist-action playlist-action-next playlist-action-disabled"><span class="px-icon-chevron-light-right"></span></div><div class="playlist-action playlist-action-previous playlist-action-disabled"><span class="px-icon-chevron-light-left"></span></div></div>'+(this.userPreferences.globals.enable_whitelabel?"":'<div class="px-immersive-brand"><span><span class="pulpix-text" translate>Powered by </span><span class="pulpix-logo"><img class="img" src="//cdn.pulpix.com/static/img/ayl-brand.png"alt="Adyoulike"></span></span></div>')+'</div><div class="px-immersive-close px-cleanslate"><span class="px-icon-chevron-light-left"></span> Back</div></div>',t.setStyleImportant(this.player.$el,{"z-index":(this.immersiveZindex+1).toString()}),t.setStyleImportant(i,{"z-index":this.immersiveZindex.toString(),position:"absolute",top:"0"}),t.setStyleImportant(i.getElementsByClassName("px-immersive-view")[0],{"min-height":window.innerHeight+"px"}),this.aspectRatioSizingEnabled=this.userPreferences.widgets.mfeed.enable_aspect_ratio_sizing,this.$mainPlayerContainer=this.player?this.player.$el:this.$el.getElementsByClassName("player-immersive")[0],this.player.videoInfo.pulpix_src&&this.player.videoInfo.aspect_ratio&&this.aspectRatioSizingEnabled?t.setStyleImportant(this.$mainPlayerContainer,{"padding-top":100/this.player.videoInfo.aspect_ratio+"% !important",height:"0px !important",width:"100% !important"}):t.setStyleImportant(this.$mainPlayerContainer,{height:"200px","padding-top":0,width:"100%"}),this.$blackBackground=s("px-black-background-"+this.slot,i),this.$fader=s("player-transition-fader-"+this.slot,i),this.$playlistNode=i.getElementsByClassName("playlist-elements")[0],this.$playlist=i.querySelector("#playlist"),this._setElementsLayout(),i}},{key:"_setElementsLayout",value:function(){var e=window.orientation||t.objPath(window,["screen","orientation","angle"]);this.orientation=e,y.setStyleForOrientation(e);var i=d+f+c;90===Math.abs(e)?(t.setStyleImportant(this.$mainPlayerContainer,{top:i+"px"}),window.scrollTo(0,i)):(window.scrollTo(0,0),t.setStyleImportant(this.$mainPlayerContainer,{top:i+"px"}));var n="stickybar"===this.slot?t.objPath(this,["player","$el","parentNode"]):void 0;this.hiddenElements=t.hideElementsOtherThanElems([n||this.$mainPlayerContainer,this.$el,this.$blackBackground])}},{key:"setFreezeResizeSensorOnce",value:function(){this.freezeResizeSensorOnce=!0}},{key:"setInitialPlayer",value:function(){_get(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"setInitialPlayer",this).call(this),this.$immersiveContainer=document.getElementsByClassName("px-immersive-player-container")[0]||this.player.$el.parentNode,this.$fader&&t.setStyleImportant(this.$fader,{"z-index":(this.immersiveZindex+2).toString(),top:this.$immersiveContainer.getBoundingClientRect().top+"px",left:"0px"}),t.setStyleImportant(this.$blackBackground,{"z-index":(this.immersiveZindex+2).toString()}),this.immersiveContainerInitialStyle=this.$immersiveContainer.getAttribute("style"),t.setStyleImportant(this.$immersiveContainer,{"z-index":(this.immersiveZindex+1).toString()})}},{key:"resetInitialPlayer",value:function(){this.$immersiveContainer.setAttribute("style",t.style.serialize(this.immersiveContainerInitialStyle)),_get(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"resetInitialPlayer",this).call(this)}},{key:"setPlayerListeners",value:function(){var e=this;this.player.on("end",function(){e._autoMoveToNext()}),this.player.on("start",function(){e.mobilePlayedOnce=!0,e.sleepModeWatcher()}),_get(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"setPlayerListeners",this).call(this)}},{key:"playNext",value:function(e){this._autoMoveToNext(),"function"==typeof e&&e()}},{key:"_autoMoveToNext",value:function(e){var r=this;clearTimeout(this.playNextTimeout),this.playNextTimeout=setTimeout(function(){r.currentIndex+1<r.recommendationPlaylist.length&&i.track("Auto Clicked Tag",n.generateRecommendationTrackingData(r.player,r.slot,r.widget,r.recommendationPlaylist[r.currentIndex+1]));var e=window.document.body.getBoundingClientRect();if(!(r.slideManager.playlistElements.length<=r.currentIndex+1)){var a=r.slideManager.playlistElements[r.currentIndex+1].$el.querySelector(".playlist-element-thumbnail"),o=a.getBoundingClientRect(),s=o.top-e.top,l=Math.floor(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop),d=window.orientation||t.objPath(window,["screen","orientation","angle"]);90!==Math.abs(d)&&(s-=(window.innerHeight-o.height)/2),t.animate(l,s,500,function(e){document.documentElement.scrollTop=document.body.scrollTop=e})}},200)}},{key:"sleepModeWatcher",value:function(){_get(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"sleepModeWatcher",this).call(this,this.player.isPlaying())}},{key:"setListeners",value:function(){if(_get(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"setListeners",this).call(this),document.addEventListener("scroll",this.listeners.sleepModeWatcher),document.addEventListener("touch",this.listeners.sleepModeWatcher),this.listeners.onMobileScroll=l(this.onScroll.bind(this),25),window.addEventListener("scroll",this.listeners.onMobileScroll,!0),t.isAndroid()){var e=function(){return this.close(),document.removeEventListener("backbutton",e),!1}.bind(this);document.addEventListener("backbutton",e)}}},{key:"removeListeners",value:function(){window.removeEventListener("resize",this.listeners.onWindowResize),document.removeEventListener("click",this.listeners.sleepModeWatcher),document.removeEventListener("mousemove",this.listeners.sleepModeWatcher),document.removeEventListener("scroll",this.listeners.sleepModeWatcher),document.removeEventListener("touch",this.listeners.sleepModeWatcher),window.removeEventListener("scroll",this.listeners.onMobileScroll,!0)}},{key:"resizePlayer",value:function(e){var i=this;clearTimeout(this.resizePlayerTimeout),this.isResizing=!0,this.resizePlayerTimeout=setTimeout(function(){var n=window.orientation||t.objPath(window,["screen","orientation","angle"]),r=!1;n!==i.orientation&&(r=!0,t.addClass(i.$immersiveContainer,"px-transparent")),i.orientation=n;var a=window.document.body.getBoundingClientRect(),o=i.getPlayerBoundElement(),s=o.getBoundingClientRect(),l=s.top-a.top;90!==Math.abs(n)&&(l-=(window.innerHeight-i.$mainPlayerContainer.offsetHeight)/2),window.scrollTo(0,l);var d=i.getPlayerBoundElement().offsetTop+i.getPlayerBoundElement().parentNode.offsetTop+f;i.movePlayer(d,r),i.isResizing=!1,r&&setTimeout(function(){t.removeClass(i.$immersiveContainer,"px-transparent")},250),"function"==typeof e&&e()},p)}},{key:"movePlayer",value:function(e,i){var n=this;this.isClosing||(t.removeClass(this.getPlayerBoundElement(),"playlist-element-thumbnail-hide"),t.addClass(window.document.body,"player-start-moving"),window.clearTimeout(this.movePlayerTimeout),this.movePlayerTimeout=window.setTimeout(function(){var r={top:e+"px","z-index":(n.immersiveZindex+1).toString(),display:"none"};i&&n.player.videoInfo.aspect_ratio&&n.aspectRatioSizingEnabled&&(r["padding-top"]=90===Math.abs(n.orientation)?"0px":100/n.player.videoInfo.aspect_ratio+"%",n.slideManager.orientationChanged(n.orientation)),t.setStyleImportant(n.$mainPlayerContainer,r),window.setTimeout(function(){t.setStyleImportant(n.$mainPlayerContainer,{display:"block"})}),t.removeClass(window.document.body,"player-start-moving"),t.removeClass(n.getPlayerBoundElement(),"playlist-element-thumbnail-hide"),n.$initialPlayerContainer&&n.$fader&&t.setStyleImportant(n.$fader,{top:e+"px"})},u))}},{key:"onScroll",value:function(){function e(){for(var e=this.slideManager.playlistElements,t=0;t<e.length;t++){if(s>this.lastYOffset&&i(e[t].$el)&&(t===e.length-1||!i(e[t+1].$el))&&t!==this.currentIndex)return t;if(s<this.lastYOffset&&n(e[t].$el)&&(0===t||!n(e[t-1].$el))&&t!==this.currentIndex)return t}}function i(e){return s+window.innerHeight>e.offsetTop+e.clientHeight+r().bottom}function n(e){return s<e.offsetTop+r().top}function r(){return m[90===Math.abs(l)?"landscape":"portrait"]}function a(e){return e.getElementsByClassName("px-click-to-immersive-player")[0]||e.getElementsByClassName("player-immersive")[0]||this.player.$el}function o(e){var i=this,n=this.$mainPlayerContainer.parentNode;this.playElementAtIndex(this.currentIndex,function(){var e=t.style.deserialize(i.$mainPlayerContainer.getAttribute("style")),r=i.recommendation.video_info;if(i.$mainPlayerContainer.parentNode||(i.$mainPlayerContainer=a.bind(i)(n)),r.pulpix_src&&r.aspect_ratio&&90!==Math.abs(i.orientation)&&i.aspectRatioSizingEnabled){var o=r.aspect_ratio<1?1:r.aspect_ratio;e=Object.assign(e,{"padding-top":100/o+"% !important",height:"0px !important",width:"100% !important"})}else e=Object.assign(e,{"padding-top":"0px !important",height:"200px !important",width:"100% !important"});t.setStyle(i.$mainPlayerContainer,e);var s=i.getPlayerBoundElement().offsetTop+i.getPlayerBoundElement().parentNode.offsetTop+f;i.movePlayer(s)}),this.currentIndex===this.slideManager.playlistElements.length-1&&this.loadMoreData()}var s=Math.abs(this.$playlist.getBoundingClientRect().top),l=window.orientation||t.objPath(window,["screen","orientation","angle"]),d=e.bind(this)();void 0===d||this.isResizing||(this.currentIndex=d,this.scrollTimeout=setTimeout(o.bind(this),75),this.lastYOffset=s)}},{key:"playElementAtIndex",value:function(e,t){for(var i=this,n=0;n<this.slideManager.playlistElements.length;n++)this.slideManager.playlistElements[n].removeIsPlaying();this.slideManager.playlistElements[e].setIsPlaying(),this.currentIndex=e,this.recommendation=this.recommendationPlaylist[e],this.player.setPoster&&this.player.setPoster(this.recommendation.video_info.thumbnail_url),a.call(this.recommendation,this.player,{widget:this.widget,slot:this.slot}).then(function(e){i.player=e,"function"==typeof t&&t()})["catch"](function(e){o.log(e)})}},{key:"getPlayerBoundElement",value:function(){var e=this.slideManager.playlistElements[this.currentIndex];return e?e.$el.querySelector(".playlist-element-thumbnail"):document.getElementsByClassName("px-immersive-player-container")[0]||this.player.$el.parentNode}},{key:"close",value:function(){var e=this;this.isClosing=!0;try{this.playerSensor.detach()}catch(i){void 0}if(t.addClass(this.$el,"hide-in-mobile"),this.removeListeners(),this._displayHiddenElements(),t.removeClass(window.document.body,"px-in-immersive-mobile"),"stickybar"===this.slot){var n=document.getElementsByClassName("px-sticky-widget-player")[0];n.parentNode.removeChild(n),this.player.dispose(!0)}else this.player.videoInfo.provider_specific_params.is_ad&&this.playNext(),this.$firstParent&&t.removeStyle(this.$firstParent,"min-height"),setTimeout(function(){t.removeStyle(e.$mainPlayerContainer,"top")},10),this.resetInitialPlayer(),this._scrollToInitialPlayerPosition();"instream"===this.slot&&this.removePlayerListeners(),window.clearTimeout(this.movePlayerTimeout),_get(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"close",this).call(this)}},{key:"_displayHiddenElements",value:function(){var e=this;setTimeout(function(){e.$el.parentNode.removeChild(e.$el),e.hiddenElements.forEach(function(e){e.display?t.setStyleImportant(e.element,{display:e.display}):e.clean?t.removeClass(e.element,"px-clean-parent"):t.removeStyle(e.element,"display")}),window.scrollTo(0,0)},200)}},{key:"_scrollToInitialPlayerPosition",value:function(){var e=this;setTimeout(function(){window.scrollTo(0,e.initialPlayerTopPosition-(window.innerHeight-e.player.$el.offsetHeight)/2)},200)}}],[{key:"setStyleForOrientation",value:function(e){var t=90===Math.abs(e)?window.innerHeight:window.innerWidth,i="@media (orientation: landscape) {#pulpix.px-immersive-view-wrapper-mobile .px-player-icon {top: "+(t/2-50)+"px!important;}#pulpix.px-immersive-view-wrapper-mobile .player-immersive, #pulpix .px-sticky-widget-player, .px-click-to-immersive-player{height :"+t+"px!important; max-height:"+t+"px!important; min-height:"+t+"px!important;} #pulpix.px-immersive-view-wrapper-mobile .playlist-element-thumbnail {height :"+t+"px!important; min-height:"+t+"px!important;} #pulpix.px-immersive-view-wrapper-mobile .playlist-element { height:"+(t+d)+"px!important;min-height:"+(t+d)+"px!important;max-height:"+(t+d)+"px!important;}}",n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");
r.type="text/css",r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),n.appendChild(r)}},{key:"addBlackBackground",value:function(){var e=this;t.addClass(this.$blackBackground,"px-black-background-show"),window.setTimeout(function(){t.addClass(e.$blackBackground,"px-fadeOut")},500),window.setTimeout(function(){t.removeClass(e.$blackBackground,"px-fadeOut"),t.removeClass(e.$blackBackground,"px-black-background-show")},700)}},{key:"getTimeBeforeSleeping",value:function(){return h}}]),y}(e);return y}),pxRequire.define("px-immersive-view-button",["px-utils","error-logger"],function(e,t){function i(t,i,n){var r=this;this.container=t,this.player=i,this.onclick=n;var a=function(){r.render(),r.player.off("video_start"),r.player.off("video_timeupdate")};this.player.one("video_start",a),this.player.one("video_timeupdate",a),this.userLanguage=e.findLanguage(),this.clickCount=0}return i.prototype.update=function(e,t){this.player=e,this.onclick=t,this.$el||this.render(),this.setListeners()},i.prototype.render=function(){var t=this,i={en:"Click for more",fr:"Plus de vidéos",es:"Haz clic para ver más"},n=document.createElement("div");return n.className="px-immersive-view-button px-immersive-view-button-sleep",n.innerHTML='<span class="px-immersive-view-button-label">'+i[this.userLanguage]+"</span>",n.addEventListener("click",function(){t.player.isPlaying()||e.isMobile()?(t.onclick(t.clickCount),t.clickCount+=1):e.removeClass(n,"px-immersive-view-button-sleep"),t.player.play()}),this.container.setAttribute("provider",this.player.playerName),this.container.appendChild(n),this.$el=n,this.setListeners(),n},i.prototype.setListeners=function(){var i=this;this.player.readyPromise.then(function(t){e.isMobile&&e.addClass(i.$el,"px-immersive-view-button-display"),t.on("video_pause",function(){e.isMobile()?(clearTimeout(i.sleepTimeout),e.removeClass(i.$el,"px-immersive-view-button-sleep")):e.addClass(i.$el,"px-immersive-view-button-sleep")}),t.on("video_play",function(){e.removeClass(i.$el,"px-immersive-view-button-sleep"),e.isMobile()&&(clearTimeout(i.sleepTimeout),i.sleepTimeout=setTimeout(function(){i.player.isPlaying()&&e.addClass(i.$el,"px-immersive-view-button-sleep")},3e3))}),t.one("video_timeupdate",function(){e.addClass(i.$el,"px-immersive-view-button-display"),i.$el.onmouseenter=function(e){i.player.$el.onmouseenter&&i.player.$el.onmouseenter(e.type)},i.$el.onmousemove=function(){clearTimeout(i.sleepTimeout),i.player.isPlaying()&&(e.removeClass(i.$el,"px-immersive-view-button-sleep"),i.sleepTimeout=setTimeout(function(){i.player.isPlaying()&&e.addClass(i.$el,"px-immersive-view-button-sleep")},3e3))},i.$el.onmousemove()}),t.on("video_end",function(){e.removeClass(i.$el,"px-immersive-view-button-display")})})["catch"](function(e){t.log(e)})},i});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("px-outstream-slot",["api","analytics-utils","px-utils","ab-test","user-preferences","recommendation-caller","globals","error-logger"],function(e,t,i,n,r,a,o,s){var l=function(){function n(e,t,a){var o=this;_classCallCheck(this,n);var l={stickybar:"sticky-widget",outstream_player:"outstream",link:"link"};this.recommendation=e,this.settings=t,this.triggerImmersive=a,this.video=e.video_info,this.widget="outstream_player",this.slot=this.getSlotName(),this.className=l[this.slot],this.userLanguage=i.findLanguage(),this.isMobile=i.isMobile(),r.init().then(function(e){o.userPreferences=e,o.init()})["catch"](function(e){s.log(e)})}return _createClass(n,[{key:"init",value:function(){throw new Error("Not Implemented")}},{key:"getSlotName",value:function(){throw new Error("Not Implemented")}},{key:"getTrackingEvent",value:function(e){throw new Error("Not Implemented")}},{key:"createVideoPlayer",value:function(){throw new Error("Not Implemented")}},{key:"startImmersiveView",value:function(){e.track(this.getTrackingEvent("click"),t.generateRecommendationTrackingData(this.player,this.slot,this.widget,this.recommendation));var n={};if(this.player){var r=document.getElementById("px-"+this.className+"-player");i.isMobile()&&i.addClass(r,"px-immersive-player-container"),n={player:this.player,recommendation:this.recommendation}}else n={recommendation:this.recommendation};this.immersiveView=this.triggerImmersive(n),this.onStartImmersiveView()}},{key:"onStartImmersiveView",value:function(){}},{key:"setListeners",value:function(){throw new Error("Not Implemented")}},{key:"create",value:function(){throw new Error("Not Implemented")}},{key:"render",value:function(){this.wasRendered||(this.wasRendered=!0,this._render())}},{key:"_render",value:function(){throw new Error("Not Implemented")}},{key:"show",value:function(){i.removeClass(this.$container,"hide")}},{key:"hide",value:function(){i.addClass(this.$container,"hide")}},{key:"existVideoInFlipview",value:function(){var e=document.getElementsByClassName("px-flip-player");return e.length}}]),n}();return l});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("sticky-element-finder",["xhr","globals","px-utils","user-preferences","model","error-logger"],function(e,t,i,n,r,a){function o(e){return["right","left"].includes(e)}function s(e,t){var i=e.getPropertyValue(t).split("px")[0];return"auto"===i?0:parseInt(i,10)}function l(e){if(e!==document.body&&e){var t=window.getComputedStyle(e,null);return"fixed"===t.position?e:l(e.parentNode)}}function d(e,t){var i=new MutationObserver(function(e){t()});return i.observe(e,{attributes:!0}),i.observe(e.parentNode,{childList:!0}),i}function c(e,t){var i=window.getComputedStyle(e,null),n=e.offsetHeight,r=window.innerHeight-e.getBoundingClientRect().bottom,a=i.getPropertyValue("opacity"),o=i.getPropertyValue("display");if("fixed"!==i.position){var d=l(e);if(!d)return}return r<=t.max_offset_bottom&&n>=t.min_height&&n<=t.max_height&&n+r<=t.max_offset_top&&"0"!==a&&"none"!==o&&s(i,t.position)<t.max_offset_side}var u=[".webradiosHeadband-display",".webradiosHeadband-container",".GoogleActiveViewClass",".ad6foo-application",".wbtz-static-embed",".wbtz-embed-main-sticky",".CookieNotification","#mb_video_syncad","#at-expanding-share-button","#subscribebox",".ak-container",".article-social-share",".sumome-share-client-wrapper.sumome-share-client-wrapper-desktop-bottom-bar","#asq_footer_main_div","#cookie-notice","gallery__bottom",'[title="Advertisement"]',".article-social-share",".share-links.share-links--square",".sharebar",".advanced_floating_content",".mobile-bottom-sticky-ad","#mobile_sticky_bottom","#af-scrollspy",".g1-sharebar-on",".ak-container",".ak-content",".article-social-share-social","#lig_rtl_mob_smartbox_slideup",".asq_footer_main_div",".news-alert"],p=null,h={position:{type:"string",required:!0,validator:o,"default":"right"},min_height:{type:"number",required:!0,"default":10},max_height:{type:"number",required:!0,"default":200},max_offset_top:{type:"number",required:!0,"default":300},max_offset_bottom:{type:"number",required:!0,"default":50},max_offset_side:{type:"number",required:!0,"default":280}},f=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,h))}return _inherits(t,e),t}(r),m=function(){function e(){return _classCallCheck(this,e),p?p:(this._init(),this)}return _createClass(e,[{key:"_init",value:function(){this.watchers=[],this.stickyElements=[],this.mutationObservers=[]}},{key:"watch",value:function(e,t){var r=this;n.init().then(function(n){r.userPreferences=n,r.watchers.length||i.setFibonacciInterval(r._checkIfNewStickyElements.bind(r),[0,2e3]),r.watchers.push({config:new f(e),callback:t}),r._checkIfNewStickyElements(),r._computeMaxBottomOffset()})["catch"](function(e){a.log(e)})}},{key:"_computeMaxBottomOffset",value:function(){var e=this,t=void 0;this.watchers.forEach(function(i){setTimeout(function(){e.stickyElements.forEach(function(e){if(c(e,i.config)){var n=e.offsetHeight,r=window.innerHeight-e.getBoundingClientRect().bottom;t=Math.max(t?t:0,r+n)}}),i.maxBottomOffset!==t&&(i.callback(t),i.maxBottomOffset=t)},200)})}},{key:"_checkIfNewStickyElements",value:function(){var e=this,t=document.querySelectorAll(this.userPreferences.slots.stickybar.sticky_element_selectors||u.join(",")),i=Array.prototype.filter.call(t,function(t){return!e.stickyElements.includes(t)});i.length&&(i.forEach(function(t){var i=d(t,function(){t.parentNode||e.stickyElements.splice(e.stickyElements.indexOf(t),1),window.clearTimeout(e.isHandlingStickyElement),e.isHandlingStickyElement=setTimeout(function(){e._computeMaxBottomOffset()},400)});e.mutationObservers.push(i)}),this.stickyElements=this.stickyElements.concat(i),this._computeMaxBottomOffset())}}]),e}();return new m});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("px-stickybar",["px-outstream-slot","api","analytics-utils","px-utils","ab-test","recommendation-caller","local-storage","globals","sticky-element-finder","error-logger","ad-tag-preloader"],function(e,t,i,n,r,a,o,s,l,d,c){function u(){var e=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),t=e-window.innerHeight;return Math.max(Math.min(t,m),y)}function p(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function h(){var e=n.findHighestZIndex("*"),t=2147483647,i=Math.min(Math.max(e+1,99999),t-2),r=document.getElementsByClassName("px-immersive-view-container");if(r&&r.length>0){var a=window.getComputedStyle(r[0]).zIndex;i=Math.min(i,a-1)}return i}function f(e,t){var i={};i.sX=0,i.sY=0,i.eX=0,i.eY=0;var n,r=20,a=20,o=100;e.addEventListener("touchstart",function(e){var t=e.touches[0];i.sX=t.screenX,i.sY=t.screenY},!1),e.addEventListener("touchmove",function(e){e.preventDefault();var t=e.touches[0];i.eX=t.screenX,i.eY=t.screenY},!1),e.addEventListener("touchend",function(e){(i.eY-a>i.sY||i.eY+a<i.sY)&&i.eY>0?n=i.eY>i.sY?"down":"up":(i.eX-r>i.sX||i.eX+r<i.sX)&&i.eY<i.sY+o&&i.sY>i.eY-o&&i.eX>0&&(n=i.eX>i.sX?"right":"left"),n&&"function"==typeof t&&t(n),n=void 0,i.sX=0,i.sY=0,i.eX=0,i.eY=0},!1)}var m=1e3,y=400,v=u(),g=10,_={mobile:{MIN_HEIGHT:10,MAX_HEIGHT:200,MAX_OFFSET_TOP:300,MAX_OFFSET_BOTTOM:50,MAX_OFFSET_SIDE:280},desktop:{MIN_HEIGHT:10,MAX_HEIGHT:400,MAX_OFFSET_TOP:672,MAX_OFFSET_BOTTOM:114,MAX_OFFSET_SIDE:370}},b=function(e){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return _inherits(r,e),_createClass(r,[{key:"init",value:function(){var e=this;this.position=this.userPreferences.getStickybarPosition(),this.slot="stickybar",this.widget=this.isMobile&&this.userPreferences.widgets.mfeed?"mfeed":"immersive",this.mutationObservers=[];var t=this.userPreferences.slots.stickybar.theme;if(this.widgetVariation=window.widgetVariation?window.widgetVariation:t,n.isMobile()){this.$el=this.create(),this.setListeners(),this.createVideoContainer(),this.createVideoPlayer();var i=document.querySelector("meta[name=viewport]");i.content.match("minimal-ui")||(i.content+=", minimal-ui")}else this.userPreferences.isAdRequired(this.slot)?this.preloadAd().then(function(){e.$el=e.create(),e.setListeners()}):(this.$el=this.create(),this.setListeners())}},{key:"getSlotName",value:function(){return"stickybar"}},{key:"getTrackingEvent",value:function(e){return{display:"Displayed Sticky Bar",click:"Clicked on Sticky Bar"}[e]}},{key:"createVideoContainer",value:function(){var e=document.createElement("div");return e.id="pulpix",e.innerHTML='<div id="px-'+this.className+'-player" class="px-'+this.className+'-player px-hide"><div class="player-transition-fader player-transition-fader-stickybar"></div></div><div class="px-black-background px-black-background-stickybar"></div>',window.document.body.appendChild(e),this.containerId="px-"+this.className+"-player","px-"+this.className+"-player"}},{key:"createVideoPlayer",value:function(){var e=this;this._createPlayerPromise=a.createPlayer(this.recommendation,this.containerId,{widget:this.widget,slot:this.slot},{autoplay:!1,preload:!0}),this._createPlayerPromise.then(function(t){return e.player=t,t.readyPromise}).then(function(){i.initTrackingOnPlayer(e.player,{slot:e.slot})})["catch"](function(e){d.log(e)})}},{key:"setListeners",value:function(){var e=this,t=function i(t){var n=p();t.target!==document&&(n=t.target.scrollTop),!e.wasRendered&&n>100&&!e.existVideoInFlipview()&&(e.maxScrollTopValue&&n<e.maxScrollTopValue||n>v)&&(window.removeEventListener("scroll",i,!0),e._createPlayerPromise?e._createPlayerPromise.then(function(e){return e.readyPromise}).then(function(){e.render()})["catch"](function(e){d.log(e)}):e.render())};window.addEventListener("scroll",t,!0)}},{key:"_render",value:function(){var e=this;this.existVideoInFlipview()||this.show();var r=n.isMobile()?"mobile":"desktop";if(l.watch({position:this.position,min_height:_[r].MIN_HEIGHT,max_height:_[r].MAX_HEIGHT,max_offset_top:_[r].MAX_OFFSET_TOP,max_offset_bottom:_[r].MAX_OFFSET_BOTTOM,max_offset_side:_[r].MAX_OFFSET_SIDE},function(t){t?n.setStyleImportant(e.$container,{bottom:t+g+"px"}):n.removeStyle(e.$container,"bottom")}),this.isMobile){var a=this.$el.getElementsByClassName("px-sticky-widget-title")[0];this.titleHideTimeout=setTimeout(function(){n.addClass(a,"px-sticky-widget-title-minimizing minimize-"+e.position),setTimeout(function(){n.addClass(e.$el,"px-sticky-widget-wrapper-hide-title")},200)},5e3),f(this.$el,function(t){if("up"!==t){var i={down:"px-fadeOutDown",right:"px-fadeOutRight",left:"px-fadeOutLeft"}[t];n.addClass(e.$container,i),n.removeClass(e.$container,"px-fadeInUp"),setTimeout(function(){e.close()},500)}})}t.track(this.getTrackingEvent("display"),i.generateRecommendationTrackingData(this.player,this.slot,void 0,this.recommendation))}},{key:"close",value:function(e){e&&e.stopPropagation(),this.mutationObservers.forEach(function(e){e.disconnect()}),window.clearTimeout(this.titleHideTimeout),window.document.body.removeChild(this.$el),t.track("Closed Sticky Bar",i.generateRecommendationTrackingData(this.player,this.slot,void 0,this.recommendation));var n=o.get("stickybarClose")||{};if(n.expiresAt&&n.expiresAt<Date.now()&&(n.expiresAt=void 0,n.count=0),n.count=(n.count||0)+1,n.count>=3){var r=3,a=864e5;n.expiresAt=Date.now()+r*a}o.set("stickybarClose",n)}},{key:"create",value:function(){var e=this,t=document.createElement("div"),i="px-sticky-widget-"+this.position;t.id="pulpix",-1===["dark","light"].indexOf(this.widgetVariation)&&(this.widgetVariation="dark");var r=void 0;r=this.video.duration&&-1!==this.video.duration?'<div class="px-sticky-widget-duration">\n                    '+n.time.timeToReadableFormat(this.video.duration,"millisecond")+"</div>":"";var a={dark:'<div class="px-sticky-widget px-fadeInUp hide '+i+'"><div class="px-sticky-widget-container"><div class="px-sticky-widget-content px-sticky-widget-content-left"><div class="px-sticky-widget-thumbnail" style="background-image:url('+this.video.thumbnail_url+')!important;"></div>'+r+'<div class="px-sticky-widget-player-icon"><div class="px-icon-play"></div></div></div><div class="px-sticky-widget-content px-sticky-widget-content-right"><div class="px-sticky-widget-title" '+("style="+this._getFontFamily("h3, h2, h1")+">"+this.video.title+"</div>")+'<div class="px-sticky-widget-promotion" '+("style="+this._getFontFamily("p")+">")+this._getPromotionContent()+'</div></div></div><div class="px-sticky-widget-close"><span class="icon px-icon-cross2"></span></div></div>',light:'<div class="px-sticky-widget px-sticky-widget-white px-fadeInUp hide '+i+'"><div class="px-sticky-widget-container"><div class="px-sticky-widget-content px-sticky-widget-content-left"><div class="px-sticky-widget-thumbnail" style="background-image:url('+this.video.thumbnail_url+')!important;"></div>'+r+'<div class="px-sticky-widget-player-icon"><div class="px-icon-play"></div></div></div><div class="px-sticky-widget-content px-sticky-widget-content-right"><div class="px-sticky-widget-title" '+("style="+this._getFontFamily("h3, h2, h1")+">"+this.video.title+"</div>")+'<div class="px-sticky-widget-promotion" '+("style="+this._getFontFamily("p")+">")+this._getPromotionContent()+'</div></div></div><div class="px-sticky-widget-close"><span class="icon px-icon-cross2"></span></div></div>',mobile:'<div\n                        class="px-sticky-widget px-sticky-widget-mobile\n                        px-fadeInUp hide '+i+'">\n                        <div class="px-sticky-widget-container">\n                            <div class="px-sticky-widget-player-icon" style="background-image: url(\n                            '+this.video.thumbnail_url+')!important;" ontouchstart="">\'\n                                <div class="px-icon-play"></div>\n                            </div>\n                            <div class="px-sticky-widget-title" ontouchstart="">\n                                <span> '+this.video.title+" </span>\n                            </div>\n                        </div>\n                    </div>",lequipe:function(){var t=e.video.title,a=void 0,o=void 0;if("dailymotion"===e.video.provider&&e.video.title.includes(":")){var s=e.video.title.split(":");t=s[1];var l=s[0].split("-");if(a=l[0],l.length>1){o=l[1];var d=a.length+o.length;d>18&&(o=o.substring(0,o.length-(d-18))+"...")}}return e.video.duration&&-1!==e.video.duration&&(r='<div class="px-sticky-widget-promotion">\n                                '+n.time.timeToReadableFormat(e.video.duration,"millisecond")+"</div>"),'<div class="px-sticky-widget px-fadeInUp hide '+i+' px-sticky-widget-lequipe"><div class="px-sticky-widget-container"><div class="px-sticky-widget-content px-sticky-widget-content-left"><div class="px-sticky-widget-thumbnail" style="background-image:url('+e.video.thumbnail_url+')!important;"></div><div class="px-sticky-widget-player-icon"><div class="px-icon-play"></div></div></div><div class="px-sticky-widget-content px-sticky-widget-content-right"><div class="px-sticky-widget-categories">'+(a?'<div class="px-sticky-widget-category px-sticky-widget-category-skew">'+a+"</div>":"")+(o?'<div class="px-sticky-widget-category">'+o+"</div>":"")+'</div><div class="px-sticky-widget-title">'+t+"</div>"+r+'</div></div><div class="px-sticky-widget-close"><span class="icon px-icon-cross"></span></div></div>'}()};if(this.widgetVariation=this.isMobile?"mobile":this.widgetVariation,715!==s.websiteId||this.isMobile||(this.widgetVariation="lequipe"),t.className="px-cleanslate px-sticky-widget-wrapper px-sticky-widget-wrapper-"+this.widgetVariation,t.innerHTML=a[this.widgetVariation],this.$container=t.getElementsByClassName("px-sticky-widget")[0],this.$containerContainer=t.getElementsByClassName("px-sticky-widget-container")[0],this.$containerContainer.addEventListener("click",function(){if(e.startImmersiveView(),e.player){e.player.play();var t=document.getElementById("px-sticky-widget-player");n.removeClass(t,"px-hide")}}),!this.isMobile){var o=this.close.bind(this);t.getElementsByClassName("px-sticky-widget-close")[0].onclick=o}return n.setStyleImportant(t,{"z-index":this.userPreferences.getStickybarZindex()||h().toString()}),window.document.body.appendChild(t),t}},{key:"_getFontFamily",value:function(e){return this.userPreferences.globals.css_override?"":"font-family:"+n.getStyleForElementProperty(e,"fontFamily")+"!important"}},{key:"onStartImmersiveView",value:function(){var e=this;setTimeout(function(){window.document.body.removeChild(e.$el)},500)}},{key:"_getPromotionContent",value:function(){var e={dark:{en:"Video recommended",fr:"Vidéo recommandée",es:"Vídeo recomendado"},light:{en:"Video recommended",fr:"Vidéo recommandée",es:"Vídeo recomendado"}},t={en:"by",fr:"par",es:"por"},i=""+e[this.widgetVariation][this.userLanguage];return this.video.logo_icon_url&&(i+=" "+t[this.userLanguage],i+='<img class="px-sticky-widget-icon" src="'+this.video.logo_icon_url+'"></img>'),i}},{key:"preloadAd",value:function(){return a._shouldInjectPrerollAd(this.recommendation,this.slot,this.widget)?a._buildPrerollAdConfig(this.recommendation,this.slot,this.widget,void 0,!0).then(function(e){return e.preloadedAdsResponse}):void 0}}]),r}(e);return b}),pxRequire.define("flipper",["globals","scroll-blocker","sticky-element-finder","px-utils","error-logger"],function(e,t,i,n,r){function a(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"bottom-right";void 0,this.updatePlayer(e),this.tag=void 0,this.position=n,this.thumbnail=i,this.ANIMATION_DURATION=500,this.RETURN_ANIMATION_DURATION=200,this.hiddenObjects=[],this.returnCallback=void 0,this.closeCallback=void 0,this.rootElement=t,this._active=!1,this._transitioning=!1,this.pxUtils=window.pxUtils,this.pxRequire=window.pxRequire,this._manualReturn=!1,this.enableTransitions=!1,this.storeInitialPositioning(),this.toggleAutoFlipListeners(!0);return["bottom-left","bottom-right"].includes(this.position)&&this._setStickyElementWatcher(),this.setupListeners(),this}function o(e,t){var i=void 0;return function(){var n=this,r=arguments;clearTimeout(i),i=setTimeout(function(){e.apply(n,r)},t||250)}}var s=10,l=20,d={mobile:{MIN_HEIGHT:10,MAX_HEIGHT:200,MAX_OFFSET_TOP:300,MAX_OFFSET_BOTTOM:160,MAX_OFFSET_SIDE:280},desktop:{MIN_HEIGHT:10,MAX_HEIGHT:400,MAX_OFFSET_TOP:672,MAX_OFFSET_BOTTOM:114,MAX_OFFSET_SIDE:370}};return a.prototype.updatePlayer=function(e){window.px.activeFlip&&this.playerId===window.px.activeFlip&&(window.px.activeFlip=e.$el.id),this.player=e,this.playerEl=e.$el,this.playerId=e.$el.id},a.prototype.setupListeners=function(){var e=this;this.player.on("src_changed",function(t){e.updatePlayer(t.player)}),this.player.on("fullscreen",function(t){t.detail.fullscreen?e.toggleAutoFlipListeners(!1):e.toggleAutoFlipListeners(!0)})},a.prototype.enable=function(e,t,i){var n=this;this.storeInitialPositioning();var r=300;this.HEIGHT=void 0,this.MARGINX=10,this.MARGINY=10,this.showThumbnail=!1,n._active=!0,n._transitioning=!0,n.returnCallback=i,n.tag=e,window.px.activeFlip||(window.px.activeFlip=this.playerId),n.tag&&"video"===n.tag.type&&(n.showThumbnail=!0),n.hiddenObjects=[];var a=n.pxUtils.isMobile()?2:1;n.INITIAL_SCROLL=window.pageYOffset,n.WIDTH=r/a,n.HEIGHT=n.WIDTH*n.original.height/n.original.width,n.HEIGHT=n.pxUtils.isMobile()?200/a:n.HEIGHT,n.tag&&n.createFrameContainer(),n.placeHolder=document.createElement("div"),n.pxUtils.setStyleImportant(n.placeHolder,{height:n.original.height+"px",width:n.original.width+"px",position:n.original.position,display:"inline"===n.original.display?"inline-block":n.original.display,"background-color":"black",top:n.original.offsetTop+"px",left:n.original.offsetRight+"px"}),n.placeHolder.id="px-placeholder",n.playerEl.parentNode.insertBefore(n.placeHolder,n.playerEl),n.rootElement&&n.pxUtils.addClass(n.rootElement,"px-hide"),n.pxUtils.addClass(document.body,"px-flip"),n.pxUtils.isMobile()&&n.pxUtils.removeMobileStyle(n.playerEl),n.emit("enable"),n.applyTransition(function(){n.applyFinalStyle(),n.player.onResize(),setTimeout(function(){n._transitioning=!1,n.createButtons(),t&&t()})})},a.prototype.enableVideo=function(e,t,i){var r=this;this.storeInitialPositioning(),this.WIDTH=100,this.HEIGHT=void 0,this.MARGINX=13,this.MARGINY=43,this.showThumbnail=!1,r._active=!0,r._transitioning=!0,r.returnCallback=i,r.tag=e,window.px.activeFlip||(window.px.activeFlip=this.playerId),r.showThumbnail=!0,r.hiddenObjects=[],r.INITIAL_SCROLL=window.pageYOffset,r.createFrameContainer(t),"OBJECT"===this.playerEl.tagName&&"bightcove"!==r.tag.video_info.provider||n.hasClass(this.playerEl,"jwplayer")?n.addClass(r.playerEl,"px-hide-alternate"):n.addClass(r.playerEl,"px-hide"),r.pxUtils.isMobile()&&r.pxUtils.removeMobileStyle(r.playerEl)},a.prototype.applyTransition=function(e){var t=this;t.enableTransitions?(t.pxUtils.setStyleImportant(t.playerEl,{top:t.fixedPosition.top+"px",left:t.fixedPosition.left+"px",width:t.original.width+"px",height:t.original.height+"px"}),setTimeout(function(){var i=t.calculateTransform();t.pxUtils.addClass(t.playerEl,"px-transition"),t.pxUtils.addClass(t.playerEl,"px-transition-in"),t.pxUtils.setStyleImportant(t.playerEl,{transform:i,"-ms-transform":i,"-webkit-transform":i}),setTimeout(function(){e()},t.ANIMATION_DURATION)},5)):e()},a.prototype.calculateTransform=function(){var e,t,i=this;e=window.innerWidth-i.WIDTH-i.fixedPosition.left-i.MARGINX,t=window.innerHeight-i.HEIGHT-i.fixedPosition.top-i.MARGINY;var n=i.WIDTH/i.original.width,r=i.HEIGHT/i.original.height,a="translate("+e+"px,"+t+"px) scaleX("+n+") scaleY("+r+")";return a},a.prototype.applyFinalStyle=function(){var e=this;e.pxUtils.removeClass(e.playerEl,"px-transition"),e.pxUtils.removeClass(e.playerEl,"px-transition-in"),e.pxUtils.addClass(e.playerEl,"px-flip-player");var t={"top-left":"px-flip-player-top-left","top-right":"px-flip-player-top-right","bottom-left":"px-flip-player-bottom-left","bottom-right":"px-flip-player-bottom-right"};e.flipperPositionClass=t[e.position],e.pxUtils.addClass(e.playerEl,e.flipperPositionClass),e.playerEl.setAttribute("style",e.original.style);var i={width:e.WIDTH+"px","min-width":e.WIDTH+"px","max-width":e.WIDTH+"px",height:e.HEIGHT+"px","min-height":e.HEIGHT+"px","max-height":e.HEIGHT+"px",top:void 0,right:void 0,left:void 0,bottom:void 0,margin:"0",padding:"0",position:"fixed"};Object.assign(i,{bottom:this.bottomPosition+s+"px"}),e.pxUtils.setStyleImportant(e.playerEl,i)},a.prototype.createButtons=function(){var e=this,t=this,i={_top:60,calculateStyle:function(){var n;n={position:"fixed",background:"",width:t.WIDTH+"px"};var r={"top-left":{left:t.playerEl.getBoundingClientRect().left+"px",bottom:"auto",top:i._top+"px",right:"auto"},"top-right":{left:"auto",bottom:"auto",top:i._top+"px",right:window.innerWidth-t.playerEl.getBoundingClientRect().right+"px"},"bottom-left":{left:t.playerEl.getBoundingClientRect().left+"px",bottom:window.innerHeight-t.playerEl.getBoundingClientRect().top-l+"px",top:"auto",right:"auto"},"bottom-right":{right:window.innerWidth-t.playerEl.getBoundingClientRect().right+"px",bottom:window.innerHeight-t.playerEl.getBoundingClientRect().top-l+"px",top:"auto",left:"auto"}};return Object.assign(n,r[e.position]),t.showThumbnail&&(n.height=t.HEIGHT+"px",t.thumbnail?n.background='url("'+t.thumbnail+'")':n["background-color"]="#ccc",n["background-size"]="cover",n.bottom=t.MARGINY+"px"),n}};t.flipButtons=document.createElement("div"),t.flipButtons.id="pulpix",t.flipButtons.setAttribute("class","flip-buttons animated fadeIn"),t.flipButtons.innerHTML='<span class="px-icon-cross2 pull-right"></span>',t.pxUtils.setStyleImportant(t.flipButtons,i.calculateStyle()),t.playerEl.parentNode.insertBefore(t.flipButtons,t.playerEl.nextSibling),t.closeButton=t.flipButtons.getElementsByClassName("px-icon-cross2")[0],t.closeButton.onclick=t.closeButton.ontouchstart=function(){return t.tag?void t.close():(t._manualReturn=!0,t.disable(),void t.player.mute(!0))}},a.prototype.disable=function(e){var t=this;t._active=!1,t._transitioning=!0,e&&(t.returnCallback=e);t.pxUtils.cumulativeOffset(t.playerEl);void 0,t.tag&&t.removeFrameContainer(),t.flipButtons&&t.flipButtons.parentNode.removeChild(t.flipButtons),t.playerEl.setAttribute("style",""),t.pxUtils.removeClass(t.playerEl,"px-flip-player"),t.pxUtils.removeClass(t.playerEl,t.flipperPositionClass),t.pxUtils.removeClass(document.body,"px-flip"),t.pxUtils.isMobile()&&t.pxUtils.setMobileStyle(t.playerEl);var i;t.tag&&(i=document.createElement("div"),t.pxUtils.setStyleImportant(i,{position:"fixed",top:"0",bottom:"0",left:"0",right:"0","z-index":1,"background-color":"white"}),t.pxUtils.addClass(i,"animated fadeOut"),t.playerEl.parentNode.insertBefore(i,t.playerEl)),t.tag&&Math.abs(window.pageYOffset-t.INITIAL_SCROLL_LEVEL)>100&&window.scrollTo(0,t.INITIAL_SCROLL_LEVEL),t.emit("disable"),t.applyReturnTransition(function(){t.playerEl.setAttribute("style",t.original.style),t.pxUtils.setStyleImportant(t.playerEl,{height:t.original.height+"px",width:t.original.width+"px"}),t.pxUtils.removeClass(t.playerEl,"px-transition"),t.pxUtils.removeClass(t.playerEl,"px-transition-out");var e=document.getElementById("px-placeholder");e&&e.parentNode.removeChild(e),t.player.onResize(),setTimeout(function(){t.rootElement&&t.pxUtils.removeClass(t.rootElement,"px-hide"),i&&i.parentNode.removeChild(i),t._transitioning=!1,t.returnCallback&&t.returnCallback()},350)})},a.prototype.disableVideo=function(e){var t=this;t._active=!1,t._transitioning=!0,e&&(t.returnCallback=e),void 0,t.tag&&(t.newPlayer.dispose(!0),t.removeFrameContainer()),n.hasClass(this.playerEl,"px-hide")?n.removeClass(t.playerEl,"px-hide"):n.removeClass(t.playerEl,"px-hide-alternate"),t.pxUtils.removeClass(t.playerEl,"px-flip-player"),t.pxUtils.addClass(document.body,"flipview"),t.pxUtils.isMobile()&&t.pxUtils.setMobileStyle(t.playerEl),t.returnCallback&&(t._transitioning=!1,t.returnCallback())},a.prototype.applyReturnTransition=function(e){var t=this;if(t.enableTransitions&&!n.hasClass(this.playerEl,"jwplayer")){t.pxUtils.addClass(t.playerEl,"px-transition"),t.pxUtils.addClass(t.playerEl,"px-transition-out"),t.pxUtils.setStyleImportant(t.playerEl,{height:t.original.height+"px",width:t.original.width+"px","z-index":2,opacity:"0"});var i,r;i=-(t.pxUtils.cumulativeOffset(t.playerEl).left-t.fixedPosition.left-(t.original.width-t.WIDTH)),r=-(t.pxUtils.cumulativeOffset(t.playerEl).top-t.fixedPosition.top-(t.original.height-t.HEIGHT));var a="translate("+i+"px,"+r+"px)";t.pxUtils.setStyleImportant(t.playerEl,{transform:a,"-ms-transform":a,"-webkit-transform":a}),setTimeout(function(){e()},t.RETURN_ANIMATION_DURATION)}else e()},a.prototype.close=function(e){var t=this;e&&(t.closeCallback=e),t.pxUtils.addClass(t.playerEl,"animated fadeOut"),t.pxUtils.addClass(t.flipButtons,"animated fadeOut"),setTimeout(function(){t.newPlayer&&t.newPlayer.dispose(!0),t.playerEl.parentNode.removeChild(t.playerEl),t.closeButton.parentNode.removeChild(t.closeButton),t.closeCallback&&t.closeCallback()},300)},a.prototype.getFixedPosition=function(e,t){var i=document.documentElement,n=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),r=(window.pageYOffset||i.scrollTop)-(i.clientTop||0);return{top:e-r,left:t-n}},a.prototype.createFrameContainer=function(i){var r=this;r.tag.video_info&&r.tag.video_info.provider&&r.tag.video_info.provider.match(/^ooyala|gqplayer|jwplayer|vidible|brightcove$/)?r.frameContainer=document.createElement("div"):r.video_info&&r.tag.video_info.provider&&r.tag.video_info.provider.match(/videojs/)?r.frameContainer=document.createElement("video"):r.frameContainer=document.createElement("iframe"),"page"===r.tag.type&&(r.frameContainer.src=r.tag.page_info.url),t.disableScroll(),r.frameContainer.setAttribute("style","position: fixed; height:100%; width: 100%; top:0;left:0; a:"+Math.max(n.findHighestZIndex("*")+1,99999).toString()+";background-color:white; display:block!important"),r.frameContainer.setAttribute("frameborder",0),r.frameContainer.id="px-frame";var a=["www.cosmicbooknews.com","allafrica.com","www.vanityfair.fr","www.gqmagazine.fr","www.vogue.fr","scallywagandvagabond.com"],o=r.pxUtils.getLocation(r.frameContainer.src).hostname;
r.frameContainer.setAttribute("pulpix",""),"video"===r.tag.type||507!==e.websiteId&&!r.pxUtils.inArray(o,a)||r.frameContainer.setAttribute("sandbox","allow-same-origin allow-scripts allow-popups allow-forms allow-pointer-lock"),setTimeout(function(){r.loadVideo(i),r.pxRequire.require(["jquery-private"],function(e){for(var t=e(r.frameContainer).parent().show(),i=t.add(t.parentsUntil("body")).siblings(),n=0;n<i.length;n++)e(i[n]).is(":visible")&&"object"!==e(i[n]).prop("tagName")&&(void 0,e(i[n]).hide(),r.hiddenObjects.push(e(i[n])))})},1),r.playerEl.parentNode.insertBefore(r.frameContainer,r.playerEl.nextSibling)},a.prototype.loadVideo=function(e){var t=this;if("video"===t.tag.type){var i="px-"+t.tag.video_info.provider;t.pxRequire.require([i],function(i){var n;n="jwplayer"!==t.tag.video_info.provider&&"brightcove"!==t.tag.video_info.provider?t.frameContainer.id:t.frameContainer.id;var a={videoInfo:t.tag.video_info,config:{ads:t.tag.video_info.provider_specific_params.ads,autoplay:!0,containerId:n,analyticsParams:{isRecommended:!0,campaignId:t.tag.campaign_id,engine_version:t.tag.engine_version,engine_type:t.tag.engine_type}}};t.newPlayer=new i(n,a),t.newPlayer.readyPromise.then(function(i){e&&e(),i.on("video_end",function(){t.disableVideo()})})["catch"](function(e){r.log(e)})})}},a.prototype.removeFrameContainer=function(){var e=this;if(e.newPlayer&&e.newPlayer.dispose(),e.frameContainer.parentNode&&e.frameContainer.parentNode.removeChild(e.frameContainer),t.enableScroll(),e.hiddenObjects)for(var i=0;i<e.hiddenObjects.length;i++)e.hiddenObjects[i].show()},a.prototype._setStickyElementWatcher=function(){var e=this,t=n.isMobile()?"mobile":"desktop";i.watch({position:this.position.replace("top-","").replace("bottom-",""),min_height:d[t].MIN_HEIGHT,max_height:d[t].MAX_HEIGHT,max_offset_top:d[t].MAX_OFFSET_TOP,max_offset_bottom:d[t].MAX_OFFSET_BOTTOM,max_offset_side:d[t].MAX_OFFSET_SIDE},function(t){e.bottomPosition=t,t&&["bottom-left","bottom-right"].includes(e.position)?e.isActive()&&(n.setStyleImportant(e.player.$el,{bottom:t+s+"px"}),e.flipButtons&&n.setStyleImportant(e.flipButtons,{bottom:window.innerHeight-e.playerEl.getBoundingClientRect().top-l+"px"})):(n.removeStyle(e.player.$el,"bottom"),e.flipButtons&&n.setStyleImportant(e.flipButtons,{bottom:window.innerHeight-e.playerEl.getBoundingClientRect().top-l+"px"}))})},a.prototype.isActive=function(){return this._active},a.prototype.isTransitioning=function(){return this._transitioning},a.prototype.hasReturnedManually=function(){return this._manualReturn},a.prototype.canAutoFlip=function(){return!(this.isTransitioning()||this.hasReturnedManually()||window.px&&this.playerId!==window.px.activeFlip&&window.px.activeFlip)},a.prototype.isDisplayingImmersiveView=function(){var e=document.getElementsByClassName("px-immersive-view");return e.length},a.prototype.toggleAutoFlipListeners=function(e){e?(window.addEventListener("scroll",o(this.scrollListener.bind(this),15),!1),this.pxUtils.removeClass(document.body,"px-flip-pause"),this.autoFlipListenerInPause=!1):(this.autoFlipListenerInPause=!0,this.pxUtils.addClass(document.body,"px-flip-pause"),window.removeEventListener("scroll",this.scrollListener.bind(this),!1))},a.prototype.scrollListener=function(e){var t=this;window.clearInterval(this.flipperScrollInterval);var i=this,n=this.checkIfFlipRequired();setTimeout(function(){n=t.launchFlip(n,i.checkIfFlipRequired())},100)},a.prototype.launchFlip=function(e,t){return e!==t||void 0===e||this.autoFlipListenerInPause||n.isInFullscreen()||(e?this.enable():this.disable()),t},a.prototype.checkIfFlipRequired=function(){var e=this.original.top+this.original.height/2,t=this.original.top-window.innerHeight+this.original.height/2;if(window.pageYOffset>=e||window.pageYOffset<=t){if(!this.isActive()&&this.canAutoFlip()&&this.player.isPlaying()&&(this.isMainPlayer()||this.visibleOnce)&&!this.isDisplayingImmersiveView())return!0}else if(this.visibleOnce||(this.visibleOnce=!0),this.player.isPlaying()&&this.isActive()&&this.canAutoFlip())return!1},a.prototype.getPlayerElementById=function(e){var t=document.getElementById(this.playerId);return t&&this.pxUtils.hasClass(t,"vjs-tech")&&(t=t.parentNode),t},a.prototype.storeInitialPositioning=function(){var e=this;e.INITIAL_SCROLL_LEVEL=window.pageYOffset,e.original={display:window.getComputedStyle(e.playerEl,null).display,position:window.getComputedStyle(e.playerEl,null).position,left:e.pxUtils.cumulativeOffset(e.playerEl).left,top:e.pxUtils.cumulativeOffset(e.playerEl).top,offsetLeft:e.playerEl.offsetLeft,offsetTop:e.playerEl.offsetTop,offsetRight:e.playerEl.offsetRight,offsetBottom:e.playerEl.offsetBottom,width:e.playerEl.offsetWidth,height:e.playerEl.offsetHeight,style:e.playerEl.getAttribute("style"),relativeBottom:e.playerEl.parentNode.offsetHeight-e.playerEl.offsetHeight-e.playerEl.offsetTop,relativeRIght:e.playerEl.parentNode.offsetWidth-e.playerEl.offsetWidth-e.playerEl.offsetLeft},e.fixedPosition=e.getFixedPosition(e.original.top,e.original.left)},a.prototype.on=a.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},a.prototype.off=a.prototype.removeListener=a.prototype.removeAllListeners=a.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0===arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+e];if(!i)return this;if(1===arguments.length)return delete this._callbacks["$"+e],this;for(var n,r=0;r<i.length;r++)if(n=i[r],n===t||n.fn===t){i.splice(r,1);break}return this},a.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i){i=i.slice(0);for(var n=0,r=i.length;r>n;++n)i[n].apply(this,t)}return this},a.prototype.isMainPlayer=function(){var e=this.pxUtils.cumulativeOffset(this.player.$el),t=this.pxUtils.isMobile()?300:500,i=this.pxUtils.isMobile()?900:1200,n=Boolean(this.player.$el.offsetWidth>=t&&e.top<i);return n},a});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("px-outstream-player",["px-outstream-slot","analytics-utils","px-utils","recommendation-caller","flipper","globals","error-logger"],function(e,t,i,n,r,a,o){function s(e,t,i){"before"===i?t.parentNode.insertBefore(e,t):"after"===i?t.parentNode.insertBefore(e,t.nextSibling):t.appendChild(e)}var l=5e3,d=function(e){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return _inherits(r,e),_createClass(r,[{key:"init",value:function(){var e=this;this.scrollToPlay="scroll"===this.userPreferences.slots.outstream_player.playback_type&&!(i.isIphone()&&-1!==[1282,1281].indexOf(a.websiteId)),this.slot="outstream_player",this.widget="outstream_player",this.render(),this.hide(),this.createVideoPlayer().then(function(){a.successCallback&&window[a.successCallback]&&window[a.successCallback](),e.show(),e.setListeners(),t.initTrackingOnPlayer(e.player,{slot:e.slot,widget:"outstream_player"}),e._playerReadyCallbacks&&e._playerReadyCallbacks.forEach(function(t){t(e.player)}),e.player.proportionVisible()>.5&&e.scrollToPlay&&(e.player.play(),setTimeout(function(){e.player.callToAction.hideTitle()},l))})["catch"](function(t){o.log(t),"Cannot read property 'requestAds' of null"!==t.message&&a.failCallback&&window[a.failCallback]&&(window[a.failCallback](),e.hide())})}},{key:"getSlotName",value:function(){return"outstream_player"}},{key:"getTrackingEvent",value:function(e){return{click:"Clicked on Outstream Player"}[e]}},{key:"createVideoPlayer",value:function(){var e=this;return n.createPlayer(this.recommendation,this.containerId,{slot:"outstream_player",widget:"outstream_player"},{controls:!this.scrollToPlay||!this.isMobile,autoplay:!1,scroll_to_play:this.scrollToPlay,muted:!0,preload:!0}).then(function(t){return e.player=t,e.played=!1,t&&t.readyPromise?t.readyPromise:Promise.reject()})}},{key:"setListeners",value:function(){var e=this;this.listeners={},this.listeners.scrollListener=function(){e.player&&e.player.proportionVisible()>.5?!e.played&&e.scrollToPlay&&(e.played=!0,e.player.play(),e._showEqualizer()):e.played&&e.isMultitaskActive()&&(e.played=!1,e.player.pause()),e.player.callToAction.showTitle(),window.clearTimeout(e.hideTitleTimeout),e.hideTitleTimeout=setTimeout(function(){e.player.callToAction.hideTitle()},l)},window.addEventListener("scroll",this.listeners.scrollListener)}},{key:"createVideoContainer",value:function(){var e=document.createElement("div");return e.id="px-outstream-player",e.className="px-outstream-player "+(this.isMobile?"px-outstream-player-mobile":"px-outstream-player-desktop"),e.innerHTML='<div class="player-transition-fader player-transition-fader-outstream_player"></div><div class="px-outstream-player-overlay px-cleanslate" id="px-outstream-player-info-container"></div><div class="px-black-background px-black-background-outstream_player"></div>',this.containerId="px-outstream-player",this.$overlay=e.getElementsByClassName("px-outstream-player-overlay")[0],this.isMobile&&this.$overlay.appendChild(this.__createEqualizer()),this.$overlay.onclick=this.startImmersiveView.bind(this),this.$el=e,this.$container.appendChild(this.$el),e}},{key:"createLabel",value:function(){var e={en:"Recommended Video",fr:"Vidéo recommandée",es:"Vídeo recomendado"},t=e[this.userLanguage],n=document.createElement("span");n.className="px-outstream-label px-cleanslate";var r=i.getStyleForElementProperty("h3, h2, h1","fontFamily");r&&(n.style="font-family:"+i.getStyleForElementProperty("h3, h2, h1","fontFamily")+"!important"),n.innerText=this.userPreferences.slots.outstream_player.label||t,this.$label=n,this.$container.appendChild(this.$label)}},{key:"__createEqualizer",value:function(){return this.$equalizer=document.createElement("div"),this.$equalizer.id="px-equalizer",this.$equalizer.className="px-equalizer-hide",this.$equalizer.innerHTML='<div class="px-equalizer-bar px-equalizer-bar-first"></div><div class="px-equalizer-bar px-equalizer-bar-second"></div><div class="px-equalizer-bar px-equalizer-bar-third"></div>',this.$equalizer}},{key:"_hideEqualizer",value:function(){this.$equalizer&&i.addClass(this.$equalizer,"px-equalizer-hide")}},{key:"_showEqualizer",value:function(){this.$equalizer&&i.removeClass(this.$equalizer,"px-equalizer-hide")}},{key:"_findOrCreateContainer",value:function(){var e=window.document.getElementById("pulpix-outstream-player");return e||(e=this.findSlot()),this.isPassback()&&(e.className+=" px-outstream-player-responsive"),e}},{key:"_render",value:function(){this.$container=this._findOrCreateContainer(),this.createLabel(),this.createVideoContainer()}},{key:"onStartImmersiveView",value:function(){var e=this;this.scrollToPlay=!0,i.removeClass(this.$equalizer,"px-equalizer-hide"),this.player.mute(!1),setTimeout(function(){e.player.controls(!0)},1e3),this.player.isPlaying()||this.player.play(),window.removeEventListener("scroll",this.listeners.scrollListener),this.immersiveView.onClose=function(){window.addEventListener("scroll",e.listeners.scrollListener),e.player.isPlaying()||e.player.play(),e.isMobile&&(e.player.mute(!0),e.player.controls(!1))}}},{key:"onPlayerReady",value:function(e){this._playerReadyCallbacks=this._playerReadyCallbacks?this._playerReadyCallbacks:[],this._playerReadyCallbacks.push(e)}},{key:"findSlot",value:function(){var e="inside",t=document.querySelector("div[px-smartplayer]");!t&&this.userPreferences.slots.outstream_player.insertion_target_selector&&(t=document.querySelector(this.userPreferences.slots.outstream_player.insertion_target_selector),e=this.userPreferences.slots.outstream_player.insertion_type),t||(t=document.body,e="inside");var i=document.createElement("div");return i.id="pulpix-outstream-player",s(i,t,e),i}},{key:"isMultitaskActive",value:function(){return Boolean(window.px.activeFlip===this.player.$el.id)}},{key:"isPassback",value:function(){return Boolean(a.adyoulikePlacementId)}}]),r}(e);return d});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("upnext",["user-preferences","api","globals","px-utils","history","recommendation-caller","px-immersive-view-desktop","px-immersive-view-mobile","px-immersive-view","analytics-utils","error-logger"],function(e,t,i,n,r,a,o,s,l,d,c){var u=void 0,p=function(){function o(t,i,r,a){var s=this,l=a.onSrcChange,d=a.launchImmersive;_classCallCheck(this,o),e.init().then(function(e){u=e,s.smartEnabled=u.widgets.inplayer.format.upnext_on_pause,s.countdownEnabled=!0,s._isTheSame()||(s._initListeners(),s.render())})["catch"](function(e){c.log(e)}),this.userLanguage=n.findLanguage(),this.recommendation=r,this.player=t,this.$container=i,this.state="hidden",this.duration=void 0,this.showTime=!0,this.calledContent=!1,this.context=void 0,this.seekCount=0,this.closedInVideo=!1,this.closedEnd=!1,this.pauseTimeout=void 0,this.onSrcChange=l,this.launchImmersive=d,this._forceHide=!1,this.impressionTrackings=(r.trackingEndpoints||{}).nativeImpression||[],this._visibleImpressionTrackings=(r.trackingEndpoints||{}).nativeVisibleImpression||[]}return _createClass(o,[{key:"render",value:function(){this.$el=document.createElement("div"),this.$el.className="upnext px-animated px-fadeInRight",this.$el.setAttribute("style","display:none!important");var e={video:{en:"Next Video",fr:"Vidéo suivante",es:"Próximo vídeo"},content:{en:"Next Content",fr:"Contenu suivant",es:"Próximo contenido"},article:{en:" in ",fr:" dans ",es:" en "}},t="video"===this.recommendation.type?e.video[this.userLanguage]:e.content[this.userLanguage],i=['<span class="remaining-time-text">\n                        <span px-translate>'+t+"</span>",'<span class="remaining-time-value" style="display:none!important">'+e.article[this.userLanguage]+'<span class="remaining-time-seconds"></span>s</span>',"</span>"].join(""),r='\n                <div class="upnext-illustration px-table"\n                style="background-image : url(\''+this.recommendation.video_info.thumbnail_url+'\') !important;">\n                    <span class="label label-default label-play px-cell">\n                        <i class="px-icon-play"></i>\n                    </span>\n                </div>\n\n                <div class="tag-hint-click-catch"></div>\n\n                <div class="end-screen-box px-table">\n                    <div\n                        class="tag-countdown-stop px-table">\n                        <span class="icon px-icon-cross2 px-cell"></span>\n                    </div>\n                    <div class="end-screen-remaining-time">\n                        '+i+'\n                    </div>\n                    <span class="end-screen-description">'+this.recommendation.video_info.title+'</span>\n                    <a class="ayl-logo" href="https://www.adyoulike.com/privacy_policy_fr.php" target="_blank">\n                        <img src="//cdn.pulpix.com/static/img/ayl-brand.png"\' alt="Adyoulike"/>\n                    </a>\n                </div>';this.$el.innerHTML=r,this.$container.appendChild(this.$el),this.$countdown=this.$el.getElementsByClassName("remaining-time-value")[0],this.$countdownSeconds=this.$el.getElementsByClassName("remaining-time-seconds")[0];var a=this.$el.getElementsByClassName("tag-hint-click-catch")[0];a.onclick=this.click.bind(this),a.ontouchstart=this.click.bind(this),n.isIE()&&(this.$el.onclick=this.click.bind(this));var o=this.$el.getElementsByClassName("tag-countdown-stop")[0];o.onclick=this.close.bind(this)}},{key:"show",value:function(){var e=this;this._isRecommendationDefined()?this._show():this.gettingData||(this.gettingData=!0,this._getData(function(){e._show(),e.gettingData=!1}))}},{key:"_isRecommendationDefined",value:function(){return void 0!==this.recommendation}},{key:"_syncCountdown",value:function(){this.showTime?this.$countdown.setAttribute("style","display:inline!important"):this.$countdown.setAttribute("style","display:none!important"),this.$countdownSeconds.innerHTML=Math.floor(this.getRemainingTime())}},{key:"canShow",value:function(){return"inVideo"===this.player.getState()&&!l.getInstance()&&this.player.duration()>5&&(this.player.videoInfo&&-1!==this.player.videoInfo.duration||1===i.websiteId)&&!this._forceHide&&this.player.currentTime()>2&&-1!==["video","page","document"].indexOf(this.recommendation.type)}},{key:"shouldCallContent",value:function(){return(this.getRemainingTime()<.5&&"inVideo"===this.player.getState()||n.inArray(this.player.getState(),["endBuffering","endScreen","postroll"]))&&this.player.duration()>3&&this.player.currentTime()>3&&this.recommendation&&!this.closedEnd&&!this.calledContent&&!l.getInstance()?!0:!1}},{key:"isShowed",value:function(){return"showed"===this.state}},{key:"_hide",value:function(){this.state="hidden",window.removeEventListener("scroll",this._scrollListener),this.$el&&this.$el.setAttribute("style","display:none!important")}},{key:"_show",value:function(){var e=this;this.state="showed",this.$el.setAttribute("style","display:block!important"),this._syncCountdown(),this.trackedDisplay||(this._track("Displayed Tag"),this.trackedDisplay=!0,this.impressionTrackings.forEach(function(e){n.pixelTrack(e)})),this._trackedVisibleDisplay||(this.player.isVisible()?this._triggerTrackVisibleImpresion():(this._scrollListener=function(){e.player.isVisible()&&(window.removeEventListener("scroll",e._scrollListener),e._triggerTrackVisibleImpresion())},window.addEventListener("scroll",this._scrollListener)))}},{key:"_triggerTrackVisibleImpresion",value:function(){this._trackedVisibleDisplay=!0,this._visibleImpressionTrackings.forEach(function(e){n.pixelTrack(e)})}},{key:"getState",value:function(){return this.state}},{key:"_getData",value:function(e){e()}},{key:"getRemainingTime",value:function(){return this.player.duration()-this.player.currentTime()}},{key:"callContent",value:function(e){var t=this;!this.calledContent&&this.recommendation&&(this.calledContent=!0,a.call(this.recommendation,this.player,{widget:(this.player.config.analyticsParams||{}).widget,slot:(this.player.config.analyticsParams||{}).slot}).then(function(i){t.player=i,e&&t.launchImmersive.bind(t.player)(),t.onSrcChange&&t.onSrcChange(t.player)})["catch"](function(e){c.log(e)}),this.destroy())}},{key:"autoCallContent",value:function(){var e=this;this._track("Auto Clicked Tag"),"page"===this.recommendation.type&&r.add(this.recommendation.content_id),setTimeout(function(){var t=u.hasAutoplayToImmersive(e.recommendation.video_info.provider)&&e.player.isVisible();e.callContent(t)})}},{key:"click",value:function(e){e.stopPropagation(),this._track("Clicked on Tag CTA");var t=u.hasClickToImmersive(this.recommendation.video_info.provider);"page"===this.recommendation.type&&r.add(this.recommendation.content_id),this.callContent(t)}},{key:"close",value:function(){["pause","seek","interval","specificTimestamp"].includes(this.context)?this.closedInVideo=!0:"end"===this.context&&(this.closedEnd=!0),this._hide(),this._track("Closed Tag")}},{key:"destroy",value:function(){var e=this;this.recommendation=void 0,this.remainingTime=void 0,setTimeout(function(){e.calledContent=!1},1e3),this._hide(),this.player&&(this.player.off("video_timeupdate",this.onTimeupdate),this.player.off("video_pause",this.onPause),this.player.off("video_play",this.onPlay),this.player.off("video_seeked",this.onSeeked),this.player.off("end",this.onEnd),this.player.off("ready",this.onReady)),this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},{key:"onPause",value:function(e){var t=this;this.player=e.player,this.smartEnabled&&this.canShow()&&!this.closedInVideo&&!this.isShowed()&&(this.pauseTimeout=setTimeout(function(){t.player.isPlaying()||t.isShowed()||(t.showTime=!1,t.context="pause",t._show())},200))}},{key:"onPlay",value:function(e){var t=this;this.player=e.player,clearTimeout(this.pauseTimeout),this.isShowed()&&setTimeout(function(){t.player.isPlaying()&&t.isShowed()&&"pause"===t.context&&(t.context=void 0,t._hide())},100)}},{key:"onSeeked",value:function(e){this.player=e.player,this.seekCount+=1,this.seekCount>=4&&this.canShow()&&!this.closedInVideo&&(this.context="seek",this.showTime=!1,this._show()),this.seekCount>4&&this.isShowed()&&"seek"===this.context&&(this.seekCount=0,this.context=void 0,this._hide())}},{key:"_showWithDuration",value:function(){var e=this,t=this.context;this.durationTimeout=setTimeout(function(){e.context===t&&e._hide()},1e3*this._getUpnextDuration()),this._show()}},{key:"_initIntervalTimestamps",value:function(){this._intervalTimestamps=[],this.numberOfTimes=this.player.duration()/this._getUpnextInterval();for(var e=0;e<this.numberOfTimes;e++)this._intervalTimestamps.push((e+1)*this._getUpnextInterval())}},{key:"_isAtIntervalTimestamp",value:function(){for(var e=Math.floor(this.player.currentTime()),t=0;t<this._intervalTimestamps.length;t++){if(e===this._intervalTimestamps[t])return!0;if(e<this._intervalTimestamps[t])return!1}return!1}},{key:"_isAtSpecificTimestamp",value:function(){var e=u.widgets.inplayer.format.upnext_specific_timestamp/1e3;return Math.floor(this.player.currentTime())===e}},{key:"onTimeupdate",value:function(e){this.player=e.player,this.canShow()&&this.countdownEnabled?this.getRemainingTime()<this._getUpnextDuration()?(this.showTime=!0,this.context="end",this.isShowed()||this.closedEnd?(this._syncCountdown(),"dailymotion"===this.player.videoInfo.provider&&this.getRemainingTime()<.5&&this.onEnd(e)):this._show()):this.isShowed()||this.closedInVideo?this.isShowed()&&this.getRemainingTime()>this._getUpnextDuration()&&!n.inArray(this.context,["pause","seek","interval","specificTimestamp"])?this._hide():this.canShow||this._hide():u.widgets.inplayer.format.upnext_specific_timestamp&&this._isAtSpecificTimestamp()?(this.showTime=!1,this.context="specificTimestamp",this._showWithDuration()):this._intervalTimestamps&&this._isAtIntervalTimestamp()&&(this.showTime=!1,this.context="interval",this._showWithDuration()):this._hide()}},{key:"onEnd",value:function(e){this.player=e.player,this.shouldCallContent()&&this.countdownEnabled&&this.autoCallContent()}},{key:"onReady",value:function(e){this.player=e.player,this._isTheSame()&&this.destroy()}},{key:"_initListeners",value:function(){var e=this;this.onPause=this.onPause.bind(this),this.onPlay=this.onPlay.bind(this),this.onSeeked=this.onSeeked.bind(this),this.onEnd=this.onEnd.bind(this),this.onReady=this.onReady.bind(this),this.onTimeupdate=this.onTimeupdate.bind(this),u.widgets.inplayer.format.upnext_interval&&this._initIntervalTimestamps(),this.smartEnabled&&(this.player.on("video_pause",this.onPause),this.player.on("video_play",this.onPlay),this.player.on("video_seeked",this.onSeeked)),this.player.on("video_timeupdate",this.onTimeupdate),this.player.on("video_end",this.onEnd),this.player.on("ready",this.onReady),this.player.on("showing_inplayer_tag",function(){e.toggleForceHide(!0)}),this.player.on("hidding_inplayer_tag",function(){e.toggleForceHide(!1)})}},{key:"_getUpnextDuration",value:function(){return this.upnextDuration||(u.widgets.inplayer.format.upnext_duration?this.upnextDuration=u.widgets.inplayer.format.upnext_duration/1e3:this.player.duration()!==this.duration&&(this.duration=this.player.duration(),this.upnextDuration=this.duration>300?30:10)),this.upnextDuration}},{key:"_getUpnextInterval",value:function(){return u.widgets.inplayer.format.upnext_interval/1e3}},{key:"_track",value:function(e){t.track(e,d.generateRecommendationTrackingData(this.player,(this.player.config.analyticsParams||{}).slot,(this.player.config.analyticsParams||{}).widget,this.recommendation))}},{key:"_isTheSame",value:function(){return"video"===this.recommendation.type&&this.player.videoInfo.id===this.recommendation.video_info.id}},{key:"addGAParameters",value:function(e){var t=e;if(t&&u.widgets.inplayer.format.enable_ga_parameters){var i=t.split("?"),r=i[0],a={};2===i.length&&(a=n.url.deserialize(i[1])),a.utm_source="pulpix",a.utm_medium="pulpix_widget",t=r+"?"+n.url.serialize(a)}return t}},{key:"toggleForceHide",value:function(e){this._forceHide=Boolean(e)}}]),o}();return p});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();pxRequire.define("px-link",["video-info","recommendation","recommendation-caller","px-immersive-view-desktop","px-immersive-view-mobile","api","analytics-utils","px-utils","error-logger"],function(e,t,i,n,r,a,o,s,l){var d=function(){function d(i){var n=this;_classCallCheck(this,d),this.$el=i,this.slot="link";var r=this.$el.getAttribute("px-provider"),a=this.$el.getAttribute("px-provider-id");if(window.demo&&window.demo.video_playlist_array){var o=window.demo.video_playlist_array.find(function(e){return e.video_info.provider===r&&e.video_info.provider_id===a});this.video=new e(o.video_info)}else this.video=new e({provider:this.$el.getAttribute("px-provider"),provider_id:this.$el.getAttribute("px-provider-id"),provider_specific_params:{}});this.updatePromise=this.video.updateFromAPI(),this.updatePromise.then(function(){if(n.recommendation=new t({type:"video",video_info:n.video}),s.isMobile()){n.createVideoContainer(),n.createVideoPlayer();var e=document.querySelector("meta[name=viewport]");e.content.match("minimal-ui")||(e.content+=", minimal-ui")}})["catch"](function(e){void 0}),this.setListeners()}return _createClass(d,[{key:"setListeners",value:function(){var e=this;this.$el.onclick=function(t){return t.stopPropagation(),e.updatePromise.then(function(){e.startImmersiveView()})["catch"](function(t){window.open(e.$el.href,"_self"),l.log(t)}),!1}}},{key:"startImmersiveView",value:function(){var e=this;a.track("Clicked on Px Link",o.generateRecommendationTrackingData(this.player,this.slot,s.isMobile()?"mfeed":"immersive",this.recommendation));var t={recommendation:this.recommendation,slot:"link"};s.isMobile()?this._createPlayerPromise.then(function(i){e.player=i,e.player.play(),t.player=i,new r(t)})["catch"](function(e){l.log(e)}):new n(t)}},{key:"createVideoContainer",value:function(){var e=document.createElement("div");return e.id="pulpix",e.innerHTML='<div id="px-'+this.className+'-player" class="px-'+this.className+'-player px-hide"><div class="player-transition-fader player-transition-fader-stickybar"></div></div><div class="px-black-background px-black-background-stickybar"></div>',window.document.body.appendChild(e),this.containerId="px-"+this.className+"-player","px-"+this.className+"-player"}},{key:"createVideoPlayer",value:function(){var e=this;this._createPlayerPromise=i.createPlayer(this.recommendation,this.containerId,{widget:"mfeed",slot:"link"},{autoplay:!1,preload:!0}),this._createPlayerPromise.then(function(t){return e.player=t,t.readyPromise}).then(function(){o.initTrackingOnPlayer(e.player,{slot:"link",widget:"mfeed"})})["catch"](function(e){l.log(e)})}}]),d}();return d}),pxRequire.define("should-load-outstream",["xhr","user-preferences","ad-tag-preloader","globals","px-mini-utils","tag-formatter"],function(e,t,i,n,r,a){return t.init().then(function(e){return e.shouldLoadStickybar()||e.shouldLoadOutstreamPlayer()})}),pxRequire.require(["require","globals","player-loader","element-sizer","element-position-binder","analytics-utils","px-immersive-view","px-immersive-view-desktop","px-immersive-view-mobile","px-immersive-view-button","px-stickybar","px-outstream-player","px-utils","user-preferences","upnext","px-link","recommendation-caller","scroll-blocker","history","flipper","video-info","api","recommendation","error-logger","should-load-outstream","native-ad-getter","tag-formatter"],function(e,t,i,n,r,a,o,s,l,d,c,u,p,h,f,m,y,v,g,_,b,w,x,k,P,T,C){window.pxUtils=p;var I=0,E=12,A=500,S=1e3,j=!1;setTimeout(function(){j=!0},1e4),h.init().then(function(e){function t(e){e&&!D.withoutPulpix()&&(D.hasStickybar()&&(V=h("stickybar",e)),D.hasOutstream()&&(q=h("outstream_player",e),q.onPlayerReady(function(t){O.bind(t)("outstream_player"),x.bind(t)().then(function(i){return p.isMobile()||M.bind(t)(i,e),new Promise(function(e,n){t.one("video_timeupdate",function(t){e(i)})})}).then(function(e){L.bind(t)(e,"outstream_player")})["catch"](function(e){k.log(e)})})))}function h(e,t){var i={stickybar:c,outstream_player:u},n=new i[e](t,D.slots,function(t){t.slot=e;var i=p.isMobile()?l:s,n=new i(t);return n});return n}function y(e,t){a.initTrackingOnPlayer(e,{slot:"instream",widget:t})}function v(e){if(!D.withoutPulpix()){O.bind(e)("instream");var t=e.videoInfo.provider;if(D.hasClickToImmersive(t)||D.hasClickToMFeed(t)||D.hasAutoplayToImmersive(t)){var i=[];if(D.hasClickToImmersive(t)&&!e.config.autoplay||D.hasClickToMFeed(t)){var n=R.bind(e)();i.push(n)}if(D.hasAutoplayToImmersive(t)&&e.config.autoplay!==!1){var r=$.bind(e)();i.push(r)}x.bind(e)().then(function(t){e.one("start",function(i){L.bind(e)(t,"instream")}),M.bind(e)(t)})["catch"](function(e){k.log(e)}),Promise.race(i).then(function(){N.bind(e)()})["catch"](function(e){k.log(e)})}else D.hasInPlayerWidgets(t)&&x.bind(e)().then(function(t){e.one("start",function(i){L.bind(e)(t,"instream")})})["catch"](function(e){k.log(e)})}}function x(){var e=this,t=this,i=t.$el,a=new n(i);return new Promise(function(n,o){a.get(function(a,s,l,d){var c=document.createElement("div"),u=function(){if(e.$el.pxPositionBinder)for(var t=e.$el.pxPositionBinder.getBoundElements(),i=0;i<t.length;i++)if(t[i].hasAttribute("snippet-responsive"))return!0;return!1};(i.getAttribute("px-reco")||u())&&o("Container has attribute px-reco or a position binder already defined"),p.setAttributes(c,{"snippet-responsive":"",id:"pulpix","class":"player-container pulpix "+(p.isAndroid()?"android":"")});var h=i.style.zIndex||window.getComputedStyle(i).zIndex;h&&parseInt(h,10)&&(h=parseInt(h,10)+2+"!important");var f=h?"z-index : "+h+"; ":"";c.setAttribute("style",f+" width:"+a+"px !important; height:"+s+"px !important;pointer-events:none !important;position: absolute !important; top:"+l+"px !important;left:"+d+"px !important;overflow:hidden !important;");var m=document.createElement("div"),y={"class":"px-tag flip-mode-enabled px-cleanslate","px-tag":"",id:"px-tag","px-tags":"rich_player.tags","px-tag-player":"rich_player.player","px-tag-video":"rich_player.video","px-tag-initial":"tagOptions.initial","px-tag-is-editable":"rich_player.tagOptions.isEditable","px-tag-state":"rich_player.tagOptions.state"};if(p.setAttributes(m,y),c.appendChild(m),i.parentNode.insertBefore(c,i.nextSibling),i.addEventListener("mouseenter",function(){p.addClass(c,"mouseover")}),i.addEventListener("mouseleave",function(){p.removeClass(c,"mouseover")}),c.getElementsByClassName("tag-promotion-main").length>0){var v=c.getElementsByClassName("tag-promotion-main")[0];v.addEventListener("mouseenter",function(){p.addClass(c,"mouseover")}),v.addEventListener("mouseleave",function(){p.removeClass(c,"mouseover")})}t.on("showingControls",function(e){p.addClass(c,"showing-controls")}),t.on("hiddingControls",function(e){p.removeClass(c,"showing-controls")}),c.addEventListener("mouseenter",function(){t.setIsShowingControls(!0),p.addClass(c,"showing-controls")});var g=new r(i);g.bind(c,function(e,t){p.removeClass(i,"px-xs-video"),p.removeClass(i,"px-sm-video"),p.removeClass(i,"px-medium-video"),p.removeClass(c,"px-xs-video"),p.removeClass(c,"px-sm-video"),p.removeClass(c,"px-medium-video"),400>e||300>t?(p.addClass(i,"px-xs-video"),
p.addClass(c,"px-xs-video")):600>e||500>t?(p.addClass(i,"px-sm-video"),p.addClass(c,"px-sm-video")):(p.addClass(i,"px-medium-video"),p.addClass(c,"px-medium-video"))}),n(c)})})}function O(e){var t=this;D.hasMultitask(e,t.videoInfo.provider)&&(t.flipper=new _(t,void 0,t.videoInfo.thumbnail_url),t.flipper.on("enable",function(){V&&("right"===V.position||p.isMobile())&&V.hide()}),t.flipper.on("disable",function(){V&&("right"===V.position||p.isMobile())&&V.show()}))}function M(e,t){function i(i){r=new d(e,i,N.bind(i,t))}var n=this,r=void 0;n.on("src_changed",function(e){n=e.player,r.update(n,N.bind(n,t))}),i(n)}function R(){var e=this,t=new Promise(function(t,i){e.onClickToPlay(function(){t()})});return t}function $(){var e=this,t=function(){return B(e.$el)&&e.proportionVisible()>.5?Promise.resolve():void 0};return"inVideo"===this.getState()||this.getState("preroll")?t():this.one("timeupdate",function(){t()})}function N(e){var t=p.isMobile()?l:s,i=new t({player:this,offset:I,size:E,slot:this.config.analyticsParams.slot,recommendation:e});V&&(V.hide(),i.onClose=function(){V.show()})}function L(e,t){function i(e){var i=D.forcePulpixPlayer(t,"inplayer",e.videoInfo.provider);return b.getExcludedIds().then(function(t){return w.getRecommendations({video_id:e.videoInfo.id,force_pulpix_player:i,excluded_ids:t.join(","),offset:0,size:1})}).then(function(e){return e.recommendations})}function n(){var e=this;s&&s.destroy(),this.upnextCount=this.upnextCount||0;var n=void 0,l=o.getInstance();if(this.previousUpnextReco&&a.videoInfo.sponsoredParams)r(this.previousUpnextReco),this.previousUpnextReco=void 0;else if(l&&l.player.$el.id===a.$el.id)n=l.getNextRecommendation(),n&&r(n);else{var d=void 0,c=D.getNativeAdTag(t,"inplayer");c&&D.getNativeAdRatio(this.widget)>=1&&(!this.upnextCount||this.upnextCount%(D.getNativeAdRatio(this.widget)+1)===0)?(c=C.format(c,a,void 0,!0),d=T.get(c,"inplayer"+this.upnextCount)):d=Promise.resolve();var u=i(a);Promise.all([d,u].map(function(e){return e["catch"](function(){return null})})).then(function(t){var i=t[0],n=t[1];i?(e.previousUpnextReco=n.length>0?n[0]:void 0,r(i)):n&&n.length>0&&r(n[0])})["catch"](function(e){k.log(e)})}}function r(t){this.upnextCount+=1,window.clearTimeout(l),l=setTimeout(function(){s=new f(a,e.firstChild,t,{launchImmersive:N})},1500)}var a=this;if(D.hasUpnext(a.videoInfo.provider,t)){var s=void 0,l=void 0,d=function(e){return e.$el.parentNode&&(!e.$el.parentNode.getAttribute("data-pulpix")||"false"!==e.$el.parentNode.getAttribute("data-pulpix"))};d(a)&&n(),a.on("src_changed",function(e){a=e.player,a.videoInfo&&a.videoInfo.id&&g.add(a.videoInfo.id),d(a)&&n()})}}function B(e){var t=p.cumulativeOffset(e);return Boolean(!j&&e.offsetWidth>=A&&t.top<S)}var D=e;if(D){var V=void 0,q=void 0,z=D.getWidgetType(),F=0,H=1;if(D.hasStickybar()||D.hasOutstream()){var U=D.forcePulpixPlayer(D.hasOutstream()?"outstream_player":"stickybar");P.then(function(e){return b.getExcludedIds()}).then(function(e){var t={offset:F,size:H,force_pulpix_player:U};return e.length&&(t.excluded_ids=e.join(",")),w.getRecommendations(t)}).then(function(e){e.recommendations&&e.recommendations.length>0&&t(e.recommendations[0])})["catch"](function(e){k.log(e)})}var W=D.getConfigOverridesForWidget("instream",z),G=document.querySelectorAll("a[px-link]");if(G.length)for(var J=0;J<G.length;J++)new m(G[J]);i.load(W,function(e){"iframe"===e.videoInfo.provider?e.videoInfo.updateFromAPI().then(function(){v(e)})["catch"](function(e){k.log(e)}):v(e),e.readyPromise.then(function(){var t=z||"inplayer";y(e,t)})["catch"](function(e){k.log(e)})}),D.globals.css_override&&p.addCss(D.globals.css_override)}})["catch"](function(e){k.log(e)})}),pxRequire.define("snippet/snippet-deps",function(){});var staticHost=getStaticHost();pxRequire.requirejs.config({waitSeconds:0,paths:{"youtube-iframe-api":"https://www.youtube.com/iframe_api?1",videojs:"//vjs.zencdn.net/5.19.2/video.min",ima:"//imasdk.googleapis.com/js/sdkloader/ima3","videojs-contrib-ads":staticHost+"/static/node_modules/videojs-contrib-ads/dist/videojs.ads.min","videojs-contrib-hls":staticHost+"/static/node_modules/videojs-contrib-hls/dist/videojs-contrib-hls.min","videojs-ima":staticHost+"/static/node_modules/videojs-ima/dist/videojs.ima","videojs-vast-vpaid":staticHost+"/static/node_modules/videojs-vast-vpaid/bin/videojs_5.vast.vpaid.min","jwplayer-hollywood-life":"//video-cdn.hollywoodlife.com/libraries/RiPpdJ98","jwplayer-7.1.4":"//ssl.p.jwpcdn.com/player/v/7.12.6/jwplayer","jwplayer-6":"//content.jwplatform.com/libraries/uSMdJrsL","ooyala-4.10.4":"//player.ooyala.com/static/v4/stable/4.10.4/core","ooyala-4.10.4.main_html5":"//player.ooyala.com/static/v4/stable/4.10.4/video-plugin/main_html5","ooyala-4.10.4.google_ima":"//player.ooyala.com/static/v4/stable/4.10.4/ad-plugin/google_ima","ooyala-4.10.4.html5-skin":"//player.ooyala.com/static/v4/stable/4.10.4/skin-plugin/html5-skin","ooyala-4.10.4.html5-freewheel":"//player.ooyala.com/static/v4/stable/4.10.4/ad-plugin/freewheel","ooyala-4.10.4.html5-manager-vast":"//player.ooyala.com/static/v4/stable/4.10.4/ad-plugin/ad_manager_vast","ooyala-4.10.4.html5-osmf_flash":"//player.ooyala.com/static/v4/stable/4.10.4/video-plugin/osmf_flash.min"},shim:{videojs:{exports:"videojs"},"videojs-ima":{deps:["videojs-contrib-ads","ima"]},"videojs-contrib-ads":{deps:["videojs-private"]},"youtube-iframe-api":{exports:"YT"},"ooyala-4.10.4.main_html5":{deps:["ooyala-4.10.4"]},"ooyala-4.10.4.google_ima":{deps:["ooyala-4.10.4"]},"ooyala-4.10.4.html5-skin":{deps:["ooyala-4.10.4"]},"ooyala-4.10.4.html5-freewheel":{deps:["ooyala-4.10.4"]},"ooyala-4.10.4.html5-manager-vast":{deps:["ooyala-4.10.4"]},"ooyala-4.10.4.html5-osmf_flash":{deps:["ooyala-4.10.4"]}}}),pxRequire.define("../node_modules/px-player/cdn-config.js",function(){}),pxRequire.requirejs.config({paths:{jquery:"https://cdn.pulpix.com/static/custom_components/jquery/jquery.min"}});var jQuery=window.jQuery,oldjQuery=jQuery&&Boolean(jQuery.fn.jquery.match(/^1\.[0-4](\.|$)/));!jQuery||oldjQuery?(void 0,pxRequire.define("jquery-private",["jquery"],function(e){return e.noConflict(!0)})):(void 0,pxRequire.define("jquery-private",[],function(){return jQuery}));var canOverrideVideojs=["www.gala.fr","lared.cl","www.femmeactuelle.fr","m.programme-tv.net","www.voici.fr"];window.videojs&&!canOverrideVideojs.includes(window.location.hostname)?(void 0,pxRequire.define("videojs-private",[],function(){return function(e){e(window.videojs)}})):(void 0,pxRequire.define("videojs-private",["style-loader","videojs"],function(e,t){return window.videojs=t,function(i){var n=window.location.hostname.match("www.gala.fr|www.femmeactuelle.fr|m.programme-tv.net");new e("//vjs.zencdn.net/5.12/video-js.css",n).then(function(){i(t)})}})),pxRequire.define("px-videojs-custom",["videojs-private","style-loader","globals","require"],function(e,t,i,n){return function(n){pxRequire.require(["videojs-contrib-hls"],function(){e(function(e){new t(i.staticHost+"/static/node_modules/px-player/px-player/ads/px-videojs-custom-skin.css?1.8.83").then(function(){n(e)})})})}}),pxRequire.define("px-videojs-ima",["videojs-private","style-loader","globals","ima","videojs-contrib-ads","videojs-ima"],function(e,t,i){for(var n=[i.staticHost+"/static/node_modules/videojs-contrib-ads/dist/videojs.ads.css",i.staticHost+"/static/node_modules/videojs-ima/dist/videojs.ima.css"],r=0;r<n.length;r++)new t(n[r],function(){});return e}),pxRequire.define("px-videojs-custom-with-ads",["px-videojs-ima","style-loader","globals","require"],function(e,t,i,n){return function(n){pxRequire.require(["videojs-contrib-hls"],function(){e(function(e){new t(i.staticHost+"/static/node_modules/px-player/px-player/ads/px-videojs-custom-skin.css?1.8.83").then(function(){n(e)})})})}});